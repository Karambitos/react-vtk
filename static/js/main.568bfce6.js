/*! For license information please see main.568bfce6.js.LICENSE.txt */
!function(){var e={109:function(e,t,r){e.exports=r(379)},379:function(e){var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"===typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(k){s=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),l=new R(n||[]);return a(i,"_invoke",{value:O(e,r,l)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=c;var d="suspendedStart",p="suspendedYield",g="executing",m="completed",v={};function h(){}function y(){}function b(){}var T={};s(T,i,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(M([])));S&&S!==r&&n.call(S,i)&&(T=S);var w=b.prototype=h.prototype=Object.create(T);function C(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function P(e,t){function r(a,o,i,l){var u=f(e[a],e,o);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"===typeof c&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,i,l)}),(function(e){r("throw",e,i,l)})):t.resolve(c).then((function(e){s.value=e,i(s)}),(function(e){return r("throw",e,i,l)}))}l(u.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function O(e,t,r){var n=d;return function(a,o){if(n===g)throw new Error("Generator is already running");if(n===m){if("throw"===a)throw o;return D()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var l=A(i,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===d)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=g;var u=f(e,t,r);if("normal"===u.type){if(n=r.done?m:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n=m,r.method="throw",r.arg=u.arg)}}}function A(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,A(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var o=f(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,v;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function M(e){if(e){var r=e[i];if(r)return r.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function r(){for(;++a<e.length;)if(n.call(e,a))return r.value=e[a],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}return{next:D}}function D(){return{value:t,done:!0}}return y.prototype=b,a(w,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},C(P.prototype),s(P.prototype,l,(function(){return this})),e.AsyncIterator=P,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new P(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},C(w),s(w,u,"Generator"),s(w,i,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=M,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function a(n,a){return l.type="throw",l.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;I(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(r){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},856:function(e,t,r){"use strict";var n=r(315),a="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),o=Object.prototype.toString,i=Array.prototype.concat,l=Object.defineProperty,u=r(956)(),s=l&&u,c=function(e,t,r,n){if(t in e)if(!0===n){if(e[t]===r)return}else if("function"!==typeof(a=n)||"[object Function]"!==o.call(a)||!n())return;var a;s?l(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},f=function(e,t){var r=arguments.length>2?arguments[2]:{},o=n(t);a&&(o=i.call(o,Object.getOwnPropertySymbols(t)));for(var l=0;l<o.length;l+=1)c(e,o[l],t[o[l]],r[o[l]])};f.supportsDescriptors=!!s,e.exports=f},518:function(e){"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,a,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;0!==a--;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;0!==a--;)if(!Object.prototype.hasOwnProperty.call(r,o[a]))return!1;for(a=n;0!==a--;){var i=o[a];if(!e(t[i],r[i]))return!1}return!0}return t!==t&&r!==r}},30:function(e){"use strict";var t=Array.prototype.slice,r=Object.prototype.toString;e.exports=function(e){var n=this;if("function"!==typeof n||"[object Function]"!==r.call(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var a,o=t.call(arguments,1),i=Math.max(0,n.length-o.length),l=[],u=0;u<i;u++)l.push("$"+u);if(a=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof a){var r=n.apply(this,o.concat(t.call(arguments)));return Object(r)===r?r:this}return n.apply(e,o.concat(t.call(arguments)))})),n.prototype){var s=function(){};s.prototype=n.prototype,a.prototype=new s,s.prototype=null}return a}},670:function(e,t,r){"use strict";var n=r(30);e.exports=Function.prototype.bind||n},733:function(e,t,r){"use strict";var n,a=SyntaxError,o=Function,i=TypeError,l=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(t){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(R){u=null}var s=function(){throw new i},c=u?function(){try{return s}catch(e){try{return u(arguments,"callee").get}catch(t){return s}}}():s,f=r(565)(),d=r(676)(),p=Object.getPrototypeOf||(d?function(e){return e.__proto__}:null),g={},m="undefined"!==typeof Uint8Array&&p?p(Uint8Array):n,v={"%AggregateError%":"undefined"===typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":f&&p?p([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":g,"%AsyncGenerator%":g,"%AsyncGeneratorFunction%":g,"%AsyncIteratorPrototype%":g,"%Atomics%":"undefined"===typeof Atomics?n:Atomics,"%BigInt%":"undefined"===typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":g,"%Int8Array%":"undefined"===typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":f&&p?p(p([][Symbol.iterator]())):n,"%JSON%":"object"===typeof JSON?JSON:n,"%Map%":"undefined"===typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&f&&p?p((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?n:Promise,"%Proxy%":"undefined"===typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&f&&p?p((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":f&&p?p(""[Symbol.iterator]()):n,"%Symbol%":f?Symbol:n,"%SyntaxError%":a,"%ThrowTypeError%":c,"%TypedArray%":m,"%TypeError%":i,"%Uint8Array%":"undefined"===typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?n:WeakSet};if(p)try{null.error}catch(R){var h=p(p(R));v["%Error.prototype%"]=h}var y=function e(t){var r;if("%AsyncFunction%"===t)r=l("async function () {}");else if("%GeneratorFunction%"===t)r=l("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=l("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var a=e("%AsyncGenerator%");a&&p&&(r=p(a.prototype))}return v[t]=r,r},b={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},T=r(670),x=r(57),S=T.call(Function.call,Array.prototype.concat),w=T.call(Function.apply,Array.prototype.splice),C=T.call(Function.call,String.prototype.replace),P=T.call(Function.call,String.prototype.slice),O=T.call(Function.call,RegExp.prototype.exec),A=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,I=function(e,t){var r,n=e;if(x(b,n)&&(n="%"+(r=b[n])[0]+"%"),x(v,n)){var o=v[n];if(o===g&&(o=y(n)),"undefined"===typeof o&&!t)throw new i("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new a("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new i('"allowMissing" argument must be a boolean');if(null===O(/^%?[^%]*%?$/,e))throw new a("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=P(e,0,1),r=P(e,-1);if("%"===t&&"%"!==r)throw new a("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new a("invalid intrinsic syntax, expected opening `%`");var n=[];return C(e,A,(function(e,t,r,a){n[n.length]=r?C(a,E,"$1"):t||e})),n}(e),n=r.length>0?r[0]:"",o=I("%"+n+"%",t),l=o.name,s=o.value,c=!1,f=o.alias;f&&(n=f[0],w(r,S([0,1],f)));for(var d=1,p=!0;d<r.length;d+=1){var g=r[d],m=P(g,0,1),h=P(g,-1);if(('"'===m||"'"===m||"`"===m||'"'===h||"'"===h||"`"===h)&&m!==h)throw new a("property names with quotes must have matching quotes");if("constructor"!==g&&p||(c=!0),x(v,l="%"+(n+="."+g)+"%"))s=v[l];else if(null!=s){if(!(g in s)){if(!t)throw new i("base intrinsic for "+e+" exists, but the property is not available.");return}if(u&&d+1>=r.length){var y=u(s,g);s=(p=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:s[g]}else p=x(s,g),s=s[g];p&&!c&&(v[l]=s)}}return s}},119:function(e){"use strict";"undefined"!==typeof self?e.exports=self:"undefined"!==typeof window?e.exports=window:e.exports=Function("return this")()},838:function(e,t,r){"use strict";var n=r(856),a=r(119),o=r(159),i=r(239),l=o(),u=function(){return l};n(u,{getPolyfill:o,implementation:a,shim:i}),e.exports=u},159:function(e,t,r){"use strict";var n=r(119);e.exports=function(){return"object"===typeof r.g&&r.g&&r.g.Math===Math&&r.g.Array===Array?r.g:n}},239:function(e,t,r){"use strict";var n=r(856),a=r(159);e.exports=function(){var e=a();if(n.supportsDescriptors){var t=Object.getOwnPropertyDescriptor(e,"globalThis");t&&(!t.configurable||!t.enumerable&&t.writable&&globalThis===e)||Object.defineProperty(e,"globalThis",{configurable:!0,enumerable:!1,value:e,writable:!0})}else"object"===typeof globalThis&&globalThis===e||(e.globalThis=e);return e}},956:function(e,t,r){"use strict";var n=r(733)("%Object.defineProperty%",!0),a=function(){if(n)try{return n({},"a",{value:1}),!0}catch(e){return!1}return!1};a.hasArrayLengthDefineBug=function(){if(!a())return null;try{return 1!==n([],"length",{value:1}).length}catch(e){return!0}},e.exports=a},676:function(e){"use strict";var t={foo:{}},r=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!({__proto__:null}instanceof r)}},565:function(e,t,r){"use strict";var n="undefined"!==typeof Symbol&&Symbol,a=r(589);e.exports=function(){return"function"===typeof n&&("function"===typeof Symbol&&("symbol"===typeof n("foo")&&("symbol"===typeof Symbol("bar")&&a())))}},589:function(e){"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(42!==a.value||!0!==a.enumerable)return!1}return!0}},57:function(e,t,r){"use strict";var n=r(670);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},643:function(e,t,r){"use strict";var n;if(!Object.keys){var a=Object.prototype.hasOwnProperty,o=Object.prototype.toString,i=r(774),l=Object.prototype.propertyIsEnumerable,u=!l.call({toString:null},"toString"),s=l.call((function(){}),"prototype"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],f=function(e){var t=e.constructor;return t&&t.prototype===e},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},p=function(){if("undefined"===typeof window)return!1;for(var e in window)try{if(!d["$"+e]&&a.call(window,e)&&null!==window[e]&&"object"===typeof window[e])try{f(window[e])}catch(t){return!0}}catch(t){return!0}return!1}();n=function(e){var t=null!==e&&"object"===typeof e,r="[object Function]"===o.call(e),n=i(e),l=t&&"[object String]"===o.call(e),d=[];if(!t&&!r&&!n)throw new TypeError("Object.keys called on a non-object");var g=s&&r;if(l&&e.length>0&&!a.call(e,0))for(var m=0;m<e.length;++m)d.push(String(m));if(n&&e.length>0)for(var v=0;v<e.length;++v)d.push(String(v));else for(var h in e)g&&"prototype"===h||!a.call(e,h)||d.push(String(h));if(u)for(var y=function(e){if("undefined"===typeof window||!p)return f(e);try{return f(e)}catch(t){return!1}}(e),b=0;b<c.length;++b)y&&"constructor"===c[b]||!a.call(e,c[b])||d.push(c[b]);return d}}e.exports=n},315:function(e,t,r){"use strict";var n=Array.prototype.slice,a=r(774),o=Object.keys,i=o?function(e){return o(e)}:r(643),l=Object.keys;i.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return a(e)?l(n.call(e)):l(e)})}else Object.keys=i;return Object.keys||i},e.exports=i},774:function(e){"use strict";var t=Object.prototype.toString;e.exports=function(e){var r=t.call(e),n="[object Arguments]"===r;return n||(n="[object Array]"!==r&&null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),n}},459:function(e,t,r){"use strict";var n=r(233),a=r(674);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function u(e,t){s(e,t),s(e+"Capture",t)}function s(e,t){for(l[e]=t,e=0;e<t.length;e++)i.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function m(e,t,r,n,a,o,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=i}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var h=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,r,n){var a=v.hasOwnProperty(t)?v[t]:null;(null!==a?0!==a.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,a,n)&&(r=null),n||null===a?function(e){return!!f.call(g,e)||!f.call(p,e)&&(d.test(e)?g[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=null===r?3!==a.type&&"":r:(t=a.attributeName,n=a.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(a=a.type)||4===a&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(h,y);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(h,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(h,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var T=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),A=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var _=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=_&&e[_]||e["@@iterator"])?e:null}var B,V=Object.assign;function N(e){if(void 0===B)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||""}return"\n"+B+e}var F=!1;function U(e,t){if(!e||F)return"";F=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var n=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){n=s}e.call(t.prototype)}else{try{throw Error()}catch(s){n=s}e()}}catch(s){if(s&&n&&"string"===typeof s.stack){for(var a=s.stack.split("\n"),o=n.stack.split("\n"),i=a.length-1,l=o.length-1;1<=i&&0<=l&&a[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==o[l]){if(1!==i||1!==l)do{if(i--,0>--l||a[i]!==o[l]){var u="\n"+a[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=i&&0<=l);break}}}finally{F=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?N(e):""}function G(e){switch(e.tag){case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case S:return"Portal";case P:return"Profiler";case C:return"StrictMode";case I:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case O:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return j(e(t))}catch(r){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var a=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=H(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var r=t.checked;return V({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Q(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=W(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){$(e,t);var r=W(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&q(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+W(r),t=null,a=0;a<e.length;a++){if(e[a].value===r)return e[a].selected=!0,void(n&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return V({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(o(92));if(te(r)){if(1<r.length)throw Error(o(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:W(r)}}function oe(e,t){var r=W(t.value),n=W(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var se,ce,fe=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((se=se||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=se.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","ms","Moz","O"];function me(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),a=me(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}Object.keys(pe).forEach((function(e){ge.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var he=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(he[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Te=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,we=null,Ce=null;function Pe(e){if(e=ba(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=xa(t),Se(e.stateNode,e.type,t))}}function Oe(e){we?Ce?Ce.push(e):Ce=[e]:we=e}function Ae(){if(we){var e=we,t=Ce;if(Ce=we=null,Pe(e),t)for(e=0;e<t.length;e++)Pe(t[e])}}function Ee(e,t){return e(t)}function Ie(){}var Re=!1;function Me(e,t,r){if(Re)return e(t,r);Re=!0;try{return Ee(e,t,r)}finally{Re=!1,(null!==we||null!==Ce)&&(Ie(),Ae())}}function De(e,t){var r=e.stateNode;if(null===r)return null;var n=xa(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(o(231,t,typeof r));return r}var ke=!1;if(c)try{var _e={};Object.defineProperty(_e,"passive",{get:function(){ke=!0}}),window.addEventListener("test",_e,_e),window.removeEventListener("test",_e,_e)}catch(ce){ke=!1}function Le(e,t,r,n,a,o,i,l,u){var s=Array.prototype.slice.call(arguments,3);try{t.apply(r,s)}catch(c){this.onError(c)}}var Be=!1,Ve=null,Ne=!1,Fe=null,Ue={onError:function(e){Be=!0,Ve=e}};function Ge(e,t,r,n,a,o,i,l,u){Be=!1,Ve=null,Le.apply(Ue,arguments)}function je(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(je(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(o(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(n=a.return)){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return We(a),e;if(i===n)return We(a),t;i=i.sibling}throw Error(o(188))}if(r.return!==n.return)r=a,n=i;else{for(var l=!1,u=a.child;u;){if(u===r){l=!0,r=a,n=i;break}if(u===n){l=!0,n=a,r=i;break}u=u.sibling}if(!l){for(u=i.child;u;){if(u===r){l=!0,r=i,n=a;break}if(u===n){l=!0,n=i,r=a;break}u=u.sibling}if(!l)throw Error(o(189))}}if(r.alternate!==n)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Xe=a.unstable_scheduleCallback,qe=a.unstable_cancelCallback,Ye=a.unstable_shouldYield,Qe=a.unstable_requestPaint,$e=a.unstable_now,Ze=a.unstable_getCurrentPriorityLevel,Je=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,rt=a.unstable_LowPriority,nt=a.unstable_IdlePriority,at=null,ot=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/ut|0)|0},lt=Math.log,ut=Math.LN2;var st=64,ct=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,a=e.suspendedLanes,o=e.pingedLanes,i=268435455&r;if(0!==i){var l=i&~a;0!==l?n=ft(l):0!==(o&=i)&&(n=ft(o))}else 0!==(i=r&~a)?n=ft(i):0!==o&&(n=ft(o));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&a)&&((a=n&-n)>=(o=t&-t)||16===a&&0!==(4194240&o)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)a=1<<(r=31-it(t)),n|=e[r],t&=~a;return n}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function gt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=st;return 0===(4194240&(st<<=1))&&(st=64),e}function vt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ht(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=r}function yt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-it(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var bt=0;function Tt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,St,wt,Ct,Pt,Ot=!1,At=[],Et=null,It=null,Rt=null,Mt=new Map,Dt=new Map,kt=[],_t="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Bt(e,t,r,n,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[a]},null!==t&&(null!==(t=ba(t))&&St(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Vt(e){var t=ya(e.target);if(null!==t){var r=je(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=ze(r)))return e.blockedOn=t,void Pt(e.priority,(function(){wt(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Nt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=ba(r))&&St(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);Te=n,r.target.dispatchEvent(n),Te=null,t.shift()}return!0}function Ft(e,t,r){Nt(e)&&r.delete(t)}function Ut(){Ot=!1,null!==Et&&Nt(Et)&&(Et=null),null!==It&&Nt(It)&&(It=null),null!==Rt&&Nt(Rt)&&(Rt=null),Mt.forEach(Ft),Dt.forEach(Ft)}function Gt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ot||(Ot=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Ut)))}function jt(e){function t(t){return Gt(t,e)}if(0<At.length){Gt(At[0],e);for(var r=1;r<At.length;r++){var n=At[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==Et&&Gt(Et,e),null!==It&&Gt(It,e),null!==Rt&&Gt(Rt,e),Mt.forEach(t),Dt.forEach(t),r=0;r<kt.length;r++)(n=kt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<kt.length&&null===(r=kt[0]).blockedOn;)Vt(r),null===r.blockedOn&&kt.shift()}var zt=T.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,r,n){var a=bt,o=zt.transition;zt.transition=null;try{bt=1,Xt(e,t,r,n)}finally{bt=a,zt.transition=o}}function Kt(e,t,r,n){var a=bt,o=zt.transition;zt.transition=null;try{bt=4,Xt(e,t,r,n)}finally{bt=a,zt.transition=o}}function Xt(e,t,r,n){if(Wt){var a=Yt(e,t,r,n);if(null===a)Wn(e,t,n,qt,r),Lt(e,n);else if(function(e,t,r,n,a){switch(t){case"focusin":return Et=Bt(Et,e,t,r,n,a),!0;case"dragenter":return It=Bt(It,e,t,r,n,a),!0;case"mouseover":return Rt=Bt(Rt,e,t,r,n,a),!0;case"pointerover":var o=a.pointerId;return Mt.set(o,Bt(Mt.get(o)||null,e,t,r,n,a)),!0;case"gotpointercapture":return o=a.pointerId,Dt.set(o,Bt(Dt.get(o)||null,e,t,r,n,a)),!0}return!1}(a,e,t,r,n))n.stopPropagation();else if(Lt(e,n),4&t&&-1<_t.indexOf(e)){for(;null!==a;){var o=ba(a);if(null!==o&&xt(o),null===(o=Yt(e,t,r,n))&&Wn(e,t,n,qt,r),o===a)break;a=o}null!==a&&n.stopPropagation()}else Wn(e,t,n,null,r)}}var qt=null;function Yt(e,t,r,n){if(qt=null,null!==(e=ya(e=xe(n))))if(null===(t=je(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var $t=null,Zt=null,Jt=null;function er(){if(Jt)return Jt;var e,t,r=Zt,n=r.length,a="value"in $t?$t.value:$t.textContent,o=a.length;for(e=0;e<n&&r[e]===a[e];e++);var i=n-e;for(t=1;t<=i&&r[n-t]===a[o-t];t++);return Jt=a.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ar(e){function t(t,r,n,a,o){for(var i in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return V(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var or,ir,lr,ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sr=ar(ur),cr=V({},ur,{view:0,detail:0}),fr=ar(cr),dr=V({},cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lr&&(lr&&"mousemove"===e.type?(or=e.screenX-lr.screenX,ir=e.screenY-lr.screenY):ir=or=0,lr=e),or)},movementY:function(e){return"movementY"in e?e.movementY:ir}}),pr=ar(dr),gr=ar(V({},dr,{dataTransfer:0})),mr=ar(V({},cr,{relatedTarget:0})),vr=ar(V({},ur,{animationName:0,elapsedTime:0,pseudoElement:0})),hr=V({},ur,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=ar(hr),br=ar(V({},ur,{data:0})),Tr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sr[e])&&!!t[e]}function Cr(){return wr}var Pr=V({},cr,{key:function(e){if(e.key){var t=Tr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Or=ar(Pr),Ar=ar(V({},dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Er=ar(V({},cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cr})),Ir=ar(V({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rr=V({},dr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mr=ar(Rr),Dr=[9,13,27,32],kr=c&&"CompositionEvent"in window,_r=null;c&&"documentMode"in document&&(_r=document.documentMode);var Lr=c&&"TextEvent"in window&&!_r,Br=c&&(!kr||_r&&8<_r&&11>=_r),Vr=String.fromCharCode(32),Nr=!1;function Fr(e,t){switch(e){case"keyup":return-1!==Dr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gr=!1;var jr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jr[e.type]:"textarea"===t}function Wr(e,t,r,n){Oe(n),0<(t=Kn(t,"onChange")).length&&(r=new sr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Hr=null,Kr=null;function Xr(e){Nn(e,0)}function qr(e){if(X(Ta(e)))return e}function Yr(e,t){if("change"===e)return t}var Qr=!1;if(c){var $r;if(c){var Zr="oninput"in document;if(!Zr){var Jr=document.createElement("div");Jr.setAttribute("oninput","return;"),Zr="function"===typeof Jr.oninput}$r=Zr}else $r=!1;Qr=$r&&(!document.documentMode||9<document.documentMode)}function en(){Hr&&(Hr.detachEvent("onpropertychange",tn),Kr=Hr=null)}function tn(e){if("value"===e.propertyName&&qr(Kr)){var t=[];Wr(t,Kr,e,xe(e)),Me(Xr,t)}}function rn(e,t,r){"focusin"===e?(en(),Kr=r,(Hr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qr(Kr)}function an(e,t){if("click"===e)return qr(t)}function on(e,t){if("input"===e||"change"===e)return qr(t)}var ln="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function un(e,t){if(ln(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!f.call(t,a)||!ln(e[a],t[a]))return!1}return!0}function sn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cn(e,t){var r,n=sn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=sn(n)}}function fn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dn(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=q((e=t.contentWindow).document)}return t}function pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gn(e){var t=dn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&fn(r.ownerDocument.documentElement,r)){if(null!==n&&pn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=r.textContent.length,o=Math.min(n.start,a);n=void 0===n.end?o:Math.min(n.end,a),!e.extend&&o>n&&(a=n,n=o,o=a),a=cn(r,o);var i=cn(r,n);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mn=c&&"documentMode"in document&&11>=document.documentMode,vn=null,hn=null,yn=null,bn=!1;function Tn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;bn||null==vn||vn!==q(n)||("selectionStart"in(n=vn)&&pn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},yn&&un(yn,n)||(yn=n,0<(n=Kn(hn,"onSelect")).length&&(t=new sr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=vn)))}function xn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Sn={animationend:xn("Animation","AnimationEnd"),animationiteration:xn("Animation","AnimationIteration"),animationstart:xn("Animation","AnimationStart"),transitionend:xn("Transition","TransitionEnd")},wn={},Cn={};function Pn(e){if(wn[e])return wn[e];if(!Sn[e])return e;var t,r=Sn[e];for(t in r)if(r.hasOwnProperty(t)&&t in Cn)return wn[e]=r[t];return e}c&&(Cn=document.createElement("div").style,"AnimationEvent"in window||(delete Sn.animationend.animation,delete Sn.animationiteration.animation,delete Sn.animationstart.animation),"TransitionEvent"in window||delete Sn.transitionend.transition);var On=Pn("animationend"),An=Pn("animationiteration"),En=Pn("animationstart"),In=Pn("transitionend"),Rn=new Map,Mn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(e,t){Rn.set(e,t),u(t,[e])}for(var kn=0;kn<Mn.length;kn++){var _n=Mn[kn];Dn(_n.toLowerCase(),"on"+(_n[0].toUpperCase()+_n.slice(1)))}Dn(On,"onAnimationEnd"),Dn(An,"onAnimationIteration"),Dn(En,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(In,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ln));function Vn(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,a,i,l,u,s){if(Ge.apply(this,arguments),Be){if(!Be)throw Error(o(198));var c=Ve;Be=!1,Ve=null,Ne||(Ne=!0,Fe=c)}}(n,t,void 0,e),e.currentTarget=null}function Nn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var i=n.length-1;0<=i;i--){var l=n[i],u=l.instance,s=l.currentTarget;if(l=l.listener,u!==o&&a.isPropagationStopped())break e;Vn(a,l,s),o=u}else for(i=0;i<n.length;i++){if(u=(l=n[i]).instance,s=l.currentTarget,l=l.listener,u!==o&&a.isPropagationStopped())break e;Vn(a,l,s),o=u}}}if(Ne)throw e=Fe,Ne=!1,Fe=null,e}function Fn(e,t){var r=t[ma];void 0===r&&(r=t[ma]=new Set);var n=e+"__bubble";r.has(n)||(zn(t,e,2,!1),r.add(n))}function Un(e,t,r){var n=0;t&&(n|=4),zn(r,e,n,t)}var Gn="_reactListening"+Math.random().toString(36).slice(2);function jn(e){if(!e[Gn]){e[Gn]=!0,i.forEach((function(t){"selectionchange"!==t&&(Bn.has(t)||Un(t,!1,e),Un(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Gn]||(t[Gn]=!0,Un("selectionchange",!1,t))}}function zn(e,t,r,n){switch(Qt(t)){case 1:var a=Ht;break;case 4:a=Kt;break;default:a=Xt}r=a.bind(null,t,r,e),a=void 0,!ke||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),n?void 0!==a?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):void 0!==a?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Wn(e,t,r,n,a){var o=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var i=n.tag;if(3===i||4===i){var l=n.stateNode.containerInfo;if(l===a||8===l.nodeType&&l.parentNode===a)break;if(4===i)for(i=n.return;null!==i;){var u=i.tag;if((3===u||4===u)&&((u=i.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;i=i.return}for(;null!==l;){if(null===(i=ya(l)))return;if(5===(u=i.tag)||6===u){n=o=i;continue e}l=l.parentNode}}n=n.return}Me((function(){var n=o,a=xe(r),i=[];e:{var l=Rn.get(e);if(void 0!==l){var u=sr,s=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":u=Or;break;case"focusin":s="focus",u=mr;break;case"focusout":s="blur",u=mr;break;case"beforeblur":case"afterblur":u=mr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Er;break;case On:case An:case En:u=vr;break;case In:u=Ir;break;case"scroll":u=fr;break;case"wheel":u=Mr;break;case"copy":case"cut":case"paste":u=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Ar}var c=0!==(4&t),f=!c&&"scroll"===e,d=c?null!==l?l+"Capture":null:l;c=[];for(var p,g=n;null!==g;){var m=(p=g).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=De(g,d))&&c.push(Hn(g,m,p)))),f)break;g=g.return}0<c.length&&(l=new u(l,s,null,r,a),i.push({event:l,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||r===Te||!(s=r.relatedTarget||r.fromElement)||!ya(s)&&!s[ga])&&(u||l)&&(l=a.window===a?a:(l=a.ownerDocument)?l.defaultView||l.parentWindow:window,u?(u=n,null!==(s=(s=r.relatedTarget||r.toElement)?ya(s):null)&&(s!==(f=je(s))||5!==s.tag&&6!==s.tag)&&(s=null)):(u=null,s=n),u!==s)){if(c=pr,m="onMouseLeave",d="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(c=Ar,m="onPointerLeave",d="onPointerEnter",g="pointer"),f=null==u?l:Ta(u),p=null==s?l:Ta(s),(l=new c(m,g+"leave",u,r,a)).target=f,l.relatedTarget=p,m=null,ya(a)===n&&((c=new c(d,g+"enter",s,r,a)).target=p,c.relatedTarget=f,m=c),f=m,u&&s)e:{for(d=s,g=0,p=c=u;p;p=Xn(p))g++;for(p=0,m=d;m;m=Xn(m))p++;for(;0<g-p;)c=Xn(c),g--;for(;0<p-g;)d=Xn(d),p--;for(;g--;){if(c===d||null!==d&&c===d.alternate)break e;c=Xn(c),d=Xn(d)}c=null}else c=null;null!==u&&qn(i,l,u,c,!1),null!==s&&null!==f&&qn(i,f,s,c,!0)}if("select"===(u=(l=n?Ta(n):window).nodeName&&l.nodeName.toLowerCase())||"input"===u&&"file"===l.type)var v=Yr;else if(zr(l))if(Qr)v=on;else{v=nn;var h=rn}else(u=l.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(v=an);switch(v&&(v=v(e,n))?Wr(i,v,r,a):(h&&h(e,l,n),"focusout"===e&&(h=l._wrapperState)&&h.controlled&&"number"===l.type&&ee(l,"number",l.value)),h=n?Ta(n):window,e){case"focusin":(zr(h)||"true"===h.contentEditable)&&(vn=h,hn=n,yn=null);break;case"focusout":yn=hn=vn=null;break;case"mousedown":bn=!0;break;case"contextmenu":case"mouseup":case"dragend":bn=!1,Tn(i,r,a);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":Tn(i,r,a)}var y;if(kr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Gr?Fr(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Br&&"ko"!==r.locale&&(Gr||"onCompositionStart"!==b?"onCompositionEnd"===b&&Gr&&(y=er()):(Zt="value"in($t=a)?$t.value:$t.textContent,Gr=!0)),0<(h=Kn(n,b)).length&&(b=new br(b,e,null,r,a),i.push({event:b,listeners:h}),y?b.data=y:null!==(y=Ur(r))&&(b.data=y))),(y=Lr?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(Nr=!0,Vr);case"textInput":return(e=t.data)===Vr&&Nr?null:e;default:return null}}(e,r):function(e,t){if(Gr)return"compositionend"===e||!kr&&Fr(e,t)?(e=er(),Jt=Zt=$t=null,Gr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Br&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=Kn(n,"onBeforeInput")).length&&(a=new br("onBeforeInput","beforeinput",null,r,a),i.push({event:a,listeners:n}),a.data=y))}Nn(i,t)}))}function Hn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Kn(e,t){for(var r=t+"Capture",n=[];null!==e;){var a=e,o=a.stateNode;5===a.tag&&null!==o&&(a=o,null!=(o=De(e,r))&&n.unshift(Hn(e,o,a)),null!=(o=De(e,t))&&n.push(Hn(e,o,a))),e=e.return}return n}function Xn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qn(e,t,r,n,a){for(var o=t._reactName,i=[];null!==r&&r!==n;){var l=r,u=l.alternate,s=l.stateNode;if(null!==u&&u===n)break;5===l.tag&&null!==s&&(l=s,a?null!=(u=De(r,o))&&i.unshift(Hn(r,u,l)):a||null!=(u=De(r,o))&&i.push(Hn(r,u,l))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var Yn=/\r\n?/g,Qn=/\u0000|\uFFFD/g;function $n(e){return("string"===typeof e?e:""+e).replace(Yn,"\n").replace(Qn,"")}function Zn(e,t,r){if(t=$n(t),$n(e)!==t&&r)throw Error(o(425))}function Jn(){}var ea=null,ta=null;function ra(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var na="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,oa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oa?function(e){return oa.resolve(null).then(e).catch(la)}:na;function la(e){setTimeout((function(){throw e}))}function ua(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&8===a.nodeType)if("/$"===(r=a.data)){if(0===n)return e.removeChild(a),void jt(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=a}while(r);jt(t)}function sa(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ca(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var fa=Math.random().toString(36).slice(2),da="__reactFiber$"+fa,pa="__reactProps$"+fa,ga="__reactContainer$"+fa,ma="__reactEvents$"+fa,va="__reactListeners$"+fa,ha="__reactHandles$"+fa;function ya(e){var t=e[da];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ga]||r[da]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ca(e);null!==e;){if(r=e[da])return r;e=ca(e)}return t}r=(e=r).parentNode}return null}function ba(e){return!(e=e[da]||e[ga])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ta(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xa(e){return e[pa]||null}var Sa=[],wa=-1;function Ca(e){return{current:e}}function Pa(e){0>wa||(e.current=Sa[wa],Sa[wa]=null,wa--)}function Oa(e,t){wa++,Sa[wa]=e.current,e.current=t}var Aa={},Ea=Ca(Aa),Ia=Ca(!1),Ra=Aa;function Ma(e,t){var r=e.type.contextTypes;if(!r)return Aa;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in r)o[a]=t[a];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Da(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ka(){Pa(Ia),Pa(Ea)}function _a(e,t,r){if(Ea.current!==Aa)throw Error(o(168));Oa(Ea,t),Oa(Ia,r)}function La(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var a in n=n.getChildContext())if(!(a in t))throw Error(o(108,z(e)||"Unknown",a));return V({},r,n)}function Ba(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Aa,Ra=Ea.current,Oa(Ea,e),Oa(Ia,Ia.current),!0}function Va(e,t,r){var n=e.stateNode;if(!n)throw Error(o(169));r?(e=La(e,t,Ra),n.__reactInternalMemoizedMergedChildContext=e,Pa(Ia),Pa(Ea),Oa(Ea,e)):Pa(Ia),Oa(Ia,r)}var Na=null,Fa=!1,Ua=!1;function Ga(e){null===Na?Na=[e]:Na.push(e)}function ja(){if(!Ua&&null!==Na){Ua=!0;var e=0,t=bt;try{var r=Na;for(bt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Na=null,Fa=!1}catch(a){throw null!==Na&&(Na=Na.slice(e+1)),Xe(Je,ja),a}finally{bt=t,Ua=!1}}return null}var za=[],Wa=0,Ha=null,Ka=0,Xa=[],qa=0,Ya=null,Qa=1,$a="";function Za(e,t){za[Wa++]=Ka,za[Wa++]=Ha,Ha=e,Ka=t}function Ja(e,t,r){Xa[qa++]=Qa,Xa[qa++]=$a,Xa[qa++]=Ya,Ya=e;var n=Qa;e=$a;var a=32-it(n)-1;n&=~(1<<a),r+=1;var o=32-it(t)+a;if(30<o){var i=a-a%5;o=(n&(1<<i)-1).toString(32),n>>=i,a-=i,Qa=1<<32-it(t)+a|r<<a|n,$a=o+e}else Qa=1<<o|r<<a|n,$a=e}function eo(e){null!==e.return&&(Za(e,1),Ja(e,1,0))}function to(e){for(;e===Ha;)Ha=za[--Wa],za[Wa]=null,Ka=za[--Wa],za[Wa]=null;for(;e===Ya;)Ya=Xa[--qa],Xa[qa]=null,$a=Xa[--qa],Xa[qa]=null,Qa=Xa[--qa],Xa[qa]=null}var ro=null,no=null,ao=!1,oo=null;function io(e,t){var r=Ds(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function lo(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ro=e,no=sa(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ro=e,no=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Ya?{id:Qa,overflow:$a}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Ds(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ro=e,no=null,!0);default:return!1}}function uo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function so(e){if(ao){var t=no;if(t){var r=t;if(!lo(e,t)){if(uo(e))throw Error(o(418));t=sa(r.nextSibling);var n=ro;t&&lo(e,t)?io(n,r):(e.flags=-4097&e.flags|2,ao=!1,ro=e)}}else{if(uo(e))throw Error(o(418));e.flags=-4097&e.flags|2,ao=!1,ro=e}}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ro=e}function fo(e){if(e!==ro)return!1;if(!ao)return co(e),ao=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ra(e.type,e.memoizedProps)),t&&(t=no)){if(uo(e))throw po(),Error(o(418));for(;t;)io(e,t),t=sa(t.nextSibling)}if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){no=sa(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}no=null}}else no=ro?sa(e.stateNode.nextSibling):null;return!0}function po(){for(var e=no;e;)e=sa(e.nextSibling)}function go(){no=ro=null,ao=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var vo=T.ReactCurrentBatchConfig;function ho(e,t){if(e&&e.defaultProps){for(var r in t=V({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var yo=Ca(null),bo=null,To=null,xo=null;function So(){xo=To=bo=null}function wo(e){var t=yo.current;Pa(yo),e._currentValue=t}function Co(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Po(e,t){bo=e,xo=To=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Tl=!0),e.firstContext=null)}function Oo(e){var t=e._currentValue;if(xo!==e)if(e={context:e,memoizedValue:t,next:null},null===To){if(null===bo)throw Error(o(308));To=e,bo.dependencies={lanes:0,firstContext:e}}else To=To.next=e;return t}var Ao=null;function Eo(e){null===Ao?Ao=[e]:Ao.push(e)}function Io(e,t,r,n){var a=t.interleaved;return null===a?(r.next=r,Eo(t)):(r.next=a.next,a.next=r),t.interleaved=r,Ro(e,n)}function Ro(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Mo=!1;function Do(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ko(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _o(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lo(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Iu)){var a=n.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Ro(e,r)}return null===(a=n.interleaved)?(t.next=t,Eo(n)):(t.next=a.next,a.next=t),n.interleaved=t,Ro(e,r)}function Bo(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,yt(e,r)}}function Vo(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var a=null,o=null;if(null!==(r=r.firstBaseUpdate)){do{var i={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===o?a=o=i:o=o.next=i,r=r.next}while(null!==r);null===o?a=o=t:o=o.next=t}else a=o=t;return r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function No(e,t,r,n){var a=e.updateQueue;Mo=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var u=l,s=u.next;u.next=null,null===i?o=s:i.next=s,i=u;var c=e.alternate;null!==c&&((l=(c=c.updateQueue).lastBaseUpdate)!==i&&(null===l?c.firstBaseUpdate=s:l.next=s,c.lastBaseUpdate=u))}if(null!==o){var f=a.baseState;for(i=0,c=s=u=null,l=o;;){var d=l.lane,p=l.eventTime;if((n&d)===d){null!==c&&(c=c.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,m=l;switch(d=t,p=r,m.tag){case 1:if("function"===typeof(g=m.payload)){f=g.call(p,f,d);break e}f=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(d="function"===typeof(g=m.payload)?g.call(p,f,d):g)||void 0===d)break e;f=V({},f,d);break e;case 2:Mo=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(d=a.effects)?a.effects=[l]:d.push(l))}else p={eventTime:p,lane:d,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===c?(s=c=p,u=f):c=c.next=p,i|=d;if(null===(l=l.next)){if(null===(l=a.shared.pending))break;l=(d=l).next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}if(null===c&&(u=f),a.baseState=u,a.firstBaseUpdate=s,a.lastBaseUpdate=c,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===o&&(a.shared.lanes=0);Vu|=i,e.lanes=i,e.memoizedState=f}}function Fo(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(null!==a){if(n.callback=null,n=r,"function"!==typeof a)throw Error(o(191,a));a.call(n)}}}var Uo=(new n.Component).refs;function Go(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:V({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var jo={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ts(),a=rs(e),o=_o(n,a);o.payload=t,void 0!==r&&null!==r&&(o.callback=r),null!==(t=Lo(e,o,a))&&(ns(t,e,a,n),Bo(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ts(),a=rs(e),o=_o(n,a);o.tag=1,o.payload=t,void 0!==r&&null!==r&&(o.callback=r),null!==(t=Lo(e,o,a))&&(ns(t,e,a,n),Bo(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ts(),n=rs(e),a=_o(r,n);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=Lo(e,a,n))&&(ns(t,e,n,r),Bo(t,e,n))}};function zo(e,t,r,n,a,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,i):!t.prototype||!t.prototype.isPureReactComponent||(!un(r,n)||!un(a,o))}function Wo(e,t,r){var n=!1,a=Aa,o=t.contextType;return"object"===typeof o&&null!==o?o=Oo(o):(a=Da(t)?Ra:Ea.current,o=(n=null!==(n=t.contextTypes)&&void 0!==n)?Ma(e,a):Aa),t=new t(r,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=jo,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ho(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&jo.enqueueReplaceState(t,t.state,null)}function Ko(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs=Uo,Do(e);var o=t.contextType;"object"===typeof o&&null!==o?a.context=Oo(o):(o=Da(t)?Ra:Ea.current,a.context=Ma(e,o)),a.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Go(e,t,o,r),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&jo.enqueueReplaceState(a,a.state,null),No(e,r,a,n),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Xo(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(o(309));var n=r.stateNode}if(!n)throw Error(o(147,e));var a=n,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;t===Uo&&(t=a.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!r._owner)throw Error(o(290,e))}return e}function qo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yo(e){return(0,e._init)(e._payload)}function Qo(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=_s(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,r,n){return null===t||6!==t.tag?((t=Ns(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function s(e,t,r,n){var o=r.type;return o===w?f(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===D&&Yo(o)===t.type)?((n=a(t,r.props)).ref=Xo(e,t,r),n.return=e,n):((n=Ls(r.type,r.key,r.props,null,e.mode,n)).ref=Xo(e,t,r),n.return=e,n)}function c(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Fs(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function f(e,t,r,n,o){return null===t||7!==t.tag?((t=Bs(r,e.mode,n,o)).return=e,t):((t=a(t,r)).return=e,t)}function d(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ns(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(r=Ls(t.type,t.key,t.props,null,e.mode,r)).ref=Xo(e,null,t),r.return=e,r;case S:return(t=Fs(t,e.mode,r)).return=e,t;case D:return d(e,(0,t._init)(t._payload),r)}if(te(t)||L(t))return(t=Bs(t,e.mode,r,null)).return=e,t;qo(e,t)}return null}function p(e,t,r,n){var a=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==a?null:u(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return r.key===a?s(e,t,r,n):null;case S:return r.key===a?c(e,t,r,n):null;case D:return p(e,t,(a=r._init)(r._payload),n)}if(te(r)||L(r))return null!==a?null:f(e,t,r,n,null);qo(e,r)}return null}function g(e,t,r,n,a){if("string"===typeof n&&""!==n||"number"===typeof n)return u(t,e=e.get(r)||null,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return s(t,e=e.get(null===n.key?r:n.key)||null,n,a);case S:return c(t,e=e.get(null===n.key?r:n.key)||null,n,a);case D:return g(e,t,r,(0,n._init)(n._payload),a)}if(te(n)||L(n))return f(t,e=e.get(r)||null,n,a,null);qo(t,n)}return null}function m(a,o,l,u){for(var s=null,c=null,f=o,m=o=0,v=null;null!==f&&m<l.length;m++){f.index>m?(v=f,f=null):v=f.sibling;var h=p(a,f,l[m],u);if(null===h){null===f&&(f=v);break}e&&f&&null===h.alternate&&t(a,f),o=i(h,o,m),null===c?s=h:c.sibling=h,c=h,f=v}if(m===l.length)return r(a,f),ao&&Za(a,m),s;if(null===f){for(;m<l.length;m++)null!==(f=d(a,l[m],u))&&(o=i(f,o,m),null===c?s=f:c.sibling=f,c=f);return ao&&Za(a,m),s}for(f=n(a,f);m<l.length;m++)null!==(v=g(f,a,m,l[m],u))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),o=i(v,o,m),null===c?s=v:c.sibling=v,c=v);return e&&f.forEach((function(e){return t(a,e)})),ao&&Za(a,m),s}function v(a,l,u,s){var c=L(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var f=c=null,m=l,v=l=0,h=null,y=u.next();null!==m&&!y.done;v++,y=u.next()){m.index>v?(h=m,m=null):h=m.sibling;var b=p(a,m,y.value,s);if(null===b){null===m&&(m=h);break}e&&m&&null===b.alternate&&t(a,m),l=i(b,l,v),null===f?c=b:f.sibling=b,f=b,m=h}if(y.done)return r(a,m),ao&&Za(a,v),c;if(null===m){for(;!y.done;v++,y=u.next())null!==(y=d(a,y.value,s))&&(l=i(y,l,v),null===f?c=y:f.sibling=y,f=y);return ao&&Za(a,v),c}for(m=n(a,m);!y.done;v++,y=u.next())null!==(y=g(m,a,v,y.value,s))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),l=i(y,l,v),null===f?c=y:f.sibling=y,f=y);return e&&m.forEach((function(e){return t(a,e)})),ao&&Za(a,v),c}return function e(n,o,i,u){if("object"===typeof i&&null!==i&&i.type===w&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case x:e:{for(var s=i.key,c=o;null!==c;){if(c.key===s){if((s=i.type)===w){if(7===c.tag){r(n,c.sibling),(o=a(c,i.props.children)).return=n,n=o;break e}}else if(c.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&Yo(s)===c.type){r(n,c.sibling),(o=a(c,i.props)).ref=Xo(n,c,i),o.return=n,n=o;break e}r(n,c);break}t(n,c),c=c.sibling}i.type===w?((o=Bs(i.props.children,n.mode,u,i.key)).return=n,n=o):((u=Ls(i.type,i.key,i.props,null,n.mode,u)).ref=Xo(n,o,i),u.return=n,n=u)}return l(n);case S:e:{for(c=i.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===i.containerInfo&&o.stateNode.implementation===i.implementation){r(n,o.sibling),(o=a(o,i.children||[])).return=n,n=o;break e}r(n,o);break}t(n,o),o=o.sibling}(o=Fs(i,n.mode,u)).return=n,n=o}return l(n);case D:return e(n,o,(c=i._init)(i._payload),u)}if(te(i))return m(n,o,i,u);if(L(i))return v(n,o,i,u);qo(n,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==o&&6===o.tag?(r(n,o.sibling),(o=a(o,i)).return=n,n=o):(r(n,o),(o=Ns(i,n.mode,u)).return=n,n=o),l(n)):r(n,o)}}var $o=Qo(!0),Zo=Qo(!1),Jo={},ei=Ca(Jo),ti=Ca(Jo),ri=Ca(Jo);function ni(e){if(e===Jo)throw Error(o(174));return e}function ai(e,t){switch(Oa(ri,t),Oa(ti,e),Oa(ei,Jo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Pa(ei),Oa(ei,t)}function oi(){Pa(ei),Pa(ti),Pa(ri)}function ii(e){ni(ri.current);var t=ni(ei.current),r=ue(t,e.type);t!==r&&(Oa(ti,e),Oa(ei,r))}function li(e){ti.current===e&&(Pa(ei),Pa(ti))}var ui=Ca(0);function si(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ci=[];function fi(){for(var e=0;e<ci.length;e++)ci[e]._workInProgressVersionPrimary=null;ci.length=0}var di=T.ReactCurrentDispatcher,pi=T.ReactCurrentBatchConfig,gi=0,mi=null,vi=null,hi=null,yi=!1,bi=!1,Ti=0,xi=0;function Si(){throw Error(o(321))}function wi(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ln(e[r],t[r]))return!1;return!0}function Ci(e,t,r,n,a,i){if(gi=i,mi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,di.current=null===e||null===e.memoizedState?ll:ul,e=r(n,a),bi){i=0;do{if(bi=!1,Ti=0,25<=i)throw Error(o(301));i+=1,hi=vi=null,t.updateQueue=null,di.current=sl,e=r(n,a)}while(bi)}if(di.current=il,t=null!==vi&&null!==vi.next,gi=0,hi=vi=mi=null,yi=!1,t)throw Error(o(300));return e}function Pi(){var e=0!==Ti;return Ti=0,e}function Oi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===hi?mi.memoizedState=hi=e:hi=hi.next=e,hi}function Ai(){if(null===vi){var e=mi.alternate;e=null!==e?e.memoizedState:null}else e=vi.next;var t=null===hi?mi.memoizedState:hi.next;if(null!==t)hi=t,vi=e;else{if(null===e)throw Error(o(310));e={memoizedState:(vi=e).memoizedState,baseState:vi.baseState,baseQueue:vi.baseQueue,queue:vi.queue,next:null},null===hi?mi.memoizedState=hi=e:hi=hi.next=e}return hi}function Ei(e,t){return"function"===typeof t?t(e):t}function Ii(e){var t=Ai(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=vi,a=n.baseQueue,i=r.pending;if(null!==i){if(null!==a){var l=a.next;a.next=i.next,i.next=l}n.baseQueue=a=i,r.pending=null}if(null!==a){i=a.next,n=n.baseState;var u=l=null,s=null,c=i;do{var f=c.lane;if((gi&f)===f)null!==s&&(s=s.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var d={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===s?(u=s=d,l=n):s=s.next=d,mi.lanes|=f,Vu|=f}c=c.next}while(null!==c&&c!==i);null===s?l=n:s.next=u,ln(n,t.memoizedState)||(Tl=!0),t.memoizedState=n,t.baseState=l,t.baseQueue=s,r.lastRenderedState=n}if(null!==(e=r.interleaved)){a=e;do{i=a.lane,mi.lanes|=i,Vu|=i,a=a.next}while(a!==e)}else null===a&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ri(e){var t=Ai(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(null!==a){r.pending=null;var l=a=a.next;do{i=e(i,l.action),l=l.next}while(l!==a);ln(i,t.memoizedState)||(Tl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Mi(){}function Di(e,t){var r=mi,n=Ai(),a=t(),i=!ln(n.memoizedState,a);if(i&&(n.memoizedState=a,Tl=!0),n=n.queue,Wi(Li.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||null!==hi&&1&hi.memoizedState.tag){if(r.flags|=2048,Fi(9,_i.bind(null,r,n,a,t),void 0,null),null===Ru)throw Error(o(349));0!==(30&gi)||ki(r,t,a)}return a}function ki(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=mi.updateQueue)?(t={lastEffect:null,stores:null},mi.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function _i(e,t,r,n){t.value=r,t.getSnapshot=n,Bi(t)&&Vi(e)}function Li(e,t,r){return r((function(){Bi(t)&&Vi(e)}))}function Bi(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ln(e,r)}catch(n){return!0}}function Vi(e){var t=Ro(e,1);null!==t&&ns(t,e,1,-1)}function Ni(e){var t=Oi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:e},t.queue=e,e=e.dispatch=rl.bind(null,mi,e),[t.memoizedState,e]}function Fi(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=mi.updateQueue)?(t={lastEffect:null,stores:null},mi.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Ui(){return Ai().memoizedState}function Gi(e,t,r,n){var a=Oi();mi.flags|=e,a.memoizedState=Fi(1|t,r,void 0,void 0===n?null:n)}function ji(e,t,r,n){var a=Ai();n=void 0===n?null:n;var o=void 0;if(null!==vi){var i=vi.memoizedState;if(o=i.destroy,null!==n&&wi(n,i.deps))return void(a.memoizedState=Fi(t,r,o,n))}mi.flags|=e,a.memoizedState=Fi(1|t,r,o,n)}function zi(e,t){return Gi(8390656,8,e,t)}function Wi(e,t){return ji(2048,8,e,t)}function Hi(e,t){return ji(4,2,e,t)}function Ki(e,t){return ji(4,4,e,t)}function Xi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qi(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,ji(4,4,Xi.bind(null,t,e),r)}function Yi(){}function Qi(e,t){var r=Ai();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&wi(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function $i(e,t){var r=Ai();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&wi(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Zi(e,t,r){return 0===(21&gi)?(e.baseState&&(e.baseState=!1,Tl=!0),e.memoizedState=r):(ln(r,t)||(r=mt(),mi.lanes|=r,Vu|=r,e.baseState=!0),t)}function Ji(e,t){var r=bt;bt=0!==r&&4>r?r:4,e(!0);var n=pi.transition;pi.transition={};try{e(!1),t()}finally{bt=r,pi.transition=n}}function el(){return Ai().memoizedState}function tl(e,t,r){var n=rs(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},nl(e))al(t,r);else if(null!==(r=Io(e,t,r,n))){ns(r,e,n,ts()),ol(r,t,n)}}function rl(e,t,r){var n=rs(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(nl(e))al(t,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=o(i,r);if(a.hasEagerState=!0,a.eagerState=l,ln(l,i)){var u=t.interleaved;return null===u?(a.next=a,Eo(t)):(a.next=u.next,u.next=a),void(t.interleaved=a)}}catch(s){}null!==(r=Io(e,t,a,n))&&(ns(r,e,n,a=ts()),ol(r,t,n))}}function nl(e){var t=e.alternate;return e===mi||null!==t&&t===mi}function al(e,t){bi=yi=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ol(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,yt(e,r)}}var il={readContext:Oo,useCallback:Si,useContext:Si,useEffect:Si,useImperativeHandle:Si,useInsertionEffect:Si,useLayoutEffect:Si,useMemo:Si,useReducer:Si,useRef:Si,useState:Si,useDebugValue:Si,useDeferredValue:Si,useTransition:Si,useMutableSource:Si,useSyncExternalStore:Si,useId:Si,unstable_isNewReconciler:!1},ll={readContext:Oo,useCallback:function(e,t){return Oi().memoizedState=[e,void 0===t?null:t],e},useContext:Oo,useEffect:zi,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Gi(4194308,4,Xi.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Gi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Gi(4,2,e,t)},useMemo:function(e,t){var r=Oi();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Oi();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=tl.bind(null,mi,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},Oi().memoizedState=e},useState:Ni,useDebugValue:Yi,useDeferredValue:function(e){return Oi().memoizedState=e},useTransition:function(){var e=Ni(!1),t=e[0];return e=Ji.bind(null,e[1]),Oi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=mi,a=Oi();if(ao){if(void 0===r)throw Error(o(407));r=r()}else{if(r=t(),null===Ru)throw Error(o(349));0!==(30&gi)||ki(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,zi(Li.bind(null,n,i,e),[e]),n.flags|=2048,Fi(9,_i.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Oi(),t=Ru.identifierPrefix;if(ao){var r=$a;t=":"+t+"R"+(r=(Qa&~(1<<32-it(Qa)-1)).toString(32)+r),0<(r=Ti++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=xi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ul={readContext:Oo,useCallback:Qi,useContext:Oo,useEffect:Wi,useImperativeHandle:qi,useInsertionEffect:Hi,useLayoutEffect:Ki,useMemo:$i,useReducer:Ii,useRef:Ui,useState:function(){return Ii(Ei)},useDebugValue:Yi,useDeferredValue:function(e){return Zi(Ai(),vi.memoizedState,e)},useTransition:function(){return[Ii(Ei)[0],Ai().memoizedState]},useMutableSource:Mi,useSyncExternalStore:Di,useId:el,unstable_isNewReconciler:!1},sl={readContext:Oo,useCallback:Qi,useContext:Oo,useEffect:Wi,useImperativeHandle:qi,useInsertionEffect:Hi,useLayoutEffect:Ki,useMemo:$i,useReducer:Ri,useRef:Ui,useState:function(){return Ri(Ei)},useDebugValue:Yi,useDeferredValue:function(e){var t=Ai();return null===vi?t.memoizedState=e:Zi(t,vi.memoizedState,e)},useTransition:function(){return[Ri(Ei)[0],Ai().memoizedState]},useMutableSource:Mi,useSyncExternalStore:Di,useId:el,unstable_isNewReconciler:!1};function cl(e,t){try{var r="",n=t;do{r+=G(n),n=n.return}while(n);var a=r}catch(o){a="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:a,digest:null}}function fl(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function dl(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}var pl="function"===typeof WeakMap?WeakMap:Map;function gl(e,t,r){(r=_o(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Hu||(Hu=!0,Ku=n),dl(0,t)},r}function ml(e,t,r){(r=_o(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){dl(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(r.callback=function(){dl(0,t),"function"!==typeof n&&(null===Xu?Xu=new Set([this]):Xu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function vl(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new pl;var a=new Set;n.set(t,a)}else void 0===(a=n.get(t))&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=Os.bind(null,e,t,r),t.then(e,e))}function hl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yl(e,t,r,n,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=_o(-1,1)).tag=2,Lo(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bl=T.ReactCurrentOwner,Tl=!1;function xl(e,t,r,n){t.child=null===e?Zo(t,null,r,n):$o(t,e.child,r,n)}function Sl(e,t,r,n,a){r=r.render;var o=t.ref;return Po(t,a),n=Ci(e,t,r,n,o,a),r=Pi(),null===e||Tl?(ao&&r&&eo(t),t.flags|=1,xl(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hl(e,t,a))}function wl(e,t,r,n,a){if(null===e){var o=r.type;return"function"!==typeof o||ks(o)||void 0!==o.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Ls(r.type,null,n,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Cl(e,t,o,n,a))}if(o=e.child,0===(e.lanes&a)){var i=o.memoizedProps;if((r=null!==(r=r.compare)?r:un)(i,n)&&e.ref===t.ref)return Hl(e,t,a)}return t.flags|=1,(e=_s(o,n)).ref=t.ref,e.return=t,t.child=e}function Cl(e,t,r,n,a){if(null!==e){var o=e.memoizedProps;if(un(o,n)&&e.ref===t.ref){if(Tl=!1,t.pendingProps=n=o,0===(e.lanes&a))return t.lanes=e.lanes,Hl(e,t,a);0!==(131072&e.flags)&&(Tl=!0)}}return Al(e,t,r,n,a)}function Pl(e,t,r){var n=t.pendingProps,a=n.children,o=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oa(_u,ku),ku|=r;else{if(0===(1073741824&r))return e=null!==o?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oa(_u,ku),ku|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==o?o.baseLanes:r,Oa(_u,ku),ku|=n}else null!==o?(n=o.baseLanes|r,t.memoizedState=null):n=r,Oa(_u,ku),ku|=n;return xl(e,t,a,r),t.child}function Ol(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Al(e,t,r,n,a){var o=Da(r)?Ra:Ea.current;return o=Ma(t,o),Po(t,a),r=Ci(e,t,r,n,o,a),n=Pi(),null===e||Tl?(ao&&n&&eo(t),t.flags|=1,xl(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Hl(e,t,a))}function El(e,t,r,n,a){if(Da(r)){var o=!0;Ba(t)}else o=!1;if(Po(t,a),null===t.stateNode)Wl(e,t),Wo(t,r,n),Ko(t,r,n,a),n=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var u=i.context,s=r.contextType;"object"===typeof s&&null!==s?s=Oo(s):s=Ma(t,s=Da(r)?Ra:Ea.current);var c=r.getDerivedStateFromProps,f="function"===typeof c||"function"===typeof i.getSnapshotBeforeUpdate;f||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==n||u!==s)&&Ho(t,i,n,s),Mo=!1;var d=t.memoizedState;i.state=d,No(t,n,i,a),u=t.memoizedState,l!==n||d!==u||Ia.current||Mo?("function"===typeof c&&(Go(t,r,c,n),u=t.memoizedState),(l=Mo||zo(t,r,l,n,d,u,s))?(f||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=u),i.props=n,i.state=u,i.context=s,n=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),n=!1)}else{i=t.stateNode,ko(e,t),l=t.memoizedProps,s=t.type===t.elementType?l:ho(t.type,l),i.props=s,f=t.pendingProps,d=i.context,"object"===typeof(u=r.contextType)&&null!==u?u=Oo(u):u=Ma(t,u=Da(r)?Ra:Ea.current);var p=r.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==f||d!==u)&&Ho(t,i,n,u),Mo=!1,d=t.memoizedState,i.state=d,No(t,n,i,a);var g=t.memoizedState;l!==f||d!==g||Ia.current||Mo?("function"===typeof p&&(Go(t,r,p,n),g=t.memoizedState),(s=Mo||zo(t,r,s,n,d,g,u)||!1)?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(n,g,u),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(n,g,u)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),i.props=n,i.state=g,i.context=u,n=s):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return Il(e,t,r,n,o,a)}function Il(e,t,r,n,a,o){Ol(e,t);var i=0!==(128&t.flags);if(!n&&!i)return a&&Va(t,r,!1),Hl(e,t,o);n=t.stateNode,bl.current=t;var l=i&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&i?(t.child=$o(t,e.child,null,o),t.child=$o(t,null,l,o)):xl(e,t,l,o),t.memoizedState=n.state,a&&Va(t,r,!0),t.child}function Rl(e){var t=e.stateNode;t.pendingContext?_a(0,t.pendingContext,t.pendingContext!==t.context):t.context&&_a(0,t.context,!1),ai(e,t.containerInfo)}function Ml(e,t,r,n,a){return go(),mo(a),t.flags|=256,xl(e,t,r,n),t.child}var Dl,kl,_l,Ll,Bl={dehydrated:null,treeContext:null,retryLane:0};function Vl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Nl(e,t,r){var n,a=t.pendingProps,i=ui.current,l=!1,u=0!==(128&t.flags);if((n=u)||(n=(null===e||null!==e.memoizedState)&&0!==(2&i)),n?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Oa(ui,1&i),null===e)return so(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=a.children,e=a.fallback,l?(a=t.mode,l=t.child,u={mode:"hidden",children:u},0===(1&a)&&null!==l?(l.childLanes=0,l.pendingProps=u):l=Vs(u,a,0,null),e=Bs(e,a,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Vl(r),t.memoizedState=Bl,e):Fl(t,u));if(null!==(i=e.memoizedState)&&null!==(n=i.dehydrated))return function(e,t,r,n,a,i,l){if(r)return 256&t.flags?(t.flags&=-257,Ul(e,t,l,n=fl(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Vs({mode:"visible",children:n.children},a,0,null),(i=Bs(i,a,l,null)).flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,0!==(1&t.mode)&&$o(t,e.child,null,l),t.child.memoizedState=Vl(l),t.memoizedState=Bl,i);if(0===(1&t.mode))return Ul(e,t,l,null);if("$!"===a.data){if(n=a.nextSibling&&a.nextSibling.dataset)var u=n.dgst;return n=u,Ul(e,t,l,n=fl(i=Error(o(419)),n,void 0))}if(u=0!==(l&e.childLanes),Tl||u){if(null!==(n=Ru)){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(n.suspendedLanes|l))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Ro(e,a),ns(n,e,a,-1))}return vs(),Ul(e,t,l,n=fl(Error(o(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Es.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,no=sa(a.nextSibling),ro=t,ao=!0,oo=null,null!==e&&(Xa[qa++]=Qa,Xa[qa++]=$a,Xa[qa++]=Ya,Qa=e.id,$a=e.overflow,Ya=t),t=Fl(t,n.children),t.flags|=4096,t)}(e,t,u,a,n,i,r);if(l){l=a.fallback,u=t.mode,n=(i=e.child).sibling;var s={mode:"hidden",children:a.children};return 0===(1&u)&&t.child!==i?((a=t.child).childLanes=0,a.pendingProps=s,t.deletions=null):(a=_s(i,s)).subtreeFlags=14680064&i.subtreeFlags,null!==n?l=_s(n,l):(l=Bs(l,u,r,null)).flags|=2,l.return=t,a.return=t,a.sibling=l,t.child=a,a=l,l=t.child,u=null===(u=e.child.memoizedState)?Vl(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},l.memoizedState=u,l.childLanes=e.childLanes&~r,t.memoizedState=Bl,a}return e=(l=e.child).sibling,a=_s(l,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=r),a.return=t,a.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Fl(e,t){return(t=Vs({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ul(e,t,r,n){return null!==n&&mo(n),$o(t,e.child,null,r),(e=Fl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Gl(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Co(e.return,t,r)}function jl(e,t,r,n,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=a)}function zl(e,t,r){var n=t.pendingProps,a=n.revealOrder,o=n.tail;if(xl(e,t,n.children,r),0!==(2&(n=ui.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Gl(e,r,t);else if(19===e.tag)Gl(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Oa(ui,n),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;null!==r;)null!==(e=r.alternate)&&null===si(e)&&(a=r),r=r.sibling;null===(r=a)?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),jl(t,!1,a,r,o);break;case"backwards":for(r=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===si(e)){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}jl(t,!0,r,null,o);break;case"together":jl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wl(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hl(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Vu|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(r=_s(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=_s(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Kl(e,t){if(!ao)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Xl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=14680064&a.subtreeFlags,n|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function ql(e,t,r){var n=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xl(t),null;case 1:case 17:return Da(t.type)&&ka(),Xl(t),null;case 3:return n=t.stateNode,oi(),Pa(Ia),Pa(Ea),fi(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(fo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ls(oo),oo=null))),kl(e,t),Xl(t),null;case 5:li(t);var a=ni(ri.current);if(r=t.type,null!==e&&null!=t.stateNode)_l(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(o(166));return Xl(t),null}if(e=ni(ei.current),fo(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[da]=t,n[pa]=i,e=0!==(1&t.mode),r){case"dialog":Fn("cancel",n),Fn("close",n);break;case"iframe":case"object":case"embed":Fn("load",n);break;case"video":case"audio":for(a=0;a<Ln.length;a++)Fn(Ln[a],n);break;case"source":Fn("error",n);break;case"img":case"image":case"link":Fn("error",n),Fn("load",n);break;case"details":Fn("toggle",n);break;case"input":Q(n,i),Fn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Fn("invalid",n);break;case"textarea":ae(n,i),Fn("invalid",n)}for(var u in ye(r,i),a=null,i)if(i.hasOwnProperty(u)){var s=i[u];"children"===u?"string"===typeof s?n.textContent!==s&&(!0!==i.suppressHydrationWarning&&Zn(n.textContent,s,e),a=["children",s]):"number"===typeof s&&n.textContent!==""+s&&(!0!==i.suppressHydrationWarning&&Zn(n.textContent,s,e),a=["children",""+s]):l.hasOwnProperty(u)&&null!=s&&"onScroll"===u&&Fn("scroll",n)}switch(r){case"input":K(n),J(n,i,!0);break;case"textarea":K(n),ie(n);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(n.onclick=Jn)}n=a,t.updateQueue=n,null!==n&&(t.flags|=4)}else{u=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=u.createElement(r,{is:n.is}):(e=u.createElement(r),"select"===r&&(u=e,n.multiple?u.multiple=!0:n.size&&(u.size=n.size))):e=u.createElementNS(e,r),e[da]=t,e[pa]=n,Dl(e,t,!1,!1),t.stateNode=e;e:{switch(u=be(r,n),r){case"dialog":Fn("cancel",e),Fn("close",e),a=n;break;case"iframe":case"object":case"embed":Fn("load",e),a=n;break;case"video":case"audio":for(a=0;a<Ln.length;a++)Fn(Ln[a],e);a=n;break;case"source":Fn("error",e),a=n;break;case"img":case"image":case"link":Fn("error",e),Fn("load",e),a=n;break;case"details":Fn("toggle",e),a=n;break;case"input":Q(e,n),a=Y(e,n),Fn("invalid",e);break;case"option":default:a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=V({},n,{value:void 0}),Fn("invalid",e);break;case"textarea":ae(e,n),a=ne(e,n),Fn("invalid",e)}for(i in ye(r,a),s=a)if(s.hasOwnProperty(i)){var c=s[i];"style"===i?ve(e,c):"dangerouslySetInnerHTML"===i?null!=(c=c?c.__html:void 0)&&fe(e,c):"children"===i?"string"===typeof c?("textarea"!==r||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(l.hasOwnProperty(i)?null!=c&&"onScroll"===i&&Fn("scroll",e):null!=c&&b(e,i,c,u))}switch(r){case"input":K(e),J(e,n,!1);break;case"textarea":K(e),ie(e);break;case"option":null!=n.value&&e.setAttribute("value",""+W(n.value));break;case"select":e.multiple=!!n.multiple,null!=(i=n.value)?re(e,!!n.multiple,i,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Jn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xl(t),null;case 6:if(e&&null!=t.stateNode)Ll(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(o(166));if(r=ni(ri.current),ni(ei.current),fo(t)){if(n=t.stateNode,r=t.memoizedProps,n[da]=t,(i=n.nodeValue!==r)&&null!==(e=ro))switch(e.tag){case 3:Zn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zn(n.nodeValue,r,0!==(1&e.mode))}i&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[da]=t,t.stateNode=n}return Xl(t),null;case 13:if(Pa(ui),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ao&&null!==no&&0!==(1&t.mode)&&0===(128&t.flags))po(),go(),t.flags|=98560,i=!1;else if(i=fo(t),null!==n&&null!==n.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[da]=t}else go(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xl(t),i=!1}else null!==oo&&(ls(oo),oo=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ui.current)?0===Lu&&(Lu=3):vs())),null!==t.updateQueue&&(t.flags|=4),Xl(t),null);case 4:return oi(),kl(e,t),null===e&&jn(t.stateNode.containerInfo),Xl(t),null;case 10:return wo(t.type._context),Xl(t),null;case 19:if(Pa(ui),null===(i=t.memoizedState))return Xl(t),null;if(n=0!==(128&t.flags),null===(u=i.rendering))if(n)Kl(i,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=si(e))){for(t.flags|=128,Kl(i,!1),null!==(n=u.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(i=r).flags&=14680066,null===(u=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=u.childLanes,i.lanes=u.lanes,i.child=u.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=u.memoizedProps,i.memoizedState=u.memoizedState,i.updateQueue=u.updateQueue,i.type=u.type,e=u.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Oa(ui,1&ui.current|2),t.child}e=e.sibling}null!==i.tail&&$e()>zu&&(t.flags|=128,n=!0,Kl(i,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=si(u))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Kl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!u.alternate&&!ao)return Xl(t),null}else 2*$e()-i.renderingStartTime>zu&&1073741824!==r&&(t.flags|=128,n=!0,Kl(i,!1),t.lanes=4194304);i.isBackwards?(u.sibling=t.child,t.child=u):(null!==(r=i.last)?r.sibling=u:t.child=u,i.last=u)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=$e(),t.sibling=null,r=ui.current,Oa(ui,n?1&r|2:1&r),t):(Xl(t),null);case 22:case 23:return ds(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&ku)&&(Xl(t),6&t.subtreeFlags&&(t.flags|=8192)):Xl(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Yl(e,t){switch(to(t),t.tag){case 1:return Da(t.type)&&ka(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oi(),Pa(Ia),Pa(Ea),fi(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return li(t),null;case 13:if(Pa(ui),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));go()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Pa(ui),null;case 4:return oi(),null;case 10:return wo(t.type._context),null;case 22:case 23:return ds(),null;default:return null}}Dl=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},kl=function(){},_l=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,ni(ei.current);var o,i=null;switch(r){case"input":a=Y(e,a),n=Y(e,n),i=[];break;case"select":a=V({},a,{value:void 0}),n=V({},n,{value:void 0}),i=[];break;case"textarea":a=ne(e,a),n=ne(e,n),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof n.onClick&&(e.onclick=Jn)}for(c in ye(r,n),r=null,a)if(!n.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var u=a[c];for(o in u)u.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(l.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var s=n[c];if(u=null!=a?a[c]:void 0,n.hasOwnProperty(c)&&s!==u&&(null!=s||null!=u))if("style"===c)if(u){for(o in u)!u.hasOwnProperty(o)||s&&s.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in s)s.hasOwnProperty(o)&&u[o]!==s[o]&&(r||(r={}),r[o]=s[o])}else r||(i||(i=[]),i.push(c,r)),r=s;else"dangerouslySetInnerHTML"===c?(s=s?s.__html:void 0,u=u?u.__html:void 0,null!=s&&u!==s&&(i=i||[]).push(c,s)):"children"===c?"string"!==typeof s&&"number"!==typeof s||(i=i||[]).push(c,""+s):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(l.hasOwnProperty(c)?(null!=s&&"onScroll"===c&&Fn("scroll",e),i||u===s||(i=[])):(i=i||[]).push(c,s))}r&&(i=i||[]).push("style",r);var c=i;(t.updateQueue=c)&&(t.flags|=4)}},Ll=function(e,t,r,n){r!==n&&(t.flags|=4)};var Ql=!1,$l=!1,Zl="function"===typeof WeakSet?WeakSet:Set,Jl=null;function eu(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Ps(e,t,n)}else r.current=null}function tu(e,t,r){try{r()}catch(n){Ps(e,t,n)}}var ru=!1;function nu(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var a=n=n.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,void 0!==o&&tu(t,r,o)}a=a.next}while(a!==n)}}function au(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ou(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function iu(e){var t=e.alternate;null!==t&&(e.alternate=null,iu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[da],delete t[pa],delete t[ma],delete t[va],delete t[ha])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lu(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||lu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function su(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Jn));else if(4!==n&&null!==(e=e.child))for(su(e,t,r),e=e.sibling;null!==e;)su(e,t,r),e=e.sibling}function cu(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cu(e,t,r),e=e.sibling;null!==e;)cu(e,t,r),e=e.sibling}var fu=null,du=!1;function pu(e,t,r){for(r=r.child;null!==r;)gu(e,t,r),r=r.sibling}function gu(e,t,r){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(at,r)}catch(l){}switch(r.tag){case 5:$l||eu(r,t);case 6:var n=fu,a=du;fu=null,pu(e,t,r),du=a,null!==(fu=n)&&(du?(e=fu,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):fu.removeChild(r.stateNode));break;case 18:null!==fu&&(du?(e=fu,r=r.stateNode,8===e.nodeType?ua(e.parentNode,r):1===e.nodeType&&ua(e,r),jt(e)):ua(fu,r.stateNode));break;case 4:n=fu,a=du,fu=r.stateNode.containerInfo,du=!0,pu(e,t,r),fu=n,du=a;break;case 0:case 11:case 14:case 15:if(!$l&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){a=n=n.next;do{var o=a,i=o.destroy;o=o.tag,void 0!==i&&(0!==(2&o)||0!==(4&o))&&tu(r,t,i),a=a.next}while(a!==n)}pu(e,t,r);break;case 1:if(!$l&&(eu(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ps(r,t,l)}pu(e,t,r);break;case 21:pu(e,t,r);break;case 22:1&r.mode?($l=(n=$l)||null!==r.memoizedState,pu(e,t,r),$l=n):pu(e,t,r);break;default:pu(e,t,r)}}function mu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Zl),t.forEach((function(t){var n=Is.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function vu(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,l=t,u=l;e:for(;null!==u;){switch(u.tag){case 5:fu=u.stateNode,du=!1;break e;case 3:case 4:fu=u.stateNode.containerInfo,du=!0;break e}u=u.return}if(null===fu)throw Error(o(160));gu(i,l,a),fu=null,du=!1;var s=a.alternate;null!==s&&(s.return=null),a.return=null}catch(c){Ps(a,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)hu(t,e),t=t.sibling}function hu(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),yu(e),4&n){try{nu(3,e,e.return),au(3,e)}catch(v){Ps(e,e.return,v)}try{nu(5,e,e.return)}catch(v){Ps(e,e.return,v)}}break;case 1:vu(t,e),yu(e),512&n&&null!==r&&eu(r,r.return);break;case 5:if(vu(t,e),yu(e),512&n&&null!==r&&eu(r,r.return),32&e.flags){var a=e.stateNode;try{de(a,"")}catch(v){Ps(e,e.return,v)}}if(4&n&&null!=(a=e.stateNode)){var i=e.memoizedProps,l=null!==r?r.memoizedProps:i,u=e.type,s=e.updateQueue;if(e.updateQueue=null,null!==s)try{"input"===u&&"radio"===i.type&&null!=i.name&&$(a,i),be(u,l);var c=be(u,i);for(l=0;l<s.length;l+=2){var f=s[l],d=s[l+1];"style"===f?ve(a,d):"dangerouslySetInnerHTML"===f?fe(a,d):"children"===f?de(a,d):b(a,f,d,c)}switch(u){case"input":Z(a,i);break;case"textarea":oe(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var g=i.value;null!=g?re(a,!!i.multiple,g,!1):p!==!!i.multiple&&(null!=i.defaultValue?re(a,!!i.multiple,i.defaultValue,!0):re(a,!!i.multiple,i.multiple?[]:"",!1))}a[pa]=i}catch(v){Ps(e,e.return,v)}}break;case 6:if(vu(t,e),yu(e),4&n){if(null===e.stateNode)throw Error(o(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(v){Ps(e,e.return,v)}}break;case 3:if(vu(t,e),yu(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(v){Ps(e,e.return,v)}break;case 4:default:vu(t,e),yu(e);break;case 13:vu(t,e),yu(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(ju=$e())),4&n&&mu(e);break;case 22:if(f=null!==r&&null!==r.memoizedState,1&e.mode?($l=(c=$l)||f,vu(t,e),$l=c):vu(t,e),yu(e),8192&n){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!f&&0!==(1&e.mode))for(Jl=e,f=e.child;null!==f;){for(d=Jl=f;null!==Jl;){switch(g=(p=Jl).child,p.tag){case 0:case 11:case 14:case 15:nu(4,p,p.return);break;case 1:eu(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){n=p,r=p.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Ps(n,r,v)}}break;case 5:eu(p,p.return);break;case 22:if(null!==p.memoizedState){Su(d);continue}}null!==g?(g.return=p,Jl=g):Su(d)}f=f.sibling}e:for(f=null,d=e;;){if(5===d.tag){if(null===f){f=d;try{a=d.stateNode,c?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(u=d.stateNode,l=void 0!==(s=d.memoizedProps.style)&&null!==s&&s.hasOwnProperty("display")?s.display:null,u.style.display=me("display",l))}catch(v){Ps(e,e.return,v)}}}else if(6===d.tag){if(null===f)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Ps(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:vu(t,e),yu(e),4&n&&mu(e);case 21:}}function yu(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(lu(r)){var n=r;break e}r=r.return}throw Error(o(160))}switch(n.tag){case 5:var a=n.stateNode;32&n.flags&&(de(a,""),n.flags&=-33),cu(e,uu(e),a);break;case 3:case 4:var i=n.stateNode.containerInfo;su(e,uu(e),i);break;default:throw Error(o(161))}}catch(l){Ps(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bu(e,t,r){Jl=e,Tu(e,t,r)}function Tu(e,t,r){for(var n=0!==(1&e.mode);null!==Jl;){var a=Jl,o=a.child;if(22===a.tag&&n){var i=null!==a.memoizedState||Ql;if(!i){var l=a.alternate,u=null!==l&&null!==l.memoizedState||$l;l=Ql;var s=$l;if(Ql=i,($l=u)&&!s)for(Jl=a;null!==Jl;)u=(i=Jl).child,22===i.tag&&null!==i.memoizedState?wu(a):null!==u?(u.return=i,Jl=u):wu(a);for(;null!==o;)Jl=o,Tu(o,t,r),o=o.sibling;Jl=a,Ql=l,$l=s}xu(e)}else 0!==(8772&a.subtreeFlags)&&null!==o?(o.return=a,Jl=o):xu(e)}}function xu(e){for(;null!==Jl;){var t=Jl;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$l||au(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!$l)if(null===r)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:ho(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Fo(t,i,n);break;case 3:var l=t.updateQueue;if(null!==l){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Fo(t,l,r)}break;case 5:var u=t.stateNode;if(null===r&&4&t.flags){r=u;var s=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&r.focus();break;case"img":s.src&&(r.src=s.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var f=c.memoizedState;if(null!==f){var d=f.dehydrated;null!==d&&jt(d)}}}break;default:throw Error(o(163))}$l||512&t.flags&&ou(t)}catch(p){Ps(t,t.return,p)}}if(t===e){Jl=null;break}if(null!==(r=t.sibling)){r.return=t.return,Jl=r;break}Jl=t.return}}function Su(e){for(;null!==Jl;){var t=Jl;if(t===e){Jl=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Jl=r;break}Jl=t.return}}function wu(e){for(;null!==Jl;){var t=Jl;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{au(4,t)}catch(u){Ps(t,r,u)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var a=t.return;try{n.componentDidMount()}catch(u){Ps(t,a,u)}}var o=t.return;try{ou(t)}catch(u){Ps(t,o,u)}break;case 5:var i=t.return;try{ou(t)}catch(u){Ps(t,i,u)}}}catch(u){Ps(t,t.return,u)}if(t===e){Jl=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Jl=l;break}Jl=t.return}}var Cu,Pu=Math.ceil,Ou=T.ReactCurrentDispatcher,Au=T.ReactCurrentOwner,Eu=T.ReactCurrentBatchConfig,Iu=0,Ru=null,Mu=null,Du=0,ku=0,_u=Ca(0),Lu=0,Bu=null,Vu=0,Nu=0,Fu=0,Uu=null,Gu=null,ju=0,zu=1/0,Wu=null,Hu=!1,Ku=null,Xu=null,qu=!1,Yu=null,Qu=0,$u=0,Zu=null,Ju=-1,es=0;function ts(){return 0!==(6&Iu)?$e():-1!==Ju?Ju:Ju=$e()}function rs(e){return 0===(1&e.mode)?1:0!==(2&Iu)&&0!==Du?Du&-Du:null!==vo.transition?(0===es&&(es=mt()),es):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function ns(e,t,r,n){if(50<$u)throw $u=0,Zu=null,Error(o(185));ht(e,r,n),0!==(2&Iu)&&e===Ru||(e===Ru&&(0===(2&Iu)&&(Nu|=r),4===Lu&&us(e,Du)),as(e,n),1===r&&0===Iu&&0===(1&t.mode)&&(zu=$e()+500,Fa&&ja()))}function as(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-it(o),l=1<<i,u=a[i];-1===u?0!==(l&r)&&0===(l&n)||(a[i]=pt(l,t)):u<=t&&(e.expiredLanes|=l),o&=~l}}(e,t);var n=dt(e,e===Ru?Du:0);if(0===n)null!==r&&qe(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&qe(r),1===t)0===e.tag?function(e){Fa=!0,Ga(e)}(ss.bind(null,e)):Ga(ss.bind(null,e)),ia((function(){0===(6&Iu)&&ja()})),r=null;else{switch(Tt(n)){case 1:r=Je;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Rs(r,os.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function os(e,t){if(Ju=-1,es=0,0!==(6&Iu))throw Error(o(327));var r=e.callbackNode;if(ws()&&e.callbackNode!==r)return null;var n=dt(e,e===Ru?Du:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=hs(e,n);else{t=n;var a=Iu;Iu|=2;var i=ms();for(Ru===e&&Du===t||(Wu=null,zu=$e()+500,ps(e,t));;)try{bs();break}catch(u){gs(e,u)}So(),Ou.current=i,Iu=a,null!==Mu?t=0:(Ru=null,Du=0,t=Lu)}if(0!==t){if(2===t&&(0!==(a=gt(e))&&(n=a,t=is(e,a))),1===t)throw r=Bu,ps(e,0),us(e,n),as(e,$e()),r;if(6===t)us(e,n);else{if(a=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var a=r[n],o=a.getSnapshot;a=a.value;try{if(!ln(o(),a))return!1}catch(l){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=hs(e,n))&&(0!==(i=gt(e))&&(n=i,t=is(e,i))),1===t))throw r=Bu,ps(e,0),us(e,n),as(e,$e()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(o(345));case 2:case 5:Ss(e,Gu,Wu);break;case 3:if(us(e,n),(130023424&n)===n&&10<(t=ju+500-$e())){if(0!==dt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){ts(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=na(Ss.bind(null,e,Gu,Wu),t);break}Ss(e,Gu,Wu);break;case 4:if(us(e,n),(4194240&n)===n)break;for(t=e.eventTimes,a=-1;0<n;){var l=31-it(n);i=1<<l,(l=t[l])>a&&(a=l),n&=~i}if(n=a,10<(n=(120>(n=$e()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Pu(n/1960))-n)){e.timeoutHandle=na(Ss.bind(null,e,Gu,Wu),n);break}Ss(e,Gu,Wu);break;default:throw Error(o(329))}}}return as(e,$e()),e.callbackNode===r?os.bind(null,e):null}function is(e,t){var r=Uu;return e.current.memoizedState.isDehydrated&&(ps(e,t).flags|=256),2!==(e=hs(e,t))&&(t=Gu,Gu=r,null!==t&&ls(t)),e}function ls(e){null===Gu?Gu=e:Gu.push.apply(Gu,e)}function us(e,t){for(t&=~Fu,t&=~Nu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-it(t),n=1<<r;e[r]=-1,t&=~n}}function ss(e){if(0!==(6&Iu))throw Error(o(327));ws();var t=dt(e,0);if(0===(1&t))return as(e,$e()),null;var r=hs(e,t);if(0!==e.tag&&2===r){var n=gt(e);0!==n&&(t=n,r=is(e,n))}if(1===r)throw r=Bu,ps(e,0),us(e,t),as(e,$e()),r;if(6===r)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ss(e,Gu,Wu),as(e,$e()),null}function cs(e,t){var r=Iu;Iu|=1;try{return e(t)}finally{0===(Iu=r)&&(zu=$e()+500,Fa&&ja())}}function fs(e){null!==Yu&&0===Yu.tag&&0===(6&Iu)&&ws();var t=Iu;Iu|=1;var r=Eu.transition,n=bt;try{if(Eu.transition=null,bt=1,e)return e()}finally{bt=n,Eu.transition=r,0===(6&(Iu=t))&&ja()}}function ds(){ku=_u.current,Pa(_u)}function ps(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,aa(r)),null!==Mu)for(r=Mu.return;null!==r;){var n=r;switch(to(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&ka();break;case 3:oi(),Pa(Ia),Pa(Ea),fi();break;case 5:li(n);break;case 4:oi();break;case 13:case 19:Pa(ui);break;case 10:wo(n.type._context);break;case 22:case 23:ds()}r=r.return}if(Ru=e,Mu=e=_s(e.current,null),Du=ku=t,Lu=0,Bu=null,Fu=Nu=Vu=0,Gu=Uu=null,null!==Ao){for(t=0;t<Ao.length;t++)if(null!==(n=(r=Ao[t]).interleaved)){r.interleaved=null;var a=n.next,o=r.pending;if(null!==o){var i=o.next;o.next=a,n.next=i}r.pending=n}Ao=null}return e}function gs(e,t){for(;;){var r=Mu;try{if(So(),di.current=il,yi){for(var n=mi.memoizedState;null!==n;){var a=n.queue;null!==a&&(a.pending=null),n=n.next}yi=!1}if(gi=0,hi=vi=mi=null,bi=!1,Ti=0,Au.current=null,null===r||null===r.return){Lu=1,Bu=t,Mu=null;break}e:{var i=e,l=r.return,u=r,s=t;if(t=Du,u.flags|=32768,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s,f=u,d=f.tag;if(0===(1&f.mode)&&(0===d||11===d||15===d)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var g=hl(l);if(null!==g){g.flags&=-257,yl(g,l,u,0,t),1&g.mode&&vl(i,c,t),s=c;var m=(t=g).updateQueue;if(null===m){var v=new Set;v.add(s),t.updateQueue=v}else m.add(s);break e}if(0===(1&t)){vl(i,c,t),vs();break e}s=Error(o(426))}else if(ao&&1&u.mode){var h=hl(l);if(null!==h){0===(65536&h.flags)&&(h.flags|=256),yl(h,l,u,0,t),mo(cl(s,u));break e}}i=s=cl(s,u),4!==Lu&&(Lu=2),null===Uu?Uu=[i]:Uu.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Vo(i,gl(0,s,t));break e;case 1:u=s;var y=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Xu||!Xu.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t,Vo(i,ml(i,u,t));break e}}i=i.return}while(null!==i)}xs(r)}catch(T){t=T,Mu===r&&null!==r&&(Mu=r=r.return);continue}break}}function ms(){var e=Ou.current;return Ou.current=il,null===e?il:e}function vs(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Ru||0===(268435455&Vu)&&0===(268435455&Nu)||us(Ru,Du)}function hs(e,t){var r=Iu;Iu|=2;var n=ms();for(Ru===e&&Du===t||(Wu=null,ps(e,t));;)try{ys();break}catch(a){gs(e,a)}if(So(),Iu=r,Ou.current=n,null!==Mu)throw Error(o(261));return Ru=null,Du=0,Lu}function ys(){for(;null!==Mu;)Ts(Mu)}function bs(){for(;null!==Mu&&!Ye();)Ts(Mu)}function Ts(e){var t=Cu(e.alternate,e,ku);e.memoizedProps=e.pendingProps,null===t?xs(e):Mu=t,Au.current=null}function xs(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=ql(r,t,ku)))return void(Mu=r)}else{if(null!==(r=Yl(r,t)))return r.flags&=32767,void(Mu=r);if(null===e)return Lu=6,void(Mu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Mu=t);Mu=t=e}while(null!==t);0===Lu&&(Lu=5)}function Ss(e,t,r){var n=bt,a=Eu.transition;try{Eu.transition=null,bt=1,function(e,t,r,n){do{ws()}while(null!==Yu);if(0!==(6&Iu))throw Error(o(327));r=e.finishedWork;var a=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-it(r),o=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~o}}(e,i),e===Ru&&(Mu=Ru=null,Du=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||qu||(qu=!0,Rs(tt,(function(){return ws(),null}))),i=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||i){i=Eu.transition,Eu.transition=null;var l=bt;bt=1;var u=Iu;Iu|=4,Au.current=null,function(e,t){if(ea=Wt,pn(e=dn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch(x){r=null;break e}var l=0,u=-1,s=-1,c=0,f=0,d=e,p=null;t:for(;;){for(var g;d!==r||0!==a&&3!==d.nodeType||(u=l+a),d!==i||0!==n&&3!==d.nodeType||(s=l+n),3===d.nodeType&&(l+=d.nodeValue.length),null!==(g=d.firstChild);)p=d,d=g;for(;;){if(d===e)break t;if(p===r&&++c===a&&(u=l),p===i&&++f===n&&(s=l),null!==(g=d.nextSibling))break;p=(d=p).parentNode}d=g}r=-1===u||-1===s?null:{start:u,end:s}}else r=null}r=r||{start:0,end:0}}else r=null;for(ta={focusedElem:e,selectionRange:r},Wt=!1,Jl=t;null!==Jl;)if(e=(t=Jl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jl=e;else for(;null!==Jl;){t=Jl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,h=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:ho(t.type,v),h);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var T=t.stateNode.containerInfo;1===T.nodeType?T.textContent="":9===T.nodeType&&T.documentElement&&T.removeChild(T.documentElement);break;default:throw Error(o(163))}}catch(x){Ps(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Jl=e;break}Jl=t.return}m=ru,ru=!1}(e,r),hu(r,e),gn(ta),Wt=!!ea,ta=ea=null,e.current=r,bu(r,e,a),Qe(),Iu=u,bt=l,Eu.transition=i}else e.current=r;if(qu&&(qu=!1,Yu=e,Qu=a),i=e.pendingLanes,0===i&&(Xu=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),as(e,$e()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Hu)throw Hu=!1,e=Ku,Ku=null,e;0!==(1&Qu)&&0!==e.tag&&ws(),i=e.pendingLanes,0!==(1&i)?e===Zu?$u++:($u=0,Zu=e):$u=0,ja()}(e,t,r,n)}finally{Eu.transition=a,bt=n}return null}function ws(){if(null!==Yu){var e=Tt(Qu),t=Eu.transition,r=bt;try{if(Eu.transition=null,bt=16>e?16:e,null===Yu)var n=!1;else{if(e=Yu,Yu=null,Qu=0,0!==(6&Iu))throw Error(o(331));var a=Iu;for(Iu|=4,Jl=e.current;null!==Jl;){var i=Jl,l=i.child;if(0!==(16&Jl.flags)){var u=i.deletions;if(null!==u){for(var s=0;s<u.length;s++){var c=u[s];for(Jl=c;null!==Jl;){var f=Jl;switch(f.tag){case 0:case 11:case 15:nu(8,f,i)}var d=f.child;if(null!==d)d.return=f,Jl=d;else for(;null!==Jl;){var p=(f=Jl).sibling,g=f.return;if(iu(f),f===c){Jl=null;break}if(null!==p){p.return=g,Jl=p;break}Jl=g}}}var m=i.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var h=v.sibling;v.sibling=null,v=h}while(null!==v)}}Jl=i}}if(0!==(2064&i.subtreeFlags)&&null!==l)l.return=i,Jl=l;else e:for(;null!==Jl;){if(0!==(2048&(i=Jl).flags))switch(i.tag){case 0:case 11:case 15:nu(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Jl=y;break e}Jl=i.return}}var b=e.current;for(Jl=b;null!==Jl;){var T=(l=Jl).child;if(0!==(2064&l.subtreeFlags)&&null!==T)T.return=l,Jl=T;else e:for(l=b;null!==Jl;){if(0!==(2048&(u=Jl).flags))try{switch(u.tag){case 0:case 11:case 15:au(9,u)}}catch(S){Ps(u,u.return,S)}if(u===l){Jl=null;break e}var x=u.sibling;if(null!==x){x.return=u.return,Jl=x;break e}Jl=u.return}}if(Iu=a,ja(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(at,e)}catch(S){}n=!0}return n}finally{bt=r,Eu.transition=t}}return!1}function Cs(e,t,r){e=Lo(e,t=gl(0,t=cl(r,t),1),1),t=ts(),null!==e&&(ht(e,1,t),as(e,t))}function Ps(e,t,r){if(3===e.tag)Cs(e,e,r);else for(;null!==t;){if(3===t.tag){Cs(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Xu||!Xu.has(n))){t=Lo(t,e=ml(t,e=cl(r,e),1),1),e=ts(),null!==t&&(ht(t,1,e),as(t,e));break}}t=t.return}}function Os(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ts(),e.pingedLanes|=e.suspendedLanes&r,Ru===e&&(Du&r)===r&&(4===Lu||3===Lu&&(130023424&Du)===Du&&500>$e()-ju?ps(e,0):Fu|=r),as(e,t)}function As(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var r=ts();null!==(e=Ro(e,t))&&(ht(e,t,r),as(e,r))}function Es(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),As(e,r)}function Is(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(o(314))}null!==n&&n.delete(t),As(e,r)}function Rs(e,t){return Xe(e,t)}function Ms(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ds(e,t,r,n){return new Ms(e,t,r,n)}function ks(e){return!(!(e=e.prototype)||!e.isReactComponent)}function _s(e,t){var r=e.alternate;return null===r?((r=Ds(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ls(e,t,r,n,a,i){var l=2;if(n=e,"function"===typeof e)ks(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case w:return Bs(r.children,a,i,t);case C:l=8,a|=8;break;case P:return(e=Ds(12,r,t,2|a)).elementType=P,e.lanes=i,e;case I:return(e=Ds(13,r,t,a)).elementType=I,e.lanes=i,e;case R:return(e=Ds(19,r,t,a)).elementType=R,e.lanes=i,e;case k:return Vs(r,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case O:l=10;break e;case A:l=9;break e;case E:l=11;break e;case M:l=14;break e;case D:l=16,n=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ds(l,r,t,a)).elementType=e,t.type=n,t.lanes=i,t}function Bs(e,t,r,n){return(e=Ds(7,e,n,t)).lanes=r,e}function Vs(e,t,r,n){return(e=Ds(22,e,n,t)).elementType=k,e.lanes=r,e.stateNode={isHidden:!1},e}function Ns(e,t,r){return(e=Ds(6,e,null,t)).lanes=r,e}function Fs(e,t,r){return(t=Ds(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Us(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Gs(e,t,r,n,a,o,i,l,u){return e=new Us(e,t,r,l,u),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ds(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Do(o),e}function js(e){if(!e)return Aa;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Da(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var r=e.type;if(Da(r))return La(e,r,t)}return t}function zs(e,t,r,n,a,o,i,l,u){return(e=Gs(r,n,!0,e,0,o,0,l,u)).context=js(null),r=e.current,(o=_o(n=ts(),a=rs(r))).callback=void 0!==t&&null!==t?t:null,Lo(r,o,a),e.current.lanes=a,ht(e,a,n),as(e,n),e}function Ws(e,t,r,n){var a=t.current,o=ts(),i=rs(a);return r=js(r),null===t.context?t.context=r:t.pendingContext=r,(t=_o(o,i)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Lo(a,t,i))&&(ns(e,a,i,o),Bo(e,a,i)),i}function Hs(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ks(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Xs(e,t){Ks(e,t),(e=e.alternate)&&Ks(e,t)}Cu=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ia.current)Tl=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return Tl=!1,function(e,t,r){switch(t.tag){case 3:Rl(t),go();break;case 5:ii(t);break;case 1:Da(t.type)&&Ba(t);break;case 4:ai(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Oa(yo,n._currentValue),n._currentValue=a;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Oa(ui,1&ui.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Nl(e,t,r):(Oa(ui,1&ui.current),null!==(e=Hl(e,t,r))?e.sibling:null);Oa(ui,1&ui.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return zl(e,t,r);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Oa(ui,ui.current),n)break;return null;case 22:case 23:return t.lanes=0,Pl(e,t,r)}return Hl(e,t,r)}(e,t,r);Tl=0!==(131072&e.flags)}else Tl=!1,ao&&0!==(1048576&t.flags)&&Ja(t,Ka,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Wl(e,t),e=t.pendingProps;var a=Ma(t,Ea.current);Po(t,r),a=Ci(null,t,n,e,a,r);var i=Pi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Da(n)?(i=!0,Ba(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Do(t),a.updater=jo,t.stateNode=a,a._reactInternals=t,Ko(t,n,e,r),t=Il(null,t,n,!0,i,r)):(t.tag=0,ao&&i&&eo(t),xl(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Wl(e,t),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"===typeof e)return ks(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===M)return 14}return 2}(n),e=ho(n,e),a){case 0:t=Al(null,t,n,e,r);break e;case 1:t=El(null,t,n,e,r);break e;case 11:t=Sl(null,t,n,e,r);break e;case 14:t=wl(null,t,n,ho(n.type,e),r);break e}throw Error(o(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,Al(e,t,n,a=t.elementType===n?a:ho(n,a),r);case 1:return n=t.type,a=t.pendingProps,El(e,t,n,a=t.elementType===n?a:ho(n,a),r);case 3:e:{if(Rl(t),null===e)throw Error(o(387));n=t.pendingProps,a=(i=t.memoizedState).element,ko(e,t),No(t,n,null,r);var l=t.memoizedState;if(n=l.element,i.isDehydrated){if(i={element:n,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ml(e,t,n,r,a=cl(Error(o(423)),t));break e}if(n!==a){t=Ml(e,t,n,r,a=cl(Error(o(424)),t));break e}for(no=sa(t.stateNode.containerInfo.firstChild),ro=t,ao=!0,oo=null,r=Zo(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(go(),n===a){t=Hl(e,t,r);break e}xl(e,t,n,r)}t=t.child}return t;case 5:return ii(t),null===e&&so(t),n=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,l=a.children,ra(n,a)?l=null:null!==i&&ra(n,i)&&(t.flags|=32),Ol(e,t),xl(e,t,l,r),t.child;case 6:return null===e&&so(t),null;case 13:return Nl(e,t,r);case 4:return ai(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=$o(t,null,n,r):xl(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,Sl(e,t,n,a=t.elementType===n?a:ho(n,a),r);case 7:return xl(e,t,t.pendingProps,r),t.child;case 8:case 12:return xl(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,Oa(yo,n._currentValue),n._currentValue=l,null!==i)if(ln(i.value,l)){if(i.children===a.children&&!Ia.current){t=Hl(e,t,r);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var u=i.dependencies;if(null!==u){l=i.child;for(var s=u.firstContext;null!==s;){if(s.context===n){if(1===i.tag){(s=_o(-1,r&-r)).tag=2;var c=i.updateQueue;if(null!==c){var f=(c=c.shared).pending;null===f?s.next=s:(s.next=f.next,f.next=s),c.pending=s}}i.lanes|=r,null!==(s=i.alternate)&&(s.lanes|=r),Co(i.return,r,t),u.lanes|=r;break}s=s.next}}else if(10===i.tag)l=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(l=i.return))throw Error(o(341));l.lanes|=r,null!==(u=l.alternate)&&(u.lanes|=r),Co(l,r,t),l=i.sibling}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===t){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}xl(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Po(t,r),n=n(a=Oo(a)),t.flags|=1,xl(e,t,n,r),t.child;case 14:return a=ho(n=t.type,t.pendingProps),wl(e,t,n,a=ho(n.type,a),r);case 15:return Cl(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ho(n,a),Wl(e,t),t.tag=1,Da(n)?(e=!0,Ba(t)):e=!1,Po(t,r),Wo(t,n,a),Ko(t,n,a,r),Il(null,t,n,!0,e,r);case 19:return zl(e,t,r);case 22:return Pl(e,t,r)}throw Error(o(156,t.tag))};var qs="function"===typeof reportError?reportError:function(e){console.error(e)};function Ys(e){this._internalRoot=e}function Qs(e){this._internalRoot=e}function $s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zs(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Js(){}function ec(e,t,r,n,a){var o=r._reactRootContainer;if(o){var i=o;if("function"===typeof a){var l=a;a=function(){var e=Hs(i);l.call(e)}}Ws(t,i,e,a)}else i=function(e,t,r,n,a){if(a){if("function"===typeof n){var o=n;n=function(){var e=Hs(i);o.call(e)}}var i=zs(t,n,e,0,null,!1,0,"",Js);return e._reactRootContainer=i,e[ga]=i.current,jn(8===e.nodeType?e.parentNode:e),fs(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof n){var l=n;n=function(){var e=Hs(u);l.call(e)}}var u=Gs(e,0,!1,null,0,!1,0,"",Js);return e._reactRootContainer=u,e[ga]=u.current,jn(8===e.nodeType?e.parentNode:e),fs((function(){Ws(t,u,r,n)})),u}(r,t,e,a,n);return Hs(i)}Qs.prototype.render=Ys.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Ws(e,t,null,null)},Qs.prototype.unmount=Ys.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fs((function(){Ws(null,e,null,null)})),t[ga]=null}},Qs.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var r=0;r<kt.length&&0!==t&&t<kt[r].priority;r++);kt.splice(r,0,e),0===r&&Vt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ft(t.pendingLanes);0!==r&&(yt(t,1|r),as(t,$e()),0===(6&Iu)&&(zu=$e()+500,ja()))}break;case 13:fs((function(){var t=Ro(e,1);if(null!==t){var r=ts();ns(t,e,1,r)}})),Xs(e,1)}},St=function(e){if(13===e.tag){var t=Ro(e,134217728);if(null!==t)ns(t,e,134217728,ts());Xs(e,134217728)}},wt=function(e){if(13===e.tag){var t=rs(e),r=Ro(e,t);if(null!==r)ns(r,e,t,ts());Xs(e,t)}},Ct=function(){return bt},Pt=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}},Se=function(e,t,r){switch(t){case"input":if(Z(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=xa(n);if(!a)throw Error(o(90));X(n),Z(n,a)}}}break;case"textarea":oe(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ee=cs,Ie=fs;var tc={usingClientEntryPoint:!1,Events:[ba,Ta,xa,Oe,Ae,cs]},rc={findFiberByHostInstance:ya,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nc={bundleType:rc.bundleType,version:rc.version,rendererPackageName:rc.rendererPackageName,rendererConfig:rc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:rc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{at=ac.inject(nc),ot=ac}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$s(t))throw Error(o(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!$s(e))throw Error(o(299));var r=!1,n="",a=qs;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=Gs(e,1,!1,null,0,r,0,n,a),e[ga]=t.current,jn(8===e.nodeType?e.parentNode:e),new Ys(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return fs(e)},t.hydrate=function(e,t,r){if(!Zs(t))throw Error(o(200));return ec(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!$s(e))throw Error(o(405));var n=null!=r&&r.hydratedSources||null,a=!1,i="",l=qs;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onRecoverableError&&(l=r.onRecoverableError)),t=zs(t,null,e,1,null!=r?r:null,a,0,i,l),e[ga]=t.current,jn(e),n)for(e=0;e<n.length;e++)a=(a=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Qs(t)},t.render=function(e,t,r){if(!Zs(t))throw Error(o(200));return ec(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Zs(e))throw Error(o(40));return!!e._reactRootContainer&&(fs((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[ga]=null}))})),!0)},t.unstable_batchedUpdates=cs,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Zs(r))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ec(e,t,r,!1,n)},t.version="18.2.0-next-9e3b772b8-20220608"},575:function(e,t,r){"use strict";var n=r(456);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},456:function(e,t,r){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(459)},858:function(e,t,r){"use strict";var n=r(233),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function s(e,t,r){var n,o={},s=null,c=null;for(n in void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(c=t.ref),t)i.call(t,n)&&!u.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:a,type:e,key:s,ref:c,props:o,_owner:l.current}}t.Fragment=o,t.jsx=s,t.jsxs=s},458:function(e,t){"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function h(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||g}function y(){}function b(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||g}h.prototype.isReactComponent={},h.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},h.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=h.prototype;var T=b.prototype=new y;T.constructor=b,m(T,h.prototype),T.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,w={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function P(e,t,n){var a,o={},i=null,l=null;if(null!=t)for(a in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)S.call(t,a)&&!C.hasOwnProperty(a)&&(o[a]=t[a]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var s=Array(u),c=0;c<u;c++)s[c]=arguments[c+2];o.children=s}if(e&&e.defaultProps)for(a in u=e.defaultProps)void 0===o[a]&&(o[a]=u[a]);return{$$typeof:r,type:e,key:i,ref:l,props:o,_owner:w.current}}function O(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var A=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,a,o,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var u=!1;if(null===e)u=!0;else switch(l){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case r:case n:u=!0}}if(u)return i=i(u=e),e=""===o?"."+E(u,0):o,x(i)?(a="",null!=e&&(a=e.replace(A,"$&/")+"/"),I(i,t,a,"",(function(e){return e}))):null!=i&&(O(i)&&(i=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(A,"$&/")+"/")+e)),t.push(i)),1;if(u=0,o=""===o?".":o+":",x(e))for(var s=0;s<e.length;s++){var c=o+E(l=e[s],s);u+=I(l,t,a,c,i)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),s=0;!(l=e.next()).done;)u+=I(l=l.value,t,a,c=o+E(l,s++),i);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function R(e,t,r){if(null==e)return e;var n=[],a=0;return I(e,n,"","",(function(e){return t.call(r,e,a++)})),n}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},k={transition:null},_={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:k,ReactCurrentOwner:w};t.Children={map:R,forEach:function(e,t,r){R(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!O(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=h,t.Fragment=a,t.Profiler=i,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),o=e.key,i=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,l=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(s in t)S.call(t,s)&&!C.hasOwnProperty(s)&&(a[s]=void 0===t[s]&&void 0!==u?u[s]:t[s])}var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){u=Array(s);for(var c=0;c<s;c++)u[c]=arguments[c+2];a.children=u}return{$$typeof:r,type:e.type,key:o,ref:i,props:a,_owner:l}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=P,t.createFactory=function(e){var t=P.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=O,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.transition;k.transition={};try{e()}finally{k.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,r){return D.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,r){return D.current.useReducer(e,t,r)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return D.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return D.current.useTransition()},t.version="18.2.0"},233:function(e,t,r){"use strict";e.exports=r(458)},881:function(e,t,r){"use strict";e.exports=r(858)},427:function(e,t){"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<o(a,t)))break e;e[n]=t,e[r]=a,r=n}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,i=a>>>1;n<i;){var l=2*(n+1)-1,u=e[l],s=l+1,c=e[s];if(0>o(u,r))s<a&&0>o(c,u)?(e[n]=c,e[s]=r,n=s):(e[n]=u,e[l]=r,n=l);else{if(!(s<a&&0>o(c,r)))break e;e[n]=c,e[s]=r,n=s}}}return t}function o(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var s=[],c=[],f=1,d=null,p=3,g=!1,m=!1,v=!1,h="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function T(e){for(var t=n(c);null!==t;){if(null===t.callback)a(c);else{if(!(t.startTime<=e))break;a(c),t.sortIndex=t.expirationTime,r(s,t)}t=n(c)}}function x(e){if(v=!1,T(e),!m)if(null!==n(s))m=!0,k(S);else{var t=n(c);null!==t&&_(x,t.startTime-e)}}function S(e,r){m=!1,v&&(v=!1,y(O),O=-1),g=!0;var o=p;try{for(T(r),d=n(s);null!==d&&(!(d.expirationTime>r)||e&&!I());){var i=d.callback;if("function"===typeof i){d.callback=null,p=d.priorityLevel;var l=i(d.expirationTime<=r);r=t.unstable_now(),"function"===typeof l?d.callback=l:d===n(s)&&a(s),T(r)}else a(s);d=n(s)}if(null!==d)var u=!0;else{var f=n(c);null!==f&&_(x,f.startTime-r),u=!1}return u}finally{d=null,p=o,g=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,C=!1,P=null,O=-1,A=5,E=-1;function I(){return!(t.unstable_now()-E<A)}function R(){if(null!==P){var e=t.unstable_now();E=e;var r=!0;try{r=P(!0,e)}finally{r?w():(C=!1,P=null)}}else C=!1}if("function"===typeof b)w=function(){b(R)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,D=M.port2;M.port1.onmessage=R,w=function(){D.postMessage(null)}}else w=function(){h(R,0)};function k(e){P=e,C||(C=!0,w())}function _(e,r){O=h((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||g||(m=!0,k(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(s)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,a,o){var i=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?i+o:i:o=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:f++,callback:a,priorityLevel:e,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>i?(e.sortIndex=o,r(c,e),null===n(s)&&e===n(c)&&(v?(y(O),O=-1):v=!0,_(x,o-i))):(e.sortIndex=l,r(s,e),m||g||(m=!0,k(S))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},674:function(e,t,r){"use strict";e.exports=r(427)},616:function(e,t,r){var n=r(725),a=r(573),o=r(7),i=r(226),l=r(726),u=r(564),s=r(827);s.alea=n,s.xor128=a,s.xorwow=o,s.xorshift7=i,s.xor4096=l,s.tychei=u,e.exports=s},725:function(e,t,r){var n;!function(e,a,o){function i(e){var t=this,r=function(){var e=4022871197,t=function(t){t=String(t);for(var r=0;r<t.length;r++){var n=.02519603282416938*(e+=t.charCodeAt(r));n-=e=n>>>0,e=(n*=e)>>>0,e+=4294967296*(n-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=r(" "),t.s1=r(" "),t.s2=r(" "),t.s0-=r(e),t.s0<0&&(t.s0+=1),t.s1-=r(e),t.s1<0&&(t.s1+=1),t.s2-=r(e),t.s2<0&&(t.s2+=1),r=null}function l(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var r=new i(e),n=t&&t.state,a=r.next;return a.int32=function(){return 4294967296*r.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,n&&("object"==typeof n&&l(n,r),a.state=function(){return l(r,{})}),a}a&&a.exports?a.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(t,r,t,a))||(a.exports=n):this.alea=u}(0,e=r.nmd(e),r.amdD)},564:function(e,t,r){var n;!function(e,a,o){function i(e){var t=this,r="";t.next=function(){var e=t.b,r=t.c,n=t.d,a=t.a;return e=e<<25^e>>>7^r,r=r-n|0,n=n<<24^n>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^r,t.c=r=r-n|0,t.d=n<<16^r>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):r+=e;for(var n=0;n<r.length+20;n++)t.b^=0|r.charCodeAt(n),t.next()}function l(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var r=new i(e),n=t&&t.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=r.next,a.quick=a,n&&("object"==typeof n&&l(n,r),a.state=function(){return l(r,{})}),a}a&&a.exports?a.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(t,r,t,a))||(a.exports=n):this.tychei=u}(0,e=r.nmd(e),r.amdD)},573:function(e,t,r){var n;!function(e,a,o){function i(e){var t=this,r="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),t.next()}function l(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var r=new i(e),n=t&&t.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=r.next,a.quick=a,n&&("object"==typeof n&&l(n,r),a.state=function(){return l(r,{})}),a}a&&a.exports?a.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(t,r,t,a))||(a.exports=n):this.xor128=u}(0,e=r.nmd(e),r.amdD)},726:function(e,t,r){var n;!function(e,a,o){function i(e){var t=this;t.next=function(){var e,r,n=t.w,a=t.X,o=t.i;return t.w=n=n+1640531527|0,r=a[o+34&127],e=a[o=o+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,r=a[o]=r^e,t.i=o,r+(n^n>>>16)|0},function(e,t){var r,n,a,o,i,l=[],u=128;for(t===(0|t)?(n=t,t=null):(t+="\0",n=0,u=Math.max(u,t.length)),a=0,o=-32;o<u;++o)t&&(n^=t.charCodeAt((o+32)%t.length)),0===o&&(i=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,o>=0&&(i=i+1640531527|0,a=0==(r=l[127&o]^=n+i)?a+1:0);for(a>=128&&(l[127&(t&&t.length||0)]=-1),a=127,o=512;o>0;--o)n=l[a+34&127],r=l[a=a+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,l[a]=n^r;e.w=i,e.X=l,e.i=a}(t,e)}function l(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var r=new i(e),n=t&&t.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=r.next,a.quick=a,n&&(n.X&&l(n,r),a.state=function(){return l(r,{})}),a}a&&a.exports?a.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(t,r,t,a))||(a.exports=n):this.xor4096=u}(0,e=r.nmd(e),r.amdD)},226:function(e,t,r){var n;!function(e,a,o){function i(e){var t=this;t.next=function(){var e,r,n=t.x,a=t.i;return e=n[a],r=(e^=e>>>7)^e<<24,r^=(e=n[a+1&7])^e>>>10,r^=(e=n[a+3&7])^e>>>3,r^=(e=n[a+4&7])^e<<7,e=n[a+7&7],r^=(e^=e<<13)^e<<9,n[a]=r,t.i=a+1&7,r},function(e,t){var r,n=[];if(t===(0|t))n[0]=t;else for(t=""+t,r=0;r<t.length;++r)n[7&r]=n[7&r]<<15^t.charCodeAt(r)+n[r+1&7]<<13;for(;n.length<8;)n.push(0);for(r=0;r<8&&0===n[r];++r);for(8==r?n[7]=-1:n[r],e.x=n,e.i=0,r=256;r>0;--r)e.next()}(t,e)}function l(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var r=new i(e),n=t&&t.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=r.next,a.quick=a,n&&(n.x&&l(n,r),a.state=function(){return l(r,{})}),a}a&&a.exports?a.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(t,r,t,a))||(a.exports=n):this.xorshift7=u}(0,e=r.nmd(e),r.amdD)},7:function(e,t,r){var n;!function(e,a,o){function i(e){var t=this,r="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),n==r.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function l(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var r=new i(e),n=t&&t.state,a=function(){return(r.next()>>>0)/4294967296};return a.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=r.next,a.quick=a,n&&("object"==typeof n&&l(n,r),a.state=function(){return l(r,{})}),a}a&&a.exports?a.exports=u:r.amdD&&r.amdO?void 0===(n=function(){return u}.call(t,r,t,a))||(a.exports=n):this.xorwow=u}(0,e=r.nmd(e),r.amdD)},827:function(e,t,r){var n;!function(a,o,i){var l,u=256,s=i.pow(u,6),c=i.pow(2,52),f=2*c,d=u-1;function p(e,t,r){var n=[],d=h(v((t=1==t?{entropy:!0}:t||{}).entropy?[e,y(o)]:null==e?function(){try{var e;return l&&(e=l.randomBytes)?e=e(u):(e=new Uint8Array(u),(a.crypto||a.msCrypto).getRandomValues(e)),y(e)}catch(n){var t=a.navigator,r=t&&t.plugins;return[+new Date,a,r,a.screen,y(o)]}}():e,3),n),p=new g(n),b=function(){for(var e=p.g(6),t=s,r=0;e<c;)e=(e+r)*u,t*=u,r=p.g(1);for(;e>=f;)e/=2,t/=2,r>>>=1;return(e+r)/t};return b.int32=function(){return 0|p.g(4)},b.quick=function(){return p.g(4)/4294967296},b.double=b,h(y(p.S),o),(t.pass||r||function(e,t,r,n){return n&&(n.S&&m(n,p),e.state=function(){return m(p,{})}),r?(i.random=e,t):e})(b,d,"global"in t?t.global:this==i,t.state)}function g(e){var t,r=e.length,n=this,a=0,o=n.i=n.j=0,i=n.S=[];for(r||(e=[r++]);a<u;)i[a]=a++;for(a=0;a<u;a++)i[a]=i[o=d&o+e[a%r]+(t=i[a])],i[o]=t;(n.g=function(e){for(var t,r=0,a=n.i,o=n.j,i=n.S;e--;)t=i[a=d&a+1],r=r*u+i[d&(i[a]=i[o=d&o+t])+(i[o]=t)];return n.i=a,n.j=o,r})(u)}function m(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function v(e,t){var r,n=[],a=typeof e;if(t&&"object"==a)for(r in e)try{n.push(v(e[r],t-1))}catch(o){}return n.length?n:"string"==a?e:e+"\0"}function h(e,t){for(var r,n=e+"",a=0;a<n.length;)t[d&a]=d&(r^=19*t[d&a])+n.charCodeAt(a++);return y(t)}function y(e){return String.fromCharCode.apply(0,e)}if(h(i.random(),o),e.exports){e.exports=p;try{l=r(42)}catch(b){}}else void 0===(n=function(){return p}.call(t,r,t,e))||(e.exports=n)}("undefined"!==typeof self?self:this,[],Math)},420:function(e){e.exports=function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(e,t){var r=e[0],n=e[1],a=e[2],o=e[3];n=((n+=((a=((a+=((o=((o+=((r=((r+=(n&a|~n&o)+t[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&a)+t[1]-389564586|0)<<12|o>>>20)+r|0)&r|~o&n)+t[2]+606105819|0)<<17|a>>>15)+o|0)&o|~a&r)+t[3]-1044525330|0)<<22|n>>>10)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n&a|~n&o)+t[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&a)+t[5]+1200080426|0)<<12|o>>>20)+r|0)&r|~o&n)+t[6]-1473231341|0)<<17|a>>>15)+o|0)&o|~a&r)+t[7]-45705983|0)<<22|n>>>10)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n&a|~n&o)+t[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&a)+t[9]-1958414417|0)<<12|o>>>20)+r|0)&r|~o&n)+t[10]-42063|0)<<17|a>>>15)+o|0)&o|~a&r)+t[11]-1990404162|0)<<22|n>>>10)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n&a|~n&o)+t[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&a)+t[13]-40341101|0)<<12|o>>>20)+r|0)&r|~o&n)+t[14]-1502002290|0)<<17|a>>>15)+o|0)&o|~a&r)+t[15]+1236535329|0)<<22|n>>>10)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n&o|a&~o)+t[1]-165796510|0)<<5|r>>>27)+n|0)&a|n&~a)+t[6]-1069501632|0)<<9|o>>>23)+r|0)&n|r&~n)+t[11]+643717713|0)<<14|a>>>18)+o|0)&r|o&~r)+t[0]-373897302|0)<<20|n>>>12)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n&o|a&~o)+t[5]-701558691|0)<<5|r>>>27)+n|0)&a|n&~a)+t[10]+38016083|0)<<9|o>>>23)+r|0)&n|r&~n)+t[15]-660478335|0)<<14|a>>>18)+o|0)&r|o&~r)+t[4]-405537848|0)<<20|n>>>12)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n&o|a&~o)+t[9]+568446438|0)<<5|r>>>27)+n|0)&a|n&~a)+t[14]-1019803690|0)<<9|o>>>23)+r|0)&n|r&~n)+t[3]-187363961|0)<<14|a>>>18)+o|0)&r|o&~r)+t[8]+1163531501|0)<<20|n>>>12)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n&o|a&~o)+t[13]-1444681467|0)<<5|r>>>27)+n|0)&a|n&~a)+t[2]-51403784|0)<<9|o>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0)<<14|a>>>18)+o|0)&r|o&~r)+t[12]-1926607734|0)<<20|n>>>12)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n^a^o)+t[5]-378558|0)<<4|r>>>28)+n|0)^n^a)+t[8]-2022574463|0)<<11|o>>>21)+r|0)^r^n)+t[11]+1839030562|0)<<16|a>>>16)+o|0)^o^r)+t[14]-35309556|0)<<23|n>>>9)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n^a^o)+t[1]-1530992060|0)<<4|r>>>28)+n|0)^n^a)+t[4]+1272893353|0)<<11|o>>>21)+r|0)^r^n)+t[7]-155497632|0)<<16|a>>>16)+o|0)^o^r)+t[10]-1094730640|0)<<23|n>>>9)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n^a^o)+t[13]+681279174|0)<<4|r>>>28)+n|0)^n^a)+t[0]-358537222|0)<<11|o>>>21)+r|0)^r^n)+t[3]-722521979|0)<<16|a>>>16)+o|0)^o^r)+t[6]+76029189|0)<<23|n>>>9)+a|0,n=((n+=((a=((a+=((o=((o+=((r=((r+=(n^a^o)+t[9]-640364487|0)<<4|r>>>28)+n|0)^n^a)+t[12]-421815835|0)<<11|o>>>21)+r|0)^r^n)+t[15]+530742520|0)<<16|a>>>16)+o|0)^o^r)+t[2]-995338651|0)<<23|n>>>9)+a|0,n=((n+=((o=((o+=(n^((r=((r+=(a^(n|~o))+t[0]-198630844|0)<<6|r>>>26)+n|0)|~a))+t[7]+1126891415|0)<<10|o>>>22)+r|0)^((a=((a+=(r^(o|~n))+t[14]-1416354905|0)<<15|a>>>17)+o|0)|~r))+t[5]-57434055|0)<<21|n>>>11)+a|0,n=((n+=((o=((o+=(n^((r=((r+=(a^(n|~o))+t[12]+1700485571|0)<<6|r>>>26)+n|0)|~a))+t[3]-1894986606|0)<<10|o>>>22)+r|0)^((a=((a+=(r^(o|~n))+t[10]-1051523|0)<<15|a>>>17)+o|0)|~r))+t[1]-2054922799|0)<<21|n>>>11)+a|0,n=((n+=((o=((o+=(n^((r=((r+=(a^(n|~o))+t[8]+1873313359|0)<<6|r>>>26)+n|0)|~a))+t[15]-30611744|0)<<10|o>>>22)+r|0)^((a=((a+=(r^(o|~n))+t[6]-1560198380|0)<<15|a>>>17)+o|0)|~r))+t[13]+1309151649|0)<<21|n>>>11)+a|0,n=((n+=((o=((o+=(n^((r=((r+=(a^(n|~o))+t[4]-145523070|0)<<6|r>>>26)+n|0)|~a))+t[11]-1120210379|0)<<10|o>>>22)+r|0)^((a=((a+=(r^(o|~n))+t[2]+718787259|0)<<15|a>>>17)+o|0)|~r))+t[9]-343485551|0)<<21|n>>>11)+a|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=a+e[2]|0,e[3]=o+e[3]|0}function n(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function a(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r}function o(e){var t,a,o,i,l,u,s=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)r(c,n(e.substring(t-64,t)));for(a=(e=e.substring(t-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<a;t+=1)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(r(c,o),t=0;t<16;t+=1)o[t]=0;return i=(i=8*s).toString(16).match(/(.*?)(.{0,8})$/),l=parseInt(i[2],16),u=parseInt(i[1],16)||0,o[14]=l,o[15]=u,r(c,o),c}function i(e){var t,n,o,i,l,u,s=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s;t+=64)r(c,a(e.subarray(t-64,t)));for(n=(e=t-64<s?e.subarray(t-64):new Uint8Array(0)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)o[t>>2]|=e[t]<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(r(c,o),t=0;t<16;t+=1)o[t]=0;return i=(i=8*s).toString(16).match(/(.*?)(.{0,8})$/),l=parseInt(i[2],16),u=parseInt(i[1],16)||0,o[14]=l,o[15]=u,r(c,o),c}function l(e){var r,n="";for(r=0;r<4;r+=1)n+=t[e>>8*r+4&15]+t[e>>8*r&15];return n}function u(e){var t;for(t=0;t<e.length;t+=1)e[t]=l(e[t]);return e.join("")}function s(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function c(e,t){var r,n=e.length,a=new ArrayBuffer(n),o=new Uint8Array(a);for(r=0;r<n;r+=1)o[r]=e.charCodeAt(r);return t?o:a}function f(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function d(e,t,r){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e)),n.set(new Uint8Array(t),e.byteLength),r?n:n.buffer}function p(e){var t,r=[],n=e.length;for(t=0;t<n-1;t+=2)r.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,r)}function g(){this.reset()}return u(o("hello")),"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(r,n){var a,o,i,l,u=this.byteLength,s=t(r,u),c=u;return n!==e&&(c=t(n,u)),s>c?new ArrayBuffer(0):(a=c-s,o=new ArrayBuffer(a),i=new Uint8Array(o),l=new Uint8Array(this,s,a),i.set(l),o)}}(),g.prototype.append=function(e){return this.appendBinary(s(e)),this},g.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,a=this._buff.length;for(t=64;t<=a;t+=64)r(this._hash,n(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},g.prototype.end=function(e){var t,r,n=this._buff,a=n.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<a;t+=1)o[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(o,a),r=u(this._hash),e&&(r=p(r)),this.reset(),r},g.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},g.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},g.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},g.prototype._finish=function(e,t){var n,a,o,i=t;if(e[i>>2]|=128<<(i%4<<3),i>55)for(r(this._hash,e),i=0;i<16;i+=1)e[i]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(n[2],16),o=parseInt(n[1],16)||0,e[14]=a,e[15]=o,r(this._hash,e)},g.hash=function(e,t){return g.hashBinary(s(e),t)},g.hashBinary=function(e,t){var r=u(o(e));return t?p(r):r},g.ArrayBuffer=function(){this.reset()},g.ArrayBuffer.prototype.append=function(e){var t,n=d(this._buff.buffer,e,!0),o=n.length;for(this._length+=e.byteLength,t=64;t<=o;t+=64)r(this._hash,a(n.subarray(t-64,t)));return this._buff=t-64<o?new Uint8Array(n.buffer.slice(t-64)):new Uint8Array(0),this},g.ArrayBuffer.prototype.end=function(e){var t,r,n=this._buff,a=n.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<a;t+=1)o[t>>2]|=n[t]<<(t%4<<3);return this._finish(o,a),r=u(this._hash),e&&(r=p(r)),this.reset(),r},g.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.ArrayBuffer.prototype.getState=function(){var e=g.prototype.getState.call(this);return e.buff=f(e.buff),e},g.ArrayBuffer.prototype.setState=function(e){return e.buff=c(e.buff,!0),g.prototype.setState.call(this,e)},g.ArrayBuffer.prototype.destroy=g.prototype.destroy,g.ArrayBuffer.prototype._finish=g.prototype._finish,g.ArrayBuffer.hash=function(e,t){var r=u(i(new Uint8Array(e)));return t?p(r):r},g}()},42:function(){}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.amdD=function(){throw new Error("define cannot be used indirect")},r.amdO={},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};r.t=function(n,a){if(1&a&&(n=this(n)),8&a)return n;if("object"===typeof n&&n){if(4&a&&n.__esModule)return n;if(16&a&&"function"===typeof n.then)return n}var o=Object.create(null);r.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&a&&n;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((function(e){i[e]=function(){return n[e]}}));return i.default=function(){return n},r.d(o,i),o}}(),r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r.p="/react-vtk/",function(){"use strict";var e={};r.r(e),r.d(e,{add:function(){return ie},adjoint:function(){return P},clone:function(){return y},copy:function(){return b},create:function(){return h},determinant:function(){return O},equals:function(){return fe},exactEquals:function(){return ce},frob:function(){return oe},fromQuat:function(){return X},fromQuat2:function(){return G},fromRotation:function(){return B},fromRotationTranslation:function(){return U},fromRotationTranslationScale:function(){return H},fromRotationTranslationScaleOrigin:function(){return K},fromScaling:function(){return L},fromTranslation:function(){return _},fromValues:function(){return T},fromXRotation:function(){return V},fromYRotation:function(){return N},fromZRotation:function(){return F},frustum:function(){return q},getRotation:function(){return W},getScaling:function(){return z},getTranslation:function(){return j},identity:function(){return S},invert:function(){return C},lookAt:function(){return re},mul:function(){return de},multiply:function(){return A},multiplyScalar:function(){return ue},multiplyScalarAndAdd:function(){return se},ortho:function(){return ee},orthoNO:function(){return J},orthoZO:function(){return te},perspective:function(){return Q},perspectiveFromFieldOfView:function(){return Z},perspectiveNO:function(){return Y},perspectiveZO:function(){return $},rotate:function(){return R},rotateX:function(){return M},rotateY:function(){return D},rotateZ:function(){return k},scale:function(){return I},set:function(){return x},str:function(){return ae},sub:function(){return pe},subtract:function(){return le},targetTo:function(){return ne},translate:function(){return E},transpose:function(){return w}});var t={};r.r(t),r.d(t,{add:function(){return Ne},adjoint:function(){return we},clone:function(){return ve},copy:function(){return he},create:function(){return ge},determinant:function(){return Ce},equals:function(){return ze},exactEquals:function(){return je},frob:function(){return Ve},fromMat2d:function(){return De},fromMat4:function(){return me},fromQuat:function(){return ke},fromRotation:function(){return Re},fromScaling:function(){return Me},fromTranslation:function(){return Ie},fromValues:function(){return ye},identity:function(){return Te},invert:function(){return Se},mul:function(){return We},multiply:function(){return Pe},multiplyScalar:function(){return Ue},multiplyScalarAndAdd:function(){return Ge},normalFromMat4:function(){return _e},projection:function(){return Le},rotate:function(){return Ae},scale:function(){return Ee},set:function(){return be},str:function(){return Be},sub:function(){return He},subtract:function(){return Fe},translate:function(){return Oe},transpose:function(){return xe}});var n={};r.r(n),r.d(n,{add:function(){return Dr},angle:function(){return un},bezier:function(){return Jr},ceil:function(){return Br},clone:function(){return Ar},copy:function(){return Rr},create:function(){return Or},cross:function(){return Qr},dist:function(){return vn},distance:function(){return zr},div:function(){return mn},divide:function(){return Lr},dot:function(){return Yr},equals:function(){return dn},exactEquals:function(){return fn},floor:function(){return Vr},forEach:function(){return Tn},fromValues:function(){return Ir},hermite:function(){return Zr},inverse:function(){return Xr},len:function(){return yn},length:function(){return Er},lerp:function(){return $r},max:function(){return Fr},min:function(){return Nr},mul:function(){return gn},multiply:function(){return _r},negate:function(){return Kr},normalize:function(){return qr},random:function(){return en},rotateX:function(){return an},rotateY:function(){return on},rotateZ:function(){return ln},round:function(){return Ur},scale:function(){return Gr},scaleAndAdd:function(){return jr},set:function(){return Mr},sqrDist:function(){return hn},sqrLen:function(){return bn},squaredDistance:function(){return Wr},squaredLength:function(){return Hr},str:function(){return cn},sub:function(){return pn},subtract:function(){return kr},transformMat3:function(){return rn},transformMat4:function(){return tn},transformQuat:function(){return nn},zero:function(){return sn}});var a=r(233),o=r.t(a,2),i=r(575);function l(e){if(Array.isArray(e))return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){return l(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],u=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){s=!0,a=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||s(e,t)||c()}var d=1e-6,p="undefined"!==typeof Float32Array?Float32Array:Array,g=Math.random;var m=Math.PI/180;function v(e){return e*m}function h(){var e=new p(16);return p!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function y(e){var t=new p(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function b(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function T(e,t,r,n,a,o,i,l,u,s,c,f,d,g,m,v){var h=new p(16);return h[0]=e,h[1]=t,h[2]=r,h[3]=n,h[4]=a,h[5]=o,h[6]=i,h[7]=l,h[8]=u,h[9]=s,h[10]=c,h[11]=f,h[12]=d,h[13]=g,h[14]=m,h[15]=v,h}function x(e,t,r,n,a,o,i,l,u,s,c,f,d,p,g,m,v){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=o,e[5]=i,e[6]=l,e[7]=u,e[8]=s,e[9]=c,e[10]=f,e[11]=d,e[12]=p,e[13]=g,e[14]=m,e[15]=v,e}function S(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function w(e,t){if(e===t){var r=t[1],n=t[2],a=t[3],o=t[6],i=t[7],l=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=a,e[13]=i,e[14]=l}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function C(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],l=t[5],u=t[6],s=t[7],c=t[8],f=t[9],d=t[10],p=t[11],g=t[12],m=t[13],v=t[14],h=t[15],y=r*l-n*i,b=r*u-a*i,T=r*s-o*i,x=n*u-a*l,S=n*s-o*l,w=a*s-o*u,C=c*m-f*g,P=c*v-d*g,O=c*h-p*g,A=f*v-d*m,E=f*h-p*m,I=d*h-p*v,R=y*I-b*E+T*A+x*O-S*P+w*C;return R?(R=1/R,e[0]=(l*I-u*E+s*A)*R,e[1]=(a*E-n*I-o*A)*R,e[2]=(m*w-v*S+h*x)*R,e[3]=(d*S-f*w-p*x)*R,e[4]=(u*O-i*I-s*P)*R,e[5]=(r*I-a*O+o*P)*R,e[6]=(v*T-g*w-h*b)*R,e[7]=(c*w-d*T+p*b)*R,e[8]=(i*E-l*O+s*C)*R,e[9]=(n*O-r*E-o*C)*R,e[10]=(g*S-m*T+h*y)*R,e[11]=(f*T-c*S-p*y)*R,e[12]=(l*P-i*A-u*C)*R,e[13]=(r*A-n*P+a*C)*R,e[14]=(m*b-g*x-v*y)*R,e[15]=(c*x-f*b+d*y)*R,e):null}function P(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],l=t[5],u=t[6],s=t[7],c=t[8],f=t[9],d=t[10],p=t[11],g=t[12],m=t[13],v=t[14],h=t[15];return e[0]=l*(d*h-p*v)-f*(u*h-s*v)+m*(u*p-s*d),e[1]=-(n*(d*h-p*v)-f*(a*h-o*v)+m*(a*p-o*d)),e[2]=n*(u*h-s*v)-l*(a*h-o*v)+m*(a*s-o*u),e[3]=-(n*(u*p-s*d)-l*(a*p-o*d)+f*(a*s-o*u)),e[4]=-(i*(d*h-p*v)-c*(u*h-s*v)+g*(u*p-s*d)),e[5]=r*(d*h-p*v)-c*(a*h-o*v)+g*(a*p-o*d),e[6]=-(r*(u*h-s*v)-i*(a*h-o*v)+g*(a*s-o*u)),e[7]=r*(u*p-s*d)-i*(a*p-o*d)+c*(a*s-o*u),e[8]=i*(f*h-p*m)-c*(l*h-s*m)+g*(l*p-s*f),e[9]=-(r*(f*h-p*m)-c*(n*h-o*m)+g*(n*p-o*f)),e[10]=r*(l*h-s*m)-i*(n*h-o*m)+g*(n*s-o*l),e[11]=-(r*(l*p-s*f)-i*(n*p-o*f)+c*(n*s-o*l)),e[12]=-(i*(f*v-d*m)-c*(l*v-u*m)+g*(l*d-u*f)),e[13]=r*(f*v-d*m)-c*(n*v-a*m)+g*(n*d-a*f),e[14]=-(r*(l*v-u*m)-i*(n*v-a*m)+g*(n*u-a*l)),e[15]=r*(l*d-u*f)-i*(n*d-a*f)+c*(n*u-a*l),e}function O(e){var t=e[0],r=e[1],n=e[2],a=e[3],o=e[4],i=e[5],l=e[6],u=e[7],s=e[8],c=e[9],f=e[10],d=e[11],p=e[12],g=e[13],m=e[14],v=e[15];return(t*i-r*o)*(f*v-d*m)-(t*l-n*o)*(c*v-d*g)+(t*u-a*o)*(c*m-f*g)+(r*l-n*i)*(s*v-d*p)-(r*u-a*i)*(s*m-f*p)+(n*u-a*l)*(s*g-c*p)}function A(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],l=t[4],u=t[5],s=t[6],c=t[7],f=t[8],d=t[9],p=t[10],g=t[11],m=t[12],v=t[13],h=t[14],y=t[15],b=r[0],T=r[1],x=r[2],S=r[3];return e[0]=b*n+T*l+x*f+S*m,e[1]=b*a+T*u+x*d+S*v,e[2]=b*o+T*s+x*p+S*h,e[3]=b*i+T*c+x*g+S*y,b=r[4],T=r[5],x=r[6],S=r[7],e[4]=b*n+T*l+x*f+S*m,e[5]=b*a+T*u+x*d+S*v,e[6]=b*o+T*s+x*p+S*h,e[7]=b*i+T*c+x*g+S*y,b=r[8],T=r[9],x=r[10],S=r[11],e[8]=b*n+T*l+x*f+S*m,e[9]=b*a+T*u+x*d+S*v,e[10]=b*o+T*s+x*p+S*h,e[11]=b*i+T*c+x*g+S*y,b=r[12],T=r[13],x=r[14],S=r[15],e[12]=b*n+T*l+x*f+S*m,e[13]=b*a+T*u+x*d+S*v,e[14]=b*o+T*s+x*p+S*h,e[15]=b*i+T*c+x*g+S*y,e}function E(e,t,r){var n,a,o,i,l,u,s,c,f,d,p,g,m=r[0],v=r[1],h=r[2];return t===e?(e[12]=t[0]*m+t[4]*v+t[8]*h+t[12],e[13]=t[1]*m+t[5]*v+t[9]*h+t[13],e[14]=t[2]*m+t[6]*v+t[10]*h+t[14],e[15]=t[3]*m+t[7]*v+t[11]*h+t[15]):(n=t[0],a=t[1],o=t[2],i=t[3],l=t[4],u=t[5],s=t[6],c=t[7],f=t[8],d=t[9],p=t[10],g=t[11],e[0]=n,e[1]=a,e[2]=o,e[3]=i,e[4]=l,e[5]=u,e[6]=s,e[7]=c,e[8]=f,e[9]=d,e[10]=p,e[11]=g,e[12]=n*m+l*v+f*h+t[12],e[13]=a*m+u*v+d*h+t[13],e[14]=o*m+s*v+p*h+t[14],e[15]=i*m+c*v+g*h+t[15]),e}function I(e,t,r){var n=r[0],a=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function R(e,t,r,n){var a,o,i,l,u,s,c,f,p,g,m,v,h,y,b,T,x,S,w,C,P,O,A,E,I=n[0],R=n[1],M=n[2],D=Math.hypot(I,R,M);return D<d?null:(I*=D=1/D,R*=D,M*=D,a=Math.sin(r),i=1-(o=Math.cos(r)),l=t[0],u=t[1],s=t[2],c=t[3],f=t[4],p=t[5],g=t[6],m=t[7],v=t[8],h=t[9],y=t[10],b=t[11],T=I*I*i+o,x=R*I*i+M*a,S=M*I*i-R*a,w=I*R*i-M*a,C=R*R*i+o,P=M*R*i+I*a,O=I*M*i+R*a,A=R*M*i-I*a,E=M*M*i+o,e[0]=l*T+f*x+v*S,e[1]=u*T+p*x+h*S,e[2]=s*T+g*x+y*S,e[3]=c*T+m*x+b*S,e[4]=l*w+f*C+v*P,e[5]=u*w+p*C+h*P,e[6]=s*w+g*C+y*P,e[7]=c*w+m*C+b*P,e[8]=l*O+f*A+v*E,e[9]=u*O+p*A+h*E,e[10]=s*O+g*A+y*E,e[11]=c*O+m*A+b*E,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function M(e,t,r){var n=Math.sin(r),a=Math.cos(r),o=t[4],i=t[5],l=t[6],u=t[7],s=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*a+s*n,e[5]=i*a+c*n,e[6]=l*a+f*n,e[7]=u*a+d*n,e[8]=s*a-o*n,e[9]=c*a-i*n,e[10]=f*a-l*n,e[11]=d*a-u*n,e}function D(e,t,r){var n=Math.sin(r),a=Math.cos(r),o=t[0],i=t[1],l=t[2],u=t[3],s=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a-s*n,e[1]=i*a-c*n,e[2]=l*a-f*n,e[3]=u*a-d*n,e[8]=o*n+s*a,e[9]=i*n+c*a,e[10]=l*n+f*a,e[11]=u*n+d*a,e}function k(e,t,r){var n=Math.sin(r),a=Math.cos(r),o=t[0],i=t[1],l=t[2],u=t[3],s=t[4],c=t[5],f=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a+s*n,e[1]=i*a+c*n,e[2]=l*a+f*n,e[3]=u*a+d*n,e[4]=s*a-o*n,e[5]=c*a-i*n,e[6]=f*a-l*n,e[7]=d*a-u*n,e}function _(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function L(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function B(e,t,r){var n,a,o,i=r[0],l=r[1],u=r[2],s=Math.hypot(i,l,u);return s<d?null:(i*=s=1/s,l*=s,u*=s,n=Math.sin(t),o=1-(a=Math.cos(t)),e[0]=i*i*o+a,e[1]=l*i*o+u*n,e[2]=u*i*o-l*n,e[3]=0,e[4]=i*l*o-u*n,e[5]=l*l*o+a,e[6]=u*l*o+i*n,e[7]=0,e[8]=i*u*o+l*n,e[9]=l*u*o-i*n,e[10]=u*u*o+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function V(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function N(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function F(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function U(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],l=n+n,u=a+a,s=o+o,c=n*l,f=n*u,d=n*s,p=a*u,g=a*s,m=o*s,v=i*l,h=i*u,y=i*s;return e[0]=1-(p+m),e[1]=f+y,e[2]=d-h,e[3]=0,e[4]=f-y,e[5]=1-(c+m),e[6]=g+v,e[7]=0,e[8]=d+h,e[9]=g-v,e[10]=1-(c+p),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function G(e,t){var r=new p(3),n=-t[0],a=-t[1],o=-t[2],i=t[3],l=t[4],u=t[5],s=t[6],c=t[7],f=n*n+a*a+o*o+i*i;return f>0?(r[0]=2*(l*i+c*n+u*o-s*a)/f,r[1]=2*(u*i+c*a+s*n-l*o)/f,r[2]=2*(s*i+c*o+l*a-u*n)/f):(r[0]=2*(l*i+c*n+u*o-s*a),r[1]=2*(u*i+c*a+s*n-l*o),r[2]=2*(s*i+c*o+l*a-u*n)),U(e,t,r),e}function j(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function z(e,t){var r=t[0],n=t[1],a=t[2],o=t[4],i=t[5],l=t[6],u=t[8],s=t[9],c=t[10];return e[0]=Math.hypot(r,n,a),e[1]=Math.hypot(o,i,l),e[2]=Math.hypot(u,s,c),e}function W(e,t){var r=new p(3);z(r,t);var n=1/r[0],a=1/r[1],o=1/r[2],i=t[0]*n,l=t[1]*a,u=t[2]*o,s=t[4]*n,c=t[5]*a,f=t[6]*o,d=t[8]*n,g=t[9]*a,m=t[10]*o,v=i+c+m,h=0;return v>0?(h=2*Math.sqrt(v+1),e[3]=.25*h,e[0]=(f-g)/h,e[1]=(d-u)/h,e[2]=(l-s)/h):i>c&&i>m?(h=2*Math.sqrt(1+i-c-m),e[3]=(f-g)/h,e[0]=.25*h,e[1]=(l+s)/h,e[2]=(d+u)/h):c>m?(h=2*Math.sqrt(1+c-i-m),e[3]=(d-u)/h,e[0]=(l+s)/h,e[1]=.25*h,e[2]=(f+g)/h):(h=2*Math.sqrt(1+m-i-c),e[3]=(l-s)/h,e[0]=(d+u)/h,e[1]=(f+g)/h,e[2]=.25*h),e}function H(e,t,r,n){var a=t[0],o=t[1],i=t[2],l=t[3],u=a+a,s=o+o,c=i+i,f=a*u,d=a*s,p=a*c,g=o*s,m=o*c,v=i*c,h=l*u,y=l*s,b=l*c,T=n[0],x=n[1],S=n[2];return e[0]=(1-(g+v))*T,e[1]=(d+b)*T,e[2]=(p-y)*T,e[3]=0,e[4]=(d-b)*x,e[5]=(1-(f+v))*x,e[6]=(m+h)*x,e[7]=0,e[8]=(p+y)*S,e[9]=(m-h)*S,e[10]=(1-(f+g))*S,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function K(e,t,r,n,a){var o=t[0],i=t[1],l=t[2],u=t[3],s=o+o,c=i+i,f=l+l,d=o*s,p=o*c,g=o*f,m=i*c,v=i*f,h=l*f,y=u*s,b=u*c,T=u*f,x=n[0],S=n[1],w=n[2],C=a[0],P=a[1],O=a[2],A=(1-(m+h))*x,E=(p+T)*x,I=(g-b)*x,R=(p-T)*S,M=(1-(d+h))*S,D=(v+y)*S,k=(g+b)*w,_=(v-y)*w,L=(1-(d+m))*w;return e[0]=A,e[1]=E,e[2]=I,e[3]=0,e[4]=R,e[5]=M,e[6]=D,e[7]=0,e[8]=k,e[9]=_,e[10]=L,e[11]=0,e[12]=r[0]+C-(A*C+R*P+k*O),e[13]=r[1]+P-(E*C+M*P+_*O),e[14]=r[2]+O-(I*C+D*P+L*O),e[15]=1,e}function X(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=r+r,l=n+n,u=a+a,s=r*i,c=n*i,f=n*l,d=a*i,p=a*l,g=a*u,m=o*i,v=o*l,h=o*u;return e[0]=1-f-g,e[1]=c+h,e[2]=d-v,e[3]=0,e[4]=c-h,e[5]=1-s-g,e[6]=p+m,e[7]=0,e[8]=d+v,e[9]=p-m,e[10]=1-s-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function q(e,t,r,n,a,o,i){var l=1/(r-t),u=1/(a-n),s=1/(o-i);return e[0]=2*o*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*u,e[6]=0,e[7]=0,e[8]=(r+t)*l,e[9]=(a+n)*u,e[10]=(i+o)*s,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*o*2*s,e[15]=0,e}function Y(e,t,r,n,a){var o,i=1/Math.tan(t/2);return e[0]=i/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(o=1/(n-a),e[10]=(a+n)*o,e[14]=2*a*n*o):(e[10]=-1,e[14]=-2*n),e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var Q=Y;function $(e,t,r,n,a){var o,i=1/Math.tan(t/2);return e[0]=i/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0?(o=1/(n-a),e[10]=a*o,e[14]=a*n*o):(e[10]=-1,e[14]=-n),e}function Z(e,t,r,n){var a=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),l=Math.tan(t.rightDegrees*Math.PI/180),u=2/(i+l),s=2/(a+o);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=-(i-l)*u*.5,e[9]=(a-o)*s*.5,e[10]=n/(r-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*r/(r-n),e[15]=0,e}function J(e,t,r,n,a,o,i){var l=1/(t-r),u=1/(n-a),s=1/(o-i);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*s,e[11]=0,e[12]=(t+r)*l,e[13]=(a+n)*u,e[14]=(i+o)*s,e[15]=1,e}var ee=J;function te(e,t,r,n,a,o,i){var l=1/(t-r),u=1/(n-a),s=1/(o-i);return e[0]=-2*l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=s,e[11]=0,e[12]=(t+r)*l,e[13]=(a+n)*u,e[14]=o*s,e[15]=1,e}function re(e,t,r,n){var a,o,i,l,u,s,c,f,p,g,m=t[0],v=t[1],h=t[2],y=n[0],b=n[1],T=n[2],x=r[0],w=r[1],C=r[2];return Math.abs(m-x)<d&&Math.abs(v-w)<d&&Math.abs(h-C)<d?S(e):(c=m-x,f=v-w,p=h-C,a=b*(p*=g=1/Math.hypot(c,f,p))-T*(f*=g),o=T*(c*=g)-y*p,i=y*f-b*c,(g=Math.hypot(a,o,i))?(a*=g=1/g,o*=g,i*=g):(a=0,o=0,i=0),l=f*i-p*o,u=p*a-c*i,s=c*o-f*a,(g=Math.hypot(l,u,s))?(l*=g=1/g,u*=g,s*=g):(l=0,u=0,s=0),e[0]=a,e[1]=l,e[2]=c,e[3]=0,e[4]=o,e[5]=u,e[6]=f,e[7]=0,e[8]=i,e[9]=s,e[10]=p,e[11]=0,e[12]=-(a*m+o*v+i*h),e[13]=-(l*m+u*v+s*h),e[14]=-(c*m+f*v+p*h),e[15]=1,e)}function ne(e,t,r,n){var a=t[0],o=t[1],i=t[2],l=n[0],u=n[1],s=n[2],c=a-r[0],f=o-r[1],d=i-r[2],p=c*c+f*f+d*d;p>0&&(c*=p=1/Math.sqrt(p),f*=p,d*=p);var g=u*d-s*f,m=s*c-l*d,v=l*f-u*c;return(p=g*g+m*m+v*v)>0&&(g*=p=1/Math.sqrt(p),m*=p,v*=p),e[0]=g,e[1]=m,e[2]=v,e[3]=0,e[4]=f*v-d*m,e[5]=d*g-c*v,e[6]=c*m-f*g,e[7]=0,e[8]=c,e[9]=f,e[10]=d,e[11]=0,e[12]=a,e[13]=o,e[14]=i,e[15]=1,e}function ae(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function oe(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function ie(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function le(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function ue(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function se(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e[9]=t[9]+r[9]*n,e[10]=t[10]+r[10]*n,e[11]=t[11]+r[11]*n,e[12]=t[12]+r[12]*n,e[13]=t[13]+r[13]*n,e[14]=t[14]+r[14]*n,e[15]=t[15]+r[15]*n,e}function ce(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function fe(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],l=e[5],u=e[6],s=e[7],c=e[8],f=e[9],p=e[10],g=e[11],m=e[12],v=e[13],h=e[14],y=e[15],b=t[0],T=t[1],x=t[2],S=t[3],w=t[4],C=t[5],P=t[6],O=t[7],A=t[8],E=t[9],I=t[10],R=t[11],M=t[12],D=t[13],k=t[14],_=t[15];return Math.abs(r-b)<=d*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-T)<=d*Math.max(1,Math.abs(n),Math.abs(T))&&Math.abs(a-x)<=d*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(o-S)<=d*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(i-w)<=d*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(l-C)<=d*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(u-P)<=d*Math.max(1,Math.abs(u),Math.abs(P))&&Math.abs(s-O)<=d*Math.max(1,Math.abs(s),Math.abs(O))&&Math.abs(c-A)<=d*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(f-E)<=d*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(p-I)<=d*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(g-R)<=d*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(m-M)<=d*Math.max(1,Math.abs(m),Math.abs(M))&&Math.abs(v-D)<=d*Math.max(1,Math.abs(v),Math.abs(D))&&Math.abs(h-k)<=d*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(y-_)<=d*Math.max(1,Math.abs(y),Math.abs(_))}var de=A,pe=le;function ge(){var e=new p(9);return p!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function me(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function ve(e){var t=new p(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function he(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ye(e,t,r,n,a,o,i,l,u){var s=new p(9);return s[0]=e,s[1]=t,s[2]=r,s[3]=n,s[4]=a,s[5]=o,s[6]=i,s[7]=l,s[8]=u,s}function be(e,t,r,n,a,o,i,l,u,s){return e[0]=t,e[1]=r,e[2]=n,e[3]=a,e[4]=o,e[5]=i,e[6]=l,e[7]=u,e[8]=s,e}function Te(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function xe(e,t){if(e===t){var r=t[1],n=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Se(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],l=t[5],u=t[6],s=t[7],c=t[8],f=c*i-l*s,d=-c*o+l*u,p=s*o-i*u,g=r*f+n*d+a*p;return g?(g=1/g,e[0]=f*g,e[1]=(-c*n+a*s)*g,e[2]=(l*n-a*i)*g,e[3]=d*g,e[4]=(c*r-a*u)*g,e[5]=(-l*r+a*o)*g,e[6]=p*g,e[7]=(-s*r+n*u)*g,e[8]=(i*r-n*o)*g,e):null}function we(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],l=t[5],u=t[6],s=t[7],c=t[8];return e[0]=i*c-l*s,e[1]=a*s-n*c,e[2]=n*l-a*i,e[3]=l*u-o*c,e[4]=r*c-a*u,e[5]=a*o-r*l,e[6]=o*s-i*u,e[7]=n*u-r*s,e[8]=r*i-n*o,e}function Ce(e){var t=e[0],r=e[1],n=e[2],a=e[3],o=e[4],i=e[5],l=e[6],u=e[7],s=e[8];return t*(s*o-i*u)+r*(-s*a+i*l)+n*(u*a-o*l)}function Pe(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],l=t[4],u=t[5],s=t[6],c=t[7],f=t[8],d=r[0],p=r[1],g=r[2],m=r[3],v=r[4],h=r[5],y=r[6],b=r[7],T=r[8];return e[0]=d*n+p*i+g*s,e[1]=d*a+p*l+g*c,e[2]=d*o+p*u+g*f,e[3]=m*n+v*i+h*s,e[4]=m*a+v*l+h*c,e[5]=m*o+v*u+h*f,e[6]=y*n+b*i+T*s,e[7]=y*a+b*l+T*c,e[8]=y*o+b*u+T*f,e}function Oe(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],l=t[4],u=t[5],s=t[6],c=t[7],f=t[8],d=r[0],p=r[1];return e[0]=n,e[1]=a,e[2]=o,e[3]=i,e[4]=l,e[5]=u,e[6]=d*n+p*i+s,e[7]=d*a+p*l+c,e[8]=d*o+p*u+f,e}function Ae(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],l=t[4],u=t[5],s=t[6],c=t[7],f=t[8],d=Math.sin(r),p=Math.cos(r);return e[0]=p*n+d*i,e[1]=p*a+d*l,e[2]=p*o+d*u,e[3]=p*i-d*n,e[4]=p*l-d*a,e[5]=p*u-d*o,e[6]=s,e[7]=c,e[8]=f,e}function Ee(e,t,r){var n=r[0],a=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Ie(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Re(e,t){var r=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=r,e[2]=0,e[3]=-r,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Me(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function De(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function ke(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=r+r,l=n+n,u=a+a,s=r*i,c=n*i,f=n*l,d=a*i,p=a*l,g=a*u,m=o*i,v=o*l,h=o*u;return e[0]=1-f-g,e[3]=c-h,e[6]=d+v,e[1]=c+h,e[4]=1-s-g,e[7]=p-m,e[2]=d-v,e[5]=p+m,e[8]=1-s-f,e}function _e(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=t[4],l=t[5],u=t[6],s=t[7],c=t[8],f=t[9],d=t[10],p=t[11],g=t[12],m=t[13],v=t[14],h=t[15],y=r*l-n*i,b=r*u-a*i,T=r*s-o*i,x=n*u-a*l,S=n*s-o*l,w=a*s-o*u,C=c*m-f*g,P=c*v-d*g,O=c*h-p*g,A=f*v-d*m,E=f*h-p*m,I=d*h-p*v,R=y*I-b*E+T*A+x*O-S*P+w*C;return R?(R=1/R,e[0]=(l*I-u*E+s*A)*R,e[1]=(u*O-i*I-s*P)*R,e[2]=(i*E-l*O+s*C)*R,e[3]=(a*E-n*I-o*A)*R,e[4]=(r*I-a*O+o*P)*R,e[5]=(n*O-r*E-o*C)*R,e[6]=(m*w-v*S+h*x)*R,e[7]=(v*T-g*w-h*b)*R,e[8]=(g*S-m*T+h*y)*R,e):null}function Le(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Be(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Ve(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function Ne(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function Fe(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function Ue(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function Ge(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e[4]=t[4]+r[4]*n,e[5]=t[5]+r[5]*n,e[6]=t[6]+r[6]*n,e[7]=t[7]+r[7]*n,e[8]=t[8]+r[8]*n,e}function je(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function ze(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],i=e[4],l=e[5],u=e[6],s=e[7],c=e[8],f=t[0],p=t[1],g=t[2],m=t[3],v=t[4],h=t[5],y=t[6],b=t[7],T=t[8];return Math.abs(r-f)<=d*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-p)<=d*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(a-g)<=d*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(o-m)<=d*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(i-v)<=d*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(l-h)<=d*Math.max(1,Math.abs(l),Math.abs(h))&&Math.abs(u-y)<=d*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(s-b)<=d*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(c-T)<=d*Math.max(1,Math.abs(c),Math.abs(T))}var We=Pe,He=Fe;function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xe(e,t){if(e){if("string"===typeof e)return Ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ke(e,t):void 0}}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(u){l=!0,a=u}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||Xe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye(e)}function Qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $e(e){return function(e){if(Array.isArray(e))return Ke(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){return Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ze(e,t)}function Je(e,t,r){return Je=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&Ze(a,r.prototype),a},Je.apply(null,arguments)}var et=r(518),tt=r.n(et),rt=r(838);function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var at=r.n(rt)()(),ot={vtkObject:function(){return null}};function it(e){if(null===e||void 0===e)return e;if(e.isA)return e;if(!e.vtkClass)return at.console&&at.console.error&&at.console.error("Invalid VTK object"),null;var t=ot[e.vtkClass];if(!t)return at.console&&at.console.error&&at.console.error("No vtk class found for Object of type ".concat(e.vtkClass)),null;var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);Object.keys(r).forEach((function(e){r[e]&&"object"===Ye(r[e])&&r[e].vtkClass&&(r[e]=it(r[e]))}));var n=t(r);return n&&n.modified&&n.modified(),n}function lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function st(e,t,r){return t&&ut(e.prototype,t),r&&ut(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ct(e){return ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ct(e)}function ft(){return ft="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ct(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(arguments.length<3?e:r):a.value}},ft.apply(this,arguments)}function dt(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ze(e,t)}function pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gt(e,t){if(t&&("object"===Ye(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pt(e)}function mt(e){var t="function"===typeof Map?new Map:void 0;return mt=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Je(e,arguments,ct(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ze(n,e)},mt(e)}function vt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ct(e);if(t){var a=ct(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return gt(this,r)}}it.register=function(e,t){ot[e]=t};var ht=function(e){dt(r,e);var t=vt(r);function r(){return lt(this,r),t.apply(this,arguments)}return st(r,[{key:"push",value:function(){for(var e=0;e<arguments.length;e++)this.includes(arguments[e])||ft(ct(r.prototype),"push",this).call(this,arguments[e]);return this.length}}]),r}(mt(Array));function yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Tt=0,xt=Symbol("void");var St={};function wt(){}["log","debug","info","warn","error","time","timeEnd","group","groupEnd"].forEach((function(e){St[e]=wt})),at.console=console.hasOwnProperty("log")?console:St;var Ct={debug:wt,error:at.console.error||wt,info:at.console.info||wt,log:at.console.log||wt,warn:at.console.warn||wt};function Pt(){Ct.debug.apply(Ct,arguments)}function Ot(){Ct.error.apply(Ct,arguments)}function At(){Ct.warn.apply(Ct,arguments)}var Et={};var It=Object.create(null);It.Float32Array=Float32Array,It.Float64Array=Float64Array,It.Uint8Array=Uint8Array,It.Int8Array=Int8Array,It.Uint16Array=Uint16Array,It.Int16Array=Int16Array,It.Uint32Array=Uint32Array,It.Int32Array=Int32Array,It.Uint8ClampedArray=Uint8ClampedArray;try{It.BigInt64Array=BigInt64Array,It.BigUint64Array=BigUint64Array}catch(gx){}function Rt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return Je(It[e]||Float64Array,r)}function Mt(e){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return(t=It[e]||Float64Array).from.apply(t,n)}function Dt(e){return e.charAt(0).toUpperCase()+e.slice(1)}function kt(e){return Dt("_"===e[0]?e.slice(1):e)}function _t(e){Object.keys(e).forEach((function(t){Array.isArray(e[t])&&(e[t]=[].concat(e[t]))}))}function Lt(e){return e&&e.isA?e.getState():e}function Bt(e){setTimeout(e,0)}function Vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_t(t);var r=[];if(Number.isInteger(t.mtime)||(t.mtime=++Tt),"classHierarchy"in t){if(!(t.classHierarchy instanceof ht)){for(var n=new ht,a=0;a<t.classHierarchy.length;a++)n.push(t.classHierarchy[a]);t.classHierarchy=n}}else t.classHierarchy=new ht("vtkObject");function o(e){r[e]=null}return e.isDeleted=function(){return!!t.deleted},e.modified=function(n){t.deleted?Ot("instance deleted - cannot call any method"):n&&n<e.getMTime()||(t.mtime=++Tt,r.forEach((function(t){return t&&t(e)})))},e.onModified=function(e){if(t.deleted)return Ot("instance deleted - cannot call any method"),null;var n=r.length;return r.push(e),function(e){return Object.freeze({unsubscribe:function(){o(e)}})}(n)},e.getMTime=function(){return t.mtime},e.isA=function(e){for(var r=t.classHierarchy.length;r--;)if(t.classHierarchy[r]===e)return!0;return!1},e.getClassName=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.classHierarchy[t.classHierarchy.length-1-e]},e.set=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!1;return Object.keys(r).forEach((function(i){var l=a?null:e["set".concat(Dt(i))];l&&Array.isArray(r[i])&&l.length>1?o=l.apply(void 0,$e(r[i]))||o:l?o=l(r[i])||o:(-1!==["mtime"].indexOf(i)||n||At("Warning: Set value to model directly ".concat(i,", ").concat(r[i])),o=t[i]!==r[i]||o,t[i]=r[i])})),o},e.get=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length)return t;var a={};return r.forEach((function(e){a[e]=t[e]})),a},e.getReferenceByName=function(e){return t[e]},e.delete=function(){Object.keys(t).forEach((function(e){return delete t[e]})),r.forEach((function(e,t){return o(t)})),t.deleted=!0},e.getState=function(){if(t.deleted)return null;var r=bt(bt({},t),{},{vtkClass:e.getClassName()});Object.keys(r).forEach((function(e){null===r[e]||void 0===r[e]||"_"===e[0]?delete r[e]:r[e].isA?r[e]=r[e].getState():Array.isArray(r[e])&&(r[e]=r[e].map(Lt))}));var n={};return Object.keys(r).sort().forEach((function(e){n[e]=r[e]})),n.mtime&&delete n.mtime,n},e.shallowCopy=function(r){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r.getClassName()!==e.getClassName())throw new Error("Cannot ShallowCopy ".concat(r.getClassName()," into ").concat(e.getClassName()));var a=r.get(),o=Object.keys(t).sort();Object.keys(a).sort().forEach((function(e){var r=o.indexOf(e);-1===r?n&&Pt("add ".concat(e," in shallowCopy")):o.splice(r,1),t[e]=a[e]})),o.length&&n&&Pt("Untouched keys: ".concat(o.join(", "))),e.modified()},e.toJSON=function(){return e.getState()},e}var Nt={object:function(e,t,r){return function(){return bt({},t[r.name])}}};function Ft(e,t,r){r.forEach((function(r){if("object"===Ye(r)){var n=Nt[r.type];e["get".concat(kt(r.name))]=n?n(e,t,r):function(){return t[r.name]}}else e["get".concat(kt(r))]=function(){return t[r]}}))}var Ut={enum:function(e,t,r){var n="_on".concat(kt(r.name),"Changed");return function(a){if("string"===typeof a){if(void 0!==r.enum[a])return t[r.name]!==r.enum[a]&&(t[r.name]=r.enum[a],e.modified(),!0);throw Ot("Set Enum with invalid argument ".concat(r,", ").concat(a)),new RangeError("Set Enum with invalid string argument")}if("number"===typeof a){if(t[r.name]!==a){if(-1!==Object.keys(r.enum).map((function(e){return r.enum[e]})).indexOf(a)){var o,i=t[r.name];return t[r.name]=a,null===(o=t[n])||void 0===o||o.call(t,e,t,a,i),e.modified(),!0}throw Ot("Set Enum outside numeric range ".concat(r,", ").concat(a)),new RangeError("Set Enum outside numeric range")}return!1}throw Ot("Set Enum with invalid argument (String/Number) ".concat(r,", ").concat(a)),new TypeError("Set Enum with invalid argument (String/Number)")}},object:function(e,t,r){var n="_on".concat(kt(r.name),"Changed");return function(a){if(!tt()(t[r.name],a)){var o,i=t[r.name];return t[r.name]=a,null===(o=t[n])||void 0===o||o.call(t,e,t,a,i),e.modified(),!0}return!1}}};function Gt(e){if("object"===Ye(e)){var t=Ut[e.type];if(t)return function(r,n){return t(r,n,e)};throw Ot("No setter for field ".concat(e)),new TypeError("No setter for field")}return function(t,r){var n="_on".concat(kt(e),"Changed");return function(a){if(r.deleted)return Ot("instance deleted - cannot call any method"),!1;if(r[e]!==a){var o,i=r[e.name];return r[e]=a,null===(o=r[n])||void 0===o||o.call(r,t,r,a,i),t.modified(),!0}return!1}}}function jt(e,t,r){r.forEach((function(r){"object"===Ye(r)?e["set".concat(kt(r.name))]=Gt(r)(e,t):e["set".concat(kt(r))]=Gt(r)(e,t)}))}function zt(e,t,r){Ft(e,t,r),jt(e,t,r)}function Wt(e,t,r){r.forEach((function(r){e["get".concat(kt(r))]=function(){return t[r]?Array.from(t[r]):t[r]},e["get".concat(kt(r),"ByReference")]=function(){return t[r]}}))}function Ht(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;r.forEach((function(r){if(t[r]&&n&&t[r].length!==n)throw new RangeError("Invalid initial number of values for array (".concat(r,")"));var o="_on".concat(kt(r),"Changed");e["set".concat(kt(r))]=function(){if(t.deleted)return Ot("instance deleted - cannot call any method"),!1;for(var i=arguments.length,l=new Array(i),u=0;u<i;u++)l[u]=arguments[u];var s,c=l,f=!1;if(1===c.length&&(null==c[0]||c[0].length>=0)&&(c=c[0],f=!0),null==c)s=t[r]!==c;else{if(n&&c.length!==n){if(!(c.length<n&&void 0!==a))throw new RangeError("Invalid number of values for array setter (".concat(r,")"));for(c=Array.from(c),f=!1;c.length<n;)c.push(a)}s=null==t[r]||t[r].length!==c.length;for(var d=0;!s&&d<c.length;++d)s=t[r][d]!==c[d];s&&f&&(c=Array.from(c))}if(s){var p,g=t[r.name];t[r]=c,null===(p=t[o])||void 0===p||p.call(t,e,t,c,g),e.modified()}return s},e["set".concat(kt(r),"From")]=function(e){var n=t[r];e.forEach((function(e,t){n[t]=e}))}}))}function Kt(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;Wt(e,t,r),Ht(e,t,r,n,a)}function Xt(e,t,r){for(var n=0;n<r.length;n++){var a=r[n];void 0!==t[a]&&(t["_".concat(a)]=t[a],delete t[a])}}var qt=Symbol("Event abort");function Yt(e,t){var r=function(){var t={};return e(t,{},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Object.freeze(t)};return t&&it.register(t,r),r}function Qt(e){return e&&e.isA&&e.isA("vtkObject")}function $t(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.keystore=Object.assign(t.keystore||{},r),e.setKey=function(e,r){t.keystore[e]=r},e.getKey=function(e){return t.keystore[e]},e.getAllKeys=function(){return Object.keys(t.keystore)},e.deleteKey=function(e){return delete t.keystore[e]},e.clearKeystore=function(){return e.getAllKeys().forEach((function(e){return delete t.keystore[e]}))}}var Zt=1,Jt="__root__";var er={algo:function(e,t,r,n){function a(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t.deleted?Ot("instance deleted - cannot call any method"):n>=t.numberOfInputs?Ot("algorithm ".concat(e.getClassName()," only has ").concat(t.numberOfInputs," input ports. To add more input ports, use addInputData()")):(t.inputData[n]!==r||t.inputConnection[n])&&(t.inputData[n]=r,t.inputConnection[n]=null,e.modified&&e.modified())}function o(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t.deleted)Ot("instance deleted - cannot call any method");else{if(n>=t.numberOfInputs){var a="algorithm ".concat(e.getClassName()," only has ");return a+="".concat(t.numberOfInputs),void Ot(a+=" input ports. To add more input ports, use addInputConnection()")}t.inputData[n]=null,t.inputConnection[n]=r}}function i(){for(var e=t.numberOfInputs;e&&!t.inputData[e-1]&&!t.inputConnection[e-1];)e--;return e===t.numberOfInputs&&t.numberOfInputs++,e}function l(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.deleted?(Ot("instance deleted - cannot call any method"),null):(e.shouldUpdate()&&e.update(),t.output[r])}if(t.inputData?t.inputData=t.inputData.map(it):t.inputData=[],t.inputConnection?t.inputConnection=t.inputConnection.map(it):t.inputConnection=[],t.output?t.output=t.output.map(it):t.output=[],t.inputArrayToProcess?t.inputArrayToProcess=t.inputArrayToProcess.map(it):t.inputArrayToProcess=[],t.numberOfInputs=r,e.shouldUpdate=function(){for(var r=e.getMTime(),a=1/0,o=n;o--;){if(!t.output[o]||t.output[o].isDeleted())return!0;var i=t.output[o].getMTime();if(i<r)return!0;i<a&&(a=i)}for(o=t.numberOfInputs;o--;){var l,u;if(null!==(l=t.inputConnection[o])&&void 0!==l&&l.filter.shouldUpdate()||(null===(u=e.getInputData(o))||void 0===u?void 0:u.getMTime())>a)return!0}return!1},t.numberOfInputs){for(var u=t.numberOfInputs;u--;)t.inputData.push(null),t.inputConnection.push(null);e.setInputData=a,e.setInputConnection=o,e.addInputData=function(e){t.deleted?Ot("instance deleted - cannot call any method"):a(e,i())},e.addInputConnection=function(e){t.deleted?Ot("instance deleted - cannot call any method"):o(e,i())},e.getInputData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.inputConnection[e]&&(t.inputData[e]=t.inputConnection[e]()),t.inputData[e]},e.getInputConnection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t.inputConnection[e]}}n&&(e.getOutputData=l,e.getOutputPort=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=function(){return l(t)};return r.filter=e,r}),e.update=function(){var r=[];if(t.numberOfInputs)for(var n=0;n<t.numberOfInputs;)r[n]=e.getInputData(n),n++;e.shouldUpdate()&&e.requestData&&e.requestData(r,t.output)},e.getNumberOfInputPorts=function(){return t.numberOfInputs},e.getNumberOfOutputPorts=function(){return n||t.output.length},e.getInputArrayToProcess=function(e){var r=t.inputArrayToProcess[e],n=t.inputData[e];return r&&n?n["get".concat(r.fieldAssociation)]().getArray(r.arrayName):null},e.setInputArrayToProcess=function(e,r,n){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Scalars";t.inputArrayToProcess.length<e;)t.inputArrayToProcess.push(null);t.inputArrayToProcess[e]={arrayName:r,fieldAssociation:n,attributeType:a}}},capitalize:Dt,chain:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.filter((function(e){return!!e})).map((function(e){return e.apply(void 0,r)}))}},debounce:function(e,t,r){var n,a=this,o=function(){for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];var u=a,s=r&&!n;clearTimeout(n),n=setTimeout((function(){n=null,r||e.apply(u,i)}),t),s&&e.apply(u,i)};return o.cancel=function(){return clearTimeout(n)},o},enumToString:function(e,t){return Object.keys(e).find((function(r){return e[r]===t}))},event:function(e,t,r){var n=[],a=e.delete,o=1;function i(e){for(var t=0;t<n.length;++t){if(qe(n[t],1)[0]===e)return void n.splice(t,1)}}e["invoke".concat(kt(r))]=function(){var r=arguments;if(t.deleted)Ot("instance deleted - cannot call any method");else for(var a=n.slice(),o=function(t){var n=qe(a[t],3),o=n[1],i=n[2];if(!o)return"continue";if(i<0)setTimeout((function(){return o.apply(e,r)}),1-i);else if(o.apply(e,r)===qt)return"break"},i=0;i<a.length;++i){var l=o(i);if("continue"!==l&&"break"===l)break}},e["on".concat(kt(r))]=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e.apply)return console.error("Invalid callback for event ".concat(r)),null;if(t.deleted)return Ot("instance deleted - cannot call any method"),null;var l=o++;return n.push([l,e,a]),n.sort((function(e,t){return t[2]-e[2]})),function(e){return Object.freeze({unsubscribe:function(){i(e)}})}(l)},e.delete=function(){a(),n.forEach((function(e){return i(qe(e,1)[0])}))}},EVENT_ABORT:qt,formatBytesToProperUnit:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=["TB","GB","MB","KB"],a=Number(e),o="B";a>r;)a/=r,o=n.pop();return"".concat(a.toFixed(t)," ").concat(o)},formatNumbersWithThousandSeparator:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",r=[],n=e;n>1e3;)r.push("000".concat(n%1e3).slice(-3)),n=Math.floor(n/1e3);return n>0&&r.push(n),r.reverse(),r.join(t)},get:Ft,getArray:Wt,getCurrentGlobalMTime:function(){return Tt},getStateArrayMapFunc:Lt,isVtkObject:Qt,keystore:$t,measurePromiseExecution:function(e,t){var r=performance.now();e.finally((function(){var e=performance.now()-r;t(e)}))},moveToProtected:Xt,newInstance:Yt,newTypedArray:Rt,newTypedArrayFrom:Mt,normalizeWheel:function(e){var t=0,r=0,n=0,a=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=r,r=0),n=10*t,a=10*r,"deltaY"in e&&(a=e.deltaY),"deltaX"in e&&(n=e.deltaX),(n||a)&&e.deltaMode&&(1===e.deltaMode?(n*=40,a*=40):(n*=800,a*=800)),n&&!t&&(t=n<1?-1:1),a&&!r&&(r=a<1?-1:1),{spinX:t,spinY:r,pixelX:n,pixelY:a}},obj:Vt,proxy:function(e,t){$t(e,t);var r=e.delete;t.proxyId="".concat(Zt++),t.ui=JSON.parse(JSON.stringify(t.ui||[])),Ft(e,t,["proxyId","proxyGroup","proxyName"]),zt(e,t,["proxyManager"]);var n={},a={};function o(e,t){a[t]||(a[t]=[]);for(var r=a[t],i=0;i<e.length;i++)r.push(e[i].name),n[e[i].name]=e[i],e[i].children&&e[i].children.length&&o(e[i].children,e[i].name)}function i(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,n=[],o=t.proxyId,l=function(){return a[arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt]}(r)||[],u=0;u<l.length;u++){var s=l[u],c=e["get".concat(kt(s))],f={id:o,name:s,value:c?c():void 0},d=i(s);d.length&&(f.children=d),n.push(f)}return n}o(t.ui,Jt),e.updateUI=function(r){t.ui=JSON.parse(JSON.stringify(r||[])),Object.keys(n).forEach((function(e){return delete n[e]})),Object.keys(a).forEach((function(e){return delete a[e]})),o(t.ui,Jt),e.modified()},e.updateProxyProperty=function(e,t){var r=n[e];r?Object.assign(r,t):n[e]=bt({},t)},e.activate=function(){if(t.proxyManager){var r="setActive".concat(kt(e.getProxyGroup().slice(0,-1)));t.proxyManager[r]&&t.proxyManager[r](e)}},t.propertyLinkSubscribers={},e.registerPropertyLinkForGC=function(e,r){r in t.propertyLinkSubscribers||(t.propertyLinkSubscribers[r]=[]),t.propertyLinkSubscribers[r].push(e)},e.gcPropertyLinks=function(r){for(var n=t.propertyLinkSubscribers[r]||[];n.length;)n.pop().unbind(e)},t.propertyLinkMap={},e.getPropertyLink=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.propertyLinkMap[e])return t.propertyLinkMap[e];var n=null,a=[],o=0,i=!1;function l(r){var l=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(i)return null;var u=[],s=null;for(o=a.length;o--;){var c=a[o];c.instance===r?s=c:u.push(c)}if(!s)return null;var f=s.instance["get".concat(kt(s.propertyName))]();if(!function(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}(f,n)||l){for(n=f,i=!0;u.length;){var d=u.pop();d.instance.set(Qe({},d.propertyName,n))}i=!1}return t.propertyLinkMap[e].persistent&&(t.propertyLinkMap[e].value=f),f}function u(e,t){var r=[];for(o=a.length;o--;){var n=a[o];n.instance!==e||n.propertyName!==t&&void 0!==t||(n.subscription.unsubscribe(),r.push(o))}for(;r.length;)a.splice(r.pop(),1)}var s={bind:function(r,n){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=r.onModified(l),s=a[0];return a.push({instance:r,propertyName:n,subscription:i}),o&&(t.propertyLinkMap[e].persistent&&void 0!==t.propertyLinkMap[e].value?r.set(Qe({},n,t.propertyLinkMap[e].value)):s&&l(s.instance,!0)),{unsubscribe:function(){return u(r,n)}}},unbind:u,unsubscribe:function(){for(;a.length;)a.pop().subscription.unsubscribe()},persistent:r};return t.propertyLinkMap[e]=s,s},e.listPropertyNames=function(){return i().map((function(e){return e.name}))},e.getPropertyByName=function(e){return i().find((function(t){return t.name===e}))},e.getPropertyDomainByName=function(e){return(n[e]||{}).domain},e.getProxySection=function(){return{id:t.proxyId,name:t.proxyGroup,ui:t.ui,properties:i()}},e.delete=function(){for(var n=Object.keys(t.propertyLinkMap),a=n.length;a--;)t.propertyLinkMap[n[a]].unsubscribe();Object.keys(t.propertyLinkSubscribers).forEach(e.gcPropertyLinks),r()},e.getState=function(){return null},Bt((function(){if(t.links)for(var r=0;r<t.links.length;r++){var n=t.links[r],a=n.link,o=n.property,i=n.persistent,l=n.updateOnBind;if("application"===n.type){var u=t.proxyManager.getPropertyLink(a,i);e.registerPropertyLinkForGC(u,"application"),u.bind(e,o,l)}}}))},proxyPropertyMapping:function(e,t,r){for(var n=e.delete,a=[],o=Object.keys(r),i=o.length;i--;){var l=o[i],u=r[l],s=u.modelKey,c=u.property,f=u.modified,d=void 0===f||f,p=kt(c),g=kt(l);e["get".concat(g)]=t[s]["get".concat(p)],e["set".concat(g)]=t[s]["set".concat(p)],d&&a.push(t[s].onModified(e.modified))}e.delete=function(){for(;a.length;)a.pop().unsubscribe();n()}},proxyPropertyState:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t.this=e;for(var a=Object.keys(n),o=a.length,i=function(){var i=a[o];t[i]=n[i];var l=r[i];e["set".concat(kt(i))]=function(r){r!==t[i]&&(t[i]=r,function(e){for(var r=Object.keys(e),n=r.length;n--;){var a=r[n];t[a].set(e[a])}}(l[r]),e.modified())}};o--;)i();a.length&&Ft(e,t,a)},safeArrays:_t,set:jt,setArray:Ht,setGet:zt,setGetArray:Kt,setImmediate:Bt,setLoggerFunction:function(e,t){Ct[e]&&(Ct[e]=t||wt)},throttle:function(e,t){var r=!1,n=null;function a(){r=!1,null!==n&&(o.apply(void 0,$e(n)),n=null)}function o(){for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];r?n=i:(r=!0,e.apply(void 0,i),setTimeout(a,t))}return o},traverseInstanceTree:function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(Qt(t)){if(a.indexOf(t)>=0)return n;a.push(t);var o=r(t);void 0!==o&&n.push(o);var i=t.get();Object.keys(i).forEach((function(t){var o=i[t];Array.isArray(o)?o.forEach((function(t){e(t,r,n,a)})):e(o,r,n,a)}))}return n},TYPED_ARRAYS:It,uncapitalize:function(e){return e.charAt(0).toLowerCase()+e.slice(1)},VOID:xt,vtkDebugMacro:Pt,vtkErrorMacro:Ot,vtkInfoMacro:function(){Ct.info.apply(Ct,arguments)},vtkLogMacro:function(){Ct.log.apply(Ct,arguments)},vtkOnceErrorMacro:function(e){Et[e]||(Ct.error(e),Et[e]=!0)},vtkWarningMacro:At},tr=er.vtkErrorMacro;var rr={renderable:null,myFactory:null,children:[],visited:!1};function nr(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rr,r),er.obj(e,t),er.event(e,t,"event"),t._renderableChildMap=new Map,er.get(e,t,["visited"]),er.setGet(e,t,["_parent","renderable","myFactory"]),er.getArray(e,t,["children"]),er.moveToProtected(e,t,["parent"]),function(e,t){t.classHierarchy.push("vtkViewNode"),e.build=function(e){},e.render=function(e){},e.traverse=function(r){var n=r.getTraverseOperation(),a=e[n];if(a)a(r);else{e.apply(r,!0);for(var o=0;o<t.children.length;o++)t.children[o].traverse(r);e.apply(r,!1)}},e.apply=function(t,r){var n=e[t.getOperation()];n&&n(r,t)},e.getViewNodeFor=function(r){if(t.renderable===r)return e;for(var n=0;n<t.children.length;++n){var a=t.children[n].getViewNodeFor(r);if(a)return a}},e.getFirstAncestorOfType=function(e){return t._parent?t._parent.isA(e)?t._parent:t._parent.getFirstAncestorOfType(e):null},e.addMissingNode=function(r){if(r){var n=t._renderableChildMap.get(r);if(void 0!==n)n.setVisited(!0);else{var a=e.createViewNode(r);a&&(a.setParent(e),a.setVisited(!0),t._renderableChildMap.set(r,a),t.children.push(a))}}},e.addMissingNodes=function(r){if(r&&r.length)for(var n=0;n<r.length;++n){var a=r[n],o=t._renderableChildMap.get(a);if(void 0!==o)o.setVisited(!0);else{var i=e.createViewNode(a);i&&(i.setParent(e),i.setVisited(!0),t._renderableChildMap.set(a,i),t.children.push(i))}}},e.addMissingChildren=function(r){if(r&&r.length)for(var n=0;n<r.length;++n){var a=r[n];-1===t.children.indexOf(a)&&(a.setParent(e),t.children.push(a)),a.setVisited(!0)}},e.prepareNodes=function(){for(var e=0;e<t.children.length;++e)t.children[e].setVisited(!1)},e.setVisited=function(e){t.visited=e},e.removeUnusedNodes=function(){for(var e=0,r=0;r<t.children.length;++r){var n=t.children[r];if(n.getVisited())t.children[e++]=n,n.setVisited(!1);else{var a=n.getRenderable();a&&t._renderableChildMap.delete(a),n.delete()}}t.children.length=e},e.createViewNode=function(e){if(!t.myFactory)return tr("Cannot create view nodes without my own factory"),null;var r=t.myFactory.createNode(e);return r&&r.setRenderable(e),r};var r=e.delete;e.delete=function(){for(var e=0;e<t.children.length;e++)t.children[e].delete();r()}}(e,t)}var ar={newInstance:er.newInstance(nr,"vtkViewNode"),extend:nr,PASS_TYPES:["Build","Render"]};var or={};function ir(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,or,r),er.obj(e,t),function(e,t){t.overrides||(t.overrides={}),t.classHierarchy.push("vtkViewNodeFactory"),e.createNode=function(r){if(r.isDeleted())return null;for(var n=0,a=r.getClassName(n++),o=!1,i=Object.keys(t.overrides);a&&!o;)-1!==i.indexOf(a)?o=!0:a=r.getClassName(n++);if(!o)return null;var l=t.overrides[a]();return l.setMyFactory(e),l},e.registerOverride=function(e,r){t.overrides[e]=r}}(e,t)}var lr={newInstance:er.newInstance(ir,"vtkViewNodeFactory"),extend:ir},ur=Object.create(null);function sr(e,t){ur[e]=t}var cr={};function fr(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cr,r),t.overrides=ur,lr.extend(e,t,r),function(e,t){t.classHierarchy.push("vtkOpenGLViewNodeFactory")}(0,t)}var dr={newInstance:er.newInstance(fr,"vtkOpenGLViewNodeFactory"),extend:fr};var pr={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};function gr(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pr,r),ar.extend(e,t,r),t.keyMatrixTime={},Vt(t.keyMatrixTime),t.keyMatrices={normalMatrix:new Float64Array(9),vcpc:new Float64Array(16),wcvc:new Float64Array(16),wcpc:new Float64Array(16)},zt(e,t,["context","keyMatrixTime"]),function(e,t){t.classHierarchy.push("vtkOpenGLCamera"),e.buildPass=function(r){r&&(t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent(),t.context=t._openGLRenderWindow.getContext())},e.opaquePass=function(e){if(e){var r=t._openGLRenderer.getTiledSizeAndOrigin();t.context.viewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize),t.context.scissor(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)}},e.translucentPass=e.opaquePass,e.zBufferPass=e.opaquePass,e.opaqueZBufferPass=e.opaquePass,e.volumePass=e.opaquePass,e.getKeyMatrices=function(r){if(r!==t.lastRenderer||t._openGLRenderWindow.getMTime()>t.keyMatrixTime.getMTime()||e.getMTime()>t.keyMatrixTime.getMTime()||r.getMTime()>t.keyMatrixTime.getMTime()||t.renderable.getMTime()>t.keyMatrixTime.getMTime()){b(t.keyMatrices.wcvc,t.renderable.getViewMatrix()),me(t.keyMatrices.normalMatrix,t.keyMatrices.wcvc),Se(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),w(t.keyMatrices.wcvc,t.keyMatrices.wcvc);var n=t._openGLRenderer.getAspectRatio();b(t.keyMatrices.vcpc,t.renderable.getProjectionMatrix(n,-1,1)),w(t.keyMatrices.vcpc,t.keyMatrices.vcpc),A(t.keyMatrices.wcpc,t.keyMatrices.vcpc,t.keyMatrices.wcvc),t.keyMatrixTime.modified(),t.lastRenderer=r}return t.keyMatrices}}(e,t)}var mr=Yt(gr);sr("vtkCamera",mr);var vr=Pt;var hr={context:null,selector:null};function yr(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hr,r),ar.extend(e,t,r),Ft(e,t,["shaderCache"]),zt(e,t,["selector"]),Xt(0,t,["openGLRenderWindow"]),function(e,t){t.classHierarchy.push("vtkOpenGLRenderer"),e.buildPass=function(r){if(r){if(!t.renderable)return;e.updateLights(),e.prepareNodes(),e.addMissingNode(t.renderable.getActiveCamera()),e.addMissingNodes(t.renderable.getViewPropsWithNestedProps()),e.removeUnusedNodes()}},e.updateLights=function(){for(var e=0,r=t.renderable.getLightsByReference(),n=0;n<r.length;++n)r[n].getSwitch()>0&&e++;return e||(vr("No lights are on, creating one."),t.renderable.createLight()),e},e.zBufferPass=function(r){if(r){var n=0,a=t.context;t.renderable.getTransparent()||(t.context.clearColor(1,0,0,1),n|=a.COLOR_BUFFER_BIT),t.renderable.getPreserveDepthBuffer()||(a.clearDepth(1),n|=a.DEPTH_BUFFER_BIT,t.context.depthMask(!0));var o=e.getTiledSizeAndOrigin();a.enable(a.SCISSOR_TEST),a.scissor(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),a.viewport(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),a.colorMask(!0,!0,!0,!0),n&&a.clear(n),a.enable(a.DEPTH_TEST)}},e.opaqueZBufferPass=function(t){return e.zBufferPass(t)},e.cameraPass=function(t){t&&e.clear()},e.getAspectRatio=function(){var e=t._parent.getSizeByReference(),r=t.renderable.getViewportByReference();return e[0]*(r[2]-r[0])/((r[3]-r[1])*e[1])},e.getTiledSizeAndOrigin=function(){var e=t.renderable.getViewportByReference(),r=[0,0,1,1],n=e[0]-r[0],a=e[1]-r[1],o=t._parent.normalizedDisplayToDisplay(n,a),i=Math.round(o[0]),l=Math.round(o[1]),u=e[2]-r[0],s=e[3]-r[1],c=t._parent.normalizedDisplayToDisplay(u,s),f=Math.round(c[0])-i,d=Math.round(c[1])-l;return f<0&&(f=0),d<0&&(d=0),{usize:f,vsize:d,lowerLeftU:i,lowerLeftV:l}},e.clear=function(){var r=0,n=t.context;if(!t.renderable.getTransparent()){var a=t.renderable.getBackgroundByReference();t.context.clearColor(a[0],a[1],a[2],a[3]),r|=n.COLOR_BUFFER_BIT}t.renderable.getPreserveDepthBuffer()||(n.clearDepth(1),r|=n.DEPTH_BUFFER_BIT,t.context.depthMask(!0)),n.colorMask(!0,!0,!0,!0);var o=e.getTiledSizeAndOrigin();n.enable(n.SCISSOR_TEST),n.scissor(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),n.viewport(o.lowerLeftU,o.lowerLeftV,o.usize,o.vsize),r&&n.clear(r),n.enable(n.DEPTH_TEST)},e.releaseGraphicsResources=function(){null!==t.selector&&t.selector.releaseGraphicsResources()},e.setOpenGLRenderWindow=function(r){t._openGLRenderWindow!==r&&(e.releaseGraphicsResources(),t._openGLRenderWindow=r,t.context=null,r&&(t.context=t._openGLRenderWindow.getContext()))}}(e,t)}var br=Yt(yr,"vtkOpenGLRenderer");sr("vtkRenderer",br);var Tr={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null};function xr(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Tr,r),ar.extend(e,t,r),t.keyMatrixTime={},Vt(t.keyMatrixTime,{mtime:0}),t.keyMatrices={normalMatrix:Te(new Float64Array(9)),mcwc:S(new Float64Array(16))},zt(e,t,["context"]),Ft(e,t,["activeTextures"]),function(e,t){t.classHierarchy.push("vtkOpenGLActor"),e.buildPass=function(r){if(r){t._openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.context=t._openGLRenderWindow.getContext(),e.prepareNodes(),e.addMissingNodes(t.renderable.getTextures()),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes(),t.ogltextures=null,t.activeTextures=null;for(var n=0;n<t.children.length;n++){var a=t.children[n];a.isA("vtkOpenGLTexture")?(t.ogltextures||(t.ogltextures=[]),t.ogltextures.push(a)):t.oglmapper=a}}},e.traverseZBufferPass=function(r){t.renderable&&t.renderable.getNestedVisibility()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(r,!0),t.oglmapper.traverse(r),e.apply(r,!1))},e.traverseOpaqueZBufferPass=function(t){return e.traverseOpaquePass(t)},e.traverseOpaquePass=function(r){t.renderable&&t.renderable.getNestedVisibility()&&t.renderable.getIsOpaque()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(r,!0),t.oglmapper.traverse(r),e.apply(r,!1))},e.traverseTranslucentPass=function(r){!t.renderable||!t.renderable.getNestedVisibility()||t.renderable.getIsOpaque()||t._openGLRenderer.getSelector()&&!t.renderable.getNestedPickable()||(e.apply(r,!0),t.oglmapper.traverse(r),e.apply(r,!1))},e.activateTextures=function(){if(t.ogltextures){t.activeTextures=[];for(var e=0;e<t.ogltextures.length;e++){var r=t.ogltextures[e];r.render(),r.getHandle()&&t.activeTextures.push(r)}}},e.queryPass=function(e,r){if(e){if(!t.renderable||!t.renderable.getVisibility())return;t.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},e.zBufferPass=function(t,r){return e.opaquePass(t,r)},e.opaqueZBufferPass=function(t,r){return e.opaquePass(t,r)},e.opaquePass=function(r,n){if(r)t.context.depthMask(!0),e.activateTextures();else if(t.activeTextures)for(var a=0;a<t.activeTextures.length;a++)t.activeTextures[a].deactivate()},e.translucentPass=function(r,n){if(r)t.context.depthMask(!1),e.activateTextures();else if(t.activeTextures)for(var a=0;a<t.activeTextures.length;a++)t.activeTextures[a].deactivate()},e.getKeyMatrices=function(){return t.renderable.getMTime()>t.keyMatrixTime.getMTime()&&(t.renderable.computeMatrix(),b(t.keyMatrices.mcwc,t.renderable.getMatrix()),w(t.keyMatrices.mcwc,t.keyMatrices.mcwc),t.renderable.getIsIdentity()?Te(t.keyMatrices.normalMatrix):(me(t.keyMatrices.normalMatrix,t.keyMatrices.mcwc),Se(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),xe(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix)),t.keyMatrixTime.modified()),t.keyMatrices}}(e,t)}var Sr=Yt(xr);sr("vtkActor",Sr);var wr={context:null,activeTextures:null};function Cr(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,wr,r),ar.extend(e,t,r),zt(e,t,["context"]),Ft(e,t,["activeTextures"]),function(e,t){t.classHierarchy.push("vtkOpenGLActor2D"),e.buildPass=function(r){if(r){if(!t.renderable)return;t._openGLRenderWindow=e.getFirstAncestorOfType("vtkOpenGLRenderWindow"),t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t.context=t._openGLRenderWindow.getContext(),e.prepareNodes(),e.addMissingNodes(t.renderable.getTextures()),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes(),t.ogltextures=null,t.activeTextures=null;for(var n=0;n<t.children.length;n++){var a=t.children[n];a.isA("vtkOpenGLTexture")?(t.ogltextures||(t.ogltextures=[]),t.ogltextures.push(a)):t.oglmapper=a}}},e.queryPass=function(e,r){if(e){if(!t.renderable||!t.renderable.getVisibility())return;r.incrementOverlayActorCount()}},e.traverseOpaquePass=function(r){t.oglmapper&&t.renderable&&t.renderable.getNestedVisibility()&&t.renderable.getIsOpaque()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(r,!0),t.oglmapper.traverse(r),e.apply(r,!1))},e.traverseTranslucentPass=function(r){t.oglmapper&&t.renderable&&t.renderable.getNestedVisibility()&&!t.renderable.getIsOpaque()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(r,!0),t.oglmapper.traverse(r),e.apply(r,!1))},e.traverseOverlayPass=function(r){t.oglmapper&&t.renderable&&t.renderable.getNestedVisibility()&&(!t._openGLRenderer.getSelector()||t.renderable.getNestedPickable)&&(e.apply(r,!0),t.oglmapper.traverse(r),e.apply(r,!1))},e.activateTextures=function(){if(t.ogltextures){t.activeTextures=[];for(var e=0;e<t.ogltextures.length;e++){var r=t.ogltextures[e];r.render(),r.getHandle()&&t.activeTextures.push(r)}}},e.opaquePass=function(r,n){if(r)t.context.depthMask(!0),e.activateTextures();else if(t.activeTextures)for(var a=0;a<t.activeTextures.length;a++)t.activeTextures[a].deactivate()},e.translucentPass=function(r,n){if(r)t.context.depthMask(!1),e.activateTextures();else if(t.activeTextures)for(var a=0;a<t.activeTextures.length;a++)t.activeTextures[a].deactivate()},e.overlayPass=function(r,n){if(r)t.context.depthMask(!0),e.activateTextures();else if(t.activeTextures)for(var a=0;a<t.activeTextures.length;a++)t.activeTextures[a].deactivate()}}(e,t)}var Pr=Yt(Cr);function Or(){var e=new p(3);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Ar(e){var t=new p(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Er(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function Ir(e,t,r){var n=new p(3);return n[0]=e,n[1]=t,n[2]=r,n}function Rr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Mr(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e}function Dr(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function kr(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function _r(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function Lr(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function Br(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Vr(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Nr(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function Fr(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function Ur(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Gr(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function jr(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e}function zr(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return Math.hypot(r,n,a)}function Wr(e,t){var r=t[0]-e[0],n=t[1]-e[1],a=t[2]-e[2];return r*r+n*n+a*a}function Hr(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function Kr(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Xr(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function qr(e,t){var r=t[0],n=t[1],a=t[2],o=r*r+n*n+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function Yr(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Qr(e,t,r){var n=t[0],a=t[1],o=t[2],i=r[0],l=r[1],u=r[2];return e[0]=a*u-o*l,e[1]=o*i-n*u,e[2]=n*l-a*i,e}function $r(e,t,r,n){var a=t[0],o=t[1],i=t[2];return e[0]=a+n*(r[0]-a),e[1]=o+n*(r[1]-o),e[2]=i+n*(r[2]-i),e}function Zr(e,t,r,n,a,o){var i=o*o,l=i*(2*o-3)+1,u=i*(o-2)+o,s=i*(o-1),c=i*(3-2*o);return e[0]=t[0]*l+r[0]*u+n[0]*s+a[0]*c,e[1]=t[1]*l+r[1]*u+n[1]*s+a[1]*c,e[2]=t[2]*l+r[2]*u+n[2]*s+a[2]*c,e}function Jr(e,t,r,n,a,o){var i=1-o,l=i*i,u=o*o,s=l*i,c=3*o*l,f=3*u*i,d=u*o;return e[0]=t[0]*s+r[0]*c+n[0]*f+a[0]*d,e[1]=t[1]*s+r[1]*c+n[1]*f+a[1]*d,e[2]=t[2]*s+r[2]*c+n[2]*f+a[2]*d,e}function en(e,t){t=t||1;var r=2*g()*Math.PI,n=2*g()-1,a=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(r)*a,e[1]=Math.sin(r)*a,e[2]=n*t,e}function tn(e,t,r){var n=t[0],a=t[1],o=t[2],i=r[3]*n+r[7]*a+r[11]*o+r[15];return i=i||1,e[0]=(r[0]*n+r[4]*a+r[8]*o+r[12])/i,e[1]=(r[1]*n+r[5]*a+r[9]*o+r[13])/i,e[2]=(r[2]*n+r[6]*a+r[10]*o+r[14])/i,e}function rn(e,t,r){var n=t[0],a=t[1],o=t[2];return e[0]=n*r[0]+a*r[3]+o*r[6],e[1]=n*r[1]+a*r[4]+o*r[7],e[2]=n*r[2]+a*r[5]+o*r[8],e}function nn(e,t,r){var n=r[0],a=r[1],o=r[2],i=r[3],l=t[0],u=t[1],s=t[2],c=a*s-o*u,f=o*l-n*s,d=n*u-a*l,p=a*d-o*f,g=o*c-n*d,m=n*f-a*c,v=2*i;return c*=v,f*=v,d*=v,p*=2,g*=2,m*=2,e[0]=l+c+p,e[1]=u+f+g,e[2]=s+d+m,e}function an(e,t,r,n){var a=[],o=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],o[0]=a[0],o[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),o[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function on(e,t,r,n){var a=[],o=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],o[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),o[1]=a[1],o[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function ln(e,t,r,n){var a=[],o=[];return a[0]=t[0]-r[0],a[1]=t[1]-r[1],a[2]=t[2]-r[2],o[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),o[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),o[2]=a[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function un(e,t){var r=e[0],n=e[1],a=e[2],o=t[0],i=t[1],l=t[2],u=Math.sqrt(r*r+n*n+a*a)*Math.sqrt(o*o+i*i+l*l),s=u&&Yr(e,t)/u;return Math.acos(Math.min(Math.max(s,-1),1))}function sn(e){return e[0]=0,e[1]=0,e[2]=0,e}function cn(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function fn(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function dn(e,t){var r=e[0],n=e[1],a=e[2],o=t[0],i=t[1],l=t[2];return Math.abs(r-o)<=d*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-i)<=d*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-l)<=d*Math.max(1,Math.abs(a),Math.abs(l))}sr("vtkActor2D",Pr);var pn=kr,gn=_r,mn=Lr,vn=zr,hn=Wr,yn=Er,bn=Hr,Tn=function(){var e=Or();return function(t,r,n,a,o,i){var l,u;for(r||(r=3),n||(n=0),u=a?Math.min(a*r+n,t.length):t.length,l=n;l<u;l+=r)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],o(e,e,i),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2];return t}}(),xn=Math.sqrt(50),Sn=Math.sqrt(10),wn=Math.sqrt(2);function Cn(e,t,r){var n,a,o,i=(t-e)/Math.max(0,r),l=Math.floor(Math.log10(i)),u=i/Math.pow(10,l),s=u>=xn?10:u>=Sn?5:u>=wn?2:1;return l<0?(o=Math.pow(10,-l)/s,(n=Math.round(e*o))/o<e&&++n,(a=Math.round(t*o))/o>t&&--a,o=-o):(o=Math.pow(10,l)*s,(n=Math.round(e/o))*o<e&&++n,(a=Math.round(t/o))*o>t&&--a),a<n&&.5<=r&&r<2?Cn(e,t,2*r):[n,a,o]}function Pn(e,t,r){return Cn(e=+e,t=+t,r=+r)[2]}function On(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function An(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function En(e){var t,r,n;function a(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<o){if(0!==t(n,n))return o;do{var i=a+o>>>1;r(e[i],n)<0?a=i+1:o=i}while(a<o)}return a}return 2!==e.length?(t=On,r=function(t,r){return On(e(t),r)},n=function(t,r){return e(t)-r}):(t=e===On||e===An?e:In,r=e,n=e),{left:a,center:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=a(e,t,r,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return o>r&&n(e[o-1],t)>-n(e[o],t)?o-1:o},right:function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(a<o){if(0!==t(n,n))return o;do{var i=a+o>>>1;r(e[i],n)<=0?a=i+1:o=i}while(a<o)}return a}}}function In(){return 0}var Rn=En(On),Mn=Rn.right,Dn=(Rn.left,En((function(e){return null===e?NaN:+e})).center,Mn);function kn(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function _n(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Ln(){}var Bn=.7,Vn=1/Bn,Nn="\\s*([+-]?\\d+)\\s*",Fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Un="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Gn=/^#([0-9a-f]{3,8})$/,jn=new RegExp("^rgb\\(".concat(Nn,",").concat(Nn,",").concat(Nn,"\\)$")),zn=new RegExp("^rgb\\(".concat(Un,",").concat(Un,",").concat(Un,"\\)$")),Wn=new RegExp("^rgba\\(".concat(Nn,",").concat(Nn,",").concat(Nn,",").concat(Fn,"\\)$")),Hn=new RegExp("^rgba\\(".concat(Un,",").concat(Un,",").concat(Un,",").concat(Fn,"\\)$")),Kn=new RegExp("^hsl\\(".concat(Fn,",").concat(Un,",").concat(Un,"\\)$")),Xn=new RegExp("^hsla\\(".concat(Fn,",").concat(Un,",").concat(Un,",").concat(Fn,"\\)$")),qn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Yn(){return this.rgb().formatHex()}function Qn(){return this.rgb().formatRgb()}function $n(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Gn.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?Zn(t):3===r?new ta(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?Jn(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?Jn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=jn.exec(e))?new ta(t[1],t[2],t[3],1):(t=zn.exec(e))?new ta(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Wn.exec(e))?Jn(t[1],t[2],t[3],t[4]):(t=Hn.exec(e))?Jn(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Kn.exec(e))?la(t[1],t[2]/100,t[3]/100,1):(t=Xn.exec(e))?la(t[1],t[2]/100,t[3]/100,t[4]):qn.hasOwnProperty(e)?Zn(qn[e]):"transparent"===e?new ta(NaN,NaN,NaN,0):null}function Zn(e){return new ta(e>>16&255,e>>8&255,255&e,1)}function Jn(e,t,r,n){return n<=0&&(e=t=r=NaN),new ta(e,t,r,n)}function ea(e,t,r,n){return 1===arguments.length?((a=e)instanceof Ln||(a=$n(a)),a?new ta((a=a.rgb()).r,a.g,a.b,a.opacity):new ta):new ta(e,t,r,null==n?1:n);var a}function ta(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function ra(){return"#".concat(ia(this.r)).concat(ia(this.g)).concat(ia(this.b))}function na(){var e=aa(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(oa(this.r),", ").concat(oa(this.g),", ").concat(oa(this.b)).concat(1===e?")":", ".concat(e,")"))}function aa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function oa(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ia(e){return((e=oa(e))<16?"0":"")+e.toString(16)}function la(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new sa(e,t,r,n)}function ua(e){if(e instanceof sa)return new sa(e.h,e.s,e.l,e.opacity);if(e instanceof Ln||(e=$n(e)),!e)return new sa;if(e instanceof sa)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),o=Math.max(t,r,n),i=NaN,l=o-a,u=(o+a)/2;return l?(i=t===o?(r-n)/l+6*(r<n):r===o?(n-t)/l+2:(t-r)/l+4,l/=u<.5?o+a:2-o-a,i*=60):l=u>0&&u<1?0:i,new sa(i,l,u,e.opacity)}function sa(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function ca(e){return(e=(e||0)%360)<0?e+360:e}function fa(e){return Math.max(0,Math.min(1,e||0))}function da(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}function pa(e,t,r,n,a){var o=e*e,i=o*e;return((1-3*e+3*o-i)*t+(4-6*o+3*i)*r+(1+3*e+3*o-3*i)*n+i*a)/6}kn(Ln,$n,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Yn,formatHex:Yn,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return ua(this).formatHsl()},formatRgb:Qn,toString:Qn}),kn(ta,ea,_n(Ln,{brighter:function(e){return e=null==e?Vn:Math.pow(Vn,e),new ta(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Bn:Math.pow(Bn,e),new ta(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new ta(oa(this.r),oa(this.g),oa(this.b),aa(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ra,formatHex:ra,formatHex8:function(){return"#".concat(ia(this.r)).concat(ia(this.g)).concat(ia(this.b)).concat(ia(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:na,toString:na})),kn(sa,(function(e,t,r,n){return 1===arguments.length?ua(e):new sa(e,t,r,null==n?1:n)}),_n(Ln,{brighter:function(e){return e=null==e?Vn:Math.pow(Vn,e),new sa(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Bn:Math.pow(Bn,e),new sa(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new ta(da(e>=240?e-240:e+120,a,n),da(e,a,n),da(e<120?e+240:e-120,a,n),this.opacity)},clamp:function(){return new sa(ca(this.h),fa(this.s),fa(this.l),aa(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=aa(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(ca(this.h),", ").concat(100*fa(this.s),"%, ").concat(100*fa(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));var ga=function(e){return function(){return e}};function ma(e,t){return function(r){return e+r*t}}function va(e){return 1===(e=+e)?ha:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}(t,r,e):ga(isNaN(t)?r:t)}}function ha(e,t){var r=t-e;return r?ma(e,r):ga(isNaN(e)?t:e)}var ya=function e(t){var r=va(t);function n(e,t){var n=r((e=ea(e)).r,(t=ea(t)).r),a=r(e.g,t.g),o=r(e.b,t.b),i=ha(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=a(t),e.b=o(t),e.opacity=i(t),e+""}}return n.gamma=e,n}(1);function ba(e){return function(t){var r,n,a=t.length,o=new Array(a),i=new Array(a),l=new Array(a);for(r=0;r<a;++r)n=ea(t[r]),o[r]=n.r||0,i[r]=n.g||0,l[r]=n.b||0;return o=e(o),i=e(i),l=e(l),n.opacity=1,function(e){return n.r=o(e),n.g=i(e),n.b=l(e),n+""}}}ba((function(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),a=e[n],o=e[n+1],i=n>0?e[n-1]:2*a-o,l=n<t-1?e[n+2]:2*o-a;return pa((r-n/t)*t,i,a,o,l)}})),ba((function(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),a=e[(n+t-1)%t],o=e[n%t],i=e[(n+1)%t],l=e[(n+2)%t];return pa((r-n/t)*t,a,o,i,l)}}));function Ta(e,t){var r,n=t?t.length:0,a=e?Math.min(n,e.length):0,o=new Array(a),i=new Array(n);for(r=0;r<a;++r)o[r]=Ea(e[r],t[r]);for(;r<n;++r)i[r]=t[r];return function(e){for(r=0;r<a;++r)i[r]=o[r](e);return i}}function xa(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Sa(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function wa(e,t){var r,n={},a={};for(r in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)r in e?n[r]=Ea(e[r],t[r]):a[r]=t[r];return function(e){for(r in n)a[r]=n[r](e);return a}}var Ca=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pa=new RegExp(Ca.source,"g");function Oa(e,t){var r,n,a,o=Ca.lastIndex=Pa.lastIndex=0,i=-1,l=[],u=[];for(e+="",t+="";(r=Ca.exec(e))&&(n=Pa.exec(t));)(a=n.index)>o&&(a=t.slice(o,a),l[i]?l[i]+=a:l[++i]=a),(r=r[0])===(n=n[0])?l[i]?l[i]+=n:l[++i]=n:(l[++i]=null,u.push({i:i,x:Sa(r,n)})),o=Pa.lastIndex;return o<t.length&&(a=t.slice(o),l[i]?l[i]+=a:l[++i]=a),l.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var r,n=0;n<t;++n)l[(r=u[n]).i]=r.x(e);return l.join("")})}function Aa(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,a=t.slice();return function(o){for(r=0;r<n;++r)a[r]=e[r]*(1-o)+t[r]*o;return a}}function Ea(e,t){var r,n,a=typeof t;return null==t||"boolean"===a?ga(t):("number"===a?Sa:"string"===a?(r=$n(t))?(t=r,ya):Oa:t instanceof $n?ya:t instanceof Date?xa:(n=t,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(t)?Ta:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?wa:Sa:Aa))(e,t)}function Ia(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Ra(e){return+e}var Ma=[0,1];function Da(e){return e}function ka(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r});var r}function _a(e,t,r){var n=e[0],a=e[1],o=t[0],i=t[1];return a<n?(n=ka(a,n),o=r(i,o)):(n=ka(n,a),o=r(o,i)),function(e){return o(n(e))}}function La(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),o=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=ka(e[i],e[i+1]),o[i]=r(t[i],t[i+1]);return function(t){var r=Dn(e,t,1,n)-1;return o[r](a[r](t))}}function Ba(){var e,t,r,n,a,o,i=Ma,l=Ma,u=Ea,s=Da;function c(){var e=Math.min(i.length,l.length);return s!==Da&&(s=function(e,t){var r;return e>t&&(r=e,e=t,t=r),function(r){return Math.max(e,Math.min(t,r))}}(i[0],i[e-1])),n=e>2?La:_a,a=o=null,f}function f(t){return null==t||isNaN(t=+t)?r:(a||(a=n(i.map(e),l,u)))(e(s(t)))}return f.invert=function(r){return s(t((o||(o=n(l,i.map(e),Sa)))(r)))},f.domain=function(e){return arguments.length?(i=Array.from(e,Ra),c()):i.slice()},f.range=function(e){return arguments.length?(l=Array.from(e),c()):l.slice()},f.rangeRound=function(e){return l=Array.from(e),u=Ia,c()},f.clamp=function(e){return arguments.length?(s=!!e||Da,c()):s!==Da},f.interpolate=function(e){return arguments.length?(u=e,c()):u},f.unknown=function(e){return arguments.length?(r=e,f):r},function(r,n){return e=r,t=n,c()}}function Va(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var Na,Fa=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ua(e){if(!(t=Fa.exec(e)))throw new Error("invalid format: "+e);var t;return new Ga({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Ga(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function ja(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function za(e){return(e=ja(Math.abs(e)))?e[1]:NaN}function Wa(e,t){var r=ja(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}Ua.prototype=Ga.prototype,Ga.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ha={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Wa(100*e,t)},r:Wa,s:function(e,t){var r=ja(e,t);if(!r)return e+"";var n=r[0],a=r[1],o=a-(Na=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=n.length;return o===i?n:o>i?n+new Array(o-i+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+ja(e,Math.max(0,t+o-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function Ka(e){return e}var Xa,qa,Ya,Qa=Array.prototype.map,$a=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Za(e){var t,r,n=void 0===e.grouping||void 0===e.thousands?Ka:(t=Qa.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var a=e.length,o=[],i=0,l=t[0],u=0;a>0&&l>0&&(u+l+1>n&&(l=Math.max(1,n-u)),o.push(e.substring(a-=l,a+l)),!((u+=l+1)>n));)l=t[i=(i+1)%t.length];return o.reverse().join(r)}),a=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",i=void 0===e.decimal?".":e.decimal+"",l=void 0===e.numerals?Ka:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Qa.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",s=void 0===e.minus?"\u2212":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=Ua(e)).fill,r=e.align,f=e.sign,d=e.symbol,p=e.zero,g=e.width,m=e.comma,v=e.precision,h=e.trim,y=e.type;"n"===y?(m=!0,y="g"):Ha[y]||(void 0===v&&(v=12),h=!0,y="g"),(p||"0"===t&&"="===r)&&(p=!0,t="0",r="=");var b="$"===d?a:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",T="$"===d?o:/[%p]/.test(y)?u:"",x=Ha[y],S=/[defgprs%]/.test(y);function w(e){var a,o,u,d=b,w=T;if("c"===y)w=x(e)+w,e="";else{var C=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:x(Math.abs(e),v),h&&(e=function(e){e:for(var t,r=e.length,n=1,a=-1;n<r;++n)switch(e[n]){case".":a=t=n;break;case"0":0===a&&(a=n),t=n;break;default:if(!+e[n])break e;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),C&&0===+e&&"+"!==f&&(C=!1),d=(C?"("===f?f:s:"-"===f||"("===f?"":f)+d,w=("s"===y?$a[8+Na/3]:"")+w+(C&&"("===f?")":""),S)for(a=-1,o=e.length;++a<o;)if(48>(u=e.charCodeAt(a))||u>57){w=(46===u?i+e.slice(a+1):e.slice(a))+w,e=e.slice(0,a);break}}m&&!p&&(e=n(e,1/0));var P=d.length+e.length+w.length,O=P<g?new Array(g-P+1).join(t):"";switch(m&&p&&(e=n(O+e,O.length?g-w.length:1/0),O=""),r){case"<":e=d+e+w+O;break;case"=":e=d+O+e+w;break;case"^":e=O.slice(0,P=O.length>>1)+d+e+w+O.slice(P);break;default:e=O+d+e+w}return l(e)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),w.toString=function(){return e+""},w}return{format:f,formatPrefix:function(e,t){var r=f(((e=Ua(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(za(t)/3))),a=Math.pow(10,-n),o=$a[8+n/3];return function(e){return r(a*e)+o}}}}function Ja(e,t,r,n){var a,o=function(e,t,r){r=+r;var n=(t=+t)<(e=+e),a=n?Pn(t,e,r):Pn(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}(e,t,r);switch((n=Ua(null==n?",f":n)).type){case"s":var i=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(a=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(za(t)/3)))-za(Math.abs(e)))}(o,i))||(n.precision=a),Ya(n,i);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(a=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,za(t)-za(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=a-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(a=function(e){return Math.max(0,-za(Math.abs(e)))}(o))||(n.precision=a-2*("%"===n.type))}return qa(n)}function eo(e){var t=e.domain;return e.ticks=function(e){var r=t();return function(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];var n=t<e,a=f(n?Cn(t,e,r):Cn(e,t,r),3),o=a[0],i=a[1],l=a[2];if(!(i>=o))return[];var u=i-o+1,s=new Array(u);if(n)if(l<0)for(var c=0;c<u;++c)s[c]=(i-c)/-l;else for(var d=0;d<u;++d)s[d]=(i-d)*l;else if(l<0)for(var p=0;p<u;++p)s[p]=(o+p)/-l;else for(var g=0;g<u;++g)s[g]=(o+g)*l;return s}(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return Ja(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,a,o=t(),i=0,l=o.length-1,u=o[i],s=o[l],c=10;for(s<u&&(a=u,u=s,s=a,a=i,i=l,l=a);c-- >0;){if((a=Pn(u,s,r))===n)return o[i]=u,o[l]=s,t(o);if(a>0)u=Math.floor(u/a)*a,s=Math.ceil(s/a)*a;else{if(!(a<0))break;u=Math.ceil(u*a)/a,s=Math.floor(s*a)/a}n=a}return e},e}function to(){var e=Ba()(Da,Da);return e.copy=function(){return t=e,to().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown());var t},Va.apply(e,arguments),eo(e)}Xa=Za({thousands:",",grouping:[3],currency:["$",""]}),qa=Xa.format,Ya=Xa.formatPrefix;r(616);var ro=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],no=1e-6,ao=1e-12,oo=er.vtkErrorMacro,io=er.vtkWarningMacro;function lo(e){return function(){return oo("vtkMath::".concat(e," - NOT IMPLEMENTED"))}}function uo(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=Array(e),r=0;r<e;++r)t[r]=0;return t}function so(e){return e/180*Math.PI}function co(e){return 180*e/Math.PI}var fo=Math.round;Math.floor,Math.ceil,Math.min,Math.max;lo("ceilLog2"),lo("factorial");function po(e){for(var t=1;t<e;)t*=2;return t}function go(e){return e===po(e)}lo("gaussian");function mo(e,t,r){return r[0]=e[0]+t[0],r[1]=e[1]+t[1],r[2]=e[2]+t[2],r}function vo(e,t,r){return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],r}function ho(e,t,r,n){return n[0]=e[0]+t[0]*r,n[1]=e[1]+t[1]*r,n[2]=e[2]+t[2]*r,n}function yo(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function bo(e,t,r){var n=e[1]*t[2]-e[2]*t[1],a=e[2]*t[0]-e[0]*t[2],o=e[0]*t[1]-e[1]*t[0];return r[0]=n,r[1]=a,r[2]=o,r}function To(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;switch(t){case 1:return Math.abs(e);case 2:return Math.sqrt(e[0]*e[0]+e[1]*e[1]);case 3:return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);default:for(var r=0,n=0;n<t;n++)r+=e[n]*e[n];return Math.sqrt(r)}}function xo(e){var t=To(e);return 0!==t&&(e[0]/=t,e[1]/=t,e[2]/=t),t}function So(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])+(e[2]-t[2])*(e[2]-t[2])}function wo(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Co(e){var t=wo(e);return 0!==t&&(e[0]/=t,e[1]/=t),t}function Po(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 2===t.length?t[0][0]*t[1][1]-t[1][0]*t[0][1]:4===t.length?t[0]*t[3]-t[1]*t[2]:Number.NaN}function Oo(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:no;if(e.length!==t.length)return!1;return e.every((function(e,n){return Math.abs(e-t[n])<=r}))}var Ao=Oo;function Eo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!"".concat(e).includes("e"))return+"".concat(Math.round("".concat(e,"e+").concat(t)),"e-").concat(t);var r="".concat(e).split("e"),n="";return+r[1]+t>0&&(n="+"),+"".concat(Math.round("".concat(+r[0],"e").concat(n).concat(+r[1]+t)),"e-").concat(t)}function Io(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[0]=Eo(e[0],r),t[1]=Eo(e[1],r),t[2]=Eo(e[2],r),t}function Ro(e,t,r){var n,a,o,i,l,u,s,c=0,f=uo(r);for(n=0;n<r;n++){for(i=0,a=0;a<r;a++)(s=Math.abs(e[n*r+a]))>i&&(i=s);if(0===i)return io("Unable to factor linear system"),0;f[n]=1/i}for(a=0;a<r;a++){for(n=0;n<a;n++){for(l=e[n*r+a],o=0;o<n;o++)l-=e[n*r+o]*e[o*r+a];e[n*r+a]=l}for(i=0,n=a;n<r;n++){for(l=e[n*r+a],o=0;o<a;o++)l-=e[n*r+o]*e[o*r+a];e[n*r+a]=l,(u=f[n]*Math.abs(l))>=i&&(i=u,c=n)}if(a!==c){for(o=0;o<r;o++)u=e[c*r+o],e[c*r+o]=e[a*r+o],e[a*r+o]=u;f[c]=f[a]}if(t[a]=c,Math.abs(e[a*r+a])<=ao)return io("Unable to factor linear system"),0;if(a!==r-1)for(u=1/e[a*r+a],n=a+1;n<r;n++)e[n*r+a]*=u}return 1}function Mo(e,t,r,n){var a,o,i,l,u;for(i=-1,a=0;a<n;a++){if(u=r[l=t[a]],r[l]=r[a],i>=0)for(o=i;o<=a-1;o++)u-=e[a*n+o]*r[o];else 0!==u&&(i=a);r[a]=u}for(a=n-1;a>=0;a--){for(u=r[a],o=a+1;o<n;o++)u-=e[a*n+o]*r[o];r[a]=u/e[a*n+a]}}function Do(e,t,r){if(2===r){var n=uo(2),a=Po(e[0],e[1],e[2],e[3]);return 0===a?0:(n[0]=(e[3]*t[0]-e[1]*t[1])/a,n[1]=(-e[2]*t[0]+e[0]*t[1])/a,t[0]=n[0],t[1]=n[1],1)}if(1===r)return 0===e[0]?0:(t[0]/=e[0],1);var o=uo(r);return 0===Ro(e,o,r)?0:(Mo(e,o,t,r),1)}function ko(e,t){var r,n,a,o=qe(e,3),i=o[0],l=o[1],u=o[2],s=1/3,c=1/6,f=2/3,d=5/6;i>c&&i<=s?(n=1,r=(s-i)/c,a=0):i>s&&i<=.5?(n=1,a=(i-s)/c,r=0):i>.5&&i<=f?(a=1,n=(f-i)/c,r=0):i>f&&i<=d?(a=1,r=(i-f)/c,n=0):i>d&&i<=1?(r=1,a=(1-i)/c,n=0):(r=1,n=i/c,a=0),r=l*r+(1-l),n=l*n+(1-l),a=l*a+(1-l),r*=u,n*=u,a*=u,t[0]=r,t[1]=n,t[2]=a}function _o(e){return e[0]=1,e[1]=-1,e[2]=1,e[3]=-1,e[4]=1,e[5]=-1,e}function Lo(e){return!(e[1]-e[0]<0)}function Bo(e,t,r){return e<t?t:e>r?r:e}function Vo(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0];return n[0]=Bo(e[0],t[0],r[0]),n[1]=Bo(e[1],t[1],r[1]),n[2]=Bo(e[2],t[2],r[2]),n}lo("GetScalarTypeFittingRange"),lo("GetAdjustedScalarRange");Number.isFinite;var No=Number.isNaN,Fo=No;function Uo(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}function Go(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var jo=1e-6,zo="coincide",Wo="disjoint";function Ho(e,t,r){var n=r[0]*(e[0]-t[0])+r[1]*(e[1]-t[1])+r[2]*(e[2]-t[2]);return Math.abs(n)}function Ko(e,t,r,n){var a=[];vo(e,t,a);var o=yo(r,a);n[0]=e[0]-o*r[0],n[1]=e[1]-o*r[1],n[2]=e[2]-o*r[2]}function Xo(e,t,r){var n=yo(e,t),a=yo(t,t);return 0===a&&(a=1),r[0]=e[0]-n*t[0]/a,r[1]=e[1]-n*t[1]/a,r[2]=e[2]-n*t[2]/a,r}function qo(e,t,r,n){var a=[];vo(e,t,a);var o=yo(r,a),i=yo(r,r);0!==i?(n[0]=e[0]-o*r[0]/i,n[1]=e[1]-o*r[1]/i,n[2]=e[2]-o*r[2]/i):(n[0]=e[0],n[1]=e[1],n[2]=e[2])}function Yo(e,t,r,n){var a={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},o=[],i=[];vo(t,e,o),vo(r,e,i);var l=yo(n,i),u=yo(n,o);return(u<0?-u:u)<=(l<0?-l*jo:l*jo)||(a.t=l/u,a.x[0]=e[0]+a.t*o[0],a.x[1]=e[1]+a.t*o[1],a.x[2]=e[2]+a.t*o[2],a.intersection=!0,a.betweenPoints=a.t>=0&&a.t<=1),a}function Qo(e,t,r,n){var a={intersection:!1,l0:[],l1:[],error:null},o=[];bo(t,n,o);var i,l=o.map((function(e){return Math.abs(e)}));if(l[0]+l[1]+l[2]<jo){var u=[];return vo(e,r,u),0===yo(t,u)?a.error=zo:a.error=Wo,a}i=l[0]>l[1]&&l[0]>l[2]?"x":l[1]>l[2]?"y":"z";var s=[],c=-yo(t,e),f=-yo(n,r);switch(i){case"x":s[0]=0,s[1]=(f*t[2]-c*n[2])/o[0],s[2]=(c*n[1]-f*t[1])/o[0];break;case"y":s[0]=(c*n[2]-f*t[2])/o[1],s[1]=0,s[2]=(f*t[0]-c*n[0])/o[1];break;case"z":s[0]=(f*t[1]-c*n[1])/o[2],s[1]=(c*n[0]-f*t[0])/o[2],s[2]=0}return a.l0=s,mo(s,o,a.l1),a.intersection=!0,a}var $o={evaluate:function(e,t,r){return e[0]*(r[0]-t[0])+e[1]*(r[1]-t[1])+e[2]*(r[2]-t[2])},distanceToPlane:Ho,projectPoint:Ko,projectVector:Xo,generalizedProjectPoint:qo,intersectWithLine:Yo,intersectWithPlane:Qo,DISJOINT:Wo,COINCIDE:zo};var Zo={normal:[0,0,1],origin:[0,0,0]};function Jo(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Zo,r),er.obj(e,t),er.setGetArray(e,t,["normal","origin"],3),function(e,t){t.classHierarchy.push("vtkPlane"),e.distanceToPlane=function(e){return Ho(e,t.origin,t.normal)},e.projectPoint=function(e,r){Ko(e,t.origin,t.normal,r)},e.projectVector=function(e,r){return Xo(e,t.normal,r)},e.push=function(e){if(0!==e)for(var r=0;r<3;r++)t.origin[r]+=e*t.normal[r]},e.generalizedProjectPoint=function(e,r){qo(e,t.origin,t.normal,r)},e.evaluateFunction=function(e,r,n){return Array.isArray(e)?t.normal[0]*(e[0]-t.origin[0])+t.normal[1]*(e[1]-t.origin[1])+t.normal[2]*(e[2]-t.origin[2]):t.normal[0]*(e-t.origin[0])+t.normal[1]*(r-t.origin[1])+t.normal[2]*(n-t.origin[2])},e.evaluateGradient=function(e){return[t.normal[0],t.normal[1],t.normal[2]]},e.intersectWithLine=function(e,r){return Yo(e,r,t.origin,t.normal)},e.intersectWithPlane=function(e,r){return Qo(e,r,t.origin,t.normal)}}(e,t)}var ei=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Go(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({newInstance:er.newInstance(Jo,"vtkPlane"),extend:Jo},$o);function ti(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ri=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function ni(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function ai(e){return(null===e||void 0===e?void 0:e.length)>=6&&e[0]<=e[1]&&e[2]<=e[3]&&e[4]<=e[5]}function oi(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function ii(e){return oi(e,ri)}function li(e,t,r,n){var a=qe(e,6),o=a[0],i=a[1],l=a[2],u=a[3],s=a[4],c=a[5];return e[0]=o<t?o:t,e[1]=i>t?i:t,e[2]=l<r?l:r,e[3]=u>r?u:r,e[4]=s<n?s:n,e[5]=c>n?c:n,e}function ui(e,t){if(0===t.length)return e;if(Array.isArray(t[0]))for(var r=0;r<t.length;++r)li.apply(void 0,[e].concat($e(t[r])));else for(var n=0;n<t.length;n+=3)li.apply(void 0,[e].concat($e(t.slice(n,n+3))));return e}function si(e,t,r,n,a,o,i){var l=qe(e,6),u=l[0],s=l[1],c=l[2],f=l[3],d=l[4],p=l[5];return void 0===i?(e[0]=Math.min(t[0],u),e[1]=Math.max(t[1],s),e[2]=Math.min(t[2],c),e[3]=Math.max(t[3],f),e[4]=Math.min(t[4],d),e[5]=Math.max(t[5],p)):(e[0]=Math.min(t,u),e[1]=Math.max(r,s),e[2]=Math.min(n,c),e[3]=Math.max(a,f),e[4]=Math.min(o,d),e[5]=Math.max(i,p)),e}function ci(e,t,r,n){var a=qe(e,6),o=a[0],i=a[1],l=a[2],u=a[3],s=a[4],c=a[5];return e[0]=t,e[1]=t>i?t:i,e[2]=r,e[3]=r>u?r:u,e[4]=n,e[5]=n>c?n:c,o!==t||l!==r||s!==n}function fi(e,t,r,n){var a=qe(e,6),o=a[0],i=a[1],l=a[2],u=a[3],s=a[4],c=a[5];return e[0]=t<o?t:o,e[1]=t,e[2]=r<l?r:l,e[3]=r,e[4]=n<s?n:s,e[5]=n,i!==t||u!==r||c!==n}function di(e,t){return e[0]-=t,e[1]+=t,e[2]-=t,e[3]+=t,e[4]-=t,e[5]+=t,e}function pi(e,t,r,n){return!!ai(e)&&(t>=0?(e[0]*=t,e[1]*=t):(e[0]=t*e[1],e[1]=t*e[0]),r>=0?(e[2]*=r,e[3]*=r):(e[2]=r*e[3],e[3]=r*e[2]),n>=0?(e[4]*=n,e[5]*=n):(e[4]=n*e[5],e[5]=n*e[4]),!0)}function gi(e){return[.5*(e[0]+e[1]),.5*(e[2]+e[3]),.5*(e[4]+e[5])]}function mi(e,t){return e[2*t+1]-e[2*t]}function vi(e){return[mi(e,0),mi(e,1),mi(e,2)]}function hi(e){return e.slice(0,2)}function yi(e){return e.slice(2,4)}function bi(e){return e.slice(4,6)}function Ti(e){var t=vi(e);return t[0]>t[1]?t[0]>t[2]?t[0]:t[2]:t[1]>t[2]?t[1]:t[2]}function xi(e){if(ai(e)){var t=vi(e);return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}return null}function Si(e){return[e[0],e[2],e[4]]}function wi(e){return[e[1],e[3],e[5]]}function Ci(e,t){return e<=0&&t>=0||e>=0&&t<=0}function Pi(e,t){for(var r=0,n=0;n<2;n++)for(var a=2;a<4;a++)for(var o=4;o<6;o++)t[r++]=[e[n],e[a],e[o]];return t}function Oi(e,t,r){return t[0]=e[0],t[1]=e[2],t[2]=e[4],r[0]=e[1],r[1]=e[3],r[2]=e[5],t}function Ai(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=Pi(e,[]),a=0;a<n.length;++a)tn(n[a],n[a],t);return ii(r),ui(r,n)}function Ei(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[0]=.5*(e[1]-e[0]),t[1]=.5*(e[3]-e[2]),t[2]=.5*(e[5]-e[4]),t}function Ii(e,t,r,n){for(var a=[].concat(ri),o=e.getData(),i=0;i<o.length;i+=3){var l=[o[i],o[i+1],o[i+2]],u=yo(l,t);a[0]=Math.min(u,a[0]),a[1]=Math.max(u,a[1]);var s=yo(l,r);a[2]=Math.min(s,a[2]),a[3]=Math.max(s,a[3]);var c=yo(l,n);a[4]=Math.min(c,a[4]),a[5]=Math.max(c,a[5])}return a}function Ri(e,t,r,n,a){for(var o=!0,i=[],l=0,u=[],s=[0,0,0],c=0;c<3;c++)t[c]<e[2*c]?(i[c]=1,s[c]=e[2*c],o=!1):t[c]>e[2*c+1]?(i[c]=0,s[c]=e[2*c+1],o=!1):i[c]=2;if(o)return n[0]=t[0],n[1]=t[1],n[2]=t[2],a[0]=0,1;for(var f=0;f<3;f++)2!==i[f]&&0!==r[f]?u[f]=(s[f]-t[f])/r[f]:u[f]=-1;for(var d=0;d<3;d++)u[l]<u[d]&&(l=d);if(u[l]>1||u[l]<0)return 0;a[0]=u[l];for(var p=0;p<3;p++)if(l!==p){if(n[p]=t[p]+u[l]*r[p],n[p]<e[2*p]||n[p]>e[2*p+1])return 0}else n[p]=s[p];return 1}function Mi(e,t,r){for(var n=[],a=0,o=1,i=1,l=4;l<=5;++l){n[2]=e[l];for(var u=2;u<=3;++u){n[1]=e[u];for(var s=0;s<=1;++s)if(n[0]=e[s],a=ei.evaluate(r,t,n),i&&(o=a>=0?1:-1,i=0),0===a||o>0&&a<0||o<0&&a>0)return 1}}return 0}function Di(e,t){if(!ai(e)||!ai(t))return!1;for(var r,n=[0,0,0,0,0,0],a=0;a<3;a++)if(r=!1,t[2*a]>=e[2*a]&&t[2*a]<=e[2*a+1]?(r=!0,n[2*a]=t[2*a]):e[2*a]>=t[2*a]&&e[2*a]<=t[2*a+1]&&(r=!0,n[2*a]=e[2*a]),t[2*a+1]>=e[2*a]&&t[2*a+1]<=e[2*a+1]?(r=!0,n[2*a+1]=t[2*a+1]):e[2*a+1]>=t[2*a]&&e[2*a+1]<=t[2*a+1]&&(r=!0,n[2*a+1]=e[2*a+1]),!r)return!1;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],!0}function ki(e,t){if(!ai(e)||!ai(t))return!1;for(var r=0;r<3;r++)if(!(t[2*r]>=e[2*r]&&t[2*r]<=e[2*r+1])&&!(e[2*r]>=t[2*r]&&e[2*r]<=t[2*r+1])&&!(t[2*r+1]>=e[2*r]&&t[2*r+1]<=e[2*r+1])&&!(e[2*r+1]>=t[2*r]&&e[2*r+1]<=t[2*r+1]))return!1;return!0}function _i(e,t,r,n){return!(t<e[0]||t>e[1])&&(!(r<e[2]||r>e[3])&&!(n<e[4]||n>e[5]))}function Li(e,t,r){for(var n=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],a=[0,0,0,0,0,0,0,0],o=0,i=0;i<2;i++)for(var l=2;l<4;l++)for(var u=4;u<6;u++){var s=[e[i],e[l],e[u]];a[o++]=ei.evaluate(r,t,s)}for(var c=2;c--&&!(Ci(a[n[c][0]],a[n[c][4]])&&Ci(a[n[c][1]],a[n[c][5]])&&Ci(a[n[c][2]],a[n[c][6]])&&Ci(a[n[c][3]],a[n[c][7]])););if(c<0)return!1;for(var f=Math.sign(r[c]),d=Math.abs((e[2*c+1]-e[2*c])*r[c]),p=f>0?1:0,g=0;g<4;g++)if(0!==d){var m=Math.abs(a[n[c][g]])/d;f>0&&m<p&&(p=m),f<0&&m>p&&(p=m)}var v=(1-p)*e[2*c]+p*e[2*c+1];return f>0?e[2*c]=v:e[2*c+1]=v,!0}var Bi=function(){function e(t){lt(this,e),this.bounds=t,this.bounds||(this.bounds=new Float64Array(ri))}return st(e,[{key:"getBounds",value:function(){return this.bounds}},{key:"equals",value:function(e){return ni(this.bounds,e)}},{key:"isValid",value:function(){return ai(this.bounds)}},{key:"setBounds",value:function(e){return oi(this.bounds,e)}},{key:"reset",value:function(){return ii(this.bounds)}},{key:"addPoint",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return li.apply(void 0,[this.bounds].concat(t))}},{key:"addPoints",value:function(e){return ui(this.bounds,e)}},{key:"addBounds",value:function(e,t,r,n,a,o){return si(this.bounds,e,t,r,n,a,o)}},{key:"setMinPoint",value:function(e,t,r){return ci(this.bounds,e,t,r)}},{key:"setMaxPoint",value:function(e,t,r){return fi(this.bounds,e,t,r)}},{key:"inflate",value:function(e){return di(this.bounds,e)}},{key:"scale",value:function(e,t,r){return pi(this.bounds,e,t,r)}},{key:"getCenter",value:function(){return gi(this.bounds)}},{key:"getLength",value:function(e){return mi(this.bounds,e)}},{key:"getLengths",value:function(){return vi(this.bounds)}},{key:"getMaxLength",value:function(){return Ti(this.bounds)}},{key:"getDiagonalLength",value:function(){return xi(this.bounds)}},{key:"getMinPoint",value:function(){return Si(this.bounds)}},{key:"getMaxPoint",value:function(){return wi(this.bounds)}},{key:"getXRange",value:function(){return hi(this.bounds)}},{key:"getYRange",value:function(){return yi(this.bounds)}},{key:"getZRange",value:function(){return bi(this.bounds)}},{key:"getCorners",value:function(e){return Pi(this.bounds,e)}},{key:"computeCornerPoints",value:function(e,t){return Oi(this.bounds,e,t)}},{key:"computeLocalBounds",value:function(e,t,r){return Ii(this.bounds,e,t,r)}},{key:"transformBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Ai(this.bounds,e,t)}},{key:"computeScale3",value:function(e){return Ei(this.bounds,e)}},{key:"cutWithPlane",value:function(e,t){return Li(this.bounds,e,t)}},{key:"intersectBox",value:function(e,t,r,n){return Ri(this.bounds,e,t,r,n)}},{key:"intersectPlane",value:function(e,t){return Mi(this.bounds,e,t)}},{key:"intersect",value:function(e){return Di(this.bounds,e)}},{key:"intersects",value:function(e){return ki(this.bounds,e)}},{key:"containsPoint",value:function(e,t,r){return _i(this.bounds,e,t,r)}},{key:"contains",value:function(e){return ki(this.bounds,e)}}]),e}();var Vi=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ti(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ti(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({newInstance:function(e){var t=e&&e.bounds;return new Bi(t)}},{equals:ni,isValid:ai,setBounds:oi,reset:ii,addPoint:li,addPoints:ui,addBounds:si,setMinPoint:ci,setMaxPoint:fi,inflate:di,scale:pi,scaleAboutCenter:function(e,t,r,n){if(!ai(e))return!1;var a=gi(e);return e[0]-=a[0],e[1]-=a[0],e[2]-=a[1],e[3]-=a[1],e[4]-=a[2],e[5]-=a[2],pi(e,t,r,n),e[0]+=a[0],e[1]+=a[0],e[2]+=a[1],e[3]+=a[1],e[4]+=a[2],e[5]+=a[2],!0},getCenter:gi,getLength:mi,getLengths:vi,getMaxLength:Ti,getDiagonalLength:xi,getMinPoint:Si,getMaxPoint:wi,getXRange:hi,getYRange:yi,getZRange:bi,getCorners:Pi,computeCornerPoints:Oi,computeLocalBounds:Ii,transformBounds:Ai,computeScale3:Ei,cutWithPlane:Li,intersectBox:Ri,intersectPlane:Mi,intersect:Di,intersects:ki,containsPoint:_i,contains:function(e,t){return!!ki(e,t)&&(!!_i.apply(void 0,[e].concat($e(Si(t))))&&!!_i.apply(void 0,[e].concat($e(wi(t)))))},INIT_BOUNDS:ri});function Ni(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3];return e[0]=r[0]*n+r[4]*a+r[8]*o+r[12]*i,e[1]=r[1]*n+r[5]*a+r[9]*o+r[13]*i,e[2]=r[2]*n+r[6]*a+r[10]*o+r[14]*i,e[3]=r[3]*n+r[7]*a+r[11]*o+r[15]*i,e}!function(){var e=function(){var e=new p(4);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}()}();function Fi(){var e=new p(4);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Ui(e,t,r){r*=.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function Gi(e,t,r){var n=t[0],a=t[1],o=t[2],i=t[3],l=r[0],u=r[1],s=r[2],c=r[3];return e[0]=n*c+i*l+a*s-o*u,e[1]=a*c+i*u+o*l-n*s,e[2]=o*c+i*s+n*u-a*l,e[3]=i*c-n*l-a*u-o*s,e}function ji(e,t,r,n){var a,o,i,l,u,s=t[0],c=t[1],f=t[2],p=t[3],g=r[0],m=r[1],v=r[2],h=r[3];return(o=s*g+c*m+f*v+p*h)<0&&(o=-o,g=-g,m=-m,v=-v,h=-h),1-o>d?(a=Math.acos(o),i=Math.sin(a),l=Math.sin((1-n)*a)/i,u=Math.sin(n*a)/i):(l=1-n,u=n),e[0]=l*s+u*g,e[1]=l*c+u*m,e[2]=l*f+u*v,e[3]=l*p+u*h,e}var zi=function(e,t,r,n){var a=new p(4);return a[0]=e,a[1]=t,a[2]=r,a[3]=n,a},Wi=function(e,t){var r=t[0],n=t[1],a=t[2],o=t[3],i=r*r+n*n+a*a+o*o;return i>0&&(i=1/Math.sqrt(i)),e[0]=r*i,e[1]=n*i,e[2]=a*i,e[3]=o*i,e},Hi=(function(){var e=Or(),t=Ir(1,0,0),r=Ir(0,1,0)}(),function(){var e=Fi(),t=Fi()}(),function(){var e=ge()}(),{CoordinateSystem:{DISPLAY:0,WORLD:1}});function Ki(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Xi=Hi.CoordinateSystem;function qi(e){return function(){return er.vtkErrorMacro("vtkProp::".concat(e," - NOT IMPLEMENTED"))}}var Yi={allocatedRenderTime:10,coordinateSystem:Xi.WORLD,dragable:!0,estimatedRenderTime:0,paths:null,pickable:!0,renderTimeMultiplier:1,savedEstimatedRenderTime:0,textures:[],useBounds:!0,visibility:!0};function Qi(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Yi,r),er.obj(e,t),er.get(e,t,["estimatedRenderTime","allocatedRenderTime"]),er.setGet(e,t,["_parentProp","coordinateSystem","dragable","pickable","renderTimeMultiplier","useBounds","visibility"]),er.moveToProtected(e,t,["parentProp"]),function(e,t){t.classHierarchy.push("vtkProp"),e.getMTime=function(){for(var e=t.mtime,r=0;r<t.textures.length;++r){var n=t.textures[r].getMTime();n>e&&(e=n)}return e},e.processSelectorPixelBuffers=function(e,t){},e.getNestedProps=function(){return null},e.getActors=function(){return[]},e.getActors2D=function(){return[]},e.getVolumes=function(){return[]},e.pick=qi("pick"),e.hasKey=qi("hasKey"),e.getNestedVisibility=function(){return t.visibility&&(!t._parentProp||t._parentProp.getNestedVisibility())},e.getNestedPickable=function(){return t.pickable&&(!t._parentProp||t._parentProp.getNestedPickable())},e.getNestedDragable=function(){return t.dragable&&(!t._parentProp||t._parentProp.getNestedDragable())},e.getRedrawMTime=function(){return t.mtime},e.setEstimatedRenderTime=function(e){t.estimatedRenderTime=e,t.savedEstimatedRenderTime=e},e.restoreEstimatedRenderTime=function(){t.estimatedRenderTime=t.savedEstimatedRenderTime},e.addEstimatedRenderTime=function(e){t.estimatedRenderTime+=e},e.setAllocatedRenderTime=function(e){t.allocatedRenderTime=e,t.savedEstimatedRenderTime=t.estimatedRenderTime,t.estimatedRenderTime=0},e.getSupportsSelection=function(){return!1},e.getTextures=function(){return t.textures},e.hasTexture=function(e){return-1!==t.textures.indexOf(e)},e.addTexture=function(r){r&&!e.hasTexture(r)&&(t.textures=t.textures.concat(r),e.modified())},e.removeTexture=function(r){var n=t.textures.filter((function(e){return e!==r}));t.textures.length!==n.length&&(t.textures=n,e.modified())},e.removeAllTextures=function(){t.textures=[],e.modified()},e.setCoordinateSystemToWorld=function(){return e.setCoordinateSystem(Xi.WORLD)},e.setCoordinateSystemToDisplay=function(){return e.setCoordinateSystem(Xi.DISPLAY)}}(e,t)}var $i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ki(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({newInstance:er.newInstance(Qi,"vtkProp"),extend:Qi},Hi);function Zi(e,t){t.classHierarchy.push("vtkProp3D"),e.addPosition=function(r){t.position=t.position.map((function(e,t){return e+r[t]})),e.modified()},e.getOrientationWXYZ=function(){var e=Fi();W(e,t.rotation);var r=new Float64Array(3),n=function(e,t){var r=2*Math.acos(t[3]),n=Math.sin(r/2);return n>d?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),r}(r,e);return[co(n),r[0],r[1],r[2]]},e.rotateX=function(r){0!==r&&(M(t.rotation,t.rotation,so(r)),e.modified())},e.rotateY=function(r){0!==r&&(D(t.rotation,t.rotation,so(r)),e.modified())},e.rotateZ=function(r){0!==r&&(k(t.rotation,t.rotation,so(r)),e.modified())},e.rotateWXYZ=function(r,n,a,o){if(0!==r&&(0!==n||0!==a||0!==o)){var i=so(r),l=Fi();Ui(l,[n,a,o],i);var u=new Float64Array(16);X(u,l),A(t.rotation,t.rotation,u),e.modified()}},e.setOrientation=function(r,n,a){return(r!==t.orientation[0]||n!==t.orientation[1]||a!==t.orientation[2])&&(t.orientation=[r,n,a],S(t.rotation),e.rotateZ(a),e.rotateX(r),e.rotateY(n),e.modified(),!0)},e.setUserMatrix=function(r){return!Ao(t.userMatrix,r)&&(b(t.userMatrix,r),e.modified(),!0)},e.getMatrix=function(){return e.computeMatrix(),t.matrix},e.computeMatrix=function(){if(e.getMTime()>t.matrixMTime.getMTime()){S(t.matrix),t.userMatrix&&A(t.matrix,t.matrix,t.userMatrix),E(t.matrix,t.matrix,t.origin),E(t.matrix,t.matrix,t.position),A(t.matrix,t.matrix,t.rotation),I(t.matrix,t.matrix,t.scale),E(t.matrix,t.matrix,[-t.origin[0],-t.origin[1],-t.origin[2]]),w(t.matrix,t.matrix),t.isIdentity=!0;for(var r=0;r<4;++r)for(var n=0;n<4;++n)(r===n?1:0)!==t.matrix[r+4*n]&&(t.isIdentity=!1);t.matrixMTime.modified()}},e.getCenter=function(){return Vi.getCenter(t.bounds)},e.getLength=function(){return Vi.getLength(t.bounds)},e.getXRange=function(){return Vi.getXRange(t.bounds)},e.getYRange=function(){return Vi.getYRange(t.bounds)},e.getZRange=function(){return Vi.getZRange(t.bounds)},e.getUserMatrix=function(){return t.userMatrix},e.onModified((function(){e.computeMatrix()}))}var Ji={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],rotation:null,scale:[1,1,1],bounds:[1,-1,1,-1,1,-1],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function el(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ji,r),$i.extend(e,t,r),t.matrixMTime={},er.obj(t.matrixMTime),er.get(e,t,["bounds","isIdentity"]),er.getArray(e,t,["orientation"]),er.setGetArray(e,t,["origin","position","scale"],3),t.matrix=S(new Float64Array(16)),t.rotation=S(new Float64Array(16)),t.userMatrix=S(new Float64Array(16)),t.transform=null,Zi(e,t)}var tl={newInstance:er.newInstance(el,"vtkProp3D"),extend:el},rl={FLAT:0,GOURAUD:1,PHONG:2},nl={POINTS:0,WIREFRAME:1,SURFACE:2},al={Shading:rl,Representation:nl,Interpolation:rl};function ol(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var il=al.Representation,ll=al.Interpolation;function ul(e){return function(){return er.vtkErrorMacro("vtkProperty::".concat(e," - NOT IMPLEMENTED"))}}var sl={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,metallic:0,roughness:.6,normalStrength:1,emission:1,baseIOR:1.45,specular:0,specularPower:1,opacity:1,interpolation:ll.GOURAUD,representation:il.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null};function cl(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,sl,r),er.obj(e,t),er.setGet(e,t,["lighting","interpolation","ambient","diffuse","metallic","roughness","normalStrength","emission","baseIOR","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation","diffuseTexture","metallicTexture","roughnessTexture","normalTexture","ambientOcclusionTexture","emissionTexture"]),er.setGetArray(e,t,["ambientColor","specularColor","diffuseColor","edgeColor"],3),function(e,t){t.classHierarchy.push("vtkProperty"),e.setColor=function(r,n,a){Array.isArray(r)?t.color[0]===r[0]&&t.color[1]===r[1]&&t.color[2]===r[2]||(t.color[0]=r[0],t.color[1]=r[1],t.color[2]=r[2],e.modified()):t.color[0]===r&&t.color[1]===n&&t.color[2]===a||(t.color[0]=r,t.color[1]=n,t.color[2]=a,e.modified()),e.setDiffuseColor(t.color),e.setAmbientColor(t.color),e.setSpecularColor(t.color)},e.computeCompositeColor=ul("ComputeCompositeColor"),e.getColor=function(){var e=0;t.ambient+t.diffuse+t.specular>0&&(e=1/(t.ambient+t.diffuse+t.specular));for(var r=0;r<3;r++)t.color[r]=e*(t.ambient*t.ambientColor[r]+t.diffuse*t.diffuseColor[r]+t.specular*t.specularColor[r]);return[].concat(t.color)},e.setSpecularPower=function(r){var n=1/Math.max(1,r);t.roughness===n&&t.specularPower===r||(t.specularPower=r,t.roughness=n,e.modified())},e.addShaderVariable=ul("AddShaderVariable"),e.setInterpolationToFlat=function(){return e.setInterpolation(ll.FLAT)},e.setInterpolationToGouraud=function(){return e.setInterpolation(ll.GOURAUD)},e.setInterpolationToPhong=function(){return e.setInterpolation(ll.PHONG)},e.getInterpolationAsString=function(){return er.enumToString(ll,t.interpolation)},e.setRepresentationToWireframe=function(){return e.setRepresentation(il.WIREFRAME)},e.setRepresentationToSurface=function(){return e.setRepresentation(il.SURFACE)},e.setRepresentationToPoints=function(){return e.setRepresentation(il.POINTS)},e.getRepresentationAsString=function(){return er.enumToString(il,t.representation)}}(e,t)}var fl=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ol(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ol(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({newInstance:er.newInstance(cl,"vtkProperty"),extend:cl},al);function dl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var pl=er.vtkDebugMacro;function gl(e,t){t.classHierarchy.push("vtkActor");var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dl(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e);e.getActors=function(){return[e]},e.getIsOpaque=function(){if(t.forceOpaque)return!0;if(t.forceTranslucent)return!1;t.property||e.getProperty();var r=t.property.getOpacity()>=1;return r=(r=r&&(!t.texture||!t.texture.isTranslucent()))&&(!t.mapper||t.mapper.getIsOpaque())},e.hasTranslucentPolygonalGeometry=function(){return null!==t.mapper&&(null===t.property&&e.setProperty(e.makeProperty()),!e.getIsOpaque())},e.makeProperty=fl.newInstance,e.getProperty=function(){return null===t.property&&(t.property=e.makeProperty()),t.property},e.getBounds=function(){if(null===t.mapper)return t.bounds;var r=t.mapper.getBounds();if(!r||6!==r.length)return r;if(r[0]>r[1])return t.mapperBounds=r.concat(),t.bounds=[1,-1,1,-1,1,-1],t.boundsMTime.modified(),r;if(!t.mapperBounds||r[0]!==t.mapperBounds[0]||r[1]!==t.mapperBounds[1]||r[2]!==t.mapperBounds[2]||r[3]!==t.mapperBounds[3]||r[4]!==t.mapperBounds[4]||r[5]!==t.mapperBounds[5]||e.getMTime()>t.boundsMTime.getMTime()){pl("Recomputing bounds..."),t.mapperBounds=r.concat();var n=[];Vi.getCorners(r,n),e.computeMatrix();var a=new Float64Array(16);w(a,t.matrix),n.forEach((function(e){return tn(e,e,a)})),t.bounds[0]=t.bounds[2]=t.bounds[4]=Number.MAX_VALUE,t.bounds[1]=t.bounds[3]=t.bounds[5]=-Number.MAX_VALUE,t.bounds=t.bounds.map((function(e,t){return t%2===0?n.reduce((function(e,r){return e>r[t/2]?r[t/2]:e}),e):n.reduce((function(e,r){return e<r[(t-1)/2]?r[(t-1)/2]:e}),e)})),t.boundsMTime.modified()}return t.bounds},e.getMTime=function(){var e=r.getMTime();if(null!==t.property){var n=t.property.getMTime();e=n>e?n:e}if(null!==t.backfaceProperty){var a=t.backfaceProperty.getMTime();e=a>e?a:e}return e},e.getRedrawMTime=function(){var e=t.mtime;if(null!==t.mapper){var r=t.mapper.getMTime();e=r>e?r:e,null!==t.mapper.getInput()&&(t.mapper.getInputAlgorithm().update(),e=(r=t.mapper.getInput().getMTime())>e?r:e)}return e},e.getSupportsSelection=function(){return!!t.mapper&&t.mapper.getSupportsSelection()},e.processSelectorPixelBuffers=function(e,r){t.mapper&&t.mapper.processSelectorPixelBuffers&&t.mapper.processSelectorPixelBuffers(e,r)}}var ml={mapper:null,property:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1,bounds:[1,-1,1,-1,1,-1]};function vl(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ml,r),tl.extend(e,t,r),t.boundsMTime={},er.obj(t.boundsMTime),er.set(e,t,["property"]),er.setGet(e,t,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),gl(e,t)}var hl={newInstance:er.newInstance(vl,"vtkActor"),extend:vl},yl={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},bl={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"},Tl={DefaultDataType:bl.FLOAT,DataTypeByteSize:yl,VtkDataTypes:bl};function xl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xl(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var wl=Ot;function Cl(e,t,r){var n,a,o,i,l=e.length;if(0===l)return{min:Number.MAX_VALUE,max:-Number.MAX_VALUE};for(a=n=e[t],i=t;i<l;i+=r)(o=e[i])<n?n=o:o>a&&(a=o);return{min:n,max:a}}function Pl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(t<0&&r>1){for(var n=e.length/r,a=new Float64Array(n),o=0,i=0;o<n;++o){for(var l,u=i+r;i<u;++i)a[o]+=e[i]*e[i];a[l=o]=Math.pow(a[l],.5)}return Cl(a,0,1)}return Cl(e,t<0?0:t,r)}function Ol(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e||[];r.length<=t;)r.push(null);return r}function Al(e){return Object.prototype.toString.call(e).slice(8,-1)}var El={computeRange:Pl,createRangeHelper:function(){var e=Number.MAX_VALUE,t=-Number.MAX_VALUE,r=0,n=0;return{add:function(a){e>a&&(e=a),t<a&&(t=a),r++,n+=a},get:function(){return{min:e,max:t,count:r,sum:n,mean:n/r}},getRange:function(){return{min:e,max:t}}}},fastComputeRange:Cl,getDataType:Al,getMaxNorm:function(e){for(var t=e.getNumberOfComponents(),r=0,n=new Array(t),a=0;a<e.getNumberOfTuples();++a){e.getTuple(a,n);var o=To(n,t);o>r&&(r=o)}return r}};var Il={name:"",numberOfComponents:1,dataType:Tl.DefaultDataType,rangeTuple:[0,0]};function Rl(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(Object.assign(t,Il,n),!t.empty&&!t.values&&!t.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");(t.values?Array.isArray(t.values)&&(t.values=Mt(t.dataType,t.values)):t.values=Rt(t.dataType,t.size),t.values)&&(t.size=null!==(r=t.size)&&void 0!==r?r:t.values.length,t.dataType=Al(t.values));Vt(e,t),jt(e,t,["name","numberOfComponents"]),function(e,t){function r(r){if(r<0)return!1;var n=e.getNumberOfComponents(),a=t.values.length/(n>0?n:1);if(r===a)return!0;if(r>a){var o=t.values;return t.values=Rt(t.dataType,(r+a)*n),t.values.set(o),!0}return t.size>r*n&&(t.size=r*n,e.dataChange()),!0}t.classHierarchy.push("vtkDataArray"),e.dataChange=function(){t.ranges=null,e.modified()},e.resize=function(n){r(n);var a=n*e.getNumberOfComponents();return t.size!==a&&(t.size=a,e.dataChange(),!0)},e.initialize=function(){e.resize(0)},e.getElementComponentSize=function(){return t.values.BYTES_PER_ELEMENT},e.getComponent=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.values[e*t.numberOfComponents+r]},e.setComponent=function(r,n,a){a!==t.values[r*t.numberOfComponents+n]&&(t.values[r*t.numberOfComponents+n]=a,e.dataChange())},e.getValue=function(r){var n=r/t.numberOfComponents,a=r%t.numberOfComponents;return e.getComponent(n,a)},e.setValue=function(r,n){var a=r/t.numberOfComponents,o=r%t.numberOfComponents;e.setComponent(a,o,n)},e.getData=function(){return t.size===t.values.length?t.values:t.values.subarray(0,t.size)},e.getRange=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=r;n<0&&(n=1===t.numberOfComponents?0:t.numberOfComponents);var a=null;return t.ranges||(t.ranges=Ol(t.ranges,t.numberOfComponents)),(a=t.ranges[n])?(t.rangeTuple[0]=a.min,t.rangeTuple[1]=a.max,t.rangeTuple):(a=Pl(e.getData(),r,t.numberOfComponents),t.ranges[n]=a,t.rangeTuple[0]=a.min,t.rangeTuple[1]=a.max,t.rangeTuple)},e.setRange=function(e,r){t.ranges||(t.ranges=Ol(t.ranges,t.numberOfComponents));var n={min:e.min,max:e.max};return t.ranges[r]=n,t.rangeTuple[0]=n.min,t.rangeTuple[1]=n.max,t.rangeTuple},e.setTuple=function(e,r){for(var n=e*t.numberOfComponents,a=0;a<t.numberOfComponents;a++)t.values[n+a]=r[a]},e.setTuples=function(e,r){for(var n=e*t.numberOfComponents,a=Math.min(r.length,t.size-n),o=0;o<a;)t.values[n++]=r[o++]},e.insertTuple=function(n,a){return t.size<=n*t.numberOfComponents&&(t.size=(n+1)*t.numberOfComponents,r(n+1)),e.setTuple(n,a),n},e.insertTuples=function(n,a){var o=n+a.length/t.numberOfComponents;return t.size<o*t.numberOfComponents&&(t.size=o*t.numberOfComponents,r(o)),e.setTuples(n,a),o},e.insertNextTuple=function(r){var n=t.size/t.numberOfComponents;return e.insertTuple(n,r)},e.insertNextTuples=function(r){var n=t.size/t.numberOfComponents;return e.insertTuples(n,r)},e.getTuple=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.numberOfComponents||1,a=e*n;switch(n){case 4:r[3]=t.values[a+3];case 3:r[2]=t.values[a+2];case 2:r[1]=t.values[a+1];case 1:r[0]=t.values[a];break;default:for(var o=n-1;o>=0;--o)r[o]=t.values[a+o]}return r},e.getTuples=function(r,n){var a=(null!==r&&void 0!==r?r:0)*t.numberOfComponents,o=(null!==n&&void 0!==n?n:e.getNumberOfTuples())*t.numberOfComponents,i=e.getData().subarray(a,o);return i.length>0?i:null},e.getTupleLocation=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)*t.numberOfComponents},e.getNumberOfComponents=function(){return t.numberOfComponents},e.getNumberOfValues=function(){return t.size},e.getNumberOfTuples=function(){return t.size/t.numberOfComponents},e.getDataType=function(){return t.dataType},e.newClone=function(){return Ml({empty:!0,name:t.name,dataType:t.dataType,numberOfComponents:t.numberOfComponents})},e.getName=function(){return t.name||(e.modified(),t.name="vtkDataArray".concat(e.getMTime())),t.name},e.setData=function(r,n){t.values=r,t.size=r.length,t.dataType=Al(r),n&&(t.numberOfComponents=n),t.size%t.numberOfComponents!==0&&(t.numberOfComponents=1),e.dataChange()},e.getState=function(){if(t.deleted)return null;var r=Sl(Sl({},t),{},{vtkClass:e.getClassName()});r.values=Array.from(r.values),delete r.buffer,Object.keys(r).forEach((function(e){r[e]||delete r[e]}));var n={};return Object.keys(r).sort().forEach((function(e){n[e]=r[e]})),n.mtime&&delete n.mtime,n},e.deepCopy=function(r){var n=e.getDataType(),a=t.values;e.shallowCopy(r),(null===a||void 0===a?void 0:a.length)>=r.getNumberOfValues()&&n===r.getDataType()?(a.set(r.getData()),t.values=a,e.dataChange()):e.setData(r.getData().slice())},e.interpolateTuple=function(r,n,a,o,i,l){var u=t.numberOfComponents||1;u===n.getNumberOfComponents()&&u===o.getNumberOfComponents()||wl("numberOfComponents must match");var s=n.getTuple(a),c=o.getTuple(i),f=[];switch(f.length=u,u){case 4:f[3]=s[3]+(c[3]-s[3])*l;case 3:f[2]=s[2]+(c[2]-s[2])*l;case 2:f[1]=s[1]+(c[1]-s[1])*l;case 1:f[0]=s[0]+(c[0]-s[0])*l;break;default:for(var d=0;d<u;d++)f[d]=s[d]+(c[d]-s[d])*l}return e.insertTuple(r,f)}}(e,t)}var Ml=Yt(Rl,"vtkDataArray"),Dl=Sl(Sl({newInstance:Ml,extend:Rl},El),Tl);var kl={clippingPlanes:[]};var _l={extend:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,kl,r),er.obj(e,t),er.algo(e,t,1,0),t.clippingPlanes||(t.clippingPlanes=[]),function(e,t){t.classHierarchy.push("vtkAbstractMapper"),e.update=function(){e.getInputData()},e.addClippingPlane=function(r){return!!r.isA("vtkPlane")&&!t.clippingPlanes.includes(r)&&(t.clippingPlanes.push(r),e.modified(),!0)},e.getNumberOfClippingPlanes=function(){return t.clippingPlanes.length},e.removeAllClippingPlanes=function(){return 0!==t.clippingPlanes.length&&(t.clippingPlanes.length=0,e.modified(),!0)},e.removeClippingPlane=function(r){var n=t.clippingPlanes.indexOf(r);return-1!==n&&(t.clippingPlanes.splice(n,1),e.modified(),!0)},e.getClippingPlanes=function(){return t.clippingPlanes},e.setClippingPlanes=function(t){if(t)if(Array.isArray(t))for(var r=t.length,n=0;n<r&&n<6;n++)e.addClippingPlane(t[n]);else e.addClippingPlane(t)},e.getClippingPlaneInDataCoords=function(e,r,n){var a=t.clippingPlanes,o=e;if(a){var i=a.length;if(r>=0&&r<i){var l=a[r],u=l.getNormal(),s=l.getOrigin(),c=u[0],f=u[1],d=u[2],p=-(c*s[0]+f*s[1]+d*s[2]);return n[0]=c*o[0]+f*o[4]+d*o[8]+p*o[12],n[1]=c*o[1]+f*o[5]+d*o[9]+p*o[13],n[2]=c*o[2]+f*o[6]+d*o[10]+p*o[14],void(n[3]=c*o[3]+f*o[7]+d*o[11]+p*o[15])}}er.vtkErrorMacro("Clipping plane index ".concat(r," is out of range."))}}(e,t)}};function Ll(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Bl=function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ll(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ll(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({bounds:$e(Vi.INIT_BOUNDS),center:[0,0,0],viewSpecificProperties:{}},e)};var Vl={extend:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Bl(r)),_l.extend(e,t,r),er.setGet(e,t,["viewSpecificProperties"]),function(e,t){e.getBounds=function(){return er.vtkErrorMacro("vtkAbstractMapper3D.getBounds - NOT IMPLEMENTED"),Uo()},e.getCenter=function(){var r,n=e.getBounds();return t.center=Vi.isValid(n)?Vi.getCenter(n):null,null===(r=t.center)||void 0===r?void 0:r.slice()},e.getLength=function(){var t=e.getBounds();return Vi.getDiagonalLength(t)}}(e,t)}},Nl=er.vtkErrorMacro,Fl=er.vtkWarningMacro;var Ul={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function Gl(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ul,r),er.obj(e,t),function(e,t){t.classHierarchy.push("vtkFieldData");var r=e.getState;t.arrays&&(t.arrays=t.arrays.map((function(e){return{data:it(e.data)}}))),e.initialize=function(){e.initializeFields(),e.copyAllOn(),e.clearFieldFlags()},e.initializeFields=function(){t.arrays=[],t.copyFieldFlags={},e.modified()},e.copyStructure=function(r){e.initializeFields(),t.copyFieldFlags=r.getCopyFieldFlags().map((function(e){return e})),t.arrays=r.arrays().map((function(e){return{array:e}}))},e.getNumberOfArrays=function(){return t.arrays.length},e.getNumberOfActiveArrays=function(){return t.arrays.length},e.addArray=function(r){var n=r.getName(),a=e.getArrayWithIndex(n),o=a.array,i=a.index;return null!=o?(t.arrays[i]={data:r},i):(t.arrays=[].concat(t.arrays,{data:r}),t.arrays.length-1)},e.removeAllArrays=function(){t.arrays=[]},e.removeArray=function(r){var n=t.arrays.findIndex((function(e){return e.data.getName()===r}));return e.removeArrayByIndex(n)},e.removeArrayByIndex=function(e){return-1!==e&&e<t.arrays.length&&(t.arrays.splice(e,1),!0)},e.getArrays=function(){return t.arrays.map((function(e){return e.data}))},e.getArray=function(t){return"number"===typeof t?e.getArrayByIndex(t):e.getArrayByName(t)},e.getArrayByName=function(e){return t.arrays.reduce((function(t,r,n){return r.data.getName()===e?r.data:t}),null)},e.getArrayWithIndex=function(e){var r=t.arrays.findIndex((function(t){return t.data.getName()===e}));return{array:-1!==r?t.arrays[r].data:null,index:r}},e.getArrayByIndex=function(e){return e>=0&&e<t.arrays.length?t.arrays[e].data:null},e.hasArray=function(t){return e.getArrayWithIndex(t).index>=0},e.getArrayName=function(e){var r=t.arrays[e];return r?r.data.getName():""},e.getCopyFieldFlags=function(){return t.copyFieldFlags},e.getFlag=function(e){return t.copyFieldFlags[e]},e.passData=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;r.getArrays().forEach((function(o){var i=e.getFlag(o.getName());if(!1!==i&&(!t.doCopyAllOff||!0===i)&&o){var l=e.getArrayByName(o.getName());if(l)if(o.getNumberOfComponents()===l.getNumberOfComponents())if(n>-1&&n<o.getNumberOfTuples()){var u=a>-1?a:n;l.insertTuple(u,o.getTuple(n))}else l.insertTuples(0,o.getTuples());else Nl("Unhandled case in passData");else if(n<0||n>o.getNumberOfTuples())e.addArray(o),r.getAttributes(o).forEach((function(t){e.setAttribute(o,t)}));else{var s=o.getNumberOfComponents(),c=o.getNumberOfValues(),f=a>-1?a:n;c<=f*s&&(c=(f+1)*s),(l=Dl.newInstance({name:o.getName(),dataType:o.getDataType(),numberOfComponents:s,values:er.newTypedArray(o.getDataType(),c),size:0})).insertTuple(f,o.getTuple(n)),e.addArray(l),r.getAttributes(o).forEach((function(t){e.setAttribute(l,t)}))}}}))},e.interpolateData=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;r.getArrays().forEach((function(l){var u=e.getFlag(l.getName());if(!1!==u&&(!t.doCopyAllOff||!0===u)&&l){var s=e.getArrayByName(l.getName());if(s)if(l.getNumberOfComponents()===s.getNumberOfComponents())if(n>-1&&n<l.getNumberOfTuples()){var c=o>-1?o:n;s.interpolateTuple(c,l,n,l,a,i),Fl("Unexpected case in interpolateData")}else s.insertTuples(l.getTuples());else Nl("Unhandled case in interpolateData");else if(n<0||a<0||n>l.getNumberOfTuples())e.addArray(l),r.getAttributes(l).forEach((function(t){e.setAttribute(l,t)}));else{var f=l.getNumberOfComponents(),d=l.getNumberOfValues(),p=o>-1?o:n;d<=p*f&&(d=(p+1)*f),(s=Dl.newInstance({name:l.getName(),dataType:l.getDataType(),numberOfComponents:f,values:er.newTypedArray(l.getDataType(),d),size:0})).interpolateTuple(p,l,n,l,a,i),e.addArray(s),r.getAttributes(l).forEach((function(t){e.setAttribute(s,t)}))}}}))},e.copyFieldOn=function(e){t.copyFieldFlags[e]=!0},e.copyFieldOff=function(e){t.copyFieldFlags[e]=!1},e.copyAllOn=function(){t.doCopyAllOn&&!t.doCopyAllOff||(t.doCopyAllOn=!0,t.doCopyAllOff=!1,e.modified())},e.copyAllOff=function(){!t.doCopyAllOn&&t.doCopyAllOff||(t.doCopyAllOn=!1,t.doCopyAllOff=!0,e.modified())},e.clearFieldFlags=function(){t.copyFieldFlags={}},e.deepCopy=function(e){t.arrays=e.getArrays().map((function(e){var t=e.newClone();return t.deepCopy(e),{data:t}}))},e.copyFlags=function(e){return e.getCopyFieldFlags().map((function(e){return e}))},e.reset=function(){return t.arrays.forEach((function(e){return e.data.reset()}))},e.getMTime=function(){return t.arrays.reduce((function(e,t){return t.data.getMTime()>e?t.data.getMTime():e}),t.mtime)},e.getNumberOfComponents=function(){return t.arrays.reduce((function(e,t){return e+t.data.getNumberOfComponents()}),0)},e.getNumberOfTuples=function(){return t.arrays.length>0?t.arrays[0].getNumberOfTuples():0},e.getState=function(){var e=r();return e&&(e.arrays=t.arrays.map((function(e){return{data:e.data.getState()}}))),e}}(e,t)}var jl={newInstance:er.newInstance(Gl,"vtkFieldData"),extend:Gl},zl={AttributeCopyOperations:{COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},AttributeLimitTypes:{MAX:0,EXACT:1,NOLIMIT:2},AttributeTypes:{SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},CellGhostTypes:{DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},DesiredOutputPrecision:{DEFAULT:0,SINGLE:1,DOUBLE:2},PointGhostTypes:{DUPLICATEPOINT:1,HIDDENPOINT:2},ghostArrayName:"vtkGhostType"};function Wl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wl(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Kl=zl.AttributeTypes,Xl=zl.AttributeCopyOperations,ql=er.vtkWarningMacro;var Yl={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function Ql(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Yl,r),jl.extend(e,t,r),er.setGet(e,t,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),t.arrays||(t.arrays={}),function(e,t){var r=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function n(e){var t=r.find((function(t){return Kl[t.toUpperCase()]===e||"number"!==typeof e&&t.toLowerCase()===e.toLowerCase()}));return"undefined"===typeof t&&(t=null),t}t.classHierarchy.push("vtkDataSetAttributes");var a=Hl({},e);e.checkNumberOfComponents=function(e){return!0},e.setAttribute=function(r,a){var o=n(a);if(r&&"PEDIGREEIDS"===o.toUpperCase()&&!r.isA("vtkDataArray"))return ql("Cannot set attribute ".concat(o,". The attribute must be a vtkDataArray.")),-1;if(r&&!e.checkNumberOfComponents(r,o))return ql("Cannot set attribute ".concat(o,". Incorrect number of components.")),-1;var i=t["active".concat(o)];if(i>=0&&i<t.arrays.length){if(t.arrays[i]===r)return i;e.removeArrayByIndex(i)}return r?(i=e.addArray(r),t["active".concat(o)]=i):t["active".concat(o)]=-1,e.modified(),t["active".concat(o)]},e.getAttributes=function(t){return r.filter((function(r){return e["get".concat(r)]()===t}))},e.setActiveAttributeByName=function(t,r){return e.setActiveAttributeByIndex(e.getArrayWithIndex(t).index,r)},e.setActiveAttributeByIndex=function(r,a){var o=n(a);if(r>=0&&r<t.arrays.length){if("PEDIGREEIDS"!==o.toUpperCase()){var i=e.getArrayByIndex(r);if(!i.isA("vtkDataArray"))return ql("Cannot set attribute ".concat(o,". Only vtkDataArray subclasses can be set as active attributes.")),-1;if(!e.checkNumberOfComponents(i,o))return ql("Cannot set attribute ".concat(o,". Incorrect number of components.")),-1}return t["active".concat(o)]=r,e.modified(),r}return-1===r&&(t["active".concat(o)]=r,e.modified()),-1},e.getActiveAttribute=function(t){var r=n(t);return e["get".concat(r)]()},e.removeAllArrays=function(){r.forEach((function(e){t["active".concat(e)]=-1})),a.removeAllArrays()},e.removeArrayByIndex=function(e){return-1!==e&&r.forEach((function(r){e===t["active".concat(r)]?t["active".concat(r)]=-1:e<t["active".concat(r)]&&(t["active".concat(r)]-=1)})),a.removeArrayByIndex(e)},r.forEach((function(r){var n="active".concat(r);e["get".concat(r)]=function(){return e.getArrayByIndex(t[n])},e["set".concat(r)]=function(t){return e.setAttribute(t,r)},e["setActive".concat(r)]=function(t){return e.setActiveAttributeByIndex(e.getArrayWithIndex(t).index,r)},e["copy".concat(r,"Off")]=function(){var e=r.toUpperCase();t.copyAttributeFlags[Xl.PASSDATA][Kl[e]]=!1},e["copy".concat(r,"On")]=function(){var e=r.toUpperCase();t.copyAttributeFlags[Xl.PASSDATA][Kl[e]]=!0}})),e.initializeAttributeCopyFlags=function(){t.copyAttributeFlags=[],Object.keys(Xl).filter((function(e){return"ALLCOPY"!==e})).forEach((function(e){t.copyAttributeFlags[Xl[e]]=Object.keys(Kl).filter((function(e){return"NUM_ATTRIBUTES"!==e})).reduce((function(e,t){return e[Kl[t]]=!0,e}),[])})),t.copyAttributeFlags[Xl.COPYTUPLE][Kl.GLOBALIDS]=!1,t.copyAttributeFlags[Xl.INTERPOLATE][Kl.GLOBALIDS]=!1,t.copyAttributeFlags[Xl.COPYTUPLE][Kl.PEDIGREEIDS]=!1},e.initialize=er.chain(e.initialize,e.initializeAttributeCopyFlags),t.dataArrays&&Object.keys(t.dataArrays).length&&Object.keys(t.dataArrays).forEach((function(r){t.dataArrays[r].ref||"vtkDataArray"!==t.dataArrays[r].type||e.addArray(Dl.newInstance(t.dataArrays[r]))}));var o=e.shallowCopy;e.shallowCopy=function(e,r){o(e,r),t.arrays=e.getArrays().map((function(e){var t=e.newClone();return t.shallowCopy(e,r),{data:t}}))},e.initializeAttributeCopyFlags()}(e,t)}var $l=Hl({newInstance:er.newInstance(Ql,"vtkDataSetAttributes"),extend:Ql},zl),Zl={FieldDataTypes:{UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},FieldAssociations:{FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7}};function Jl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var eu=["pointData","cellData","fieldData"];var tu={};function ru(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,tu,r),er.obj(e,t),er.setGet(e,t,eu),function(e,t){t.classHierarchy.push("vtkDataSet"),eu.forEach((function(e){t[e]?t[e]=it(t[e]):t[e]=$l.newInstance()}));var r=e.shallowCopy;e.shallowCopy=function(e){r(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]),eu.forEach((function(r){t[r]=$l.newInstance(),t[r].shallowCopy(e.getReferenceByName(r))}))}}(e,t)}var nu=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jl(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({newInstance:er.newInstance(ru,"vtkDataSet"),extend:ru},Zl),au={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9},ou={StructuredType:au};function iu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var lu=ou.StructuredType;var uu=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iu(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({getDataDescriptionFromExtent:function(e){for(var t=0,r=0;r<3;++r)e[2*r]<e[2*r+1]&&t++;return e[0]>e[1]||e[2]>e[3]||e[4]>e[5]?lu.EMPTY:3===t?lu.XYZ_GRID:2===t?e[0]===e[1]?lu.YZ_PLANE:e[2]===e[3]?lu.XZ_PLANE:lu.XY_PLANE:1===t?e[0]<e[1]?lu.X_LINE:e[2]<e[3]?lu.Y_LINE:lu.Z_LINE:lu.SINGLE_POINT}},ou),su=er.vtkErrorMacro;var cu={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:au.EMPTY};function fu(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cu,r),nu.extend(e,t,r),t.direction?Array.isArray(t.direction)&&(t.direction=new Float64Array(t.direction.slice(0,9))):t.direction=Te(new Float64Array(9)),t.indexToWorld=new Float64Array(16),t.worldToIndex=new Float64Array(16),er.get(e,t,["indexToWorld","worldToIndex"]),er.setGetArray(e,t,["origin","spacing"],3),er.setGetArray(e,t,["direction"],9),er.getArray(e,t,["extent"],6),function(e,t){t.classHierarchy.push("vtkImageData"),e.setExtent=function(){if(t.deleted)return su("instance deleted - cannot call any method"),!1;for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=1===n.length?n[0]:n;if(6!==o.length)return!1;var i=t.extent.some((function(e,t){return e!==o[t]}));return i&&(t.extent=o.slice(),t.dataDescription=uu.getDataDescriptionFromExtent(t.extent),e.modified()),i},e.setDimensions=function(){var r,n,a;if(t.deleted)su("instance deleted - cannot call any method");else{if(1===arguments.length){var o=arguments.length<=0?void 0:arguments[0];r=o[0],n=o[1],a=o[2]}else{if(3!==arguments.length)return void su("Bad dimension specification");r=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2]}e.setExtent(0,r-1,0,n-1,0,a-1)}},e.getDimensions=function(){return[t.extent[1]-t.extent[0]+1,t.extent[3]-t.extent[2]+1,t.extent[5]-t.extent[4]+1]},e.getNumberOfCells=function(){for(var t=e.getDimensions(),r=1,n=0;n<3;n++){if(0===t[n])return 0;t[n]>1&&(r*=t[n]-1)}return r},e.getNumberOfPoints=function(){var t=e.getDimensions();return t[0]*t[1]*t[2]},e.getPoint=function(r){var n=e.getDimensions();if(0===n[0]||0===n[1]||0===n[2])return su("Requesting a point from an empty image."),null;var a=new Float64Array(3);switch(t.dataDescription){case au.EMPTY:return null;case au.SINGLE_POINT:break;case au.X_LINE:a[0]=r;break;case au.Y_LINE:a[1]=r;break;case au.Z_LINE:a[2]=r;break;case au.XY_PLANE:a[0]=r%n[0],a[1]=r/n[0];break;case au.YZ_PLANE:a[1]=r%n[1],a[2]=r/n[1];break;case au.XZ_PLANE:a[0]=r%n[0],a[2]=r/n[0];break;case au.XYZ_GRID:a[0]=r%n[0],a[1]=r/n[0]%n[1],a[2]=r/(n[0]*n[1]);break;default:su("Invalid dataDescription")}var o=[0,0,0];return e.indexToWorld(a,o),o},e.getBounds=function(){return e.extentToBounds(e.getSpatialExtent())},e.extentToBounds=function(e){return Vi.transformBounds(e,t.indexToWorld)},e.getSpatialExtent=function(){return Vi.inflate($e(t.extent),.5)},e.computeTransforms=function(){_(t.indexToWorld,t.origin),t.indexToWorld[0]=t.direction[0],t.indexToWorld[1]=t.direction[1],t.indexToWorld[2]=t.direction[2],t.indexToWorld[4]=t.direction[3],t.indexToWorld[5]=t.direction[4],t.indexToWorld[6]=t.direction[5],t.indexToWorld[8]=t.direction[6],t.indexToWorld[9]=t.direction[7],t.indexToWorld[10]=t.direction[8],I(t.indexToWorld,t.indexToWorld,t.spacing),C(t.worldToIndex,t.indexToWorld)},e.indexToWorld=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return tn(r,e,t.indexToWorld),r},e.indexToWorldVec3=e.indexToWorld,e.worldToIndex=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return tn(r,e,t.worldToIndex),r},e.worldToIndexVec3=e.worldToIndex,e.indexToWorldBounds=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Vi.transformBounds(e,t.indexToWorld,r)},e.worldToIndexBounds=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Vi.transformBounds(e,t.worldToIndex,r)},e.onModified(e.computeTransforms),e.computeTransforms(),e.getCenter=function(){return Vi.getCenter(e.getBounds())},e.computeHistogram=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=[0,0,0,0,0,0];e.worldToIndexBounds(t,n);var a=[0,0,0],o=[0,0,0];Vi.computeCornerPoints(n,a,o),Io(a,a),Io(o,o);var i=e.getDimensions();Vo(a,[0,0,0],[i[0]-1,i[1]-1,i[2]-1],a),Vo(o,[0,0,0],[i[0]-1,i[1]-1,i[2]-1],o);for(var l=i[0],u=i[0]*i[1],s=e.getPointData().getScalars().getData(),c=-1/0,f=1/0,d=0,p=0,g=0,m=a[2];m<=o[2];m++)for(var v=a[1];v<=o[1];v++)for(var h=a[0]+v*l+m*u,y=a[0];y<=o[0];y++){if(!r||r([y,v,m],n)){var b=s[h];b>c&&(c=b),b<f&&(f=b),d+=b*b,p+=b,g+=1}++h}var T=g>0?p/g:0,x=g?Math.abs(d/g-T*T):0;return{minimum:f,maximum:c,average:T,variance:x,sigma:Math.sqrt(x),count:g}},e.computeIncrements=function(e){for(var t=[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0;n<3;++n)t[n]=r,r*=e[2*n+1]-e[2*n]+1;return t},e.computeOffsetIndex=function(t){var r=qe(t,3),n=r[0],a=r[1],o=r[2],i=e.getExtent(),l=e.getPointData().getScalars().getNumberOfComponents(),u=e.computeIncrements(i,l);return Math.floor((Math.round(n)-i[0])*u[0]+(Math.round(a)-i[2])*u[1]+(Math.round(o)-i[4])*u[2])},e.getOffsetIndexFromWorld=function(t){for(var r=e.getExtent(),n=e.worldToIndex(t),a=0;a<3;++a)if(n[a]<r[2*a]||n[a]>r[2*a+1])return su("GetScalarPointer: Pixel ".concat(n," is not in memory. Current extent = ").concat(r)),NaN;return e.computeOffsetIndex(n)},e.getScalarValueFromWorld=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.getPointData().getScalars().getNumberOfComponents();if(r<0||r>=n)return su("GetScalarPointer: Scalar Component ".concat(r," is not within bounds. Current Scalar numberOfComponents: ").concat(n)),NaN;var a=e.getOffsetIndexFromWorld(t);return Number.isNaN(a)?a:e.getPointData().getScalars().getComponent(a,r)}}(e,t)}var du={newInstance:er.newInstance(fu,"vtkImageData"),extend:fu},pu={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4},gu={VectorMode:{MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},ScalarMappingTarget:pu},mu={ColorMode:{DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},GetArray:{BY_ID:0,BY_NAME:1},ScalarMode:{DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5}};function vu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var hu=gu.ScalarMappingTarget,yu=gu.VectorMode,bu=Dl.VtkDataTypes,Tu=mu.ColorMode,xu=er.vtkErrorMacro;function Su(e){return e}function wu(e){return Math.floor(255*e+.5)}var Cu={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:yu.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1};function Pu(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Cu,r),er.obj(e,t),t.mappingRange=[0,255],t.annotationArray=[],t.annotatedValueMap=[],er.setGet(e,t,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),er.setArray(e,t,["mappingRange"],2),er.getArray(e,t,["mappingRange"]),function(e,t){t.classHierarchy.push("vtkScalarsToColors"),e.setVectorModeToMagnitude=function(){return e.setVectorMode(yu.MAGNITUDE)},e.setVectorModeToComponent=function(){return e.setVectorMode(yu.COMPONENT)},e.setVectorModeToRGBColors=function(){return e.setVectorMode(yu.RGBCOLORS)},e.build=function(){},e.isOpaque=function(){return!0},e.setAnnotations=function(r,n){if(!(r&&!n||!r&&n))if(r&&n&&r.length!==n.length)xu("Values and annotations do not have the same number of tuples so ignoring");else{if(t.annotationArray=[],n&&r)for(var a=n.length,o=0;o<a;o++)t.annotationArray.push({value:r[o],annotation:String(n[o])});e.updateAnnotatedValueMap(),e.modified()}},e.setAnnotation=function(r,n){var a=e.checkForAnnotatedValue(r),o=!1;return a>=0?t.annotationArray[a].annotation!==n&&(t.annotationArray[a].annotation=n,o=!0):(t.annotationArray.push({value:r,annotation:n}),a=t.annotationArray.length-1,o=!0),o&&(e.updateAnnotatedValueMap(),e.modified()),a},e.getNumberOfAnnotatedValues=function(){return t.annotationArray.length},e.getAnnotatedValue=function(e){return e<0||e>=t.annotationArray.length?null:t.annotationArray[e].value},e.getAnnotation=function(e){return void 0===t.annotationArray[e]?null:t.annotationArray[e].annotation},e.getAnnotatedValueIndex=function(r){return t.annotationArray.length?e.checkForAnnotatedValue(r):-1},e.removeAnnotation=function(r){var n=e.checkForAnnotatedValue(r),a=n>=0;return a&&(t.annotationArray.splice(n,1),e.updateAnnotatedValueMap(),e.modified()),a},e.resetAnnotations=function(){t.annotationArray=[],t.annotatedValueMap=[],e.modified()},e.getAnnotationColor=function(r,n){if(t.indexedLookup){var a=e.getAnnotatedValueIndex(r);e.getIndexedColor(a,n)}else e.getColor(parseFloat(r),n),n[3]=1},e.checkForAnnotatedValue=function(t){return e.getAnnotatedValueIndexInternal(t)},e.getAnnotatedValueIndexInternal=function(e){if(void 0!==t.annotatedValueMap[e]){var r=t.annotationArray.length;return t.annotatedValueMap[e]%r}return-1},e.getIndexedColor=function(e,t){t[0]=0,t[1]=0,t[2]=0,t[3]=0},e.updateAnnotatedValueMap=function(){t.annotatedValueMap=[];for(var e=t.annotationArray.length,r=0;r<e;r++)t.annotatedValueMap[t.annotationArray[r].value]=r},e.mapScalars=function(t,r,n){var a=t.getNumberOfComponents(),o=null;if(r===Tu.DEFAULT&&t.getDataType()===bu.UNSIGNED_CHAR||r===Tu.DIRECT_SCALARS&&t)o=e.convertToRGBA(t,a,t.getNumberOfTuples());else{var i={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:bu.UNSIGNED_CHAR},l=er.newTypedArray(i.dataType,4*t.getNumberOfTuples());i.values=l,i.size=l.length,o=Dl.newInstance(i);var u=n;u<0&&a>1?e.mapVectorsThroughTable(t,o,hu.RGBA,-1,-1):(u<0&&(u=0),u>=a&&(u=a-1),e.mapScalarsThroughTable(t,o,hu.RGBA,u))}return o},e.mapVectorsToMagnitude=function(e,t,r){for(var n=e.getNumberOfTuples(),a=e.getNumberOfComponents(),o=t.getData(),i=e.getData(),l=0;l<n;l++){for(var u=0,s=0;s<r;s++)u+=i[l*a+s]*i[l*a+s];o[l]=Math.sqrt(u)}},e.mapVectorsThroughTable=function(t,r,n,a,o){var i=e.getVectorMode(),l=o,u=a,s=t.getNumberOfComponents();i===yu.COMPONENT?(-1===u&&(u=e.getVectorComponent()),u<0&&(u=0),u>=s&&(u=s-1)):(-1===l&&(l=e.getVectorSize()),l<=0?(u=0,l=s):(u<0&&(u=0),u>=s&&(u=s-1),u+l>s&&(l=s-u)),i!==yu.MAGNITUDE||1!==s&&1!==l||(i=yu.COMPONENT));var c=0;switch(u>0&&(c=u),i){case yu.COMPONENT:e.mapScalarsThroughTable(t,r,n,c);break;case yu.RGBCOLORS:break;case yu.MAGNITUDE:default:var f=Dl.newInstance({numberOfComponents:1,values:new Float32Array(t.getNumberOfTuples())});e.mapVectorsToMagnitude(t,f,l),e.mapScalarsThroughTable(f,r,n,0)}},e.luminanceToRGBA=function(e,t,r,n){for(var a=n(r),o=t.getData(),i=e.getData(),l=o.length,u=0,s=0;s<l;s+=1){var c=n(o[s]);i[4*u]=c,i[4*u+1]=c,i[4*u+2]=c,i[4*u+3]=a,u++}},e.luminanceAlphaToRGBA=function(e,t,r,n){for(var a=t.getData(),o=e.getData(),i=a.length,l=0,u=0;u<i;u+=2){var s=n(a[u]);o[l]=s,o[l+1]=s,o[l+2]=s,o[l+3]=n(a[u+1])*r,l+=4}},e.rGBToRGBA=function(e,t,r,n){for(var a=wu(r),o=t.getData(),i=e.getData(),l=o.length,u=0,s=0;s<l;s+=3)i[4*u]=n(o[s]),i[4*u+1]=n(o[s+1]),i[4*u+2]=n(o[s+2]),i[4*u+3]=a,u++},e.rGBAToRGBA=function(e,t,r,n){for(var a=t.getData(),o=e.getData(),i=a.length,l=0,u=0;u<i;u+=4)o[4*l]=n(a[u]),o[4*l+1]=n(a[u+1]),o[4*l+2]=n(a[u+2]),o[4*l+3]=n(a[u+3])*r,l++},e.convertToRGBA=function(r,n,a){var o=t.alpha;if(4===n&&o>=1&&r.getDataType()===bu.UNSIGNED_CHAR)return r;var i=Dl.newInstance({numberOfComponents:4,empty:!0,size:4*a,dataType:bu.UNSIGNED_CHAR});if(a<=0)return i;o=(o=o>0?o:0)<1?o:1;var l=Su;switch(r.getDataType()!==bu.FLOAT&&r.getDataType()!==bu.DOUBLE||(l=wu),n){case 1:e.luminanceToRGBA(i,r,o,l);break;case 2:e.luminanceAlphaToRGBA(i,r,l);break;case 3:e.rGBToRGBA(i,r,o,l);break;case 4:e.rGBAToRGBA(i,r,o,l);break;default:return xu("Cannot convert colors"),null}return i},e.usingLogScale=function(){return!1},e.getNumberOfAvailableColors=function(){return 16777216},e.setRange=function(t,r){return e.setMappingRange(t,r)},e.getRange=function(){return e.getMappingRange()},e.areScalarsOpaque=function(r,n,a){if(!r)return e.isOpaque();var o=r.getNumberOfComponents();return(n!==Tu.DEFAULT||r.getDataType()!==bu.UNSIGNED_CHAR)&&n!==Tu.DIRECT_SCALARS||(3===o||1===o?t.alpha>=1:255===r.getRange(o-1)[0])}}(e,t)}var Ou=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vu(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({newInstance:er.newInstance(Pu,"vtkScalarsToColors"),extend:Pu},gu),Au=er.vtkErrorMacro,Eu=0,Iu=1,Ru=2;var Mu={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function Du(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Mu,r),Ou.extend(e,t,r),t.table||(t.table=[]),t.buildTime={},er.obj(t.buildTime),t.opaqueFlagBuildTime={},er.obj(t.opaqueFlagBuildTime,{mtime:0}),t.insertTime={},er.obj(t.insertTime,{mtime:0}),er.get(e,t,["buildTime"]),er.setGet(e,t,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),er.setArray(e,t,["alphaRange","hueRange","saturationRange","valueRange"],2),er.setArray(e,t,["nanColor","belowRangeColor","aboveRangeColor"],4),er.getArray(e,t,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),function(e,t){t.classHierarchy.push("vtkLookupTable"),e.isOpaque=function(){if(t.opaqueFlagBuildTime.getMTime()<e.getMTime()){var r=!0;t.nanColor[3]<1&&(r=0),t.useBelowRangeColor&&t.belowRangeColor[3]<1&&(r=0),t.useAboveRangeColor&&t.aboveRangeColor[3]<1&&(r=0);for(var n=3;n<t.table.length&&r;n+=4)t.table[n]<255&&(r=!1);t.opaqueFlag=r,t.opaqueFlagBuildTime.modified()}return t.opaqueFlag},e.usingLogScale=function(){return!1},e.getNumberOfAvailableColors=function(){return t.table.length/4},e.linearIndexLookup=function(e,t){var r=0,n=Number(e);return r=n<t.range[0]?t.maxIndex+Eu+1.5:n>t.range[1]?t.maxIndex+Iu+1.5:(r=(n+t.shift)*t.scale)<t.maxIndex?r:t.maxIndex,Math.floor(r)},e.linearLookup=function(t,r,n){var a=4*(Fo(t)?Math.floor(n.maxIndex+1.5+Ru):e.linearIndexLookup(t,n));return r.slice(a,a+4)},e.indexedLookupFunction=function(r,n,a){var o=e.getAnnotatedValueIndexInternal(r);-1===o&&(o=t.numberOfColors+Ru);var i=4*o;return[n[i],n[i+1],n[i+2],n[i+3]]},e.lookupShiftAndScale=function(e,t){t.shift=-e[0],t.scale=Number.MAX_VALUE,e[1]>e[0]&&(t.scale=(t.maxIndex+1)/(e[1]-e[0]))},e.mapScalarsThroughTable=function(r,n,a,o){var i=e.linearLookup;t.indexedLookup&&(i=e.indexedLookupFunction);var l=e.getMappingRange(),u={maxIndex:e.getNumberOfColors()-1,range:l,shift:0,scale:0};e.lookupShiftAndScale(l,u);var s=e.getAlpha(),c=r.getNumberOfTuples(),f=r.getNumberOfComponents(),d=n.getData(),p=r.getData();if(s>=1){if(a===pu.RGBA)for(var g=0;g<c;g++){var m=i(p[g*f+o],t.table,u);d[4*g]=m[0],d[4*g+1]=m[1],d[4*g+2]=m[2],d[4*g+3]=m[3]}}else if(a===pu.RGBA)for(var v=0;v<c;v++){var h=i(p[v*f+o],t.table,u);d[4*v]=h[0],d[4*v+1]=h[1],d[4*v+2]=h[2],d[4*v+3]=Math.floor(h[3]*s+.5)}},e.forceBuild=function(){var r=0,n=0,a=0,o=0,i=t.numberOfColors-1;i&&(r=(t.hueRange[1]-t.hueRange[0])/i,n=(t.saturationRange[1]-t.saturationRange[0])/i,a=(t.valueRange[1]-t.valueRange[0])/i,o=(t.alphaRange[1]-t.alphaRange[0])/i),t.table.length=4*i+16;for(var l=[],u=[],s=0;s<=i;s++)l[0]=t.hueRange[0]+s*r,l[1]=t.saturationRange[0]+s*n,l[2]=t.valueRange[0]+s*a,ko(l,u),u[3]=t.alphaRange[0]+s*o,t.table[4*s]=255*u[0]+.5,t.table[4*s+1]=255*u[1]+.5,t.table[4*s+2]=255*u[2]+.5,t.table[4*s+3]=255*u[3]+.5;e.buildSpecialColors(),t.buildTime.modified()},e.setTable=function(r){if(Array.isArray(r)){var n=r[0].length;t.numberOfColors=r.length;for(var a=4-n,o=0,i=0;i<t.numberOfColors;i++)t.table[4*i]=255,t.table[4*i+1]=255,t.table[4*i+2]=255,t.table[4*i+3]=255;for(var l=0;l<r.length;l++){for(var u=r[l],s=0;s<n;s++)t.table[o++]=u[s];o+=a}return e.buildSpecialColors(),t.insertTime.modified(),e.modified(),!0}if(4!==r.getNumberOfComponents())return Au("Expected 4 components for RGBA colors"),!1;if(r.getDataType()!==bl.UNSIGNED_CHAR)return Au("Expected unsigned char values for RGBA colors"),!1;t.numberOfColors=r.getNumberOfTuples();var c=r.getData();t.table.length=c.length;for(var f=0;f<c.length;f++)t.table[f]=c[f];return e.buildSpecialColors(),t.insertTime.modified(),e.modified(),!0},e.buildSpecialColors=function(){var e=t.numberOfColors,r=t.table,n=4*(e+Eu);t.useBelowRangeColor||0===e?(r[n]=255*t.belowRangeColor[0]+.5,r[n+1]=255*t.belowRangeColor[1]+.5,r[n+2]=255*t.belowRangeColor[2]+.5,r[n+3]=255*t.belowRangeColor[3]+.5):(r[n]=r[0],r[n+1]=r[1],r[n+2]=r[2],r[n+3]=r[3]),n=4*(e+Iu),t.useAboveRangeColor||0===e?(r[n]=255*t.aboveRangeColor[0]+.5,r[n+1]=255*t.aboveRangeColor[1]+.5,r[n+2]=255*t.aboveRangeColor[2]+.5,r[n+3]=255*t.aboveRangeColor[3]+.5):(r[n]=r[4*(e-1)+0],r[n+1]=r[4*(e-1)+1],r[n+2]=r[4*(e-1)+2],r[n+3]=r[4*(e-1)+3]),r[n=4*(e+Ru)]=255*t.nanColor[0]+.5,r[n+1]=255*t.nanColor[1]+.5,r[n+2]=255*t.nanColor[2]+.5,r[n+3]=255*t.nanColor[3]+.5},e.build=function(){(t.table.length<1||e.getMTime()>t.buildTime.getMTime()&&t.insertTime.getMTime()<=t.buildTime.getMTime())&&e.forceBuild()},t.table.length>0&&(e.buildSpecialColors(),t.insertTime.modified())}(e,t)}var ku={newInstance:er.newInstance(Du,"vtkLookupTable"),extend:Du},_u=1,Lu=0,Bu=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function Vu(){Lu=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0}var Nu={getResolveCoincidentTopologyAsString:function(){return Bu[Lu]},getResolveCoincidentTopologyPolygonOffsetFaces:function(){return _u},getResolveCoincidentTopology:function(){return Lu},setResolveCoincidentTopology:Vu,setResolveCoincidentTopologyPolygonOffsetFaces:function(e){_u=e},setResolveCoincidentTopologyToDefault:function(){Vu(0)},setResolveCoincidentTopologyToOff:function(){Vu(0)},setResolveCoincidentTopologyToPolygonOffset:function(){Vu(1)}};function Fu(e,t,r){r.forEach((function(r){e["get".concat(r.method)]=function(){return t[r.key]},e["set".concat(r.method)]=function(e,n){t[r.key]={factor:e,offset:n}}}))}var Uu=["Polygon","Line","Point"],Gu={};Fu(Gu,{Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},Uu.map((function(e){return{key:e,method:"ResolveCoincidentTopology".concat(e,"OffsetParameters")}})));var ju={implementCoincidentTopologyMethods:function(e,t){void 0===t.resolveCoincidentTopology&&(t.resolveCoincidentTopology=!1),er.setGet(e,t,["resolveCoincidentTopology"]),t.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},Object.keys(Nu).forEach((function(t){e[t]=Nu[t]})),Object.keys(Gu).forEach((function(t){e[t]=Gu[t]})),Fu(e,t.topologyOffset,Uu.map((function(e){return{key:e,method:"RelativeCoincidentTopology".concat(e,"OffsetParameters")}}))),e.getCoincidentTopologyPolygonOffsetParameters=function(){var t=Gu.getResolveCoincidentTopologyPolygonOffsetParameters(),r=e.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:t.factor+r.factor,offset:t.offset+r.offset}},e.getCoincidentTopologyLineOffsetParameters=function(){var t=Gu.getResolveCoincidentTopologyLineOffsetParameters(),r=e.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:t.factor+r.factor,offset:t.offset+r.offset}},e.getCoincidentTopologyPointOffsetParameter=function(){var t=Gu.getResolveCoincidentTopologyPointOffsetParameters(),r=e.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:t.factor+r.factor,offset:t.offset+r.offset}}},staticOffsetAPI:Gu,otherStaticMethods:Nu,CATEGORIES:Uu},zu={MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,ID_HIGH24:3,MAX_KNOWN_PASS:3},Wu={PassTypes:zu};function Hu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ku(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hu(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Xu=nu.FieldAssociations,qu=ju.staticOffsetAPI,Yu=ju.otherStaticMethods,Qu=mu.ColorMode,$u=mu.ScalarMode,Zu=mu.GetArray,Ju=gu.VectorMode,es=Dl.VtkDataTypes;function ts(e){return function(){return er.vtkErrorMacro("vtkMapper::".concat(e," - NOT IMPLEMENTED"))}}var rs={colorMapColors:null,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,populateSelectionSettings:!0,selectionWebGLIdsToVTKIds:null,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,customShaderAttributes:[]};function ns(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rs,r),Vl.extend(e,t,r),er.get(e,t,["colorCoordinates","colorMapColors","colorTextureMap","selectionWebGLIdsToVTKIds"]),er.setGet(e,t,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","populateSelectionSettings","renderTime","scalarMode","scalarVisibility","static","useLookupTableScalarRange","customShaderAttributes"]),er.setGetArray(e,t,["scalarRange"],2),ju.implementCoincidentTopologyMethods(e,t),function(e,t){t.classHierarchy.push("vtkMapper"),e.getBounds=function(){var r=e.getInputData();return r?(t.static||e.update(),t.bounds=r.getBounds()):t.bounds=Uo(),t.bounds},e.setForceCompileOnly=function(e){t.forceCompileOnly=e},e.setSelectionWebGLIdsToVTKIds=function(e){t.selectionWebGLIdsToVTKIds=e},e.createDefaultLookupTable=function(){t.lookupTable=ku.newInstance()},e.getColorModeAsString=function(){return er.enumToString(Qu,t.colorMode)},e.setColorModeToDefault=function(){return e.setColorMode(0)},e.setColorModeToMapScalars=function(){return e.setColorMode(1)},e.setColorModeToDirectScalars=function(){return e.setColorMode(2)},e.getScalarModeAsString=function(){return er.enumToString($u,t.scalarMode)},e.setScalarModeToDefault=function(){return e.setScalarMode(0)},e.setScalarModeToUsePointData=function(){return e.setScalarMode(1)},e.setScalarModeToUseCellData=function(){return e.setScalarMode(2)},e.setScalarModeToUsePointFieldData=function(){return e.setScalarMode(3)},e.setScalarModeToUseCellFieldData=function(){return e.setScalarMode(4)},e.setScalarModeToUseFieldData=function(){return e.setScalarMode(5)},e.getAbstractScalars=function(e,r,n,a,o){if(!e||!t.scalarVisibility)return{scalars:null,cellFLag:!1};var i=null,l=!1;if(r===$u.DEFAULT)(i=e.getPointData().getScalars())||(i=e.getCellData().getScalars(),l=!0);else if(r===$u.USE_POINT_DATA)i=e.getPointData().getScalars();else if(r===$u.USE_CELL_DATA)i=e.getCellData().getScalars(),l=!0;else if(r===$u.USE_POINT_FIELD_DATA){var u=e.getPointData();i=n===Zu.BY_ID?u.getArrayByIndex(a):u.getArrayByName(o)}else if(r===$u.USE_CELL_FIELD_DATA){var s=e.getCellData();l=!0,i=n===Zu.BY_ID?s.getArrayByIndex(a):s.getArrayByName(o)}else if(r===$u.USE_FIELD_DATA){var c=e.getFieldData();i=n===Zu.BY_ID?c.getArrayByIndex(a):c.getArrayByName(o)}return{scalars:i,cellFlag:l}},e.mapScalars=function(r,n){var a=e.getAbstractScalars(r,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName).scalars;if(!a)return t.colorCoordinates=null,t.colorTextureMap=null,void(t.colorMapColors=null);var o="".concat(e.getMTime()).concat(a.getMTime()).concat(n);if(t.colorBuildString!==o){if(t.useLookupTableScalarRange||e.getLookupTable().setRange(t.scalarRange[0],t.scalarRange[1]),e.canUseTextureMapForColoring(r))e.mapScalarsToTexture(a,n);else{t.colorCoordinates=null,t.colorTextureMap=null;var i=e.getLookupTable();i&&(i.build(),t.colorMapColors=i.mapScalars(a,t.colorMode,t.fieldDataTupleId))}t.colorBuildString="".concat(e.getMTime()).concat(a.getMTime()).concat(n)}},e.scalarToTextureCoordinate=function(e,t,r){var n=.5,a=1;return Fo(e)||(a=.49,(n=(e-t)*r)>1e3?n=1e3:n<-1e3&&(n=-1e3)),{texCoordS:n,texCoordT:a}},e.createColorTextureCoordinates=function(t,r,n,a,o,i,l,u,s){var c=(i[1]-i[0])/u,f=[];f[0]=i[0]-c,f[1]=i[1]+c;var d=1/(f[1]-f[0]),p=r.getData(),g=t.getData(),m=0,v=0;if(o<0||o>=a)for(var h=0;h<n;++h){for(var y=0,b=0;b<a;++b)y+=g[m]*g[m],m++;var T=Math.sqrt(y);s&&(T=ku.applyLogScale(T,l,i));var x=e.scalarToTextureCoordinate(T,f[0],d);p[v]=x.texCoordS,p[v+1]=x.texCoordT,v+=2}else{m+=o;for(var S=0;S<n;++S){var w=g[m];s&&(w=ku.applyLogScale(w,l,i));var C=e.scalarToTextureCoordinate(w,f[0],d);p[v]=C.texCoordS,p[v+1]=C.texCoordT,v+=2,m+=a}}},e.mapScalarsToTexture=function(r,n){var a=t.lookupTable.getRange(),o=t.lookupTable.usingLogScale();o&&ku.getLogRange(a,a);var i=t.lookupTable.getAlpha();if(t.colorMapColors=null,null==t.colorTextureMap||e.getMTime()>t.colorTextureMap.getMTime()||t.lookupTable.getMTime()>t.colorTextureMap.getMTime()||t.lookupTable.getAlpha()!==n){t.lookupTable.setAlpha(n),t.colorTextureMap=null,t.lookupTable.build();var l=t.lookupTable.getNumberOfAvailableColors();l>4094&&(l=4094),l<64&&(l=64),l+=2;for(var u=(a[1]-a[0])/(l-2),s=new Float64Array(2*l),c=0;c<l;++c)s[c]=a[0]+c*u-u/2,o&&(s[c]=Math.pow(10,s[c]));for(var f=0;f<l;++f)s[f+l]=NaN;t.colorTextureMap=du.newInstance(),t.colorTextureMap.setExtent(0,l-1,0,1,0,0);var d=Dl.newInstance({numberOfComponents:1,values:s});t.colorTextureMap.getPointData().setScalars(t.lookupTable.mapScalars(d,t.colorMode,0)),t.lookupTable.setAlpha(i)}if(!t.colorCoordinates||e.getMTime()>t.colorCoordinates.getMTime()||e.getInputData(0).getMTime()>t.colorCoordinates.getMTime()||t.lookupTable.getMTime()>t.colorCoordinates.getMTime()){t.colorCoordinates=null;var p=r.getNumberOfComponents(),g=r.getNumberOfTuples();t.colorCoordinates=Dl.newInstance({numberOfComponents:2,values:new Float32Array(2*g)});var m=t.lookupTable.getVectorComponent();t.lookupTable.getVectorMode()===Ju.MAGNITUDE&&r.getNumberOfComponents()>1&&(m=-1),e.createColorTextureCoordinates(r,t.colorCoordinates,g,p,m,a,t.lookupTable.getRange(),t.colorTextureMap.getPointData().getScalars().getNumberOfTuples()/2-2,o)}},e.getIsOpaque=function(){var r=e.getInputData(),n=e.getAbstractScalars(r,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName).scalars;if(!t.scalarVisibility||null==n)return!0;var a=e.getLookupTable();return!a||(a.build(),a.areScalarsOpaque(n,t.colorMode,-1))},e.canUseTextureMapForColoring=function(r){if(!t.interpolateScalarsBeforeMapping)return!1;if(t.lookupTable&&t.lookupTable.getIndexedLookup())return!1;var n=e.getAbstractScalars(r,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName),a=n.scalars;return!!a&&!n.cellFlag&&(t.colorMode!==Qu.DEFAULT||a.getDataType()!==es.UNSIGNED_CHAR)&&t.colorMode!==Qu.DIRECT_SCALARS},e.clearColorArrays=function(){t.colorMapColors=null,t.colorCoordinates=null,t.colorTextureMap=null},e.getLookupTable=function(){return t.lookupTable||e.createDefaultLookupTable(),t.lookupTable},e.getMTime=function(){var e=t.mtime;if(null!==t.lookupTable){var r=t.lookupTable.getMTime();e=r>e?r:e}return e},e.getPrimitiveCount=function(){var t=e.getInputData();return{points:t.getPoints().getNumberOfValues()/3,verts:t.getVerts().getNumberOfValues()-t.getVerts().getNumberOfCells(),lines:t.getLines().getNumberOfValues()-2*t.getLines().getNumberOfCells(),triangles:t.getPolys().getNumberOfValues()-3*t.getPolys().getNumberOfCells()}},e.acquireInvertibleLookupTable=ts("AcquireInvertibleLookupTable"),e.valueToColor=ts("ValueToColor"),e.colorToValue=ts("ColorToValue"),e.useInvertibleColorFor=ts("UseInvertibleColorFor"),e.clearInvertibleColor=ts("ClearInvertibleColor"),e.processSelectorPixelBuffers=function(e,r){if(e&&t.selectionWebGLIdsToVTKIds&&t.populateSelectionSettings){var n=e.getRawPixelBuffer(zu.ID_LOW24),a=e.getRawPixelBuffer(zu.ID_HIGH24),o=e.getCurrentPass(),i=e.getFieldAssociation(),l=null;i===Xu.FIELD_ASSOCIATION_POINTS?l=t.selectionWebGLIdsToVTKIds.points:i===Xu.FIELD_ASSOCIATION_CELLS&&(l=t.selectionWebGLIdsToVTKIds.cells),l&&r.forEach((function(t){if(o===zu.ID_LOW24){var r=0;a&&(r+=a[t],r*=256),r+=n[t+2],r*=256,r+=n[t+1],r*=256,r+=n[t];var i=l[r],u=e.getPixelBuffer(zu.ID_LOW24);u[t]=255&i,u[t+1]=(65280&i)>>8,u[t+2]=(16711680&i)>>16}else if(o===zu.ID_HIGH24&&a){var s=0;s+=a[t],s*=256,s+=n[t],s*=256,s+=n[t+1],s*=256,s+=n[t+2];var c=l[s];e.getPixelBuffer(zu.ID_HIGH24)[t]=(4278190080&c)>>24}}))}}}(e,t)}var as=Ku(Ku(Ku({newInstance:er.newInstance(ns,"vtkMapper"),extend:ns},qu),Yu),mu);function os(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function is(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?os(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):os(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ls(e){var t=0;return e.filter((function(e,r){return r===t&&(t+=e+1,!0)}))}function us(e){for(var t=0,r=0;r<e.length;)r+=e[r]+1,t++;return t}var ss={extractCellSizes:ls,getNumberOfCells:us};function cs(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Dl.extend(e,t,function(e){return is({empty:!0,numberOfComponents:1,dataType:bl.UNSIGNED_INT},e)}(r)),function(e,t){t.classHierarchy.push("vtkCellArray");var r=is({},e);e.getNumberOfCells=function(r){return void 0===t.numberOfCells||r?(t.cellSizes?t.numberOfCells=t.cellSizes.length:t.numberOfCells=us(e.getData()),t.numberOfCells):t.numberOfCells},e.getCellSizes=function(r){return void 0===t.cellSizes||r?(t.cellSizes=ls(e.getData()),t.cellSizes):t.cellSizes},e.resize=function(n){var a=e.getNumberOfTuples();r.resize(n);var o=e.getNumberOfTuples();o<a&&(0===o?(t.numberOfCells=0,t.cellSizes=[]):(t.numberOfCells=void 0,t.cellSizes=void 0))},e.setData=function(e){r.setData(e,1),t.numberOfCells=void 0,t.cellSizes=void 0},e.getCell=function(e){var r=e,n=t.values[r++];return t.values.subarray(r,r+n)},e.insertNextCell=function(r){var n=e.getNumberOfCells();return e.insertNextTuples([r.length].concat($e(r))),++t.numberOfCells,null!=t.cellSizes&&t.cellSizes.push(r.length),n}}(e,t)}var fs=is({newInstance:er.newInstance(cs,"vtkCellArray"),extend:cs},ss),ds=er.vtkErrorMacro,ps=[1,-1,1,-1,1,-1];var gs={empty:!0,numberOfComponents:3,dataType:bl.FLOAT,bounds:[1,-1,1,-1,1,-1]};function ms(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gs,r),Dl.extend(e,t,r),function(e,t){t.classHierarchy.push("vtkPoints"),e.getNumberOfPoints=e.getNumberOfTuples,e.setNumberOfPoints=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;e.getNumberOfPoints()!==r&&(t.size=r*n,t.values=er.newTypedArray(t.dataType,t.size),e.setNumberOfComponents(n),e.modified())},e.setPoint=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];e.setTuple(t,n)},e.getPoint=e.getTuple,e.insertNextPoint=function(t,r,n){return e.insertNextTuple([t,r,n])},e.getBounds=function(){if(3===e.getNumberOfComponents()){var r=e.getRange(0);t.bounds[0]=r[0],t.bounds[1]=r[1];var n=e.getRange(1);t.bounds[2]=n[0],t.bounds[3]=n[1];var a=e.getRange(2);return t.bounds[4]=a[0],t.bounds[5]=a[1],t.bounds}if(2!==e.getNumberOfComponents())return ds("getBounds called on an array with components of\n        ".concat(e.getNumberOfComponents())),ps;var o=e.getRange(0);t.bounds[0]=o[0],t.bounds[1]=o[1];var i=e.getRange(1);return t.bounds[2]=i[0],t.bounds[3]=i[1],t.bounds[4]=0,t.bounds[5]=0,t.bounds},e.computeBounds=e.getBounds,e.setNumberOfComponents(t.numberOfComponents<2?3:t.numberOfComponents)}(e,t)}var vs={newInstance:er.newInstance(ms,"vtkPoints"),extend:ms};var hs={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function ys(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,hs,r),er.obj(e,t),t.points||(t.points=vs.newInstance()),er.get(e,t,["points","pointsIds"]),function(e,t){t.classHierarchy.push("vtkCell"),e.initialize=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(r){t.pointsIds=r;var n=t.points.getData();n.length!==3*t.pointsIds.length&&(n=er.newTypedArray(e.getDataType(),3*t.pointsIds.length));var a=e.getData();t.pointsIds.forEach((function(e,t){var r=3*e,o=3*t;n[o]=a[r],n[++o]=a[++r],n[++o]=a[++r]})),t.points.setData(n)}else{t.points=e,t.pointsIds=new Array(e.getNumberOfPoints());for(var o=e.getNumberOfPoints()-1;o>=0;--o)t.pointsIds[o]=o}},e.getBounds=function(){var e=t.points.getNumberOfPoints(),r=[];if(e){t.points.getPoint(0,r),t.bounds[0]=r[0],t.bounds[1]=r[0],t.bounds[2]=r[1],t.bounds[3]=r[1],t.bounds[4]=r[2],t.bounds[5]=r[2];for(var n=1;n<e;n++)t.points.getPoint(n,r),t.bounds[0]=r[0]<t.bounds[0]?r[0]:t.bounds[0],t.bounds[1]=r[0]>t.bounds[1]?r[0]:t.bounds[1],t.bounds[2]=r[1]<t.bounds[2]?r[1]:t.bounds[2],t.bounds[3]=r[1]>t.bounds[3]?r[1]:t.bounds[3],t.bounds[4]=r[2]<t.bounds[4]?r[2]:t.bounds[4],t.bounds[5]=r[2]>t.bounds[5]?r[2]:t.bounds[5]}else _o(t.bounds);return t.bounds},e.getLength2=function(){e.getBounds();for(var r=0,n=0,a=0;a<3;a++)r+=(n=t.bounds[2*a+1]-t.bounds[2*a])*n;return r},e.getParametricDistance=function(e){for(var t,r=0,n=0;n<3;n++)(t=e[n]<0?-e[n]:e[n]>1?e[n]-1:0)>r&&(r=t);return r},e.getNumberOfPoints=function(){return t.points.getNumberOfPoints()},e.deepCopy=function(e){e.initialize(t.points,t.pointsIds)},e.getCellDimension=function(){},e.intersectWithLine=function(e,t,r,n,a,o,i){},e.evaluatePosition=function(e,t,r,n,a,o){er.vtkErrorMacro("vtkCell.evaluatePosition is not implemented.")}}(e,t)}var bs={newInstance:er.newInstance(ys,"vtkCell"),extend:ys};var Ts={array:null,maxId:0,extend:0};function xs(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ts,r),er.obj(e,t),function(e,t){t.classHierarchy.push("vtkCellLinks"),e.buildLinks=function(r){var n=r.getPoints().getNumberOfPoints(),a=r.getNumberOfCells(),o=new Uint32Array(n);if(r.isA("vtkPolyData")){for(var i=0;i<a;++i)r.getCellPoints(i).cellPointIds.forEach((function(t){e.incrementLinkCount(t)}));e.allocateLinks(n),t.maxId=n-1;for(var l=function(t){r.getCellPoints(t).cellPointIds.forEach((function(r){e.insertCellReference(r,o[r]++,t)}))},u=0;u<a;++u)l(u)}else{for(var s=0;s<a;s++)bs.newInstance().getPointsIds().forEach((function(t){e.incrementLinkCount(t)}));e.allocateLinks(n),t.maxId=n-1;for(var c=function(t){bs.newInstance().getPointsIds().forEach((function(r){e.insertCellReference(r,o[r]++,t)}))},f=0;f<a;++f)c(f)}},e.allocate=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;t.array=Array(e).fill().map((function(){return{ncells:0,cells:null}})),t.extend=r,t.maxId=-1},e.initialize=function(){t.array=null},e.getLink=function(e){return t.array[e]},e.getNcells=function(e){return t.array[e].ncells},e.getCells=function(e){return t.array[e].cells},e.insertNextPoint=function(e){t.array.push({ncells:e,cells:Array(e)}),++t.maxId},e.insertNextCellReference=function(e,r){t.array[e].cells[t.array[e].ncells++]=r},e.deletePoint=function(e){t.array[e].ncells=0,t.array[e].cells=null},e.removeCellReference=function(e,r){t.array[r].cells=t.array[r].cells.filter((function(t){return t!==e})),t.array[r].ncells=t.array[r].cells.length},e.addCellReference=function(e,r){t.array[r].cells[t.array[r].ncells++]=e},e.resizeCellList=function(e,r){t.array[e].cells.length=r},e.squeeze=function(){!function(e,t){var r=t;for(t>=e.array.length&&(r+=e.array.length);r>e.array.length;)e.array.push({ncells:0,cells:null});e.array.length=r}(t,t.maxId+1)},e.reset=function(){t.maxId=-1},e.deepCopy=function(e){t.array=$e(e.array),t.extend=e.extend,t.maxId=e.maxId},e.incrementLinkCount=function(e){++t.array[e].ncells},e.allocateLinks=function(e){for(var r=0;r<e;++r)t.array[r].cells=new Array(t.array[r].ncells)},e.insertCellReference=function(e,r,n){t.array[e].cells[r]=n}}(e,t)}var Ss={newInstance:er.newInstance(xs,"vtkCellLinks"),extend:xs},ws={VTK_EMPTY_CELL:0,VTK_VERTEX:1,VTK_POLY_VERTEX:2,VTK_LINE:3,VTK_POLY_LINE:4,VTK_TRIANGLE:5,VTK_TRIANGLE_STRIP:6,VTK_POLYGON:7,VTK_PIXEL:8,VTK_QUAD:9,VTK_TETRA:10,VTK_VOXEL:11,VTK_HEXAHEDRON:12,VTK_WEDGE:13,VTK_PYRAMID:14,VTK_PENTAGONAL_PRISM:15,VTK_HEXAGONAL_PRISM:16,VTK_QUADRATIC_EDGE:21,VTK_QUADRATIC_TRIANGLE:22,VTK_QUADRATIC_QUAD:23,VTK_QUADRATIC_POLYGON:36,VTK_QUADRATIC_TETRA:24,VTK_QUADRATIC_HEXAHEDRON:25,VTK_QUADRATIC_WEDGE:26,VTK_QUADRATIC_PYRAMID:27,VTK_BIQUADRATIC_QUAD:28,VTK_TRIQUADRATIC_HEXAHEDRON:29,VTK_QUADRATIC_LINEAR_QUAD:30,VTK_QUADRATIC_LINEAR_WEDGE:31,VTK_BIQUADRATIC_QUADRATIC_WEDGE:32,VTK_BIQUADRATIC_QUADRATIC_HEXAHEDRON:33,VTK_BIQUADRATIC_TRIANGLE:34,VTK_CUBIC_LINE:35,VTK_CONVEX_POINT_SET:41,VTK_POLYHEDRON:42,VTK_PARAMETRIC_CURVE:51,VTK_PARAMETRIC_SURFACE:52,VTK_PARAMETRIC_TRI_SURFACE:53,VTK_PARAMETRIC_QUAD_SURFACE:54,VTK_PARAMETRIC_TETRA_REGION:55,VTK_PARAMETRIC_HEX_REGION:56,VTK_HIGHER_ORDER_EDGE:60,VTK_HIGHER_ORDER_TRIANGLE:61,VTK_HIGHER_ORDER_QUAD:62,VTK_HIGHER_ORDER_POLYGON:63,VTK_HIGHER_ORDER_TETRAHEDRON:64,VTK_HIGHER_ORDER_WEDGE:65,VTK_HIGHER_ORDER_PYRAMID:66,VTK_HIGHER_ORDER_HEXAHEDRON:67,VTK_LAGRANGE_CURVE:68,VTK_LAGRANGE_TRIANGLE:69,VTK_LAGRANGE_QUADRILATERAL:70,VTK_LAGRANGE_TETRAHEDRON:71,VTK_LAGRANGE_HEXAHEDRON:72,VTK_LAGRANGE_WEDGE:73,VTK_LAGRANGE_PYRAMID:74,VTK_NUMBER_OF_CELL_TYPES:75},Cs=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];function Ps(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Os={getClassNameFromTypeId:function(e){return e<Cs.length?Cs[e]:"UnknownClass"},getTypeIdFromClassName:function(e){return Cs.findIndex(e)},isLinear:function(e){return e<ws.VTK_QUADRATIC_EDGE||e===ws.VTK_CONVEX_POINT_SET||e===ws.VTK_POLYHEDRON},hasSubCells:function(e){return e===ws.VTK_TRIANGLE_STRIP||e===ws.VTK_POLY_LINE||e===ws.VTK_POLY_VERTEX}};var As={size:0,maxId:-1,extend:1e3};function Es(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,As,r),er.obj(e,t),er.get(e,t,["size","maxId","extend"]),er.getArray(e,t,["typeArray","locationArray"]),function(e,t){t.classHierarchy.push("vtkCellTypes"),e.allocate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:512,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;t.size=e>0?e:1,t.extend=r>0?r:1,t.maxId=-1,t.typeArray=new Uint8Array(e),t.locationArray=new Uint32Array(e)},e.insertCell=function(e,r,n){t.typeArray[e]=r,t.locationArray[e]=n,e>t.maxId&&(t.maxId=e)},e.insertNextCell=function(r,n){return e.insertCell(++t.maxId,r,n),t.maxId},e.setCellTypes=function(e,r,n){t.size=e,t.typeArray=r,t.locationArray=n,t.maxId=e-1},e.getCellLocation=function(e){return t.locationArray[e]},e.deleteCell=function(e){t.typeArray[e]=ws.VTK_EMPTY_CELL},e.getNumberOfTypes=function(){return t.maxId+1},e.isType=function(t){for(var r=e.getNumberOfTypes(),n=0;n<r;++n)if(t===e.getCellType(n))return!0;return!1},e.insertNextType=function(t){return e.insertNextCell(t,-1)},e.getCellType=function(e){return t.typeArray[e]},e.reset=function(){t.maxId=-1},e.deepCopy=function(r){e.allocate(r.getSize(),r.getExtend()),t.typeArray.set(r.getTypeArray()),t.locationArray.set(r.getLocationArray()),t.maxId=r.getMaxId()}}(e,t)}var Is=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ps(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ps(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({newInstance:er.newInstance(Es,"vtkCellTypes"),extend:Es},Os),Rs={IntersectionState:{NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2}};function Ms(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ds(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ms(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ks=Rs.IntersectionState;function _s(e,t,r){var n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o={t:Number.MIN_VALUE,distance:0},i=[];i[0]=r[0]-t[0],i[1]=r[1]-t[1],i[2]=r[2]-t[2];var l=i[0]*(e[0]-t[0])+i[1]*(e[1]-t[1])+i[2]*(e[2]-t[2]),u=yo(i,i),s=1e-5*l;return 0!==u&&(o.t=l/u),s<0&&(s=-s),-s<u&&u<s||u<=0||o.t<0?n=t:o.t>1?n=r:(n=i,i[0]=t[0]+o.t*i[0],i[1]=t[1]+o.t*i[1],i[2]=t[2]+o.t*i[2]),a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2]),o.distance=So(n,e),o}function Ls(e,t,r,n,a,o){var i=[],l=[],u=[];a[0]=0,o[0]=0,vo(t,e,i),vo(n,r,l),vo(r,e,u);var s=[yo(i,i),-yo(i,l),-yo(i,l),yo(l,l)],c=[];if(c[0]=yo(i,u),c[1]=-yo(l,u),0===Do(s,c,2)){for(var f,d=Number.MAX_VALUE,p=[e,t,r,n],g=[r,r,e,e],m=[n,n,t,t],v=[o[0],o[0],a[0],a[0]],h=[a[0],a[0],o[0],o[0]],y=0;y<4;y++)(f=_s(p[y],g[y],m[y])).distance<d&&(d=f.distance,v[y]=f.t,h[y]=y%2);return ks.ON_LINE}return a[0]=c[0],o[0]=c[1],a[0]>=0&&a[0]<=1&&o[0]>=0&&o[0]<=1?ks.YES_INTERSECTION:ks.NO_INTERSECTION}var Bs={distanceToLine:_s,intersection:Ls};var Vs={orientations:null};function Ns(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Vs,r),bs.extend(e,t,r),er.setGet(e,t,["orientations"]),function(e,t){t.classHierarchy.push("vtkLine"),e.getCellDimension=function(){return 1},e.intersectWithLine=function(e,r,n,a,o){var i={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null};o[1]=0,o[2]=0;var l=[],u=[],s=[];t.points.getPoint(0,u),t.points.getPoint(1,s);var c,f=[],d=[],p=Ls(e,r,u,s,f,d);if(i.t=f[0],i.betweenPoints=(c=i.t)>=0&&c<=1,o[0]=d[0],p===ks.YES_INTERSECTION){for(var g=0;g<3;g++)a[g]=u[g]+o[0]*(s[g]-u[g]),l[g]=e[g]+i.t*(r[g]-e[g]);if(So(a,l)<=n*n)return i.intersect=1,i}else{var m;if(i.t<0)return(m=_s(e,u,s,a)).distance<=n*n?(i.t=0,i.intersect=1,i.betweenPoints=!0,i):i;if(i.t>1)return(m=_s(r,u,s,a)).distance<=n*n?(i.t=1,i.intersect=1,i.betweenPoints=!0,i):i;if(o[0]<0)return o[0]=0,m=_s(u,e,r,a),i.t=m.t,m.distance<=n*n?(i.intersect=1,i):i;if(o[0]>1)return o[0]=1,m=_s(s,e,r,a),i.t=m.t,m.distance<=n*n?(i.intersect=1,i):i}return i},e.evaluateLocation=function(e,r,n){var a=[],o=[];t.points.getPoint(0,a),t.points.getPoint(1,o);for(var i=0;i<3;i++)r[i]=a[i]+e[0]*(o[i]-a[i]);n[0]=1-e[0],n[1]=e[0]},e.evaluateOrientation=function(e,r,n){return!!t.orientations&&(ji(r,t.orientations[0],t.orientations[1],e[0]),n[0]=1-e[0],n[1]=e[0],!0)}}(e,t)}var Fs=Ds(Ds({newInstance:er.newInstance(Ns,"vtkLine"),extend:Ns},Bs),Rs);var Us={};function Gs(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Us,r),nu.extend(e,t,r),er.setGet(e,t,["points"]),function(e,t){t.classHierarchy.push("vtkPointSet"),t.points?t.points=it(t.points):t.points=vs.newInstance(),e.getNumberOfPoints=function(){return t.points.getNumberOfPoints()},e.getBounds=function(){return t.points.getBounds()},e.computeBounds=function(){e.getBounds()};var r=e.shallowCopy;e.shallowCopy=function(e){r(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]),t.points=vs.newInstance(),t.points.shallowCopy(e.getPoints())}}(e,t)}var js={newInstance:er.newInstance(Gs,"vtkPointSet"),extend:Gs};function zs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ws(e,t,r,n){var a=r[0]-t[0],o=r[1]-t[1],i=r[2]-t[2],l=e[0]-t[0],u=e[1]-t[1],s=e[2]-t[2];n[0]=o*s-i*u,n[1]=i*l-a*s,n[2]=a*u-o*l}function Hs(e,t,r,n){Ws(e,t,r,n);var a=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);0!==a&&(n[0]/=a,n[1]/=a,n[2]/=a)}var Ks={computeNormalDirection:Ws,computeNormal:Hs,intersectWithTriangle:function(e,t,r,n,a,o){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1e-6,l=!1,u=[],s=[],c=[],f=[],d=[];Hs(e,t,r,f),Hs(n,a,o,d);var p=-yo(f,e),g=-yo(d,n),m=[yo(d,e)+g,yo(d,t)+g,yo(d,r)+g];if(m[0]*m[1]>i&&m[0]*m[2]>i)return{intersect:!1,coplanar:l,pt1:u,pt2:s,surfaceId:c};var v=[yo(f,n)+p,yo(f,a)+p,yo(f,o)+p];if(v[0]*v[1]>i&&v[0]*v[2]>i)return{intersect:!1,coplanar:l,pt1:u,pt2:s,surfaceId:c};if(Math.abs(f[0]-d[0])<1e-9&&Math.abs(f[1]-d[1])<1e-9&&Math.abs(f[2]-d[2])<1e-9&&Math.abs(p-g)<1e-9)return{intersect:!1,coplanar:l=!0,pt1:u,pt2:s,surfaceId:c};var h=[e,t,r],y=[n,a,o],b=yo(f,d),T=(p-g*b)/(b*b-1),x=(g-p*b)/(b*b-1),S=[T*f[0]+x*d[0],T*f[1]+x*d[1],T*f[2]+x*d[2]],w=bo(f,d,[]);xo(w);for(var C,P,O=0,A=0,E=[],I=[],R=50,M=50,D=0;D<3;D++){var k=D,_=(D+1)%3,L=ei.intersectWithLine(h[k],h[_],n,d);L.intersection&&L.t>0-i&&L.t<1+i&&(L.t<1+i&&L.t>1-i&&(R=O),E[O++]=yo(L.x,w)-yo(S,w));var B=ei.intersectWithLine(y[k],y[_],e,f);B.intersection&&B.t>0-i&&B.t<1+i&&(B.t<1+i&&B.t>1-i&&(M=A),I[A++]=yo(B.x,w)-yo(S,w))}if(O>2){O--;var V=E[2];E[2]=E[R],E[R]=V}if(A>2){A--;var N=I[2];I[2]=I[M],I[M]=N}if(2!==O||2!==A)return{intersect:!1,coplanar:l,pt1:u,pt2:s,surfaceId:c};if(Number.isNaN(E[0])||Number.isNaN(E[1])||Number.isNaN(I[0])||Number.isNaN(I[1]))return{intersect:!1,coplanar:l,pt1:u,pt2:s,surfaceId:c};if(E[0]>E[1]){var F=E[1];E[1]=E[0],E[0]=F}if(I[0]>I[1]){var U=I[1];I[1]=I[0],I[0]=U}return E[1]<I[0]||I[1]<E[0]?{intersect:!1,coplanar:l,pt1:u,pt2:s,surfaceId:c}:(E[0]<I[0]?E[1]<I[1]?(c[0]=2,c[1]=1,C=I[0],P=E[1]):(c[0]=2,c[1]=2,C=I[0],P=I[1]):E[1]<I[1]?(c[0]=1,c[1]=1,C=E[0],P=E[1]):(c[0]=1,c[1]=2,C=E[0],P=I[1]),ho(S,w,C,u),ho(S,w,P,s),{intersect:!0,coplanar:l,pt1:u,pt2:s,surfaceId:c})}};var Xs={};function qs(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Xs,r),bs.extend(e,t,r),function(e,t){t.classHierarchy.push("vtkTriangle"),e.getCellDimension=function(){return 2},e.intersectWithLine=function(r,n,a,o,i){var l={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1};i[2]=0;var u=a*a,s=[],c=[],f=[];t.points.getPoint(0,s),t.points.getPoint(1,c),t.points.getPoint(2,f);var d=[];if(Hs(s,c,f,d),0!==d[0]||0!==d[1]||0!==d[2]){var p=ei.intersectWithLine(r,n,s,d);if(l.betweenPoints=p.betweenPoints,l.t=p.t,o[0]=p.x[0],o[1]=p.x[1],o[2]=p.x[2],!p.intersection)return i[0]=0,i[1]=0,l.intersect=0,l;var g=e.evaluatePosition(o,[],i,[]);if(g.evaluation>=0)return g.dist2<=u?(l.intersect=1,l):(l.intersect=g.evaluation,l)}var m=So(s,c),v=So(c,f),h=So(f,s);t.line||(t.line=Fs.newInstance()),m>v&&m>h?(t.line.getPoints().setPoint(0,s),t.line.getPoints().setPoint(1,c)):v>h&&v>m?(t.line.getPoints().setPoint(0,c),t.line.getPoints().setPoint(1,f)):(t.line.getPoints().setPoint(0,f),t.line.getPoints().setPoint(1,s));var y=t.line.intersectWithLine(r,n,a,o,i);if(l.betweenPoints=y.betweenPoints,l.t=y.t,y.intersect){for(var b=[],T=[],x=[],S=0;S<3;S++)b[S]=s[S]-f[S],T[S]=c[S]-f[S],x[S]=o[S]-f[S];return i[0]=yo(x,b)/h,i[1]=yo(x,T)/v,l.intersect=1,l}return i[0]=0,i[1]=0,l.intersect=0,l},e.evaluatePosition=function(e,r,n,a){var o,i,l,u,s,c,f,d={subId:0,dist2:0,evaluation:-1},p=[],g=[],m=[],v=[],h=[],y=[],b=[],T=0,x=[],S=[],w=[],C=[],P=[];d.subId=0,n[2]=0,t.points.getPoint(1,p),t.points.getPoint(2,g),t.points.getPoint(0,m),Ws(p,g,m,v),ei.generalizedProjectPoint(e,p,v,P);var O=0;for(o=0;o<3;o++)(l=v[o]<0?-v[o]:v[o])>O&&(O=l,T=o);for(i=0,o=0;o<3;o++)o!==T&&(x[i++]=o);for(o=0;o<2;o++)h[o]=P[x[o]]-m[x[o]],y[o]=p[x[o]]-m[x[o]],b[o]=g[x[o]]-m[x[o]];if(0===(u=Po(y,b)))return n[0]=0,n[1]=0,d.evaluation=-1,d;if(n[0]=Po(h,b)/u,n[1]=Po(y,h)/u,a[0]=1-(n[0]+n[1]),a[1]=n[0],a[2]=n[1],a[0]>=0&&a[0]<=1&&a[1]>=0&&a[1]<=1&&a[2]>=0&&a[2]<=1)r&&(d.dist2=So(P,e),r[0]=P[0],r[1]=P[1],r[2]=P[2]),d.evaluation=1;else{var A;if(r)if(a[1]<0&&a[2]<0)for(s=So(e,m),c=Fs.distanceToLine(e,p,m,A,w),f=Fs.distanceToLine(e,m,g,A,C),s<c?(d.dist2=s,S=m):(d.dist2=c,S=w),f<d.dist2&&(d.dist2=f,S=C),o=0;o<3;o++)r[o]=S[o];else if(a[2]<0&&a[0]<0)for(s=So(e,p),c=Fs.distanceToLine(e,p,m,A,w),f=Fs.distanceToLine(e,p,g,A,C),s<c?(d.dist2=s,S=p):(d.dist2=c,S=w),f<d.dist2&&(d.dist2=f,S=C),o=0;o<3;o++)r[o]=S[o];else if(a[1]<0&&a[0]<0)for(s=So(e,g),c=Fs.distanceToLine(e,g,m,A,w),f=Fs.distanceToLine(e,p,g,A,C),s<c?(d.dist2=s,S=g):(d.dist2=c,S=w),f<d.dist2&&(d.dist2=f,S=C),o=0;o<3;o++)r[o]=S[o];else if(a[0]<0){var E=Fs.distanceToLine(e,p,g,r);d.dist2=E.distance}else if(a[1]<0){var I=Fs.distanceToLine(e,g,m,r);d.dist2=I.distance}else if(a[2]<0){var R=Fs.distanceToLine(e,p,m,r);d.dist2=R.distance}d.evaluation=0}return d},e.evaluateLocation=function(e,r,n){var a=[],o=[],i=[];t.points.getPoint(0,a),t.points.getPoint(1,o),t.points.getPoint(2,i);for(var l=1-e[0]-e[1],u=0;u<3;u++)r[u]=a[u]*l+o[u]*e[0]+i[u]*e[1];n[0]=l,n[1]=e[0],n[2]=e[1]},e.getParametricDistance=function(e){var t,r=0,n=[];n[0]=e[0],n[1]=e[1],n[2]=1-e[0]-e[1];for(var a=0;a<3;a++)(t=n[a]<0?-n[a]:n[a]>1?n[a]-1:0)>r&&(r=t);return r}}(e,t)}var Ys,Qs=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zs(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({newInstance:er.newInstance(qs,"vtkTriangle"),extend:qs},Ks),$s=["verts","lines","polys","strips"],Zs=er.vtkWarningMacro,Js=(Qe(Ys={},ws.VTK_LINE,Fs),Qe(Ys,ws.VTK_POLY_LINE,Fs),Qe(Ys,ws.VTK_TRIANGLE,Qs),Ys);var ec={};function tc(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ec,r),js.extend(e,t,r),er.get(e,t,["cells","links"]),er.setGet(e,t,["verts","lines","polys","strips"]),function(e,t){t.classHierarchy.push("vtkPolyData"),$s.forEach((function(r){e["getNumberOf".concat(function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e){return e.toUpperCase()})).replace(/\s+/g,"")}(r))]=function(){return t[r].getNumberOfCells()},t[r]?t[r]=it(t[r]):t[r]=fs.newInstance()})),e.getNumberOfCells=function(){return $s.reduce((function(e,r){return e+t[r].getNumberOfCells()}),0)};var r=e.shallowCopy;e.shallowCopy=function(e){r(e,arguments.length>1&&void 0!==arguments[1]&&arguments[1]),$s.forEach((function(r){t[r]=fs.newInstance(),t[r].shallowCopy(e.getReferenceByName(r))}))},e.buildCells=function(){var r=e.getNumberOfVerts(),n=e.getNumberOfLines(),a=e.getNumberOfPolys(),o=e.getNumberOfStrips(),i=r+n+a+o,l=new Uint8Array(i),u=l,s=new Uint32Array(i),c=s;if(r){var f=0;t.verts.getCellSizes().forEach((function(e,t){c[t]=f,u[t]=e>1?ws.VTK_POLY_VERTEX:ws.VTK_VERTEX,f+=e+1})),c=c.subarray(r),u=u.subarray(r)}if(n){var d=0;t.lines.getCellSizes().forEach((function(e,t){c[t]=d,u[t]=e>2?ws.VTK_POLY_LINE:ws.VTK_LINE,1===e&&Zs("Building VTK_LINE ",t," with only one point, but VTK_LINE needs at least two points. Check the input."),d+=e+1})),c=c.subarray(n),u=u.subarray(n)}if(a){var p=0;t.polys.getCellSizes().forEach((function(e,t){switch(c[t]=p,e){case 3:u[t]=ws.VTK_TRIANGLE;break;case 4:u[t]=ws.VTK_QUAD;break;default:u[t]=ws.VTK_POLYGON}e<3&&Zs("Building VTK_TRIANGLE ",t," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),p+=e+1})),c+=c.subarray(a),u+=u.subarray(a)}if(o){var g=0;u.fill(ws.VTK_TRIANGLE_STRIP,0,o),t.strips.getCellSizes().forEach((function(e,t){c[t]=g,g+=e+1}))}t.cells=Is.newInstance(),t.cells.setCellTypes(i,l,s)},e.buildLinks=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;void 0===t.cells&&e.buildCells(),t.links=Ss.newInstance(),r>0?t.links.allocate(r):t.links.allocate(e.getPoints().getNumberOfPoints()),t.links.buildLinks(e)},e.getCellType=function(e){return t.cells.getCellType(e)},e.getCellPoints=function(r){var n=e.getCellType(r),a=null;switch(n){case ws.VTK_VERTEX:case ws.VTK_POLY_VERTEX:a=t.verts;break;case ws.VTK_LINE:case ws.VTK_POLY_LINE:a=t.lines;break;case ws.VTK_TRIANGLE:case ws.VTK_QUAD:case ws.VTK_POLYGON:a=t.polys;break;case ws.VTK_TRIANGLE_STRIP:a=t.strips;break;default:return a=null,{type:0,cellPointIds:null}}var o=t.cells.getCellLocation(r);return{cellType:n,cellPointIds:a.getCell(o)}},e.getPointCells=function(e){return t.links.getCells(e)},e.getCellEdgeNeighbors=function(e,r,n){var a=t.links.getLink(r),o=t.links.getLink(n);return a.cells.filter((function(t){return t!==e&&-1!==o.cells.indexOf(t)}))},e.getCell=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.getCellPoints(t),a=r||Js[n.cellType].newInstance();return a.initialize(e.getPoints(),n.cellPointIds),a}}(e,t)}var rc={newInstance:er.newInstance(tc,"vtkPolyData"),extend:tc};function nc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ac={image:null,canvas:null,jsImageData:null,imageLoaded:!1,repeat:!1,interpolate:!1,edgeClamp:!1,mipLevel:0,resizable:!1};function oc(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ac,r),er.obj(e,t),er.algo(e,t,6,0),er.get(e,t,["canvas","image","jsImageData","imageLoaded","resizable"]),er.setGet(e,t,["repeat","edgeClamp","interpolate","mipLevel"]),function(e,t){t.classHierarchy.push("vtkTexture"),e.imageLoaded=function(){t.image.removeEventListener("load",e.imageLoaded),t.imageLoaded=!0,e.modified()},e.setJsImageData=function(r){t.jsImageData!==r&&(null!==r&&(e.setInputData(null),e.setInputConnection(null),t.image=null,t.canvas=null),t.jsImageData=r,t.imageLoaded=!0,e.modified())},e.setCanvas=function(r){t.canvas!==r&&(null!==r&&(e.setInputData(null),e.setInputConnection(null),t.image=null,t.jsImageData=null),t.canvas=r,e.modified())},e.setImage=function(r){t.image!==r&&(null!==r&&(e.setInputData(null),e.setInputConnection(null),t.canvas=null,t.jsImageData=null),t.image=r,t.imageLoaded=!1,r.complete?e.imageLoaded():r.addEventListener("load",e.imageLoaded),e.modified())},e.getDimensionality=function(){var r=0,n=0,a=1;if(e.getInputData()){var o=e.getInputData();r=o.getDimensions()[0],n=o.getDimensions()[1],a=o.getDimensions()[2]}return t.jsImageData&&(r=t.jsImageData.width,n=t.jsImageData.height),t.canvas&&(r=t.canvas.width,n=t.canvas.height),t.image&&(r=t.image.width,n=t.image.height),(r>1)+(n>1)+(a>1)},e.getInputAsJsImageData=function(){if(!t.imageLoaded||e.getInputData())return null;if(t.jsImageData)return t.jsImageData();if(t.canvas)return t.canvas.getContext("2d").getImageData(0,0,t.canvas.width,t.canvas.height);if(t.image){var r=document.createElement("canvas");r.width=t.image.width,r.height=t.image.height;var n=r.getContext("2d");return n.translate(0,r.height),n.scale(1,-1),n.drawImage(t.image,0,0,t.image.width,t.image.height),n.getImageData(0,0,r.width,r.height)}return null}}(e,t)}var ic={generateMipmaps:function(e,t,r,n){for(var a=[1,2,1],o=e.length/(t*r),i=t,l=r,u=e,s=[u],c=0;c<n;c++){var f=$e(u);i/=2,u=new Uint8ClampedArray(i*(l/=2)*o);for(var d=o*i,p=0,g=0;g<u.length;g+=o){g%d===0&&(p+=2*o*i);for(var m=0;m<o;m++){var v=f[p+m];v+=f[p+o+m],v+=f[p-2*d+m],v+=f[p-2*d+o+m],v/=4,u[g+m]=v}p+=2*o}for(var h=$e(u),y=0;y<u.length;y+=o)for(var b=0;b<o;b++){for(var T=-(a.length-1)/2,x=4,S=0,w=0;w<a.length;w++){var C=y+b+T*o,P=C%d-(y+b)%d;P>o&&(C+=d),P<-o&&(C-=d),h[C]?S+=h[C]*a[w]:x-=a[w],T+=1}u[y+b]=S/x}h=$e(u);for(var O=0;O<u.length;O+=o)for(var A=0;A<o;A++){for(var E=-(a.length-1)/2,I=4,R=0,M=0;M<a.length;M++){var D=O+A+E*d;h[D]?R+=h[D]*a[M]:I-=a[M],E+=1}u[O+A]=R/I}s.push(u)}return s}},lc=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nc(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({newInstance:er.newInstance(oc,"vtkTexture"),extend:oc},ic);function uc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uc(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var cc=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],fc=[[8,7,11,3],[9,1,10,5],[4,9,0,8],[2,11,6,10],[0,3,2,1],[4,5,6,7]],dc=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[3,7],[2,6]],pc=[0,1,0,1,0,1,0,1,2,2,2,2],gc=[[1,2],[1,2],[0,2],[0,2],[0,1],[0,1]],mc=new Float64Array(3),vc=new Float64Array(3),hc=new Float64Array(3),yc=new Float64Array(3),bc=new Float64Array(3),Tc=new Float64Array(3),xc=new Float64Array(16);function Sc(e,t){e.strokeStyle=t.strokeColor,e.lineWidth=t.strokeSize,e.fillStyle=t.fontColor,e.font="".concat(t.fontStyle," ").concat(t.fontSize,"px ").concat(t.fontFamily)}var wc=er.newInstance((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{renderable:null};Object.assign(t,{},r),er.obj(e,t),t.tmPolyData=rc.newInstance(),t.tmMapper=as.newInstance(),t.tmMapper.setInputData(t.tmPolyData),t.tmActor=hl.newInstance({parentProp:e}),t.tmActor.setMapper(t.tmMapper),er.setGet(e,t,["renderable"]),er.get(e,t,["lastSize","lastAspectRatio","axisTextStyle","tickTextStyle","tmActor","ticks"]),t.forceUpdate=!1,t.lastRedrawTime={},er.obj(t.lastRedrawTime,{mtime:0}),t.lastRebuildTime={},er.obj(t.lastRebuildTime,{mtime:0}),t.lastSize=[-1,-1],t.lastTickBounds=[],function(e,t){t.classHierarchy.push("vtkCubeAxesActorHelper"),e.setRenderable=function(r){t.renderable!==r&&(t.renderable=r,t.tmActor.addTexture(t.renderable.getTmTexture()),t.tmActor.setProperty(r.getProperty()),t.tmActor.setParentProp(r),e.modified())},e.createPolyDataForOneLabel=function(e,r,n,a,o,i,l){var u=t.renderable.get_tmAtlas().get(e);if(u){var s=t.renderable.getTextPolyData().getPoints().getData(),c=t.lastSize;mc[0]=s[3*r],mc[1]=s[3*r+1],mc[2]=s[3*r+2],tn(hc,mc,n),hc[0]+=.1,tn(vc,hc,a),kr(bc,vc,mc),hc[0]-=.1,hc[1]+=.1,tn(vc,hc,a),kr(Tc,vc,mc);for(var f=0;f<3;f++)bc[f]/=.05*c[0],Tc[f]/=.05*c[1];var d=l.ptIdx,p=l.cellIdx;mc[0]=s[3*r],mc[1]=s[3*r+1],mc[2]=s[3*r+2],o[0]<-.5?Gr(hc,bc,o[0]*i-u.width):o[0]>.5?Gr(hc,bc,o[0]*i):Gr(hc,bc,o[0]*i-u.width/2),Dr(mc,mc,hc),Gr(hc,Tc,o[1]*i-u.height/2),Dr(mc,mc,hc),l.points[3*d]=mc[0],l.points[3*d+1]=mc[1],l.points[3*d+2]=mc[2],l.tcoords[2*d]=u.tcoords[0],l.tcoords[2*d+1]=u.tcoords[1],d++,Gr(hc,bc,u.width),Dr(mc,mc,hc),l.points[3*d]=mc[0],l.points[3*d+1]=mc[1],l.points[3*d+2]=mc[2],l.tcoords[2*d]=u.tcoords[2],l.tcoords[2*d+1]=u.tcoords[3],d++,Gr(hc,Tc,u.height),Dr(mc,mc,hc),l.points[3*d]=mc[0],l.points[3*d+1]=mc[1],l.points[3*d+2]=mc[2],l.tcoords[2*d]=u.tcoords[4],l.tcoords[2*d+1]=u.tcoords[5],d++,Gr(hc,bc,u.width),kr(mc,mc,hc),l.points[3*d]=mc[0],l.points[3*d+1]=mc[1],l.points[3*d+2]=mc[2],l.tcoords[2*d]=u.tcoords[6],l.tcoords[2*d+1]=u.tcoords[7],d++,l.polys[4*p]=3,l.polys[4*p+1]=d-4,l.polys[4*p+2]=d-3,l.polys[4*p+3]=d-2,p++,l.polys[4*p]=3,l.polys[4*p+1]=d-4,l.polys[4*p+2]=d-2,l.polys[4*p+3]=d-1,l.ptIdx+=4,l.cellIdx+=2}},e.updateTexturePolyData=function(){var r=t.camera.getCompositeProjectionMatrix(t.lastAspectRatio,-1,1);w(r,r);var n=t.renderable.getTextValues().length,a=4*n,o=2*n,i=new Float64Array(3*a),l=new Uint16Array(4*o),u=new Float32Array(2*a);C(xc,r);for(var s={ptIdx:0,cellIdx:0,polys:l,points:i,tcoords:u},c=0,f=0,d=0,p=t.renderable.getTextPolyData().getPoints().getData(),g=t.renderable.getTextValues();c<p.length/3;){mc[0]=p[3*c],mc[1]=p[3*c+1],mc[2]=p[3*c+2],tn(hc,mc,r),mc[0]=p[3*c+3],mc[1]=p[3*c+4],mc[2]=p[3*c+5],tn(yc,mc,r),kr(hc,hc,yc);var m=[hc[0],hc[1]];Co(m),e.createPolyDataForOneLabel(g[f],c,r,xc,m,t.renderable.getAxisTitlePixelOffset(),s),c+=2,f++;for(var v=0;v<t.renderable.getTickCounts()[d];v++)e.createPolyDataForOneLabel(g[f],c,r,xc,m,t.renderable.getTickLabelPixelOffset(),s),c++,f++;d++}var h=Dl.newInstance({numberOfComponents:2,values:u,name:"TextureCoordinates"});t.tmPolyData.getPointData().setTCoords(h),t.tmPolyData.getPoints().setData(i,3),t.tmPolyData.getPoints().modified(),t.tmPolyData.getPolys().setData(l,1),t.tmPolyData.getPolys().modified(),t.tmPolyData.modified()},e.updateAPISpecificData=function(r,n,a){t.lastSize[0]===r[0]&&t.lastSize[1]===r[1]||(t.lastSize[0]=r[0],t.lastSize[1]=r[1],t.lastAspectRatio=r[0]/r[1],t.forceUpdate=!0),t.camera=n,e.updateTexturePolyData()}}(e,t)}),"vtkCubeAxesActorHelper");function Cc(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,function(e){return sc({boundsScaleFactor:1.3,camera:null,dataBounds:$e(Vi.INIT_BOUNDS),faceVisibilityAngle:8,gridLines:!0,axisLabels:null,axisTitlePixelOffset:35,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:12,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"}},e)}(r)),hl.extend(e,t,r),t.lastFacesToDraw=[!1,!1,!1,!1,!1,!1],t.axisLabels=["X-Axis","Y-Axis","Z-Axis"],t.tickCounts=[],t.textValues=[],t.lastTickBounds=[],t.tmCanvas=document.createElement("canvas"),t.tmContext=t.tmCanvas.getContext("2d"),t._tmAtlas=new Map,t.tmTexture=lc.newInstance(),t.tmTexture.setInterpolate(!1),e.getProperty().setDiffuse(0),e.getProperty().setAmbient(1),t.gridMapper=as.newInstance(),t.polyData=rc.newInstance(),t.gridMapper.setInputData(t.polyData),t.gridActor=hl.newInstance(),t.gridActor.setMapper(t.gridMapper),t.gridActor.setProperty(e.getProperty()),t.gridActor.setParentProp(e),t.textPolyData=rc.newInstance(),er.setGet(e,t,["axisTitlePixelOffset","boundsScaleFactor","faceVisibilityAngle","gridLines","tickLabelPixelOffset"]),er.setGetArray(e,t,["dataBounds"],6),er.setGetArray(e,t,["axisLabels"],3),er.get(e,t,["axisTextStyle","tickTextStyle","camera","tmTexture","textValues","textPolyData","tickCounts","gridActor"]),function(e,t){t.classHierarchy.push("vtkCubeAxesActor"),e.setCamera=function(r){t.camera!==r&&(t.cameraModifiedSub&&(t.cameraModifiedSub.unsubscribe(),t.cameraModifiedSub=null),t.camera=r,r&&(t.cameraModifiedSub=r.onModified(e.update)),e.update(),e.modified())},e.computeFacesToDraw=function(){var e=t.camera.getViewMatrix();w(e,e);for(var r=!1,n=Vi.getDiagonalLength(t.dataBounds),a=Math.sin(t.faceVisibilityAngle*Math.PI/180),o=0;o<6;o++){var i=!1,l=Math.floor(o/2),u=(l+1)%3,s=(l+2)%3;t.dataBounds[2*u]!==t.dataBounds[2*u+1]&&t.dataBounds[2*s]!==t.dataBounds[2*s+1]&&(mc[l]=t.dataBounds[o]-.1*n*cc[o][l],mc[u]=.5*(t.dataBounds[2*u]+t.dataBounds[2*u+1]),mc[s]=.5*(t.dataBounds[2*s]+t.dataBounds[2*s+1]),tn(hc,mc,e),mc[l]=t.dataBounds[o],tn(yc,mc,e),kr(hc,yc,hc),qr(hc,hc),i=hc[2]>a,t.camera.getParallelProjection()||(qr(yc,yc),i=Yr(yc,hc)>a)),i!==t.lastFacesToDraw[o]&&(t.lastFacesToDraw[o]=i,r=!0)}return r},e.updatePolyData=function(e,r,n){var a=0,o=0;a+=8;for(var i=0,l=0;l<12;l++)r[l]>0&&i++;if(o+=i,t.gridLines)for(var u=0;u<6;u++)e[u]&&(a+=2*n[gc[u][0]].length+2*n[gc[u][1]].length,o+=n[gc[u][0]].length+n[gc[u][1]].length);for(var s=new Float64Array(3*a),c=new Uint32Array(3*o),f=0,d=0,p=0;p<2;p++)for(var g=0;g<2;g++)for(var m=0;m<2;m++)s[3*f]=t.dataBounds[m],s[3*f+1]=t.dataBounds[2+g],s[3*f+2]=t.dataBounds[4+p],f++;for(var v=0;v<12;v++)r[v]>0&&(c[3*d]=2,c[3*d+1]=dc[v][0],c[3*d+2]=dc[v][1],d++);if(t.gridLines)for(var h=0;h<6;h++)if(e[h]){for(var y=Math.floor(h/2),b=n[gc[h][0]],T=0;T<b.length;T++)s[3*f+y]=t.dataBounds[h],s[3*f+gc[h][0]]=b[T],s[3*f+gc[h][1]]=t.dataBounds[2*gc[h][1]],s[3*++f+y]=t.dataBounds[h],s[3*f+gc[h][0]]=b[T],s[3*f+gc[h][1]]=t.dataBounds[2*gc[h][1]+1],f++,c[3*d]=2,c[3*d+1]=f-2,c[3*d+2]=f-1,d++;b=n[gc[h][1]];for(var x=0;x<b.length;x++)s[3*f+y]=t.dataBounds[h],s[3*f+gc[h][1]]=b[x],s[3*f+gc[h][0]]=t.dataBounds[2*gc[h][0]],s[3*++f+y]=t.dataBounds[h],s[3*f+gc[h][1]]=b[x],s[3*f+gc[h][0]]=t.dataBounds[2*gc[h][0]+1],f++,c[3*d]=2,c[3*d+1]=f-2,c[3*d+2]=f-1,d++}t.polyData.getPoints().setData(s,3),t.polyData.getPoints().modified(),t.polyData.getLines().setData(c,1),t.polyData.getLines().modified(),t.polyData.modified()},e.updateTextData=function(e,r,n,a){for(var o=0,i=0;i<12;i++)1===r[i]&&(o+=2,o+=n[pc[i]].length);for(var l=t.polyData.getPoints().getData(),u=new Float64Array(3*o),s=0,c=0,f=0,d=0;d<6;d++)if(e[d])for(var p=0;p<4;p++){var g=fc[d][p];if(1===r[g]){var m=pc[g],v=3*dc[g][0],h=3*dc[g][1];u[3*s]=.5*(l[v]+l[h]),u[3*s+1]=.5*(l[v+1]+l[h+1]),u[3*s+2]=.5*(l[v+2]+l[h+2]),u[3*++s+Math.floor(d/2)]=t.dataBounds[d],u[3*s+gc[d][0]]=.5*(t.dataBounds[2*gc[d][0]]+t.dataBounds[2*gc[d][0]+1]),u[3*s+gc[d][1]]=.5*(t.dataBounds[2*gc[d][1]]+t.dataBounds[2*gc[d][1]+1]),s++,t.textValues[c]=t.axisLabels[m],c++;var y=(m+1)%3,b=(m+2)%3,T=n[m],x=a[m];t.tickCounts[f]=T.length;for(var S=0;S<T.length;S++)u[3*s+m]=T[S],u[3*s+y]=l[v+y],u[3*s+b]=l[v+b],s++,t.textValues[c]=x[S],c++;f++}}t.textPolyData.getPoints().setData(u,3),t.textPolyData.modified()},e.update=function(){if(t.camera){for(var r=e.computeFacesToDraw(),n=t.lastFacesToDraw,a=!1,o=0;o<6;o++)t.dataBounds[o]!==t.lastTickBounds[o]&&(a=!0,t.lastTickBounds[o]=t.dataBounds[o]);if(r||a||t.forceUpdate){for(var i=new Array(12).fill(0),l=0;l<6;l++)if(n[l])for(var u=0;u<4;u++)i[fc[l][u]]++;for(var s=[],c=[],f=0;f<3;f++){var d=to().domain([t.dataBounds[2*f],t.dataBounds[2*f+1]]);s[f]=d.ticks(5);var p=d.tickFormat(5);c[f]=s[f].map(p)}e.updatePolyData(n,i,s),e.updateTextData(n,i,s,c),(a||t.forceUpdate)&&e.updateTextureAtlas(c)}t.forceUpdate=!1}},e.updateTextureAtlas=function(e){t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left",t._tmAtlas.clear();for(var r=0,n=1,a=0;a<3;a++){if(!t._tmAtlas.has(t.axisLabels[a])){Sc(t.tmContext,t.axisTextStyle);var o=t.tmContext.measureText(t.axisLabels[a]),i={height:o.actualBoundingBoxAscent+2,startingHeight:n,width:o.width+2,textStyle:t.axisTextStyle};t._tmAtlas.set(t.axisLabels[a],i),n+=i.height,r<i.width&&(r=i.width)}Sc(t.tmContext,t.tickTextStyle);for(var l=0;l<e[a].length;l++)if(!t._tmAtlas.has(e[a][l])){var u=t.tmContext.measureText(e[a][l]),s={height:u.actualBoundingBoxAscent+2,startingHeight:n,width:u.width+2,textStyle:t.tickTextStyle};t._tmAtlas.set(e[a][l],s),n+=s.height,r<s.width&&(r=s.width)}}r=po(r),n=po(n),t._tmAtlas.forEach((function(e){e.tcoords=[0,(n-e.startingHeight-e.height)/n,e.width/r,(n-e.startingHeight-e.height)/n,e.width/r,(n-e.startingHeight)/n,0,(n-e.startingHeight)/n]})),t.tmCanvas.width=r,t.tmCanvas.height=n,t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left",t.tmContext.clearRect(0,0,r,n),t._tmAtlas.forEach((function(e,r){Sc(t.tmContext,e.textStyle),t.tmContext.fillText(r,1,e.startingHeight+e.height-1)})),t.tmTexture.setCanvas(t.tmCanvas),t.tmTexture.modified()},e.onModified((function(){t.forceUpdate=!0,e.update()})),e.setTickTextStyle=function(r){t.tickTextStyle=sc(sc({},t.tickTextStyle),r),e.modified()},e.setAxisTextStyle=function(r){t.axisTextStyle=sc(sc({},t.axisTextStyle),r),e.modified()},e.get_tmAtlas=function(){return t._tmAtlas},e.getBounds=function(){return e.update(),Vi.setBounds(t.bounds,t.gridActor.getBounds()),Vi.scaleAboutCenter(t.bounds,t.boundsScaleFactor,t.boundsScaleFactor,t.boundsScaleFactor),t.bounds};var r=er.chain(e.setProperty,t.gridActor.setProperty);e.setProperty=function(e){return r(e)[0]}}(e,t)}var Pc={newInstance:er.newInstance(Cc,"vtkCubeAxesActor"),extend:Cc,newCubeAxesActorHelper:wc};var Oc={};function Ac(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Oc,r),ar.extend(e,t,r),t.CubeAxesActorHelper=Pc.newCubeAxesActorHelper(),function(e,t){t.classHierarchy.push("vtkOpenGLCubeAxesActor"),e.buildPass=function(r){r&&(t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent(),t.CubeAxesActorHelper.getRenderable()||t.CubeAxesActorHelper.setRenderable(t.renderable),e.prepareNodes(),e.addMissingNode(t.CubeAxesActorHelper.getTmActor()),e.addMissingNode(t.renderable.getGridActor()),e.removeUnusedNodes())},e.opaquePass=function(e,r){if(e){var n=t._openGLRenderer?t._openGLRenderer.getRenderable().getActiveCamera():null,a=t._openGLRenderer.getTiledSizeAndOrigin();t.CubeAxesActorHelper.updateAPISpecificData([a.usize,a.vsize],n,t._openGLRenderWindow.getRenderable())}}}(e,t)}var Ec=Yt(Ac,"vtkOpenGLCubeAxesActor");sr("vtkCubeAxesActor",Ec);var Ic={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2},Rc={ObjectType:Ic};function Mc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mc(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var kc=Rc.ObjectType;var _c={objectType:kc.ARRAY_BUFFER,context:null};function Lc(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,_c,r),er.obj(e,t),er.get(e,t,["_openGLRenderWindow"]),er.moveToProtected(e,t,["openGLRenderWindow"]),function(e,t){function r(e){switch(e){case kc.ELEMENT_ARRAY_BUFFER:return t.context.ELEMENT_ARRAY_BUFFER;case kc.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in t.context)return t.context.TEXTURE_BUFFER;case kc.ARRAY_BUFFER:default:return t.context.ARRAY_BUFFER}}t.classHierarchy.push("vtkOpenGLBufferObject");var n=null,a=null,o=!0,i="";e.getType=function(){return n},e.setType=function(e){n=e},e.getHandle=function(){return a},e.isReady=function(){return!1===o},e.generateBuffer=function(e){var o=r(e);return null===a&&(a=t.context.createBuffer(),n=e),r(n)===o},e.upload=function(l,u){return e.generateBuffer(u)?(t.context.bindBuffer(r(n),a),t.context.bufferData(r(n),l,t.context.STATIC_DRAW),o=!1,!0):(i="Trying to upload array buffer to incompatible buffer.",!1)},e.bind=function(){return!!a&&(t.context.bindBuffer(r(n),a),!0)},e.release=function(){return!!a&&(t.context.bindBuffer(r(n),null),!0)},e.releaseGraphicsResources=function(){null!==a&&(t.context.bindBuffer(r(n),null),t.context.deleteBuffer(a),a=null)},e.setOpenGLRenderWindow=function(r){t._openGLRenderWindow!==r&&(e.releaseGraphicsResources(),t._openGLRenderWindow=r,t.context=null,r&&(t.context=t._openGLRenderWindow.getContext()))},e.getError=function(){return i}}(e,t)}var Bc=Dc(Dc({newInstance:er.newInstance(Lc),extend:Lc},{}),Rc),Vc=er.vtkErrorMacro;function Nc(e,t){t.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),e.setType(Ic.ARRAY_BUFFER),e.createVBO=function(r,n,a,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(!r.getData()||!r.getData().length)return t.elementCount=0,0;t.blockSize=3,t.vertexOffset=0,t.normalOffset=0,t.tCoordOffset=0,t.tCoordComponents=0,t.colorComponents=0,t.colorOffset=0,t.customData=[];var l=o.points.getData(),u=null,s=null,c=null,f=o.colors?o.colors.getNumberOfComponents():0,d=o.tcoords?o.tcoords.getNumberOfComponents():0;o.normals&&(t.normalOffset=4*t.blockSize,t.blockSize+=3,u=o.normals.getData()),o.customAttributes&&o.customAttributes.forEach((function(e){e&&(t.customData.push({data:e.getData(),offset:4*t.blockSize,components:e.getNumberOfComponents(),name:e.getName()}),t.blockSize+=e.getNumberOfComponents())})),o.tcoords&&(t.tCoordOffset=4*t.blockSize,t.tCoordComponents=d,t.blockSize+=d,s=o.tcoords.getData()),o.colors?(t.colorComponents=o.colors.getNumberOfComponents(),t.colorOffset=0,c=o.colors.getData(),t.colorBO||(t.colorBO=Bc.newInstance()),t.colorBO.setOpenGLRenderWindow(t._openGLRenderWindow)):t.colorBO=null,t.stride=4*t.blockSize;var p,g=0,m=0,v=0,h=0,y=0,b=0,T={anythingToPoints:function(e,t,r){for(var n=0;n<e;++n)p(t[r+n])},linesToWireframe:function(e,t,r){for(var n=0;n<e-1;++n)p(t[r+n]),p(t[r+n+1])},polysToWireframe:function(e,t,r){if(e>2)for(var n=0;n<e;++n)p(t[r+n]),p(t[r+(n+1)%e])},stripsToWireframe:function(e,t,r){if(e>2){for(var n=0;n<e-1;++n)p(t[r+n]),p(t[r+n+1]);for(var a=0;a<e-2;a++)p(t[r+a]),p(t[r+a+2])}},polysToSurface:function(e,t,r){for(var n=0;n<e-2;n++)p(t[r+0]),p(t[r+n+1]),p(t[r+n+2])},stripsToSurface:function(e,t,r){for(var n=0;n<e-2;n++)p(t[r+n]),p(t[r+n+1+n%2]),p(t[r+n+1+(n+1)%2])}},x={anythingToPoints:function(e,t){return e},linesToWireframe:function(e,t){return e>1?2*(e-1):0},polysToWireframe:function(e,t){return e>2?2*e:0},stripsToWireframe:function(e,t){return e>2?4*e-6:0},polysToSurface:function(e,t){return e>2?3*(e-2):0},stripsToSurface:function(e,t,r){return e>2?3*(e-2):0}},S=null,w=null;a===nl.POINTS||"verts"===n?(S=T.anythingToPoints,w=x.anythingToPoints):a===nl.WIREFRAME||"lines"===n?(S=T["".concat(n,"ToWireframe")],w=x["".concat(n,"ToWireframe")]):(S=T["".concat(n,"ToSurface")],w=x["".concat(n,"ToSurface")]);for(var C=r.getData(),P=C.length,O=0,A=0;A<P;)O+=w(C[A],C),A+=C[A]+1;var E=null,I=new Float32Array(O*t.blockSize);c&&(E=new Uint8Array(4*O));for(var R=0,M=0,D=0,k=0,_=0;_<3;++_){var L=o.points.getRange(_),B=L[1]-L[0];D+=B*B;var V=.5*(L[1]+L[0]);k+=V*V}if(D>0&&(Math.abs(k)/D>1e6||Math.abs(Math.log10(D))>3||0===D&&k>1e6)){for(var N=new Float64Array(3),F=new Float64Array(3),U=0;U<3;++U){var G=o.points.getRange(U),j=G[1]-G[0];N[U]=.5*(G[1]+G[0]),F[U]=j>0?1/j:1}e.setCoordShiftAndScale(N,F)}else!0===t.coordShiftAndScaleEnabled&&e.setCoordShiftAndScale(null,null);if(i)if(i.points||i.cells){var z=new Int32Array(O+i.points.length);z.set(i.points),i.points=z;var W=new Int32Array(O+i.cells.length);W.set(i.cells),i.cells=W}else i.points=new Int32Array(O),i.cells=new Int32Array(O);var H=o.vertexOffset;p=function(e){if(i&&(i.points[H]=e,i.cells[H]=b+o.cellOffset),++H,g=3*e,t.coordShiftAndScaleEnabled?(I[R++]=(l[g++]-t.coordShift[0])*t.coordScale[0],I[R++]=(l[g++]-t.coordShift[1])*t.coordScale[1],I[R++]=(l[g++]-t.coordShift[2])*t.coordScale[2]):(I[R++]=l[g++],I[R++]=l[g++],I[R++]=l[g++]),null!==u&&(m=o.haveCellNormals?3*(b+o.cellOffset):3*e,I[R++]=u[m++],I[R++]=u[m++],I[R++]=u[m++]),t.customData.forEach((function(t){y=e*t.components;for(var r=0;r<t.components;++r)I[R++]=t.data[y++]})),null!==s){v=e*d;for(var r=0;r<d;++r)I[R++]=s[v++]}null!==c&&(h=o.haveCellScalars?(b+o.cellOffset)*f:e*f,E[M++]=c[h++],E[M++]=c[h++],E[M++]=c[h++],E[M++]=4===f?c[h++]:255)};for(var K=0;K<P;)S(C[K],C,K+1),K+=C[K]+1,b++;return t.elementCount=O,e.upload(I,Ic.ARRAY_BUFFER),t.colorBO&&(t.colorBOStride=4,t.colorBO.upload(E,Ic.ARRAY_BUFFER)),b},e.setCoordShiftAndScale=function(e,r){null===e||e.constructor===Float64Array&&3===e.length?null===r||r.constructor===Float64Array&&3===r.length?(null!==t.coordShift&&null!==e&&dn(e,t.coordShift)||(t.coordShift=e),null!==t.coordScale&&null!==r&&dn(r,t.coordScale)||(t.coordScale=r),t.coordShiftAndScaleEnabled=function(e,t){return null!==e&&null!==t&&!(fn(e,[0,0,0])&&fn(t,[1,1,1]))}(t.coordShift,t.coordScale),t.coordShiftAndScaleEnabled?t.inverseShiftAndScaleMatrix=function(e,t){var r=new Float64Array(3);Xr(r,t);var n=new Float64Array(16);return H(n,Fi(),e,r),n}(t.coordShift,t.coordScale):t.inverseShiftAndScaleMatrix=null):Vc("Wrong type for coordScale, expected vec3 or null"):Vc("Wrong type for coordShift, expected vec3 or null")}}var Fc={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[],coordShift:null,coordScale:null,coordShiftAndScaleEnabled:!1,inverseShiftAndScaleMatrix:null};function Uc(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Fc,r),Bc.extend(e,t,r),er.setGet(e,t,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),er.get(e,t,["coordShift","coordScale","coordShiftAndScaleEnabled","inverseShiftAndScaleMatrix"]),Nc(e,t)}var Gc={newInstance:er.newInstance(Uc),extend:Uc},jc=er.vtkErrorMacro;var zc={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function Wc(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zc,r),er.obj(e,t),er.setGet(e,t,["shaderType","source","error","handle","context"]),function(e,t){t.classHierarchy.push("vtkShader"),e.compile=function(){var e=t.context.VERTEX_SHADER;if(!t.source||!t.source.length||"Unknown"===t.shaderType)return!1;if(0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0),e="Fragment"===t.shaderType?t.context.FRAGMENT_SHADER:t.context.VERTEX_SHADER,t.handle=t.context.createShader(e),t.context.shaderSource(t.handle,t.source),t.context.compileShader(t.handle),!t.context.getShaderParameter(t.handle,t.context.COMPILE_STATUS)){var r=t.context.getShaderInfoLog(t.handle);return jc("Error compiling shader '".concat(t.source,"': ").concat(r)),t.context.deleteShader(t.handle),t.handle=0,!1}return!0},e.cleanup=function(){"Unknown"!==t.shaderType&&0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0,t.dirty=!0)}}(e,t)}var Hc={newInstance:er.newInstance(Wc,"vtkShader"),extend:Wc},Kc=er.vtkErrorMacro;var Xc={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function qc(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Xc,r),t.attributesLocs={},t.uniformLocs={},t.vertexShader=Hc.newInstance(),t.vertexShader.setShaderType("Vertex"),t.fragmentShader=Hc.newInstance(),t.fragmentShader.setShaderType("Fragment"),t.geometryShader=Hc.newInstance(),t.geometryShader.setShaderType("Geometry"),er.obj(e,t),er.get(e,t,["lastCameraMTime"]),er.setGet(e,t,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),function(e,t){t.classHierarchy.push("vtkShaderProgram"),e.compileShader=function(){return t.vertexShader.compile()?t.fragmentShader.compile()?e.attachShader(t.vertexShader)&&e.attachShader(t.fragmentShader)?e.link()?(e.setCompiled(!0),1):(Kc("Links failed: ".concat(t.error)),0):(Kc(t.error),0):(Kc(t.fragmentShader.getSource().split("\n").map((function(e,t){return"".concat(t,": ").concat(e)})).join("\n")),Kc(t.fragmentShader.getError()),0):(Kc(t.vertexShader.getSource().split("\n").map((function(e,t){return"".concat(t,": ").concat(e)})).join("\n")),Kc(t.vertexShader.getError()),0)},e.cleanup=function(){"Unknown"!==t.shaderType&&0!==t.handle&&(t.context.deleteShader(t.handle),t.handle=0)},e.bind=function(){return!(!t.linked&&!e.link())&&(t.context.useProgram(t.handle),e.setBound(!0),!0)},e.isBound=function(){return!!t.bound},e.release=function(){t.context.useProgram(null),e.setBound(!1)},e.setContext=function(e){t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)},e.link=function(){if(t.linked)return!0;if(0===t.handle)return t.error="Program has not been initialized, and/or does not have shaders.",!1;if(t.uniformLocs={},t.context.linkProgram(t.handle),!t.context.getProgramParameter(t.handle,t.context.LINK_STATUS)){var r=t.context.getProgramInfoLog(t.handle);return Kc("Error linking shader ".concat(r)),t.handle=0,!1}return e.setLinked(!0),t.attributeLocs={},!0},e.setUniformMatrix=function(r,n){var a=e.findUniform(r);if(-1===a)return t.error="Could not set uniform ".concat(r," . No such uniform."),!1;var o=new Float32Array(n);return t.context.uniformMatrix4fv(a,!1,o),!0},e.setUniformMatrix3x3=function(r,n){var a=e.findUniform(r);if(-1===a)return t.error="Could not set uniform ".concat(r," . No such uniform."),!1;var o=new Float32Array(n);return t.context.uniformMatrix3fv(a,!1,o),!0},e.setUniformf=function(r,n){var a=e.findUniform(r);return-1===a?(t.error="Could not set uniform ".concat(r," . No such uniform."),!1):(t.context.uniform1f(a,n),!0)},e.setUniformfv=function(r,n){var a=e.findUniform(r);return-1===a?(t.error="Could not set uniform ".concat(r," . No such uniform."),!1):(t.context.uniform1fv(a,n),!0)},e.setUniformi=function(r,n){var a=e.findUniform(r);return-1===a?(t.error="Could not set uniform ".concat(r," . No such uniform."),!1):(t.context.uniform1i(a,n),!0)},e.setUniformiv=function(r,n){var a=e.findUniform(r);return-1===a?(t.error="Could not set uniform ".concat(r," . No such uniform."),!1):(t.context.uniform1iv(a,n),!0)},e.setUniform2f=function(r,n,a){var o=e.findUniform(r);if(-1===o)return t.error="Could not set uniform ".concat(r," . No such uniform."),!1;if(void 0===a)throw new RangeError("Invalid number of values for array");return t.context.uniform2f(o,n,a),!0},e.setUniform2fv=function(r,n){var a=e.findUniform(r);return-1===a?(t.error="Could not set uniform ".concat(r," . No such uniform."),!1):(t.context.uniform2fv(a,n),!0)},e.setUniform2i=function(r,n,a){var o=e.findUniform(r);if(-1===o)return t.error="Could not set uniform ".concat(r," . No such uniform."),!1;if(void 0===a)throw new RangeError("Invalid number of values for array");return t.context.uniform2i(o,n,a),!0},e.setUniform2iv=function(r,n){var a=e.findUniform(r);return-1===a?(t.error="Could not set uniform ".concat(r," . No such uniform."),!1):(t.context.uniform2iv(a,n),!0)},e.setUniform3f=function(r,n,a,o){var i=e.findUniform(r);if(-1===i)return t.error="Could not set uniform ".concat(r," . No such uniform."),!1;if(void 0===o)throw new RangeError("Invalid number of values for array");return t.context.uniform3f(i,n,a,o),!0},e.setUniform3fArray=function(r,n){var a=e.findUniform(r);if(-1===a)return t.error="Could not set uniform ".concat(r," . No such uniform."),!1;if(!Array.isArray(n)||3!==n.length)throw new RangeError("Invalid number of values for array");return t.context.uniform3f(a,n[0],n[1],n[2]),!0},e.setUniform3fv=function(r,n){var a=e.findUniform(r);return-1===a?(t.error="Could not set uniform ".concat(r," . No such uniform."),!1):(t.context.uniform3fv(a,n),!0)},e.setUniform3i=function(r){var n=e.findUniform(r);if(-1===n)return t.error="Could not set uniform ".concat(r," . No such uniform."),!1;for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var l=o;if(1===l.length&&Array.isArray(l[0])&&(l=l[0]),3!==l.length)throw new RangeError("Invalid number of values for array");return t.context.uniform3i(n,l[0],l[1],l[2]),!0},e.setUniform3iv=function(r,n){var a=e.findUniform(r);return-1===a?(t.error="Could not set uniform ".concat(r," . No such uniform."),!1):(t.context.uniform3iv(a,n),!0)},e.setUniform4f=function(r){var n=e.findUniform(r);if(-1===n)return t.error="Could not set uniform ".concat(r," . No such uniform."),!1;for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var l=o;if(1===l.length&&Array.isArray(l[0])&&(l=l[0]),4!==l.length)throw new RangeError("Invalid number of values for array");return t.context.uniform4f(n,l[0],l[1],l[2],l[3]),!0},e.setUniform4fv=function(r,n){var a=e.findUniform(r);return-1===a?(t.error="Could not set uniform ".concat(r," . No such uniform."),!1):(t.context.uniform4fv(a,n),!0)},e.setUniform4i=function(r){var n=e.findUniform(r);if(-1===n)return t.error="Could not set uniform ".concat(r," . No such uniform."),!1;for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];var l=o;if(1===l.length&&Array.isArray(l[0])&&(l=l[0]),4!==l.length)throw new RangeError("Invalid number of values for array");return t.context.uniform4i(n,l[0],l[1],l[2],l[3]),!0},e.setUniform4iv=function(r,n){var a=e.findUniform(r);return-1===a?(t.error="Could not set uniform ".concat(r," . No such uniform."),!1):(t.context.uniform4iv(a,n),!0)},e.findUniform=function(e){if(!e||!t.linked)return-1;var r=t.uniformLocs[e];return void 0!==r?r:null===(r=t.context.getUniformLocation(t.handle,e))?(t.error="Uniform ".concat(e," not found in current shader program."),t.uniformLocs[e]=-1,-1):(t.uniformLocs[e]=r,r)},e.isUniformUsed=function(e){if(!e)return!1;var r=t.uniformLocs[e];return void 0!==r?null!==r:t.linked?(r=t.context.getUniformLocation(t.handle,e),t.uniformLocs[e]=r,null!==r):(Kc("attempt to find uniform when the shader program is not linked"),!1)},e.isAttributeUsed=function(e){if(!e)return!1;if(e in t.attributeLocs)return!0;if(!t.linked)return Kc("attempt to find uniform when the shader program is not linked"),!1;var r=t.context.getAttribLocation(t.handle,e);return-1!==r&&(t.attributeLocs[e]=r,!0)},e.attachShader=function(r){if(0===r.getHandle())return t.error="Shader object was not initialized, cannot attach it.",!1;if("Unknown"===r.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;if(0===t.handle){var n=t.context.createProgram();if(0===n)return t.error="Could not create shader program.",!1;t.handle=n,t.linked=!1}return"Vertex"===r.getShaderType()&&(0!==t.vertexShaderHandle&&t.comntext.detachShader(t.handle,t.vertexShaderHandle),t.vertexShaderHandle=r.getHandle()),"Fragment"===r.getShaderType()&&(0!==t.fragmentShaderHandle&&t.context.detachShader(t.handle,t.fragmentShaderHandle),t.fragmentShaderHandle=r.getHandle()),t.context.attachShader(t.handle,r.getHandle()),e.setLinked(!1),!0},e.detachShader=function(e){if(0===e.getHandle())return t.error="shader object was not initialized, cannot attach it.",!1;if("Unknown"===e.getShaderType())return t.error="Shader object is of type Unknown and cannot be used.",!1;switch(0===t.handle&&(t.error="This shader program has not been initialized yet."),e.getShaderType()){case"Vertex":return t.vertexShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.vertexShaderHandle=0,t.linked=!1,!0);case"Fragment":return t.fragmentShaderHandle!==e.getHandle()?(t.error="The supplied shader was not attached to this program.",!1):(t.context.detachShader(t.handle,e.getHandle()),t.fragmentShaderHandle=0,t.linked=!1,!0);default:return!1}},e.setContext=function(e){t.context=e,t.vertexShader.setContext(e),t.fragmentShader.setContext(e),t.geometryShader.setContext(e)},e.setLastCameraMTime=function(e){t.lastCameraMTime=e}}(e,t)}var Yc={newInstance:er.newInstance(qc,"vtkShaderProgram"),extend:qc,substitute:function(e,t,r,n){var a="string"===typeof r?r:r.join("\n"),o=!1===n?t:new RegExp(t,"g"),i=e.replace(o,a);return{replace:i!==a,result:i}}};var Qc={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null};function $c(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Qc,r),t.buffers=[],er.obj(e,t),er.get(e,t,["supported"]),er.setGet(e,t,["forceEmulation"]),function(e,t){t.classHierarchy.push("vtkOpenGLVertexArrayObject"),e.exposedMethod=function(){},e.initialize=function(){t.instancingExtension=null,t._openGLRenderWindow.getWebgl2()||(t.instancingExtension=t.context.getExtension("ANGLE_instanced_arrays")),!t.forceEmulation&&t._openGLRenderWindow&&t._openGLRenderWindow.getWebgl2()?(t.extension=null,t.supported=!0,t.handleVAO=t.context.createVertexArray()):(t.extension=t.context.getExtension("OES_vertex_array_object"),!t.forceEmulation&&t.extension?(t.supported=!0,t.handleVAO=t.extension.createVertexArrayOES()):t.supported=!1)},e.isReady=function(){return 0!==t.handleVAO||!1===t.supported},e.bind=function(){if(e.isReady()||e.initialize(),e.isReady()&&t.supported)t.extension?t.extension.bindVertexArrayOES(t.handleVAO):t.context.bindVertexArray(t.handleVAO);else if(e.isReady())for(var r=t.context,n=0;n<t.buffers.length;++n){var a=t.buffers[n];t.context.bindBuffer(r.ARRAY_BUFFER,a.buffer);for(var o=0;o<a.attributes.length;++o)for(var i=a.attributes[o],l=i.isMatrix?i.size:1,u=0;u<l;++u)r.enableVertexAttribArray(i.index+u),r.vertexAttribPointer(i.index+u,i.size,i.type,i.normalize,i.stride,i.offset+i.stride*u/i.size),i.divisor>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(i.index+u,1):r.vertexAttribDivisor(i.index+u,1))}},e.release=function(){if(e.isReady()&&t.supported)t.extension?t.extension.bindVertexArrayOES(null):t.context.bindVertexArray(null);else if(e.isReady())for(var r=t.context,n=0;n<t.buffers.length;++n){var a=t.buffers[n];t.context.bindBuffer(r.ARRAY_BUFFER,a.buffer);for(var o=0;o<a.attributes.length;++o)for(var i=a.attributes[o],l=i.isMatrix?i.size:1,u=0;u<l;++u)r.enableVertexAttribArray(i.index+u),r.vertexAttribPointer(i.index+u,i.size,i.type,i.normalize,i.stride,i.offset+i.stride*u/i.size),i.divisor>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(i.index+u,0):r.vertexAttribDivisor(i.index+u,0)),r.disableVertexAttribArray(i.index+u)}},e.shaderProgramChanged=function(){e.release(),t.handleVAO&&(t.extension?t.extension.deleteVertexArrayOES(t.handleVAO):t.context.deleteVertexArray(t.handleVAO)),t.handleVAO=0,t.handleProgram=0},e.releaseGraphicsResources=function(){e.shaderProgramChanged(),t.handleVAO&&(t.extension?t.extension.deleteVertexArrayOES(t.handleVAO):t.context.deleteVertexArray(t.handleVAO)),t.handleVAO=0,t.supported=!0,t.handleProgram=0},e.addAttributeArray=function(t,r,n,a,o,i,l,u){return e.addAttributeArrayWithDivisor(t,r,n,a,o,i,l,u,0,!1)},e.addAttributeArrayWithDivisor=function(r,n,a,o,i,l,u,s,c,f){if(!r)return!1;if(!r.isBound()||0===n.getHandle()||n.getType()!==Ic.ARRAY_BUFFER)return!1;if(0===t.handleProgram&&(t.handleProgram=r.getHandle()),e.isReady()||e.initialize(),!e.isReady()||t.handleProgram!==r.getHandle())return!1;var d=t.context,p={};if(p.name=a,p.index=d.getAttribLocation(t.handleProgram,a),p.offset=o,p.stride=i,p.type=l,p.size=u,p.normalize=s,p.isMatrix=f,p.divisor=c,-1===p.Index)return!1;if(n.bind(),d.enableVertexAttribArray(p.index),d.vertexAttribPointer(p.index,p.size,p.type,p.normalize,p.stride,p.offset),c>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(p.index,1):d.vertexAttribDivisor(p.index,1)),p.buffer=n.getHandle(),!t.supported){for(var g=!1,m=0;m<t.buffers.length;++m){var v=t.buffers[m];if(v.buffer===p.buffer){g=!0;for(var h=!1,y=0;y<v.attributes.length;++y)v.attributes[y].name===a&&(h=!0,v.attributes[y]=p);h||v.attributes.push(p)}}g||t.buffers.push({buffer:p.buffer,attributes:[p]})}return!0},e.addAttributeMatrixWithDivisor=function(r,n,a,o,i,l,u,s,c){var f=e.addAttributeArrayWithDivisor(r,n,a,o,i,l,u,s,c,!0);if(!f)return f;for(var d=t.context,p=d.getAttribLocation(t.handleProgram,a),g=1;g<u;g++)d.enableVertexAttribArray(p+g),d.vertexAttribPointer(p+g,u,l,s,i,o+i*g/u),c>0&&(t.instancingExtension?t.instancingExtension.vertexAttribDivisorANGLE(p+g,1):d.vertexAttribDivisor(p+g,1));return!0},e.removeAttributeArray=function(r){if(!e.isReady()||0===t.handleProgram)return!1;if(!t.supported)for(var n=0;n<t.buffers.length;++n)for(var a=t.buffers[n],o=0;o<a.attributes.length;++o)if(a.attributes[o].name===r)return a.attributes.splice(o,1),a.attributes.length||t.buffers.splice(n,1),!0;return!0},e.setOpenGLRenderWindow=function(r){t._openGLRenderWindow!==r&&(e.releaseGraphicsResources(),t._openGLRenderWindow=r,t.context=null,r&&(t.context=t._openGLRenderWindow.getContext()))}}(e,t)}var Zc={newInstance:er.newInstance($c,"vtkOpenGLVertexArrayObject"),extend:$c},Jc={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6};var ef={context:null,program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0,pointPicking:!1};function tf(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ef,r),er.obj(e,t),t.shaderSourceTime={},er.obj(t.shaderSourceTime),t.attributeUpdateTime={},er.obj(t.attributeUpdateTime),er.setGet(e,t,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType","pointPicking"]),t.program=Yc.newInstance(),t.VAO=Zc.newInstance(),t.CABO=Gc.newInstance(),function(e,t){t.classHierarchy.push("vtkOpenGLHelper"),e.setOpenGLRenderWindow=function(e){t.context=e.getContext(),t.program.setContext(t.context),t.VAO.setOpenGLRenderWindow(e),t.CABO.setOpenGLRenderWindow(e)},e.releaseGraphicsResources=function(e){t.VAO.releaseGraphicsResources(),t.CABO.releaseGraphicsResources(),t.CABO.setElementCount(0)},e.drawArrays=function(r,n,a,o){if(t.CABO.getElementCount()){var i=e.getOpenGLMode(a),l=e.haveWideLines(r,n),u=t.context,s=u.getParameter(u.DEPTH_WRITEMASK);t.pointPicking&&u.depthMask(!1),i===u.LINES&&l?(e.updateShaders(r,n,o),u.drawArraysInstanced(i,0,t.CABO.getElementCount(),2*Math.ceil(n.getProperty().getLineWidth()))):(u.lineWidth(n.getProperty().getLineWidth()),e.updateShaders(r,n,o),u.drawArrays(i,0,t.CABO.getElementCount()),u.lineWidth(1));var c=(i===u.POINTS?1:0)||(i===u.LINES?2:3);return t.pointPicking&&u.depthMask(s),t.CABO.getElementCount()/c}return 0},e.getOpenGLMode=function(e){if(t.pointPicking)return t.context.POINTS;var r=t.primitiveType;return e===nl.POINTS||r===Jc.Points?t.context.POINTS:e===nl.WIREFRAME||r===Jc.Lines||r===Jc.TrisEdges||r===Jc.TriStripsEdges?t.context.LINES:t.context.TRIANGLES},e.haveWideLines=function(e,r){return r.getProperty().getLineWidth()>1&&!(t.CABO.getOpenGLRenderWindow()&&t.CABO.getOpenGLRenderWindow().getHardwareMaximumLineWidth()>=r.getProperty().getLineWidth())},e.getNeedToRebuildShaders=function(t,r,n){return!!(n.getNeedToRebuildShaders(e,t,r)||0===e.getProgram()||e.getShaderSourceTime().getMTime()<n.getMTime()||e.getShaderSourceTime().getMTime()<r.getMTime())},e.updateShaders=function(r,n,a){if(e.getNeedToRebuildShaders(r,n,a)){var o={Vertex:null,Fragment:null,Geometry:null};a.buildShaders(o,r,n);var i=t.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgramArray(o.Vertex,o.Fragment,o.Geometry);i!==e.getProgram()&&(e.setProgram(i),e.getVAO().releaseGraphicsResources()),e.getShaderSourceTime().modified()}else t.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgram(e.getProgram());e.getVAO().bind(),a.setMapperShaderParameters(e,r,n),a.setPropertyShaderParameters(e,r,n),a.setCameraShaderParameters(e,r,n),a.setLightingShaderParameters(e,r,n),a.invokeShaderCallbacks(e,r,n)},e.setMapperShaderParameters=function(r,n,a){if(e.haveWideLines(r,n)){e.getProgram().setUniform2f("viewportSize",a.usize,a.vsize);var o=parseFloat(n.getProperty().getLineWidth()),i=o/2;e.getProgram().setUniformf("lineWidthStepSize",o/Math.ceil(o)),e.getProgram().setUniformf("halfLineWidth",i)}t.primitiveType===Jc.Points||n.getProperty().getRepresentation()===nl.POINTS?e.getProgram().setUniformf("pointSize",n.getProperty().getPointSize()):t.pointPicking&&e.getProgram().setUniformf("pointSize",e.getPointPickingPrimitiveSize())},e.replaceShaderPositionVC=function(r,n,a){var o=r.Vertex;o=Yc.substitute(o,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform float pointSize;"]).result,o=Yc.substitute(o,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = pointSize;"],!1).result,e.getOpenGLMode(a.getProperty().getRepresentation())===t.context.LINES&&e.haveWideLines(n,a)&&(o=Yc.substitute(o,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform vec2 viewportSize;","uniform float lineWidthStepSize;","uniform float halfLineWidth;"]).result,o=Yc.substitute(o,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl"," if (halfLineWidth > 0.0)","   {","   float offset = float(gl_InstanceID / 2) * lineWidthStepSize - halfLineWidth;","   vec4 tmpPos = gl_Position;","   vec3 tmpPos2 = tmpPos.xyz / tmpPos.w;","   tmpPos2.x = tmpPos2.x + 2.0 * mod(float(gl_InstanceID), 2.0) * offset / viewportSize[0];","   tmpPos2.y = tmpPos2.y + 2.0 * mod(float(gl_InstanceID + 1), 2.0) * offset / viewportSize[1];","   gl_Position = vec4(tmpPos2.xyz * tmpPos.w, tmpPos.w);","   }"]).result),r.Vertex=o},e.getPointPickingPrimitiveSize=function(){return t.primitiveType===Jc.Points?2:t.primitiveType===Jc.Lines?4:6}}(e,t)}var rf={newInstance:er.newInstance(tf),extend:tf,primTypes:Jc},nf={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5},af={Wrap:{CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},Filter:nf},of=new Float32Array(1),lf=new Int32Array(of.buffer);var uf={fromHalf:function(e){var t=(32768&e)>>15,r=(31744&e)>>10,n=1023&e;return 0===r?(t?-1:1)*Math.pow(2,-14)*(n/Math.pow(2,10)):31===r?n?NaN:1/0*(t?-1:1):(t?-1:1)*Math.pow(2,r-15)*(1+n/Math.pow(2,10))},toHalf:function(e){of[0]=e;var t=lf[0],r=t>>16&32768,n=t>>12&2047,a=t>>23&255;return a<103?r:a>142?(r|=31744,r|=(255===a?0:1)&&8388607&t):a<113?r|=((n|=2048)>>114-a)+(n>>113-a&1):(r|=a-112<<10|n>>1,r+=1&n)}};function sf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var cf=af.Wrap,ff=af.Filter,df=Dl.VtkDataTypes,pf=Pt,gf=Ot,mf=At,vf=uf.toHalf;function hf(e,t){function r(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=[],o=t.width*t.height*t.components;if(n&&(o*=t.depth),e!==df.FLOAT&&t.openGLDataType===t.context.FLOAT)for(var i=0;i<r.length;i++)if(r[i]){var l=r[i].length>o?r[i].subarray(0,o):r[i];a.push(new Float32Array(l))}else a.push(null);if(e!==df.UNSIGNED_CHAR&&t.openGLDataType===t.context.UNSIGNED_BYTE)for(var u=0;u<r.length;u++)if(r[u]){var s=r[u].length>o?r[u].subarray(0,o):r[u];a.push(new Uint8Array(s))}else a.push(null);var c=!1;if(t._openGLRenderWindow.getWebgl2())c=t.openGLDataType===t.context.HALF_FLOAT;else{var f=t.context.getExtension("OES_texture_half_float");c=f&&t.openGLDataType===f.HALF_FLOAT_OES}if(c)for(var d=0;d<r.length;d++)if(r[d]){for(var p=new Uint16Array(o),g=r[d],m=0;m<o;m++)p[m]=vf(g[m]);a.push(p)}else a.push(null);if(0===a.length)for(var v=0;v<r.length;v++)a.push(r[v]);return a}function n(e){if(t._openGLRenderWindow.getWebgl2())return e;var r=[],n=t.width,a=t.height,o=t.components;if(e&&(!go(n)||!go(a)))for(var i=t.context.getExtension("OES_texture_half_float"),l=po(n),u=po(a),s=l*u*t.components,c=0;c<e.length;c++)if(null!==e[c]){var f=null,d=a/u,p=n/l,g=!1;t.openGLDataType===t.context.FLOAT?f=new Float32Array(s):i&&t.openGLDataType===i.HALF_FLOAT_OES?(f=new Uint16Array(s),g=!0):f=new Uint8Array(s);for(var m=0;m<u;m++){var v=m*l*o,h=m*d,y=Math.floor(h),b=Math.ceil(h);b>=a&&(b=a-1);var T=h-y,x=1-T;y=y*n*o,b=b*n*o;for(var S=0;S<l;S++){var w=S*o,C=S*p,P=Math.floor(C),O=Math.ceil(C);O>=n&&(O=n-1);var A=C-P;P*=o,O*=o;for(var E=0;E<o;E++)f[v+w+E]=g?uf.toHalf(uf.fromHalf(e[c][y+P+E])*x*(1-A)+uf.fromHalf(e[c][y+O+E])*x*A+uf.fromHalf(e[c][b+P+E])*T*(1-A)+uf.fromHalf(e[c][b+O+E])*T*A):e[c][y+P+E]*x*(1-A)+e[c][y+O+E]*x*A+e[c][b+P+E]*T*(1-A)+e[c][b+O+E]*T*A}}r.push(f),t.width=l,t.height=u}else r.push(null);if(0===r.length)for(var I=0;I<e.length;I++)r.push(e[I]);return r}function a(e){var r;return!!t._openGLRenderWindow&&(!(t.resizable||null!==(r=t.renderable)&&void 0!==r&&r.getResizable())&&(!!t._openGLRenderWindow.getWebgl2()&&(!(t._openGLRenderWindow.getGLInformations().RENDERER.value.match(/WebKit/gi)&&navigator.platform.match(/Mac/gi)&&t.oglNorm16Ext)||e!==df.UNSIGNED_SHORT&&e!==df.SHORT)))}function o(r,n){for(var a=r.getNumberOfComponents(),o=r.getDataType(),i=r.getData(),l=new Array(a),u=new Array(a),s=0;s<a;++s){var c=qe(r.getRange(s),2),f=c[0],d=c[1];l[s]=f,u[s]=d}var p=function(e,t,r){for(var n=new Array(r),a=new Array(r),o=0;o<r;++o)n[o]=e[o],a[o]=t[o]-e[o]||1;return{scale:a,offset:n}}(l,u,a);return function(r,n,a,o){e.getOpenGLDataType(r);var i=!1;if(t._openGLRenderWindow.getWebgl2())i=t.openGLDataType===t.context.HALF_FLOAT;else{var l=t.context.getExtension("OES_texture_half_float");i=l&&t.openGLDataType===l.HALF_FLOAT_OES}var u=i&&(function(e,t){for(var r=0;r<e.length;r++){var n=e[r],a=t[r]+n;if(n<-2048||n>2048||a<-2048||a>2048)return!1}return!0}(n,a)||o);t.useHalfFloat=u}(o,p.offset,p.scale,n),t.useHalfFloat||e.getOpenGLDataType(o,!0),{numComps:a,dataType:o,data:i,scaleOffsets:p}}t.classHierarchy.push("vtkOpenGLTexture"),e.render=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(r?t._openGLRenderWindow=r:(t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent()),t.context=t._openGLRenderWindow.getContext(),t.renderable.getInterpolate()?(t.generateMipmap?e.setMinificationFilter(ff.LINEAR_MIPMAP_LINEAR):e.setMinificationFilter(ff.LINEAR),e.setMagnificationFilter(ff.LINEAR)):(e.setMinificationFilter(ff.NEAREST),e.setMagnificationFilter(ff.NEAREST)),t.renderable.getRepeat()&&(e.setWrapR(cf.REPEAT),e.setWrapS(cf.REPEAT),e.setWrapT(cf.REPEAT)),t.renderable.getInputData()&&t.renderable.setImage(null),!t.handle||t.renderable.getMTime()>t.textureBuildTime.getMTime()){if(null!==t.renderable.getImage()&&(t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(ff.LINEAR_MIPMAP_LINEAR)),t.renderable.getImage()&&t.renderable.getImageLoaded()&&(e.create2DFromImage(t.renderable.getImage()),e.activate(),e.sendParameters(),t.textureBuildTime.modified())),null!==t.renderable.getCanvas()){t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(ff.LINEAR_MIPMAP_LINEAR));var n=t.renderable.getCanvas();e.create2DFromRaw(n.width,n.height,4,df.UNSIGNED_CHAR,n,!0),e.activate(),e.sendParameters(),t.textureBuildTime.modified()}if(null!==t.renderable.getJsImageData()){var a=t.renderable.getJsImageData();t.renderable.getInterpolate()&&(t.generateMipmap=!0,e.setMinificationFilter(ff.LINEAR_MIPMAP_LINEAR)),e.create2DFromRaw(a.width,a.height,4,df.UNSIGNED_CHAR,a.data,!0),e.activate(),e.sendParameters(),t.textureBuildTime.modified()}var o=t.renderable.getInputData(0);if(o&&o.getPointData().getScalars()){for(var i=o.getExtent(),l=o.getPointData().getScalars(),u=[],s=0;s<t.renderable.getNumberOfInputPorts();++s){var c=t.renderable.getInputData(s),f=c?c.getPointData().getScalars().getData():null;f&&u.push(f)}t.renderable.getInterpolate()&&4===l.getNumberOfComponents()&&(t.generateMipmap=!0,e.setMinificationFilter(ff.LINEAR_MIPMAP_LINEAR)),u.length%6===0?e.createCubeFromRaw(i[1]-i[0]+1,i[3]-i[2]+1,l.getNumberOfComponents(),l.getDataType(),u):e.create2DFromRaw(i[1]-i[0]+1,i[3]-i[2]+1,l.getNumberOfComponents(),l.getDataType(),l.getData()),e.activate(),e.sendParameters(),t.textureBuildTime.modified()}}t.handle&&e.activate()},e.destroyTexture=function(){e.deactivate(),t.context&&t.handle&&t.context.deleteTexture(t.handle),t.handle=0,t.numberOfDimensions=0,t.target=0,t.components=0,t.width=0,t.height=0,t.depth=0,e.resetFormatAndType()},e.createTexture=function(){t.handle||(t.handle=t.context.createTexture(),t.target&&(t.context.bindTexture(t.target,t.handle),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t._openGLRenderWindow.getWebgl2()&&t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_R,e.getOpenGLWrapMode(t.wrapR)),t.context.bindTexture(t.target,null)))},e.getTextureUnit=function(){return t._openGLRenderWindow?t._openGLRenderWindow.getTextureUnitForTexture(e):-1},e.activate=function(){t._openGLRenderWindow.activateTexture(e),e.bind()},e.deactivate=function(){t._openGLRenderWindow&&t._openGLRenderWindow.deactivateTexture(e)},e.releaseGraphicsResources=function(r){r&&t.handle&&(r.activateTexture(e),r.deactivateTexture(e),t.context.deleteTexture(t.handle),t.handle=0,t.numberOfDimensions=0,t.target=0,t.internalFormat=0,t.format=0,t.openGLDataType=0,t.components=0,t.width=0,t.height=0,t.depth=0),t.shaderProgram&&(t.shaderProgram.releaseGraphicsResources(r),t.shaderProgram=null)},e.bind=function(){t.context.bindTexture(t.target,t.handle),t.autoParameters&&e.getMTime()>t.sendParametersTime.getMTime()&&e.sendParameters()},e.isBound=function(){var e=!1;if(t.context&&t.handle){var r=0;if(t.target===t.context.TEXTURE_2D)r=t.context.TEXTURE_BINDING_2D;else mf("impossible case");e=t.context.getIntegerv(r)===t.handle}return e},e.sendParameters=function(){t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_S,e.getOpenGLWrapMode(t.wrapS)),t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_T,e.getOpenGLWrapMode(t.wrapT)),t._openGLRenderWindow.getWebgl2()&&t.context.texParameteri(t.target,t.context.TEXTURE_WRAP_R,e.getOpenGLWrapMode(t.wrapR)),t.context.texParameteri(t.target,t.context.TEXTURE_MIN_FILTER,e.getOpenGLFilterMode(t.minificationFilter)),t.context.texParameteri(t.target,t.context.TEXTURE_MAG_FILTER,e.getOpenGLFilterMode(t.magnificationFilter)),t._openGLRenderWindow.getWebgl2()&&(t.context.texParameteri(t.target,t.context.TEXTURE_BASE_LEVEL,t.baseLevel),t.context.texParameteri(t.target,t.context.TEXTURE_MAX_LEVEL,t.maxLevel)),t.sendParametersTime.modified()},e.getInternalFormat=function(r,n){return t._forceInternalFormat||(t.internalFormat=e.getDefaultInternalFormat(r,n)),t.internalFormat||pf("Unable to find suitable internal format for T=".concat(r," NC= ").concat(n)),t.internalFormat},e.getDefaultInternalFormat=function(e,r){var n;return(n=t._openGLRenderWindow.getDefaultTextureInternalFormat(e,r,t.oglNorm16Ext,t.useHalfFloat))||n||(pf("Unsupported internal texture type!"),pf("Unable to find suitable internal format for T=".concat(e," NC= ").concat(r))),n},e.setInternalFormat=function(r){t._forceInternalFormat=!0,r!==t.internalFormat&&(t.internalFormat=r,e.modified())},e.getFormat=function(r,n){return t.format=e.getDefaultFormat(r,n),t.format},e.getDefaultFormat=function(e,r){if(t._openGLRenderWindow.getWebgl2())switch(r){case 1:return t.context.RED;case 2:return t.context.RG;case 3:default:return t.context.RGB;case 4:return t.context.RGBA}else switch(r){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:default:return t.context.RGB;case 4:return t.context.RGBA}},e.resetFormatAndType=function(){t.format=0,t.internalFormat=0,t._forceInternalFormat=!1,t.openGLDataType=0},e.getDefaultDataType=function(e){if(t._openGLRenderWindow.getWebgl2())switch(e){case df.UNSIGNED_CHAR:return t.context.UNSIGNED_BYTE;case t.oglNorm16Ext&&!t.useHalfFloat&&df.SHORT:return t.context.SHORT;case t.oglNorm16Ext&&!t.useHalfFloat&&df.UNSIGNED_SHORT:return t.context.UNSIGNED_SHORT;case t.useHalfFloat&&df.SHORT:case t.useHalfFloat&&df.UNSIGNED_SHORT:return t.context.HALF_FLOAT;case df.FLOAT:case df.VOID:default:return t.context.FLOAT}switch(e){case df.UNSIGNED_CHAR:return t.context.UNSIGNED_BYTE;case df.FLOAT:case df.VOID:default:if(t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear"))return t.context.FLOAT;var r=t.context.getExtension("OES_texture_half_float");return r&&t.context.getExtension("OES_texture_half_float_linear")?r.HALF_FLOAT_OES:t.context.UNSIGNED_BYTE}},e.getOpenGLDataType=function(r){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.openGLDataType&&!n||(t.openGLDataType=e.getDefaultDataType(r)),t.openGLDataType},e.getShiftAndScale=function(){var e=0,r=1;switch(t.openGLDataType){case t.context.BYTE:e=(r=127.5)-128;break;case t.context.UNSIGNED_BYTE:r=255,e=0;break;case t.context.SHORT:e=(r=32767.5)-32768;break;case t.context.UNSIGNED_SHORT:r=65536,e=0;break;case t.context.INT:e=(r=2147483647.5)-2147483648;break;case t.context.UNSIGNED_INT:r=4294967295,e=0;case t.context.FLOAT:}return{shift:e,scale:r}},e.getOpenGLFilterMode=function(e){switch(e){case ff.NEAREST:return t.context.NEAREST;case ff.LINEAR:return t.context.LINEAR;case ff.NEAREST_MIPMAP_NEAREST:return t.context.NEAREST_MIPMAP_NEAREST;case ff.NEAREST_MIPMAP_LINEAR:return t.context.NEAREST_MIPMAP_LINEAR;case ff.LINEAR_MIPMAP_NEAREST:return t.context.LINEAR_MIPMAP_NEAREST;case ff.LINEAR_MIPMAP_LINEAR:return t.context.LINEAR_MIPMAP_LINEAR;default:return t.context.NEAREST}},e.getOpenGLWrapMode=function(e){switch(e){case cf.CLAMP_TO_EDGE:return t.context.CLAMP_TO_EDGE;case cf.REPEAT:return t.context.REPEAT;case cf.MIRRORED_REPEAT:return t.context.MIRRORED_REPEAT;default:return t.context.CLAMP_TO_EDGE}},e.create2DFromRaw=function(o,i,l,u,s){var c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e.getOpenGLDataType(u,!0),e.getInternalFormat(u,l),e.getFormat(u,l),!t.internalFormat||!t.format||!t.openGLDataType)return gf("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=l,t.width=o,t.height=i,t.depth=1,t.numberOfDimensions=2,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind();var f=n(r(u,[s]));return t.context.pixelStorei(t.context.UNPACK_FLIP_Y_WEBGL,c),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),a(u)?(t.context.texStorage2D(t.target,1,t.internalFormat,t.width,t.height),null!=f[0]&&t.context.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.openGLDataType,f[0])):t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,f[0]),t.generateMipmap&&t.context.generateMipmap(t.target),c&&t.context.pixelStorei(t.context.UNPACK_FLIP_Y_WEBGL,!1),e.deactivate(),!0},e.createCubeFromRaw=function(o,i,l,u,s){if(e.getOpenGLDataType(u),e.getInternalFormat(u,l),e.getFormat(u,l),!t.internalFormat||!t.format||!t.openGLDataType)return gf("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_CUBE_MAP,t.components=l,t.width=o,t.height=i,t.depth=1,t.numberOfDimensions=2,t._openGLRenderWindow.activateTexture(e),t.maxLevel=s.length/6-1,e.createTexture(),e.bind();for(var c=n(r(u,s)),f=[],d=t.width,p=t.height,g=0;g<c.length;g++){g%6===0&&0!==g&&(d/=2,p/=2),f[g]=Rt(u,p*d*t.components);for(var m=0;m<p;++m){var v=m*d*t.components,h=(p-m-1)*d*t.components;f[g].set(c[g].slice(h,h+d*t.components),v)}}t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),a(u)&&t.context.texStorage2D(t.target,6,t.internalFormat,t.width,t.height);for(var y=0;y<6;y++)for(var b=0,T=t.width,x=t.height;T>=1&&x>=1;){var S=null;b<=t.maxLevel&&(S=f[6*b+y]),a(u)?null!=S&&t.context.texSubImage2D(t.context.TEXTURE_CUBE_MAP_POSITIVE_X+y,b,0,0,T,x,t.format,t.openGLDataType,S):t.context.texImage2D(t.context.TEXTURE_CUBE_MAP_POSITIVE_X+y,b,t.internalFormat,T,x,0,t.format,t.openGLDataType,S),b++,T/=2,x/=2}return e.deactivate(),!0},e.createDepthFromRaw=function(r,n,o,i){return e.getOpenGLDataType(o),t.format=t.context.DEPTH_COMPONENT,t._openGLRenderWindow.getWebgl2()?o===df.FLOAT?t.internalFormat=t.context.DEPTH_COMPONENT32F:t.internalFormat=t.context.DEPTH_COMPONENT16:t.internalFormat=t.context.DEPTH_COMPONENT,t.internalFormat&&t.format&&t.openGLDataType?(t.target=t.context.TEXTURE_2D,t.components=1,t.width=r,t.height=n,t.depth=1,t.numberOfDimensions=2,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),a(o)?(t.context.texStorage2D(t.target,1,t.internalFormat,t.width,t.height),null!=i&&t.context.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.openGLDataType,i)):t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,i),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0):(gf("Failed to determine texture parameters."),!1)},e.create2DFromImage=function(r){if(e.getOpenGLDataType(df.UNSIGNED_CHAR),e.getInternalFormat(df.UNSIGNED_CHAR,4),e.getFormat(df.UNSIGNED_CHAR,4),!t.internalFormat||!t.format||!t.openGLDataType)return gf("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=4,t.depth=1,t.numberOfDimensions=2,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1);var n=!t._openGLRenderWindow.getWebgl2()&&(!go(r.width)||!go(r.height)),o=document.createElement("canvas");o.width=n?po(r.width):r.width,o.height=n?po(r.height):r.height,t.width=o.width,t.height=o.height;var i=o.getContext("2d");i.translate(0,o.height),i.scale(1,-1),i.drawImage(r,0,0,r.width,r.height,0,0,o.width,o.height);var l=o;return a(df.UNSIGNED_CHAR)?(t.context.texStorage2D(t.target,1,t.internalFormat,t.width,t.height),null!=l&&t.context.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.openGLDataType,l)):t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,l),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0},e.create2DFilterableFromRaw=function(t,r,n,a,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return e.create2DFilterableFromDataArray(t,r,Dl.newInstance({numberOfComponents:n,dataType:a,values:o}),i)},e.create2DFilterableFromDataArray=function(t,r,n){var a=o(n,arguments.length>3&&void 0!==arguments[3]&&arguments[3]),i=a.numComps,l=a.dataType,u=a.data;e.create2DFromRaw(t,r,i,l,u)},e.create3DFromRaw=function(o,i,l,u,s,c){if(e.getOpenGLDataType(s),e.getInternalFormat(s,u),e.getFormat(s,u),!t.internalFormat||!t.format||!t.openGLDataType)return gf("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_3D,t.components=u,t.width=o,t.height=i,t.depth=l,t.numberOfDimensions=3,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind();var f=n(r(s,[c],!0));return t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),a(s)?(t.context.texStorage3D(t.target,1,t.internalFormat,t.width,t.height,t.depth),null!=f[0]&&t.context.texSubImage3D(t.target,0,0,0,0,t.width,t.height,t.depth,t.format,t.openGLDataType,f[0])):t.context.texImage3D(t.target,0,t.internalFormat,t.width,t.height,t.depth,0,t.format,t.openGLDataType,f[0]),t.generateMipmap&&t.context.generateMipmap(t.target),e.deactivate(),!0},e.create3DFilterableFromRaw=function(t,r,n,a,o,i){var l=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return e.create3DFilterableFromDataArray(t,r,n,Dl.newInstance({numberOfComponents:a,dataType:o,values:i}),l)},e.create3DFilterableFromDataArray=function(r,n,i,l){for(var u=o(l,arguments.length>4&&void 0!==arguments[4]&&arguments[4]),s=u.numComps,c=u.dataType,f=u.data,d=u.scaleOffsets,p=r*n*i,g=[],m=[],v=0;v<s;++v)g[v]=0,m[v]=1;t.volumeInfo={scale:m,offset:g,dataComputedScale:d.scale,dataComputedOffset:d.offset,width:r,height:n,depth:i};var h=structuredClone(d);if(t._openGLRenderWindow.getWebgl2()){if(t.oglNorm16Ext&&!t.useHalfFloat&&c===df.SHORT){for(var y=0;y<s;++y)t.volumeInfo.scale[y]=32767;return e.create3DFromRaw(r,n,i,s,c,f)}if(t.oglNorm16Ext&&!t.useHalfFloat&&c===df.UNSIGNED_SHORT){for(var b=0;b<s;++b)t.volumeInfo.scale[b]=65535;return e.create3DFromRaw(r,n,i,s,c,f)}if(c===df.FLOAT||t.useHalfFloat&&(c===df.SHORT||c===df.UNSIGNED_SHORT))return e.create3DFromRaw(r,n,i,s,c,f);if(c===df.UNSIGNED_CHAR){for(var T=0;T<s;++T)t.volumeInfo.scale[T]=255;return e.create3DFromRaw(r,n,i,s,c,f)}var x=new Float32Array(p*s);t.volumeInfo.offset=h.offset,t.volumeInfo.scale=h.scale;for(var S=0,w=h.scale.map((function(e){return 1/e})),C=0;C<p;C++)for(var P=0;P<s;P++)x[S]=(f[S]-h.offset[P])*w[P],S++;return e.create3DFromRaw(r,n,i,s,df.FLOAT,x)}var O=function(e,t,r,n,a){e[t]=r},A=df.UNSIGNED_CHAR;if(c===df.UNSIGNED_CHAR)for(var E=0;E<s;++E)h.offset[E]=0,h.scale[E]=255;else t.context.getExtension("OES_texture_float")&&t.context.getExtension("OES_texture_float_linear")?(A=df.FLOAT,O=function(e,t,r,n,a){e[t]=(r-n)/a}):(A=df.UNSIGNED_CHAR,O=function(e,t,r,n,a){e[t]=255*(r-n)/a});if(e.getOpenGLDataType(A),e.getInternalFormat(A,s),e.getFormat(A,s),!t.internalFormat||!t.format||!t.openGLDataType)return gf("Failed to determine texture parameters."),!1;t.target=t.context.TEXTURE_2D,t.components=s,t.depth=1,t.numberOfDimensions=2;var I=t.context.getParameter(t.context.MAX_TEXTURE_SIZE);I>4096&&(A===df.FLOAT||s>=3)&&(I=4096);var R=1,M=1;p>I*I&&(M=R=Math.ceil(Math.sqrt(p/(I*I))));var D=Math.sqrt(p)/R;D=po(D);var k,_=Math.floor(D*R/r),L=Math.ceil(i/_),B=po(n*L/M);t.width=D,t.height=B,t._openGLRenderWindow.activateTexture(e),e.createTexture(),e.bind(),t.volumeInfo.xreps=_,t.volumeInfo.yreps=L,t.volumeInfo.xstride=R,t.volumeInfo.ystride=M,t.volumeInfo.offset=h.offset,t.volumeInfo.scale=h.scale;var V=D*B*s;k=A===df.FLOAT?new Float32Array(V):new Uint8Array(V);for(var N=0,F=Math.floor(r/R),U=Math.floor(n/M),G=0;G<L;G++)for(var j=Math.min(_,i-G*_),z=s*(t.width-j*Math.floor(r/R)),W=0;W<U;W++){for(var H=0;H<j;H++)for(var K=s*((G*_+H)*r*n+M*W*r),X=0;X<F;X++)for(var q=0;q<s;q++)O(k,N,f[K+R*X*s+q],h.offset[q],h.scale[q]),N++;N+=z}return t.context.pixelStorei(t.context.UNPACK_ALIGNMENT,1),a(A)?(t.context.texStorage2D(t.target,1,t.internalFormat,t.width,t.height),null!=k&&t.context.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.openGLDataType,k)):t.context.texImage2D(t.target,0,t.internalFormat,t.width,t.height,0,t.format,t.openGLDataType,k),e.deactivate(),!0},e.setOpenGLRenderWindow=function(r){t._openGLRenderWindow!==r&&(e.releaseGraphicsResources(),t._openGLRenderWindow=r,t.context=null,r&&(t.context=t._openGLRenderWindow.getContext()))},e.getMaximumTextureSize=function(e){return e&&e.isCurrent()?e.getIntegerv(e.MAX_TEXTURE_SIZE):-1}}var yf={_openGLRenderWindow:null,_forceInternalFormat:!1,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:cf.CLAMP_TO_EDGE,wrapT:cf.CLAMP_TO_EDGE,wrapR:cf.CLAMP_TO_EDGE,minificationFilter:ff.NEAREST,magnificationFilter:ff.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1,useHalfFloat:!0,oglNorm16Ext:null};function bf(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yf,r),ar.extend(e,t,r),t.sendParametersTime={},Vt(t.sendParametersTime,{mtime:0}),t.textureBuildTime={},Vt(t.textureBuildTime,{mtime:0}),jt(e,t,["format","openGLDataType"]),zt(e,t,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap","oglNorm16Ext"]),Ft(e,t,["width","height","volumeInfo","components","handle","target"]),Xt(0,t,["openGLRenderWindow"]),hf(e,t)}var Tf=Yt(bf,"vtkOpenGLTexture"),xf=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sf(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({newInstance:Tf,extend:bf},af);sr("vtkTexture",Tf);var Sf="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nattribute vec4 vertexMC;\n\n// frag position in VC\n//VTK::PositionVC::Dec\n\n// optional normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// material property values\n//VTK::Color::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// camera and actor matrix values\n//VTK::Camera::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// picking support\n//VTK::Picking::Dec\n\nvoid main()\n{\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::PrimID::Impl\n\n  //VTK::PositionVC::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::Picking::Impl\n}\n",wf="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyDataFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n// Template for the polydata mappers fragment shader\n\nuniform int PrimitiveIDOffset;\n\n// VC position of this fragment\n//VTK::PositionVC::Dec\n\n// optional color passed in from the vertex shader, vertexColor\n//VTK::Color::Dec\n\n// optional surface normal declaration\n//VTK::Normal::Dec\n\n// extra lighting parameters\n//VTK::Light::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// Depth Peeling Support\n//VTK::DepthPeeling::Dec\n\n// clipping plane vars\n//VTK::Clip::Dec\n\n// the output of this shader\n//VTK::Output::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\n// handle coincident offsets\n//VTK::Coincident::Dec\n\n//VTK::ZBuffer::Dec\n\nvoid main()\n{\n  // VC position of this fragment. This should not branch/return/discard.\n  //VTK::PositionVC::Impl\n\n  // Place any calls that require uniform flow (e.g. dFdx) here.\n  //VTK::UniformFlow::Impl\n\n  // Set gl_FragDepth here (gl_FragCoord.z by default)\n  //VTK::Depth::Impl\n\n  // Early depth peeling abort:\n  //VTK::DepthPeeling::PreColor\n\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  //VTK::Clip::Impl\n\n  //VTK::Color::Impl\n\n  // Generate the normal if we are not passed in one\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Light::Impl\n\n  if (gl_FragData[0].a <= 0.0)\n    {\n    discard;\n    }\n\n  //VTK::DepthPeeling::Impl\n\n  //VTK::Picking::Impl\n\n  // handle coincident offsets\n  //VTK::Coincident::Impl\n\n  //VTK::ZBuffer::Impl\n\n  //VTK::RenderPassFragmentShader::Impl\n}\n";var Cf={implementReplaceShaderCoincidentOffset:function(e,t){e.replaceShaderCoincidentOffset=function(r,n,a){var o=e.getCoincidentParameters(n,a);if(o&&(0!==o.factor||0!==o.offset)){var i=r.Fragment;i=Yc.substitute(i,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,t.context.getExtension("EXT_frag_depth")&&(0!==o.factor?(i=Yc.substitute(i,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,i=Yc.substitute(i,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):i=Yc.substitute(i,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),t._openGLRenderWindow.getWebgl2()&&(0!==o.factor?(i=Yc.substitute(i,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,i=Yc.substitute(i,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):i=Yc.substitute(i,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),r.Fragment=i}}},implementBuildShadersWithReplacements:function(e,t){e.applyShaderReplacements=function(e,t,r){var n=null;if(t&&(n=t.ShaderReplacements),n)for(var a=0;a<n.length;a++){var o=n[a];if(r&&o.replaceFirst||!r&&!o.replaceFirst){var i=o.shaderType,l=e[i],u=Yc.substitute(l,o.originalValue,o.replacementValue,o.replaceAll);e[i]=u.result}}},e.buildShaders=function(r,n,a){e.getReplacedShaderTemplate(r,n,a),t.lastRenderPassShaderReplacement=t.currentRenderPass?t.currentRenderPass.getShaderReplacement():null,t.lastRenderPassShaderReplacement&&t.lastRenderPassShaderReplacement(r);var o=t.renderable.getViewSpecificProperties().OpenGL;e.applyShaderReplacements(r,o,!0),e.replaceShaderValues(r,n,a),e.applyShaderReplacements(r,o)},e.getReplacedShaderTemplate=function(r,n,a){var o=t.renderable.getViewSpecificProperties().OpenGL;e.getShaderTemplate(r,n,a);var i=r.Vertex;if(o){var l=o.VertexShaderCode;void 0!==l&&""!==l&&(i=l)}r.Vertex=i;var u=r.Fragment;if(o){var s=o.FragmentShaderCode;void 0!==s&&""!==s&&(u=s)}r.Fragment=u;var c=r.Geometry;if(o){var f=o.GeometryShaderCode;void 0!==f&&(c=f)}r.Geometry=c}}};function Pf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Of(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pf(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Af=nu.FieldAssociations,Ef=rf.primTypes,If=fl.Representation,Rf=fl.Shading,Mf=as.ScalarMode,Df=xf.Filter,kf=xf.Wrap,_f=Ot,Lf={type:"StartEvent"},Bf={type:"EndEvent"},Vf=$i.CoordinateSystem;function Nf(r,n){function a(e,t,r){return t.identity(r),e.reduce((function(e,r,n){return 0===n?r?t.copy(e,r):t.identity(e):r?t.multiply(e,e,r):e}),r)}n.classHierarchy.push("vtkOpenGLPolyDataMapper"),r.buildPass=function(e){e&&(n.currentRenderPass=null,n.openGLActor=r.getFirstAncestorOfType("vtkOpenGLActor"),n._openGLRenderer=n.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),n._openGLRenderWindow=n._openGLRenderer.getParent(),n.openGLCamera=n._openGLRenderer.getViewNodeFor(n._openGLRenderer.getRenderable().getActiveCamera()))},r.translucentPass=function(e,t){e&&(n.currentRenderPass=t,r.render())},r.zBufferPass=function(e){e&&(n.haveSeenDepthRequest=!0,n.renderDepth=!0,r.render(),n.renderDepth=!1)},r.opaqueZBufferPass=function(e){return r.zBufferPass(e)},r.opaquePass=function(e){e&&r.render()},r.render=function(){var e=n._openGLRenderWindow.getContext();if(n.context!==e){n.context=e;for(var t=Ef.Start;t<Ef.End;t++)n.primitives[t].setOpenGLRenderWindow(n._openGLRenderWindow)}var a=n.openGLActor.getRenderable(),o=n._openGLRenderer.getRenderable();r.renderPiece(o,a)},r.getShaderTemplate=function(e,t,r){e.Vertex=Sf,e.Fragment=wf,e.Geometry=""},r.replaceShaderColor=function(e,t,r){var a=e.Vertex,o=e.Geometry,i=e.Fragment,l=n.lastBoundBO.getReferenceByName("lastLightComplexity"),u=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];l&&(u=u.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));var s=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];l&&(s=s.concat(["  vec3 specularColor;","  float specularPower;"])),s=s.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),l&&(s=s.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),0===n.lastBoundBO.getCABO().getColorComponents()||n.drawingEdges||(u=u.concat(["varying vec4 vertexColorVSOutput;"]),a=Yc.substitute(a,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,a=Yc.substitute(a,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,o=Yc.substitute(o,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,o=Yc.substitute(o,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),0===n.lastBoundBO.getCABO().getColorComponents()||n.drawingEdges?n.renderable.getInterpolateScalarsBeforeMapping()&&n.renderable.getColorCoordinates()&&!n.drawingEdges?i=Yc.substitute(i,"//VTK::Color::Impl",s.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:(r.getBackfaceProperty()&&!n.drawingEdges&&(u=u.concat(["uniform float opacityUniformBF; // the fragment opacity","uniform float ambientIntensityBF; // the material ambient","uniform float diffuseIntensityBF; // the material diffuse","uniform vec3 ambientColorUniformBF; // ambient material color","uniform vec3 diffuseColorUniformBF; // diffuse material color"]),l?(u=u.concat(["uniform float specularIntensityBF; // the material specular intensity","uniform vec3 specularColorUniformBF; // intensity weighted color","uniform float specularPowerUniformBF;"]),s=s.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  specularColor = specularIntensityBF * specularColorUniformBF;","  specularPower = specularPowerUniformBF;","  opacity = opacityUniformBF; }"])):s=s.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  opacity = opacityUniformBF; }"])),n.haveCellScalars&&!n.drawingEdges&&(u=u.concat(["uniform samplerBuffer texture1;"])),i=Yc.substitute(i,"//VTK::Color::Impl",s).result):i=Yc.substitute(i,"//VTK::Color::Impl",s.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result,i=Yc.substitute(i,"//VTK::Color::Dec",u).result,e.Vertex=a,e.Geometry=o,e.Fragment=i},r.replaceShaderLight=function(e,t,r){var a=e.Fragment,o=n.lastBoundBO.getReferenceByName("lastLightComplexity"),i=n.lastBoundBO.getReferenceByName("lastLightCount"),l=[];switch(o){case 0:a=Yc.substitute(a,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:a=Yc.substitute(a,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(var u=0;u<i;++u)l=l.concat(["uniform vec3 lightColor".concat(u,";"),"uniform vec3 lightDirectionVC".concat(u,"; // normalized"),"uniform vec3 lightHalfAngleVC".concat(u,"; // normalized")]);a=Yc.substitute(a,"//VTK::Light::Dec",l).result,l=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(var s=0;s<i;++s)l=l.concat(["  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC".concat(s,"));"),"  diffuseL += ((df".concat("",") * lightColor").concat(s,");"),"  if (dot(normalVCVSOutput, lightDirectionVC".concat(s,") < 0.0)"),"    {","    float sf = sign(df)*pow(max(1e-5,\n                                              dot(reflect(lightDirectionVC".concat(s,",normalVCVSOutput),\n                                                  normalize(-vertexVC.xyz))),\n                                         specularPower);"),"    specularL += (sf".concat(""," * lightColor").concat(s,");"),"    }"]);l=l.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),a=Yc.substitute(a,"//VTK::Light::Impl",l,!1).result;break;case 3:for(var c=0;c<i;++c)l=l.concat(["uniform vec3 lightColor".concat(c,";"),"uniform vec3 lightDirectionVC".concat(c,"; // normalized"),"uniform vec3 lightHalfAngleVC".concat(c,"; // normalized"),"uniform vec3 lightPositionVC".concat(c,";"),"uniform vec3 lightAttenuation".concat(c,";"),"uniform float lightConeAngle".concat(c,";"),"uniform float lightExponent".concat(c,";"),"uniform int lightPositional".concat(c,";")]);a=Yc.substitute(a,"//VTK::Light::Dec",l).result,l=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(var f=0;f<i;++f)l=l.concat(["  attenuation = 1.0;","  if (lightPositional".concat(f," == 0)"),"    {","      vertLightDirectionVC = lightDirectionVC".concat(f,";"),"    }","  else","    {","    vertLightDirectionVC = vertexVC.xyz - lightPositionVC".concat(f,";"),"    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /","      (lightAttenuation".concat(f,".x"),"       + lightAttenuation".concat(f,".y * distanceVC"),"       + lightAttenuation".concat(f,".z * distanceVC * distanceVC);"),"    // per OpenGL standard cone angle is 90 or less for a spot light","    if (lightConeAngle".concat(f," <= 90.0)"),"      {","      float coneDot = dot(vertLightDirectionVC, lightDirectionVC".concat(f,");"),"      // if inside the cone","      if (coneDot >= cos(radians(lightConeAngle".concat(f,")))"),"        {","        attenuation = attenuation * pow(coneDot, lightExponent".concat(f,");"),"        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));","    diffuseL += ((df".concat("",") * lightColor").concat(f,");"),"    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {","      float sf = sign(df)*attenuation*pow(max(1e-5,\n                                                           dot(reflect(lightDirectionVC".concat(f,",\n                                                                       normalVCVSOutput),\n                                                               normalize(-vertexVC.xyz))),\n                                                       specularPower);"),"    specularL += ((sf".concat("",") * lightColor").concat(f,");"),"    }"]);l=l.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),a=Yc.substitute(a,"//VTK::Light::Impl",l,!1).result;break;default:_f("bad light complexity")}e.Fragment=a},r.replaceShaderNormal=function(e,t,r){if(n.lastBoundBO.getReferenceByName("lastLightComplexity")>0){var a=e.Vertex,o=e.Geometry,i=e.Fragment;n.lastBoundBO.getCABO().getNormalOffset()?(a=Yc.substitute(a,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,a=Yc.substitute(a,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,o=Yc.substitute(o,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,o=Yc.substitute(o,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,i=Yc.substitute(i,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,i=Yc.substitute(i,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):n.haveCellNormals?(i=Yc.substitute(i,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,i=Yc.substitute(i,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):n.lastBoundBO.getOpenGLMode(r.getProperty().getRepresentation())===n.context.LINES?(i=Yc.substitute(i,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,i=Yc.substitute(i,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  if (abs(fdx.x) > 0.0)","    { fdx = normalize(fdx); normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { fdy = normalize(fdy); normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(i=Yc.substitute(i,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,i=Yc.substitute(i,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,i=Yc.substitute(i,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),e.Vertex=a,e.Geometry=o,e.Fragment=i}},r.replaceShaderPositionVC=function(e,t,r){n.lastBoundBO.replaceShaderPositionVC(e,t,r);var a=e.Vertex,o=e.Geometry,i=e.Fragment;n.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(a=Yc.substitute(a,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,a=Yc.substitute(a,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCPCMatrix * vertexMC;"]).result,a=Yc.substitute(a,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result,o=Yc.substitute(o,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,o=Yc.substitute(o,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,i=Yc.substitute(i,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,i=Yc.substitute(i,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(a=Yc.substitute(a,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,a=Yc.substitute(a,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result),e.Vertex=a,e.Geometry=o,e.Fragment=i},r.replaceShaderTCoord=function(e,t,r){if(n.lastBoundBO.getCABO().getTCoordOffset()){var a=e.Vertex,o=e.Geometry,i=e.Fragment;if(n.drawingEdges)return;a=Yc.substitute(a,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;var l=n.openGLActor.getActiveTextures(),u=2,s=2;if(l&&l.length>0&&(u=l[0].getComponents(),l[0].getTarget()===n.context.TEXTURE_CUBE_MAP&&(s=3)),n.renderable.getColorTextureMap()&&(u=n.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),s=2),2===s){if(a=Yc.substitute(a,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,o=Yc.substitute(o,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,o=Yc.substitute(o,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,i=Yc.substitute(i,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,l&&l.length>=1)switch(u){case 1:i=Yc.substitute(i,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:i=Yc.substitute(i,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:i=Yc.substitute(i,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}}else switch(a=Yc.substitute(a,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,o=Yc.substitute(o,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,o=Yc.substitute(o,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,i=Yc.substitute(i,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,u){case 1:i=Yc.substitute(i,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:i=Yc.substitute(i,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:i=Yc.substitute(i,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}e.Vertex=a,e.Geometry=o,e.Fragment=i}},r.replaceShaderClip=function(e,t,r){var a=e.Vertex,o=e.Fragment;if(n.renderable.getNumberOfClippingPlanes()){var i=n.renderable.getNumberOfClippingPlanes();a=Yc.substitute(a,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[".concat(i,"];"),"varying float clipDistancesVSOutput[".concat(i,"];")]).result,a=Yc.substitute(a,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < ".concat(i,"; planeNum++)"),"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,o=Yc.substitute(o,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[".concat(i,"];")]).result,o=Yc.substitute(o,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < ".concat(i,"; planeNum++)"),"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}e.Vertex=a,e.Fragment=o},r.getCoincidentParameters=function(e,t){var r={factor:0,offset:0},a=t.getProperty();if(n.renderable.getResolveCoincidentTopology()||a.getEdgeVisibility()&&a.getRepresentation()===If.SURFACE){var o=n.lastBoundBO.getPrimitiveType();o===Ef.Points||a.getRepresentation()===If.POINTS?r=n.renderable.getCoincidentTopologyPointOffsetParameter():o===Ef.Lines||a.getRepresentation()===If.WIREFRAME?r=n.renderable.getCoincidentTopologyLineOffsetParameters():o!==Ef.Tris&&o!==Ef.TriStrips||(r=n.renderable.getCoincidentTopologyPolygonOffsetParameters()),o!==Ef.TrisEdges&&o!==Ef.TriStripsEdges||((r=n.renderable.getCoincidentTopologyPolygonOffsetParameters()).factor/=2,r.offset/=2)}var i=n._openGLRenderer.getSelector();return i&&i.getFieldAssociation()===Af.FIELD_ASSOCIATION_POINTS&&(r.offset-=2),r},r.replaceShaderPicking=function(e,t,r){var a=e.Fragment,o=e.Vertex;if(a=Yc.substitute(a,"//VTK::Picking::Dec",["uniform int picking;","//VTK::Picking::Dec"]).result,n._openGLRenderer.getSelector()){switch(n.lastSelectionState!==zu.ID_LOW24&&n.lastSelectionState!==zu.ID_HIGH24||(o=Yc.substitute(o,"//VTK::Picking::Dec",["flat out int vertexIDVSOutput;\n","uniform int VertexIDOffset;\n"]).result,o=Yc.substitute(o,"//VTK::Picking::Impl","  vertexIDVSOutput = gl_VertexID + VertexIDOffset;\n").result,a=Yc.substitute(a,"//VTK::Picking::Dec","flat in int vertexIDVSOutput;\n").result,a=Yc.substitute(a,"//VTK::Picking::Impl",["  int idx = vertexIDVSOutput;","//VTK::Picking::Impl"]).result),n.lastSelectionState){case zu.ID_LOW24:a=Yc.substitute(a,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float(idx%256)/255.0, float((idx/256)%256)/255.0, float((idx/65536)%256)/255.0, 1.0);").result;break;case zu.ID_HIGH24:a=Yc.substitute(a,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float(idx)/255.0, 0.0, 0.0, 1.0);").result;break;default:a=Yc.substitute(a,"//VTK::Picking::Dec","uniform vec3 mapperIndex;").result,a=Yc.substitute(a,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result}e.Fragment=a,e.Vertex=o}},r.replaceShaderValues=function(e,t,a){if(r.replaceShaderColor(e,t,a),r.replaceShaderNormal(e,t,a),r.replaceShaderLight(e,t,a),r.replaceShaderTCoord(e,t,a),r.replaceShaderPicking(e,t,a),r.replaceShaderClip(e,t,a),r.replaceShaderCoincidentOffset(e,t,a),r.replaceShaderPositionVC(e,t,a),n.haveSeenDepthRequest){var o=e.Fragment;o=Yc.substitute(o,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,o=Yc.substitute(o,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,e.Fragment=o}},r.getNeedToRebuildShaders=function(e,t,r){var a=0,o=0,i=e.getPrimitiveType(),l=n.currentInput,u=!1,s=l.getPointData().getNormals(),c=l.getCellData().getNormals(),f=r.getProperty().getInterpolation()===Rf.FLAT,d=r.getProperty().getRepresentation(),p=e.getOpenGLMode(d,i);if(p===n.context.TRIANGLES||c&&!s||!f&&s?u=!0:f||p!==n.context.LINES||(u=!0),r.getProperty().getLighting()&&u){a=0;for(var g=t.getLightsByReference(),m=0;m<g.length;++m){var v=g[m];v.getSwitch()>0&&(o++,0===a&&(a=1)),1===a&&(o>1||1!==v.getIntensity()||!v.lightTypeIsHeadLight())&&(a=2),a<3&&v.getPositional()&&(a=3)}}var h=!1,y=n.lastBoundBO.getReferenceByName("lastLightComplexity"),b=n.lastBoundBO.getReferenceByName("lastLightCount");return y===a&&b===o||(n.lastBoundBO.set({lastLightComplexity:a},!0),n.lastBoundBO.set({lastLightCount:o},!0),h=!0),(!n.currentRenderPass&&n.lastRenderPassShaderReplacement||n.currentRenderPass&&n.currentRenderPass.getShaderReplacement()!==n.lastRenderPassShaderReplacement)&&(h=!0),!!(n.lastHaveSeenDepthRequest!==n.haveSeenDepthRequest||e.getShaderSourceTime().getMTime()<n.renderable.getMTime()||e.getShaderSourceTime().getMTime()<n.currentInput.getMTime()||e.getShaderSourceTime().getMTime()<n.selectionStateChanged.getMTime()||h)&&(n.lastHaveSeenDepthRequest=n.haveSeenDepthRequest,!0)},r.invokeShaderCallbacks=function(e,t,r){var a=n.renderable.getViewSpecificProperties().ShadersCallbacks;a&&a.forEach((function(n){n.callback(n.userData,e,t,r)}))},r.setMapperShaderParameters=function(e,t,a){if(e.getProgram().isUniformUsed("PrimitiveIDOffset")&&e.getProgram().setUniformi("PrimitiveIDOffset",n.primitiveIDOffset),e.getProgram().isUniformUsed("VertexIDOffset")&&e.getProgram().setUniformi("VertexIDOffset",n.vertexIDOffset),e.getCABO().getElementCount()&&(n.VBOBuildTime.getMTime()>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())){var o=n.lastBoundBO.getReferenceByName("lastLightComplexity");e.getProgram().isAttributeUsed("vertexMC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"vertexMC",e.getCABO().getVertexOffset(),e.getCABO().getStride(),n.context.FLOAT,3,!1)||_f("Error setting vertexMC in shader VAO.")),e.getProgram().isAttributeUsed("normalMC")&&e.getCABO().getNormalOffset()&&o>0?e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"normalMC",e.getCABO().getNormalOffset(),e.getCABO().getStride(),n.context.FLOAT,3,!1)||_f("Error setting normalMC in shader VAO."):e.getVAO().removeAttributeArray("normalMC"),n.renderable.getCustomShaderAttributes().forEach((function(t,r){e.getProgram().isAttributeUsed("".concat(t,"MC"))&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"".concat(t,"MC"),e.getCABO().getCustomData()[r].offset,e.getCABO().getStride(),n.context.FLOAT,e.getCABO().getCustomData()[r].components,!1)||_f("Error setting ".concat(t,"MC in shader VAO.")))})),e.getProgram().isAttributeUsed("tcoordMC")&&e.getCABO().getTCoordOffset()?e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"tcoordMC",e.getCABO().getTCoordOffset(),e.getCABO().getStride(),n.context.FLOAT,e.getCABO().getTCoordComponents(),!1)||_f("Error setting tcoordMC in shader VAO."):e.getVAO().removeAttributeArray("tcoordMC"),e.getProgram().isAttributeUsed("scalarColor")&&e.getCABO().getColorComponents()?e.getVAO().addAttributeArray(e.getProgram(),e.getCABO().getColorBO(),"scalarColor",e.getCABO().getColorOffset(),e.getCABO().getColorBOStride(),n.context.UNSIGNED_BYTE,4,!0)||_f("Error setting scalarColor in shader VAO."):e.getVAO().removeAttributeArray("scalarColor"),e.getAttributeUpdateTime().modified()}if(n.renderable.getNumberOfClippingPlanes()){var i=n.renderable.getNumberOfClippingPlanes(),l=[],u=e.getCABO().getCoordShiftAndScaleEnabled()?e.getCABO().getInverseShiftAndScaleMatrix():null,s=u?b(n.tmpMat4,a.getMatrix()):a.getMatrix();u&&(w(s,s),A(s,s,u),w(s,s));for(var c=0;c<i;c++){var f=[];n.renderable.getClippingPlaneInDataCoords(s,c,f);for(var d=0;d<4;d++)l.push(f[d])}e.getProgram().setUniformi("numClipPlanes",i),e.getProgram().setUniform4fv("clipPlanes",l)}n.internalColorTexture&&e.getProgram().isUniformUsed("texture1")&&e.getProgram().setUniformi("texture1",n.internalColorTexture.getTextureUnit());var p=n.openGLActor.getActiveTextures();if(p)for(var g=0;g<p.length;++g){var m=p[g].getTextureUnit(),v="texture".concat(m+1);e.getProgram().isUniformUsed(v)&&e.getProgram().setUniformi(v,m)}if(n.haveSeenDepthRequest&&e.getProgram().setUniformi("depthRequest",n.renderDepth?1:0),e.getProgram().isUniformUsed("coffset")){var h=r.getCoincidentParameters(t,a);e.getProgram().setUniformf("coffset",h.offset),e.getProgram().isUniformUsed("cfactor")&&e.getProgram().setUniformf("cfactor",h.factor)}e.setMapperShaderParameters(t,a,n._openGLRenderer.getTiledSizeAndOrigin());var y=n._openGLRenderer.getSelector();e.getProgram().setUniform3fArray("mapperIndex",y?y.getPropColorValue():[0,0,0]),e.getProgram().setUniformi("picking",y?y.getCurrentPass()+1:0)},r.setLightingShaderParameters=function(e,t,r){var a=n.lastBoundBO.getReferenceByName("lastLightComplexity");if(!(a<2)){for(var o=e.getProgram(),i=0,l=t.getLightsByReference(),u=0;u<l.length;++u){var s=l[u];if(s.getSwitch()>0){var c=s.getColorByReference(),f=s.getIntensity();n.lightColor[0]=c[0]*f,n.lightColor[1]=c[1]*f,n.lightColor[2]=c[2]*f;var d=s.getDirection(),p=t.getActiveCamera().getViewMatrix(),g=$e(d);s.lightTypeIsSceneLight()&&(g[0]=p[0]*d[0]+p[1]*d[1]+p[2]*d[2],g[1]=p[4]*d[0]+p[5]*d[1]+p[6]*d[2],g[2]=p[8]*d[0]+p[9]*d[1]+p[10]*d[2],xo(g)),n.lightDirection[0]=g[0],n.lightDirection[1]=g[1],n.lightDirection[2]=g[2],xo(n.lightDirection),o.setUniform3fArray("lightColor".concat(i),n.lightColor),o.setUniform3fArray("lightDirectionVC".concat(i),n.lightDirection),i++}}if(!(a<3)){var m=t.getActiveCamera().getViewMatrix();w(m,m),i=0;for(var v=0;v<l.length;++v){var h=l[v];if(h.getSwitch()>0){var y=h.getTransformedPosition(),b=new Float64Array(3);tn(b,y,m),o.setUniform3fArray("lightAttenuation".concat(i),h.getAttenuationValuesByReference()),o.setUniformi("lightPositional".concat(i),h.getPositional()),o.setUniformf("lightExponent".concat(i),h.getExponent()),o.setUniformf("lightConeAngle".concat(i),h.getConeAngle()),o.setUniform3fArray("lightPositionVC".concat(i),[b[0],b[1],b[2]]),i++}}}}},r.setCameraShaderParameters=function(r,o,i){var l=r.getProgram(),u=n.openGLCamera.getKeyMatrices(o),s=o.getActiveCamera(),c=n.openGLCamera.getKeyMatrixTime().getMTime(),f=l.getLastCameraMTime(),d=r.getCABO().getCoordShiftAndScaleEnabled()?r.getCABO().getInverseShiftAndScaleMatrix():null,p=i.getIsIdentity(),g=p?{mcwc:null,normalMatrix:null}:n.openGLActor.getKeyMatrices();if(i.getCoordinateSystem()===Vf.DISPLAY){var m=n._openGLRenderer.getTiledSizeAndOrigin();S(n.tmpMat4),n.tmpMat4[0]=2/m.usize,n.tmpMat4[12]=-1,n.tmpMat4[5]=2/m.vsize,n.tmpMat4[13]=-1,A(n.tmpMat4,n.tmpMat4,d),l.setUniformMatrix("MCPCMatrix",n.tmpMat4)}else l.setUniformMatrix("MCPCMatrix",a([u.wcpc,g.mcwc,d],e,n.tmpMat4));l.isUniformUsed("MCVCMatrix")&&l.setUniformMatrix("MCVCMatrix",a([u.wcvc,g.mcwc,d],e,n.tmpMat4)),l.isUniformUsed("normalMatrix")&&l.setUniformMatrix3x3("normalMatrix",a([u.normalMatrix,g.normalMatrix],t,n.tmpMat3)),f!==c&&(l.isUniformUsed("cameraParallel")&&l.setUniformi("cameraParallel",s.getParallelProjection()),l.setLastCameraMTime(c)),p||l.setLastCameraMTime(0)},r.setPropertyShaderParameters=function(e,t,r){var a=e.getProgram(),o=r.getProperty(),i=o.getOpacity(),l=n.drawingEdges?o.getEdgeColorByReference():o.getAmbientColorByReference(),u=n.drawingEdges?o.getEdgeColorByReference():o.getDiffuseColorByReference(),s=n.drawingEdges?1:o.getAmbient(),c=n.drawingEdges?0:o.getDiffuse(),f=n.drawingEdges?0:o.getSpecular(),d=o.getSpecularPower();a.setUniformf("opacityUniform",i),a.setUniform3fArray("ambientColorUniform",l),a.setUniform3fArray("diffuseColorUniform",u),a.setUniformf("ambient",s),a.setUniformf("diffuse",c);var p=n.lastBoundBO.getReferenceByName("lastLightComplexity");if(!(p<1)){var g=o.getSpecularColorByReference();if(a.setUniform3fArray("specularColorUniform",g),a.setUniformf("specularPowerUniform",d),a.setUniformf("specular",f),a.isUniformUsed("ambientIntensityBF")){if(i=(o=r.getBackfaceProperty()).getOpacity(),l=o.getAmbientColor(),s=o.getAmbient(),u=o.getDiffuseColor(),c=o.getDiffuse(),g=o.getSpecularColor(),f=o.getSpecular(),a.setUniformf("ambientIntensityBF",s),a.setUniformf("diffuseIntensityBF",c),a.setUniformf("opacityUniformBF",i),a.setUniform3fArray("ambientColorUniformBF",l),a.setUniform3fArray("diffuseColorUniformBF",u),p<1)return;a.setUniformf("specularIntensityBF",f),a.setUniform3fArray("specularColorUniformBF",g),a.setUniformf("specularPowerUniformBF",d)}}},r.updateMaximumPointCellIds=function(e,t){var r,a,o,i,l=n._openGLRenderer.getSelector();if(l){if(null!==(r=n.selectionWebGLIdsToVTKIds)&&void 0!==r&&null!==(a=r.points)&&void 0!==a&&a.length){var u=n.selectionWebGLIdsToVTKIds.points.length;l.setMaximumPointId(u-1)}if(null!==(o=n.selectionWebGLIdsToVTKIds)&&void 0!==o&&null!==(i=o.cells)&&void 0!==i&&i.length){var s=n.selectionWebGLIdsToVTKIds.cells.length;l.setMaximumCellId(s-1)}l.getFieldAssociation()===Af.FIELD_ASSOCIATION_POINTS&&(n.pointPicking=!0)}},r.renderPieceStart=function(e,t){n.primitiveIDOffset=0,n.vertexIDOffset=0;var a=function(e){var t=e.getSelector();return t?t.getCurrentPass():zu.MIN_KNOWN_PASS-1}(n._openGLRenderer);n.lastSelectionState!==a&&(n.selectionStateChanged.modified(),n.lastSelectionState=a),n._openGLRenderer.getSelector()&&n._openGLRenderer.getSelector().renderProp(t),r.updateBufferObjects(e,t),n.renderable.getColorTextureMap()&&n.internalColorTexture.activate(),n.lastBoundBO=null},r.renderPieceDraw=function(e,t){for(var a=t.getProperty().getRepresentation(),o=t.getProperty().getEdgeVisibility()&&a===If.SURFACE,i=n._openGLRenderer.getSelector(),l=i&&i.getFieldAssociation()===Af.FIELD_ASSOCIATION_POINTS&&(n.lastSelectionState===zu.ID_LOW24||n.lastSelectionState===zu.ID_HIGH24),u=Ef.Start;u<Ef.End;u++){n.primitives[u].setPointPicking(l),n.primitives[u].getCABO().getElementCount()&&(n.drawingEdges=o&&(u===Ef.TrisEdges||u===Ef.TriStripsEdges),n.drawingEdges&&(n.renderDepth||n.lastSelectionState>=0)||(n.lastBoundBO=n.primitives[u],n.primitiveIDOffset+=n.primitives[u].drawArrays(e,t,a,r),n.vertexIDOffset+=n.primitives[u].getCABO().getElementCount()))}},r.renderPieceFinish=function(e,t){n.LastBoundBO&&n.LastBoundBO.getVAO().release(),n.renderable.getColorTextureMap()&&n.internalColorTexture.deactivate()},r.renderPiece=function(e,t){if(r.invokeEvent(Lf),n.renderable.getStatic()||n.renderable.update(),n.currentInput=n.renderable.getInputData(),r.invokeEvent(Bf),n.currentInput){if(n.currentInput.getPoints&&n.currentInput.getPoints().getNumberOfValues()){var a=n.context,o=t.getProperty().getBackfaceCulling(),i=t.getProperty().getFrontfaceCulling();o||i?i?(n._openGLRenderWindow.enableCullFace(),a.cullFace(a.FRONT)):(n._openGLRenderWindow.enableCullFace(),a.cullFace(a.BACK)):n._openGLRenderWindow.disableCullFace(),r.renderPieceStart(e,t),r.renderPieceDraw(e,t),r.renderPieceFinish(e,t)}}else _f("No input!")},r.computeBounds=function(e,t){r.getInput()?n.bounds=r.getInput().getBounds():_o(n.bounds)},r.updateBufferObjects=function(e,t){r.getNeedToRebuildBufferObjects(e,t)&&r.buildBufferObjects(e,t)},r.getNeedToRebuildBufferObjects=function(e,t){var a=n.VBOBuildTime.getMTime();return a<r.getMTime()||a<n.renderable.getMTime()||a<t.getMTime()||a<n.currentInput.getMTime()},r.buildBufferObjects=function(e,t){var a=n.currentInput;if(null!==a){n.renderable.mapScalars(a,1);var o=n.renderable.getColorMapColors();n.haveCellScalars=!1;var i=n.renderable.getScalarMode();n.renderable.getScalarVisibility()&&(i!==Mf.USE_CELL_DATA&&i!==Mf.USE_CELL_FIELD_DATA&&i!==Mf.USE_FIELD_DATA&&a.getPointData().getScalars()||i===Mf.USE_POINT_FIELD_DATA||!o||(n.haveCellScalars=!0));var l=t.getProperty().getInterpolation()!==Rf.FLAT?a.getPointData().getNormals():null;null===l&&a.getCellData().getNormals()&&(n.haveCellNormals=!0,l=a.getCellData().getNormals());var u=t.getProperty().getRepresentation(),s=a.getPointData().getTCoords();if(n.openGLActor.getActiveTextures()||(s=null),n.renderable.getColorCoordinates()){s=n.renderable.getColorCoordinates(),n.internalColorTexture||(n.internalColorTexture=xf.newInstance({resizable:!0}));var c=n.internalColorTexture;c.setMinificationFilter(Df.NEAREST),c.setMagnificationFilter(Df.NEAREST),c.setWrapS(kf.CLAMP_TO_EDGE),c.setWrapT(kf.CLAMP_TO_EDGE),c.setOpenGLRenderWindow(n._openGLRenderWindow);var f=n.renderable.getColorTextureMap(),d=f.getExtent(),p=f.getPointData().getScalars();c.create2DFromRaw(d[1]-d[0]+1,d[3]-d[2]+1,p.getNumberOfComponents(),p.getDataType(),p.getData()),c.activate(),c.sendParameters(),c.deactivate()}var g="".concat(a.getMTime(),"A").concat(u,"B").concat(a.getMTime())+"C".concat(l?l.getMTime():1,"D").concat(o?o.getMTime():1)+"E".concat(t.getProperty().getEdgeVisibility())+"F".concat(s?s.getMTime():1);if(n.VBOBuildString!==g){var m={points:a.getPoints(),normals:l,tcoords:s,colors:o,cellOffset:0,vertexOffset:0,haveCellScalars:n.haveCellScalars,haveCellNormals:n.haveCellNormals,customAttributes:n.renderable.getCustomShaderAttributes().map((function(e){return a.getPointData().getArrayByName(e)}))};n.renderable.getPopulateSelectionSettings()&&(n.selectionWebGLIdsToVTKIds={points:null,cells:null});for(var v=[{inRep:"verts",cells:a.getVerts()},{inRep:"lines",cells:a.getLines()},{inRep:"polys",cells:a.getPolys()},{inRep:"strips",cells:a.getStrips()},{inRep:"polys",cells:a.getPolys()},{inRep:"strips",cells:a.getStrips()}],h=t.getProperty().getEdgeVisibility()&&u===If.SURFACE,y=Ef.Start;y<Ef.End;y++)y!==Ef.TrisEdges&&y!==Ef.TriStripsEdges?(m.cellOffset+=n.primitives[y].getCABO().createVBO(v[y].cells,v[y].inRep,u,m,n.selectionWebGLIdsToVTKIds),m.vertexOffset+=n.primitives[y].getCABO().getElementCount()):h?n.primitives[y].getCABO().createVBO(v[y].cells,v[y].inRep,If.WIREFRAME,Of(Of({},m),{},{tcoords:null,colors:null,haveCellScalars:!1,haveCellNormals:!1})):n.primitives[y].releaseGraphicsResources();n.renderable.getPopulateSelectionSettings()&&(n.renderable.setSelectionWebGLIdsToVTKIds(n.selectionWebGLIdsToVTKIds),r.updateMaximumPointCellIds()),n.VBOBuildTime.modified(),n.VBOBuildString=g}}}}var Ff={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastSelectionState:zu.MIN_KNOWN_PASS-1,selectionStateChanged:null,selectionWebGLIdsToVTKIds:null,pointPicking:!1};function Uf(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ff,r),ar.extend(e,t,r),Cf.implementReplaceShaderCoincidentOffset(e,t,r),Cf.implementBuildShadersWithReplacements(e,t,r),t.primitives=[],t.primTypes=Ef,t.tmpMat3=Te(new Float64Array(9)),t.tmpMat4=S(new Float64Array(16));for(var n=Ef.Start;n<Ef.End;n++)t.primitives[n]=rf.newInstance(),t.primitives[n].setPrimitiveType(n),t.primitives[n].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);zt(e,t,["context"]),t.VBOBuildTime={},Vt(t.VBOBuildTime,{mtime:0}),t.selectionStateChanged={},Vt(t.selectionStateChanged,{mtime:0}),Nf(e,t)}var Gf=Yt(Uf,"vtkOpenGLPolyDataMapper");sr("vtkMapper",Gf);var jf=mu.ColorMode,zf=mu.ScalarMode,Wf=mu.GetArray;var Hf={static:!1,lookupTable:null,scalarVisibility:!1,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,transformCoordinate:null,viewSpecificProperties:null,customShaderAttributes:[]};function Kf(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Hf,r),_l.extend(e,t,r),er.get(e,t,["colorMapColors"]),er.setGet(e,t,["arrayAccessMode","colorByArrayName","colorMode","lookupTable","renderTime","scalarMode","scalarVisibility","static","transformCoordinate","useLookupTableScalarRange","viewSpecificProperties","customShaderAttributes"]),er.setGetArray(e,t,["scalarRange"],2),t.viewSpecificProperties||(t.viewSpecificProperties={}),function(e,t){t.classHierarchy.push("vtkMapper2D"),e.createDefaultLookupTable=function(){t.lookupTable=ku.newInstance()},e.getColorModeAsString=function(){return er.enumToString(jf,t.colorMode)},e.setColorModeToDefault=function(){return e.setColorMode(0)},e.setColorModeToMapScalars=function(){return e.setColorMode(1)},e.setColorModeToDirectScalars=function(){return e.setColorMode(2)},e.getScalarModeAsString=function(){return er.enumToString(zf,t.scalarMode)},e.setScalarModeToDefault=function(){return e.setScalarMode(0)},e.setScalarModeToUsePointData=function(){return e.setScalarMode(1)},e.setScalarModeToUseCellData=function(){return e.setScalarMode(2)},e.setScalarModeToUsePointFieldData=function(){return e.setScalarMode(3)},e.setScalarModeToUseCellFieldData=function(){return e.setScalarMode(4)},e.setScalarModeToUseFieldData=function(){return e.setScalarMode(5)},e.getAbstractScalars=function(e,r,n,a,o){if(!e||!t.scalarVisibility)return{scalars:null,cellFLag:!1};var i=null,l=!1;if(r===zf.DEFAULT)(i=e.getPointData().getScalars())||(i=e.getCellData().getScalars(),l=!0);else if(r===zf.USE_POINT_DATA)i=e.getPointData().getScalars();else if(r===zf.USE_CELL_DATA)i=e.getCellData().getScalars(),l=!0;else if(r===zf.USE_POINT_FIELD_DATA){var u=e.getPointData();i=n===Wf.BY_ID?u.getArrayByIndex(a):u.getArrayByName(o)}else if(r===zf.USE_CELL_FIELD_DATA){var s=e.getCellData();l=!0,i=n===Wf.BY_ID?s.getArrayByIndex(a):s.getArrayByName(o)}else if(r===zf.USE_FIELD_DATA){var c=e.getFieldData();i=n===Wf.BY_ID?c.getArrayByIndex(a):c.getArrayByName(o)}return{scalars:i,cellFlag:l}},e.getLookupTable=function(){return t.lookupTable||e.createDefaultLookupTable(),t.lookupTable},e.getMTime=function(){var e=t.mtime;if(null!==t.lookupTable){var r=t.lookupTable.getMTime();e=r>e?r:e}return e},e.mapScalars=function(r,n){var a=e.getAbstractScalars(r,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName).scalars;if(a){var o="".concat(e.getMTime()).concat(a.getMTime()).concat(n);if(t.colorBuildString!==o){t.useLookupTableScalarRange||e.getLookupTable().setRange(t.scalarRange[0],t.scalarRange[1]);var i=e.getLookupTable();i&&(i.build(),t.colorMapColors=i.mapScalars(a,t.colorMode,t.fieldDataTupleId)),t.colorBuildString="".concat(e.getMTime()).concat(a.getMTime()).concat(n)}}else t.colorMapColors=null}}(e,t)}var Xf={newInstance:er.newInstance(Kf,"vtkMapper2D"),extend:Kf},qf="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyData2DFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nuniform int PrimitiveIDOffset;\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// Scalar coloring\n//VTK::Color::Dec\n\n// Depth Peeling\n//VTK::DepthPeeling::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// the output of this shader\n//VTK::Output::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\nvoid main()\n{\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  //VTK::Color::Impl\n  //VTK::TCoord::Impl\n\n  //VTK::DepthPeeling::Impl\n  //VTK::Picking::Impl\n\n  if (gl_FragData[0].a <= 0.0)\n    {\n    discard;\n    }\n}\n",Yf="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyData2DVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\n// all variables that represent positions or directions have a suffix\n// indicating the coordinate system they are in. The possible values are\n// MC - Model Coordinates\n// WC - WC world coordinates\n// VC - View Coordinates\n// DC - Display Coordinates\n\nin vec4 vertexWC;\n\n// frag position in VC\n//VTK::PositionVC::Dec\n\n// material property values\n//VTK::Color::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\nuniform mat4 WCVCMatrix;  // World to view matrix\n\nvoid main()\n{\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  gl_Position = WCVCMatrix*vertexWC;\n\n  //VTK::TCoord::Impl\n\n  //VTK::Color::Impl\n\n  //VTK::PositionVC::Impl\n}\n",Qf={BACKGROUND:0,FOREGROUND:1},$f={DisplayLocation:Qf},Zf=rf.primTypes,Jf=Xf.ScalarMode,ed=Ot,td={type:"StartEvent"},rd={type:"EndEvent"};var nd={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null};function ad(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(r,nd,n),ar.extend(t,r,n),Cf.implementReplaceShaderCoincidentOffset(t,r,n),Cf.implementBuildShadersWithReplacements(t,r,n),r.primitives=[],r.primTypes=Zf,r.tmpMat4=S(new Float64Array(16));for(var a=Zf.Start;a<Zf.End;a++)r.primitives[a]=rf.newInstance(),r.primitives[a].setPrimitiveType(a),r.primitives[a].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);zt(t,r,["context"]),r.VBOBuildTime={},Vt(r.VBOBuildTime,{mtime:0}),function(t,r){r.classHierarchy.push("vtkOpenGLPolyDataMapper2D"),t.buildPass=function(e){e&&(r.openGLActor2D=t.getFirstAncestorOfType("vtkOpenGLActor2D"),r._openGLRenderer=r.openGLActor2D.getFirstAncestorOfType("vtkOpenGLRenderer"),r._openGLRenderWindow=r._openGLRenderer.getParent(),r.openGLCamera=r._openGLRenderer.getViewNodeFor(r._openGLRenderer.getRenderable().getActiveCamera()))},t.overlayPass=function(e){e&&t.render()},t.getShaderTemplate=function(e,t,r){e.Vertex=Yf,e.Fragment=qf,e.Geometry=""},t.render=function(){var e=r._openGLRenderWindow.getContext();if(r.context!==e){r.context=e;for(var n=Zf.Start;n<Zf.End;n++)r.primitives[n].setOpenGLRenderWindow(r._openGLRenderWindow)}var a=r.openGLActor2D.getRenderable(),o=r._openGLRenderer.getRenderable();t.renderPiece(o,a)},t.renderPiece=function(e,n){t.invokeEvent(td),r.renderable.getStatic()||r.renderable.update(),r.currentInput=r.renderable.getInputData(),t.invokeEvent(rd),r.currentInput?r.currentInput.getPoints&&r.currentInput.getPoints().getNumberOfValues()&&(t.renderPieceStart(e,n),t.renderPieceDraw(e,n),t.renderPieceFinish(e,n)):ed("No input!")},t.renderPieceStart=function(e,n){r.primitiveIDOffset=0,r._openGLRenderer.getSelector()&&(r._openGLRenderer.getSelector().getCurrentPass(),r._openGLRenderer.getSelector().renderProp(n)),t.updateBufferObjects(e,n),r.lastBoundBO=null},t.getNeedToRebuildShaders=function(e,t,n){return e.getShaderSourceTime().getMTime()<r.renderable.getMTime()||e.getShaderSourceTime().getMTime()<r.currentInput.getMTime()},t.updateBufferObjects=function(e,r){t.getNeedToRebuildBufferObjects(e,r)&&t.buildBufferObjects(e,r)},t.getNeedToRebuildBufferObjects=function(e,n){var a=r.VBOBuildTime.getMTime();return!!(a<t.getMTime()||a<r._openGLRenderWindow.getMTime()||a<r.renderable.getMTime()||a<n.getMTime()||a<r.currentInput.getMTime()||r.renderable.getTransformCoordinate()&&a<e.getMTime())},t.buildBufferObjects=function(e,t){var n=r.currentInput;if(null!==n){r.renderable.mapScalars(n,t.getProperty().getOpacity());var a=r.renderable.getColorMapColors();r.haveCellScalars=!1;var o=r.renderable.getScalarMode();r.renderable.getScalarVisibility()&&(o!==Jf.USE_CELL_DATA&&o!==Jf.USE_CELL_FIELD_DATA&&o!==Jf.USE_FIELD_DATA&&n.getPointData().getScalars()||o===Jf.USE_POINT_FIELD_DATA||!a||(r.haveCellScalars=!0));var i=t.getProperty().getRepresentation(),l=n.getPointData().getTCoords();r.openGLActor2D.getActiveTextures()||(l=null);var u=r.renderable.getTransformCoordinate(),s=e.getRenderWindow().getViews()[0].getViewportSize(e),c="".concat(n.getMTime(),"A").concat(i,"B").concat(n.getMTime())+"C".concat(a?a.getMTime():1)+"D".concat(l?l.getMTime():1)+"E".concat(u?e.getMTime():1)+"F".concat(s);if(r.VBOBuildString!==c){var f=n.getPoints();if(u){var d=vs.newInstance(),p=f.getNumberOfPoints();d.setNumberOfPoints(p);for(var g=[],m=0;m<p;++m){f.getPoint(m,g),u.setValue(g);var v=u.getComputedDoubleViewportValue(e);d.setPoint(m,v[0],v[1],0)}f=d}var h={points:f,tcoords:l,colors:a,cellOffset:0,haveCellScalars:r.haveCellSCalars,customAttributes:r.renderable.getCustomShaderAttributes().map((function(e){return n.getPointData().getArrayByName(e)}))};h.cellOffset+=r.primitives[Zf.Points].getCABO().createVBO(n.getVerts(),"verts",i,h),h.cellOffset+=r.primitives[Zf.Lines].getCABO().createVBO(n.getLines(),"lines",i,h),h.cellOffset+=r.primitives[Zf.Tris].getCABO().createVBO(n.getPolys(),"polys",i,h),h.cellOffset+=r.primitives[Zf.TriStrips].getCABO().createVBO(n.getStrips(),"strips",i,h),r.VBOBuildTime.modified(),r.VBOBuildString=c}}},t.renderPieceDraw=function(e,n){var a=n.getProperty().getRepresentation();r.context.depthMask(!0);for(var o=Zf.Start;o<Zf.End;o++)r.primitives[o].getCABO().getElementCount()&&(r.lastBoundBO=r.primitives[o],r.primitiveIDOffset+=r.primitives[o].drawArrays(e,n,a,t))},t.renderPieceFinish=function(e,t){r.lastBoundBO&&r.lastBoundBO.getVAO().release()},t.replaceShaderValues=function(e,r,n){t.replaceShaderColor(e,r,n),t.replaceShaderTCoord(e,r,n),t.replaceShaderPicking(e,r,n),t.replaceShaderPositionVC(e,r,n)},t.replaceShaderColor=function(e,t,n){var a=e.Vertex,o=e.Geometry,i=e.Fragment;r.haveCellScalars&&(i=Yc.substitute(i,"//VTK::Color::Dec",["uniform samplerBuffer texture1;"]).result,i=Yc.substitute(i,"//VTK::Color::Impl",["gl_FragData[0] = texelFetchBuffer(texture1, gl_PrimitiveID + PrimitiveIDOffset);"]).result),0!==r.lastBoundBO.getCABO().getColorComponents()?(a=Yc.substitute(a,"//VTK::Color::Dec",["in vec4 diffuseColor;","out vec4 fcolorVSOutput;"]).result,a=Yc.substitute(a,"//VTK::Color::Impl",["fcolorVSOutput = diffuseColor;"]).result,o=Yc.substitute(o,"//VTK::Color::Dec",["in vec4 fcolorVSOutput[];\n","out vec4 fcolorGSOutput;"]).result,o=Yc.substitute(o,"//VTK::Color::Impl",["fcolorGSOutput = fcolorVSOutput[i];"]).result,i=Yc.substitute(i,"//VTK::Color::Dec",["in vec4 fcolorVSOutput;"]).result,i=Yc.substitute(i,"//VTK::Color::Impl",["gl_FragData[0] = fcolorVSOutput;"]).result):(i=Yc.substitute(i,"//VTK::Color::Dec",["uniform vec4 diffuseColor;"]).result,i=Yc.substitute(i,"//VTK::Color::Impl",["gl_FragData[0] = diffuseColor;"]).result),e.Vertex=a,e.Geometry=o,e.Fragment=i},t.replaceShaderTCoord=function(e,t,n){if(r.lastBoundBO.getCABO().getTCoordOffset()){var a=e.Vertex,o=e.Geometry,i=e.Fragment,l=r.lastBoundBO.getCABO().getTCoordComponents();1===l?(a=Yc.substitute(a,"//VTK::TCoord::Dec",["in float tcoordMC;","out float tcoordVCVSOutput;"]).result,a=Yc.substitute(a,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,o=Yc.substitute(o,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput[];\n","out float tcoordVCGSOutput;"]).result,o=Yc.substitute(o,["//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,i=Yc.substitute(i,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,i=Yc.substitute(i,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, vec2(tcoordVCVSOutput,0));"]).result):2===l&&(a=Yc.substitute(a,"//VTK::TCoord::Dec",["in vec2 tcoordMC;","out vec2 tcoordVCVSOutput;"]).result,a=Yc.substitute(a,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,o=Yc.substitute(o,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];\n","out vec2 tcoordVCGSOutput;"]).result,o=Yc.substitute(o,"//VTK::TCoord::Impl",["tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,i=Yc.substitute(i,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,i=Yc.substitute(i,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, tcoordVCVSOutput.st);"]).result),r.haveCellScalars&&(o=Yc.substitute(o,"//VTK::PrimID::Impl",["gl_PrimitiveID = gl_PrimitiveIDIn;"]).result),e.Vertex=a,e.Geometry=o,e.Fragment=i}},t.replaceShaderPicking=function(e,t,r){var n=e.Fragment;n=Yc.substitute(n,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,n=Yc.substitute(n,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,e.Fragment=n},t.replaceShaderPositionVC=function(e,t,n){r.lastBoundBO.replaceShaderPositionVC(e,t,n)},t.invokeShaderCallbacks=function(e,t,n){var a=r.renderable.getViewSpecificProperties().ShadersCallbacks;a&&a.forEach((function(r){r.callback(r.userData,e,t,n)}))},t.setMapperShaderParameters=function(e,t,n){if(e.getProgram().isUniformUsed("PrimitiveIDOffset")&&e.getProgram().setUniformi("PrimitiveIDOffset",r.primitiveIDOffset),e.getProgram().isAttributeUsed("vertexWC")&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"vertexWC",e.getCABO().getVertexOffset(),e.getCABO().getStride(),r.context.FLOAT,3,!1)||ed("Error setting vertexWC in shader VAO.")),e.getCABO().getElementCount()&&(r.VBOBuildTime.getMTime()>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())){r.renderable.getCustomShaderAttributes().forEach((function(t,n){e.getProgram().isAttributeUsed("".concat(t,"MC"))&&(e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"".concat(t,"MC"),e.getCABO().getCustomData()[n].offset,e.getCABO().getStride(),r.context.FLOAT,e.getCABO().getCustomData()[n].components,!1)||ed("Error setting ".concat(t,"MC in shader VAO.")))})),e.getProgram().isAttributeUsed("tcoordMC")&&e.getCABO().getTCoordOffset()?e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"tcoordMC",e.getCABO().getTCoordOffset(),e.getCABO().getStride(),r.context.FLOAT,e.getCABO().getTCoordComponents(),!1)||ed("Error setting tcoordMC in shader VAO."):e.getVAO().removeAttributeArray("tcoordMC"),r.internalColorTexture&&e.getProgram().isUniformUsed("texture1")&&e.getProgram().setUniformi("texture1",r.internalColorTexture.getTextureUnit());var a=r.openGLActor2D.getActiveTextures();if(a)for(var o=0;o<a.length;++o){var i=a[o].getTextureUnit(),l="texture".concat(i+1);e.getProgram().isUniformUsed(l)&&e.getProgram().setUniformi(l,i)}e.setMapperShaderParameters(t,n,r._openGLRenderer.getTiledSizeAndOrigin());var u=r._openGLRenderer.getSelector();e.getProgram().setUniform3fArray("mapperIndex",u?u.getPropColorValue():[0,0,0]),e.getProgram().setUniformi("picking",u?u.getCurrentPass()+1:0)}},t.setPropertyShaderParameters=function(e,t,n){var a=r.renderable.getColorMapColors();if(!a||0===a.getNumberOfComponents()){var o=e.getProgram(),i=n.getProperty(),l=i.getOpacity(),u=i.getColor(),s=[u[0],u[1],u[2],l];o.setUniform4f("diffuseColor",s)}},t.setLightingShaderParameters=function(e,t,r){},t.setCameraShaderParameters=function(t,n,a){var o=t.getProgram(),i=t.getCABO().getCoordShiftAndScaleEnabled()?t.getCABO().getInverseShiftAndScaleMatrix():null,l=n.getRenderWindow().getViews()[0].getViewportSize(n),u=n.getViewport(),s=a.getActualPositionCoordinate().getComputedDoubleViewportValue(n),c=[0,0,1,1],f=[0,0,1,1];if(f[0]=u[0]>=c[0]?u[0]:c[0],f[1]=u[1]>=c[1]?u[1]:c[1],f[2]=u[2]<=c[2]?u[2]:c[2],f[3]=u[3]<=c[3]?u[3]:c[3],!(f[0]>=f[2])&&!(f[1]>=f[3])){l[0]=fo(l[0]*(f[2]-f[0])/(u[2]-u[0])),l[1]=fo(l[1]*(f[3]-f[1])/(u[3]-u[1]));var d=r._openGLRenderer.getParent().getSize(),p=fo(s[0]-(f[0]-u[0])*d[0]),g=fo(s[1]-(f[1]-u[1])*d[1]),m=-p,v=-p+l[0],h=-g,y=-g+l[1];m===v&&(v=m+1),h===y&&(y=h+1);var b,T,x,C=S(new Float64Array(16));C[0]=2/(v-m),C[5]=2/(y-h),C[3]=-1*(v+m)/(v-m),C[7]=-1*(y+h)/(y-h),C[10]=0,C[11]=a.getProperty().getDisplayLocation()===Qf.FOREGROUND?-1:1,C[15]=1,w(C,C),o.setUniformMatrix("WCVCMatrix",(b=[C,i],T=e,x=r.tmpMat4,T.identity(x),b.reduce((function(e,t,r){return 0===r?t?T.copy(e,t):T.identity(e):t?T.multiply(e,e,t):e}),x)))}}}(t,r)}var od=Yt(ad,"vtkOpenGLPolyDataMapper2D");function id(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ld(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?id(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):id(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}sr("vtkMapper2D",od);var ud=Ou.VectorMode;function sd(e,t){e.strokeStyle=t.strokeColor,e.lineWidth=t.strokeSize,e.fillStyle=t.fontColor,e.font="".concat(t.fontStyle," ").concat(t.fontSize,"px ").concat(t.fontFamily)}function cd(e,t){return function(e){var r=e.getLastSize(),n=Math.pow(r[0]/700,.8),a=Math.pow(r[1]/700,.8),o=Math.min(n,a),i=e.getAxisTextStyle(),l=e.getTickTextStyle();Object.assign(i,t.axisTextStyle),Object.assign(l,t.tickTextStyle),i.fontSize=Math.max(24*o,12),e.getLastAspectRatio()>1?l.fontSize=Math.max(20*o,10):l.fontSize=Math.max(16*o,10);var u=e.updateTextureAtlas();e.setTopTitle(!1);var s=e.getBoxSizeByReference();if(e.getLastAspectRatio()>1)e.setTickLabelPixelOffset(.3*l.fontSize),u.titleWidth<=u.tickWidth+e.getTickLabelPixelOffset()+.8*l.fontSize?(e.setTopTitle(!0),e.setAxisTitlePixelOffset(.2*l.fontSize),s[0]=2*(u.tickWidth+e.getTickLabelPixelOffset()+.8*l.fontSize)/r[0],e.setBoxPosition([.98-s[0],-.92])):(e.setAxisTitlePixelOffset(.2*l.fontSize),s[0]=2*(u.titleHeight+e.getAxisTitlePixelOffset()+u.tickWidth+e.getTickLabelPixelOffset()+.8*l.fontSize)/r[0],e.setBoxPosition([.99-s[0],-.92])),s[1]=Math.max(1.2,Math.min(1.84/a,1.84));else{e.setAxisTitlePixelOffset(1.2*l.fontSize),e.setTickLabelPixelOffset(.1*l.fontSize);var c=2*(.8*l.fontSize+u.titleHeight+e.getAxisTitlePixelOffset())/r[1],f=2*u.tickWidth/r[0];s[0]=Math.min(1.9,Math.max(1.4,1.4*f*(e.getTicks().length+3))),s[1]=c,e.setBoxPosition([-.5*s[0],-.97])}e.recomputeBarSegments(u)}}function fd(e,t){return function(e){var t=e.getLastTickBounds(),r=to().domain([t[0],t[1]]),n=r.ticks(5),a=r.tickFormat(5);e.setTicks(n),e.setTickStrings(n.map(a))}}var dd=er.newInstance((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{renderable:null};Object.assign(t,{},r),er.obj(e,t),er.setGet(e,t,["axisTitlePixelOffset","tickLabelPixelOffset","renderable","topTitle","ticks","tickStrings"]),er.get(e,t,["lastSize","lastAspectRatio","lastTickBounds","axisTextStyle","tickTextStyle","barActor","tmActor"]),er.getArray(e,t,["boxPosition","boxSize"]),er.setArray(e,t,["boxPosition","boxSize"],2),t.forceUpdate=!1,t.lastRebuildTime={},er.obj(t.lastRebuildTime,{mtime:0}),t.lastSize=[-1,-1],t.tmCanvas=document.createElement("canvas"),t.tmContext=t.tmCanvas.getContext("2d"),t._tmAtlas=new Map,t.barMapper=as.newInstance(),t.barMapper.setInterpolateScalarsBeforeMapping(!0),t.barMapper.setUseLookupTableScalarRange(!0),t.polyData=rc.newInstance(),t.barMapper.setInputData(t.polyData),t.barActor=hl.newInstance(),t.barActor.setMapper(t.barMapper),t.tmPolyData=rc.newInstance(),t.tmMapper=as.newInstance(),t.tmMapper.setInputData(t.tmPolyData),t.tmTexture=lc.newInstance({resizable:!0}),t.tmTexture.setInterpolate(!1),t.tmActor=hl.newInstance({parentProp:e}),t.tmActor.setMapper(t.tmMapper),t.tmActor.addTexture(t.tmTexture),t.barPosition=[0,0],t.barSize=[0,0],t.boxPosition=[.88,-.92],t.boxSize=[.1,1.1],t.lastTickBounds=[],function(e,t){t.classHierarchy.push("vtkScalarBarActorHelper"),e.setRenderable=function(r){t.renderable!==r&&(t.renderable=r,t.barActor.setProperty(r.getProperty()),t.barActor.setParentProp(r),t.barActor.setCoordinateSystemToDisplay(),t.tmActor.setProperty(r.getProperty()),t.tmActor.setParentProp(r),t.tmActor.setCoordinateSystemToDisplay(),t.generateTicks=r.generateTicks,t.axisTextStyle=ld({},r.getAxisTextStyle()),t.tickTextStyle=ld({},r.getTickTextStyle()),e.modified())},e.updateAPISpecificData=function(r,n,a){t.lastSize[0]===r[0]&&t.lastSize[1]===r[1]||(t.lastSize[0]=r[0],t.lastSize[1]=r[1],t.lastAspectRatio=r[0]/r[1],t.forceUpdate=!0);var o=t.renderable.getScalarsToColors();if(o&&t.renderable.getVisibility()&&(t.barMapper.setLookupTable(o),t.camera=n,t.renderWindow=a,t.forceUpdate||Math.max(o.getMTime(),e.getMTime(),t.renderable.getMTime())>t.lastRebuildTime.getMTime())){var i=o.getMappingRange();if(t.lastTickBounds=$e(i),t.renderable.getGenerateTicks()(e),t.renderable.getAutomated())t.renderable.getAutoLayout()(e);else{t.axisTextStyle=ld({},t.renderable.getAxisTextStyle()),t.tickTextStyle=ld({},t.renderable.getTickTextStyle()),t.barPosition=$e(t.renderable.getBarPosition()),t.barSize=$e(t.renderable.getBarSize()),t.boxPosition=$e(t.renderable.getBoxPosition()),t.boxSize=$e(t.renderable.getBoxSize()),t.axisTitlePixelOffset=t.renderable.getAxisTitlePixelOffset(),t.tickLabelPixelOffset=t.renderable.getTickLabelPixelOffset();var l=e.updateTextureAtlas();e.recomputeBarSegments(l)}e.updatePolyDataForLabels(),e.updatePolyDataForBarSegments(),t.lastRebuildTime.modified(),t.forceUpdate=!1}},e.updateTextureAtlas=function(){t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left";var r={},n=new Map,a=0,o=1;sd(t.tmContext,t.axisTextStyle);var i=t.tmContext.measureText(t.renderable.getAxisLabel()),l={height:i.actualBoundingBoxAscent+2,startingHeight:o,width:i.width+2,textStyle:t.axisTextStyle};n.set(t.renderable.getAxisLabel(),l),o+=l.height,a=l.width,r.titleWidth=l.width,r.titleHeight=l.height,r.tickWidth=0,r.tickHeight=0,sd(t.tmContext,t.tickTextStyle);for(var u=[].concat($e(e.getTickStrings()),["NaN","Below","Above"]),s=0;s<u.length;s++)n.has(u[s])||(l={height:(i=t.tmContext.measureText(u[s])).actualBoundingBoxAscent+2,startingHeight:o,width:i.width+2,textStyle:t.tickTextStyle},n.set(u[s],l),o+=l.height,a<l.width&&(a=l.width),r.tickWidth<l.width&&(r.tickWidth=l.width),r.tickHeight<l.height&&(r.tickHeight=l.height));return a=po(a),o=po(o),n.forEach((function(e){e.tcoords=[0,(o-e.startingHeight-e.height)/o,e.width/a,(o-e.startingHeight-e.height)/o,e.width/a,(o-e.startingHeight)/o,0,(o-e.startingHeight)/o]})),t.tmCanvas.width=a,t.tmCanvas.height=o,t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left",t.tmContext.clearRect(0,0,a,o),n.forEach((function(e,r){sd(t.tmContext,e.textStyle),t.tmContext.fillText(r,1,e.startingHeight+e.height-1)})),t.tmTexture.setCanvas(t.tmCanvas),t.tmTexture.modified(),t._tmAtlas=n,r},e.computeBarSize=function(e){t.vertical=t.boxSize[1]>t.boxSize[0];var r=2*e.tickHeight/t.lastSize[1],n=[1,1];if(t.vertical){var a=2*(e.tickWidth+t.tickLabelPixelOffset)/t.lastSize[0];if(t.topTitle){var o=2*(e.titleHeight+t.axisTitlePixelOffset)/t.lastSize[1];t.barSize[0]=t.boxSize[0]-a,t.barSize[1]=t.boxSize[1]-o}else{var i=2*(e.titleHeight+t.axisTitlePixelOffset)/t.lastSize[0];t.barSize[0]=t.boxSize[0]-i-a,t.barSize[1]=t.boxSize[1]}t.barPosition[0]=t.boxPosition[0]+a,t.barPosition[1]=t.boxPosition[1],n[1]=r}else{var l=(2*e.tickWidth-8)/t.lastSize[0],u=2*(e.titleHeight+t.axisTitlePixelOffset)/t.lastSize[1];t.barSize[0]=t.boxSize[0],t.barPosition[0]=t.boxPosition[0],t.barSize[1]=t.boxSize[1]-u,t.barPosition[1]=t.boxPosition[1],n[0]=l}return n},e.recomputeBarSegments=function(r){var n,a,o,i,l=e.computeBarSize(r);t.barSegments=[];var u=[0,0],s=t.vertical?1:0,c=t.vertical?.01:.02;function f(e,r){t.barSegments.push({corners:[[].concat(u),[u[0]+l[0],u[1]],[u[0]+l[0],u[1]+l[1]],[u[0],u[1]+l[1]]],scalars:r,title:e}),u[s]+=l[s]+c}t.renderable.getDrawNanAnnotation()&&t.renderable.getScalarsToColors().getNanColor()&&f("NaN",[NaN,NaN,NaN,NaN]),t.renderable.getDrawBelowRangeSwatch()&&null!==(n=(a=t.renderable.getScalarsToColors()).getUseBelowRangeColor)&&void 0!==n&&n.call(a)&&f("Below",[-.1,-.1,-.1,-.1]);var d=null===(o=(i=t.renderable.getScalarsToColors()).getUseAboveRangeColor)||void 0===o?void 0:o.call(i);u[s]+=c;var p=l[s];l[s]=d?1-2*c-l[s]-u[s]:1-c-u[s],f("ticks",t.vertical?[0,0,.995,.995]:[0,.995,.995,0]),t.renderable.getDrawAboveRangeSwatch()&&d&&(l[s]=p,u[s]+=c,f("Above",[1.1,1.1,1.1,1.1]))};var r=new Float64Array(3);e.createPolyDataForOneLabel=function(e,n,a,o,i,l){var u=t._tmAtlas.get(e);if(u){var s=l.ptIdx,c=l.cellIdx;r[0]=(.5*n[0]+.5)*t.lastSize[0],r[1]=(.5*n[1]+.5)*t.lastSize[1],r[2]=n[2],r[0]+=i[0],r[1]+=i[1];var f=[],d="vertical"===o?[1,0]:[0,1];"vertical"===o?(f[0]=u.width,f[1]=-u.height,"middle"===a[0]?r[1]-=u.width/2:"right"===a[0]&&(r[1]-=u.width),"middle"===a[1]?r[0]+=u.height/2:"top"===a[1]&&(r[0]+=u.height)):(f[0]=u.width,f[1]=u.height,"middle"===a[0]?r[0]-=u.width/2:"right"===a[0]&&(r[0]-=u.width),"middle"===a[1]?r[1]-=u.height/2:"top"===a[1]&&(r[1]-=u.height)),l.points[3*s]=r[0],l.points[3*s+1]=r[1],l.points[3*s+2]=r[2],l.tcoords[2*s]=u.tcoords[0],l.tcoords[2*s+1]=u.tcoords[1],s++,r[d[0]]+=f[0],l.points[3*s]=r[0],l.points[3*s+1]=r[1],l.points[3*s+2]=r[2],l.tcoords[2*s]=u.tcoords[2],l.tcoords[2*s+1]=u.tcoords[3],s++,r[d[1]]+=f[1],l.points[3*s]=r[0],l.points[3*s+1]=r[1],l.points[3*s+2]=r[2],l.tcoords[2*s]=u.tcoords[4],l.tcoords[2*s+1]=u.tcoords[5],s++,r[d[0]]-=f[0],l.points[3*s]=r[0],l.points[3*s+1]=r[1],l.points[3*s+2]=r[2],l.tcoords[2*s]=u.tcoords[6],l.tcoords[2*s+1]=u.tcoords[7],s++,l.polys[4*c]=3,l.polys[4*c+1]=s-4,l.polys[4*c+2]=s-3,l.polys[4*c+3]=s-2,c++,l.polys[4*c]=3,l.polys[4*c+1]=s-4,l.polys[4*c+2]=s-2,l.polys[4*c+3]=s-1,l.ptIdx+=4,l.cellIdx+=2}};var n=new Float64Array(3);e.updatePolyDataForLabels=function(){var r=e.getTickStrings().length+t.barSegments.length,a=4*r,o=2*r,i=new Float64Array(3*a),l=new Uint16Array(4*o),u=new Float32Array(2*a),s={ptIdx:0,cellIdx:0,polys:l,points:i,tcoords:u},c=t.vertical?0:1,f=t.vertical?1:0;n[2]=-.99;var d=t.vertical?["right","middle"]:["middle","bottom"],p=[0,1],g=[0,0];t.vertical?(g[0]=-t.tickLabelPixelOffset,t.topTitle?(n[0]=t.boxPosition[0]+.5*t.boxSize[0],n[1]=t.barPosition[1]+t.barSize[1],e.createPolyDataForOneLabel(t.renderable.getAxisLabel(),n,["middle","bottom"],"horizontal",[0,t.axisTitlePixelOffset],s)):(n[0]=t.barPosition[0]+t.barSize[0],n[1]=t.barPosition[1]+.5*t.barSize[1],e.createPolyDataForOneLabel(t.renderable.getAxisLabel(),n,["middle","top"],"vertical",[t.axisTitlePixelOffset,0],s)),p=[-1,0]):(g[1]=t.tickLabelPixelOffset,n[0]=t.barPosition[0]+.5*t.barSize[0],n[1]=t.barPosition[1]+t.barSize[1],e.createPolyDataForOneLabel(t.renderable.getAxisLabel(),n,["middle","bottom"],"horizontal",[0,t.axisTitlePixelOffset],s)),n[c]=t.barPosition[c]+(.5*p[c]+.5)*t.barSize[c],n[f]=t.barPosition[f]+.5*t.barSize[f];for(var m=null,v=0;v<t.barSegments.length;v++){var h=t.barSegments[v];"ticks"===h.title?m=h:(n[f]=t.barPosition[f]+.5*t.barSize[f]*(h.corners[2][f]+h.corners[0][f]),e.createPolyDataForOneLabel(h.title,n,d,"horizontal",g,s))}for(var y=t.barPosition[f]+t.barSize[f]*m.corners[0][f],b=t.barSize[f]*(m.corners[2][f]-m.corners[0][f]),T=e.getTicks(),x=e.getTickStrings(),S=0;S<T.length;S++){var w=(T[S]-t.lastTickBounds[0])/(t.lastTickBounds[1]-t.lastTickBounds[0]);n[f]=y+b*w,e.createPolyDataForOneLabel(x[S],n,d,"horizontal",g,s)}var C=Dl.newInstance({numberOfComponents:2,values:u,name:"TextureCoordinates"});t.tmPolyData.getPointData().setTCoords(C),t.tmPolyData.getPoints().setData(i,3),t.tmPolyData.getPoints().modified(),t.tmPolyData.getPolys().setData(l,1),t.tmPolyData.getPolys().modified(),t.tmPolyData.modified()},e.updatePolyDataForBarSegments=function(){var e,r,a=t.renderable.getScalarsToColors(),o=0;t.renderable.getDrawNanAnnotation()&&a.getNanColor()&&(o+=1),t.renderable.getDrawBelowRangeSwatch()&&null!==(e=a.getUseBelowRangeColor)&&void 0!==e&&e.call(a)&&(o+=1),t.renderable.getDrawAboveRangeSwatch()&&null!==(r=a.getUseAboveRangeColor)&&void 0!==r&&r.call(a)&&(o+=1);var i=4*(1+o),l=i,u=1;a.getVectorMode()===ud.COMPONENT&&(u=a.getVectorComponent()+1);for(var s=new Float64Array(3*i),c=new Uint16Array(5*l),f=new Float32Array(i*u),d=0,p=0,g=0;g<t.barSegments.length;g++){for(var m=t.barSegments[g],v=0;v<4;v++){n[0]=t.barPosition[0]+m.corners[v][0]*t.barSize[0],n[1]=t.barPosition[1]+m.corners[v][1]*t.barSize[1],s[3*d]=(.5*n[0]+.5)*t.lastSize[0],s[3*d+1]=(.5*n[1]+.5)*t.lastSize[1],s[3*d+2]=n[2];for(var h=0;h<u;h++)f[d*u+h]=t.lastTickBounds[0]+m.scalars[v]*(t.lastTickBounds[1]-t.lastTickBounds[0]);d++}c[5*p]=4,c[5*p+1]=d-4,c[5*p+2]=d-3,c[5*p+3]=d-2,c[5*p+4]=d-1,p++}var y=Dl.newInstance({numberOfComponents:u,values:f,name:"Scalars"});t.polyData.getPointData().setScalars(y),t.polyData.getPoints().setData(s,3),t.polyData.getPoints().modified(),t.polyData.getPolys().setData(c,1),t.polyData.getPolys().modified(),t.polyData.modified()}}(e,t)}),"vtkScalarBarActorHelper");function pd(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,function(e){return ld({automated:!0,autoLayout:null,axisLabel:"Scalar Value",barPosition:[0,0],barSize:[0,0],boxPosition:[.88,-.92],boxSize:[.1,1.1],scalarToColors:null,axisTitlePixelOffset:36,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:14,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"},generateTicks:null,drawNanAnnotation:!0,drawBelowRangeSwatch:!0,drawAboveRangeSwatch:!0},e)}(r)),t.autoLayout||(t.autoLayout=cd(0,t)),t.generateTicks||(t.generateTicks=fd()),hl.extend(e,t,r),e.getProperty().setDiffuse(0),e.getProperty().setAmbient(1),er.setGet(e,t,["automated","autoLayout","axisTitlePixelOffset","axisLabel","scalarsToColors","tickLabelPixelOffset","generateTicks","drawNanAnnotation","drawBelowRangeSwatch","drawAboveRangeSwatch"]),er.get(e,t,["axisTextStyle","tickTextStyle"]),er.getArray(e,t,["barPosition","barSize","boxPosition","boxSize"]),er.setArray(e,t,["barPosition","barSize","boxPosition","boxSize"],2),function(e,t){t.classHierarchy.push("vtkScalarBarActor"),e.setTickTextStyle=function(r){t.tickTextStyle=ld(ld({},t.tickTextStyle),r),e.modified()},e.setAxisTextStyle=function(r){t.axisTextStyle=ld(ld({},t.axisTextStyle),r),e.modified()},e.resetAutoLayoutToDefault=function(){e.setAutoLayout(cd(0,t))},e.resetGenerateTicksToDefault=function(){e.setGenerateTicks(fd())}}(e,t)}var gd={newInstance:er.newInstance(pd,"vtkScalarBarActor"),extend:pd,newScalarBarActorHelper:dd};var md={};function vd(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,md,r),ar.extend(e,t,r),t.scalarBarActorHelper=gd.newScalarBarActorHelper(),function(e,t){t.classHierarchy.push("vtkOpenGLScalarBarActor"),e.buildPass=function(r){r&&(t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent(),t.scalarBarActorHelper.getRenderable()||t.scalarBarActorHelper.setRenderable(t.renderable),e.prepareNodes(),e.addMissingNode(t.scalarBarActorHelper.getBarActor()),e.addMissingNode(t.scalarBarActorHelper.getTmActor()),e.removeUnusedNodes())},e.opaquePass=function(e,r){if(e){var n=t._openGLRenderer?t._openGLRenderer.getRenderable().getActiveCamera():null,a=t._openGLRenderer.getTiledSizeAndOrigin();t.scalarBarActorHelper.updateAPISpecificData([a.usize,a.vsize],n,t._openGLRenderWindow.getRenderable())}}}(e,t)}var hd=Yt(vd,"vtkOpenGLScalarBarActor");sr("vtkScalarBarActor",hd);var yd=Ot;var bd={context:null};function Td(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,bd,r),ar.extend(e,t,r),t.openGLTexture=xf.newInstance(),t.tris=rf.newInstance(),t.keyMatrixTime={},Vt(t.keyMatrixTime,{mtime:0}),t.keyMatrices={normalMatrix:Te(new Float64Array(9)),mcwc:S(new Float64Array(16))},zt(e,t,["context"]),Ft(e,t,["activeTextures"]),function(e,t){t.classHierarchy.push("vtkOpenGLSkybox"),e.buildPass=function(r){if(r){t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent(),t.context=t._openGLRenderWindow.getContext(),t.tris.setOpenGLRenderWindow(t._openGLRenderWindow),t.openGLTexture.setOpenGLRenderWindow(t._openGLRenderWindow);var n=t._openGLRenderer.getRenderable();t.openGLCamera=t._openGLRenderer.getViewNodeFor(n.getActiveCamera())}},e.queryPass=function(e,r){if(e){if(!t.renderable||!t.renderable.getVisibility())return;r.incrementOpaqueActorCount()}},e.opaquePass=function(r,n){if(r&&!t._openGLRenderer.getSelector()){e.updateBufferObjects(),t.context.depthMask(!0),t._openGLRenderWindow.getShaderCache().readyShaderProgram(t.tris.getProgram()),t.openGLTexture.render(t._openGLRenderWindow);var a=t.openGLTexture.getTextureUnit();t.tris.getProgram().setUniformi("sbtexture",a);var o=t._openGLRenderer.getRenderable(),i=t.openGLCamera.getKeyMatrices(o),l=new Float64Array(16);if(C(l,i.wcpc),t.tris.getProgram().setUniformMatrix("IMCPCMatrix",l),"box"===t.lastFormat){var u=o.getActiveCamera().getPosition();t.tris.getProgram().setUniform3f("camPos",u[0],u[1],u[2])}t.tris.getVAO().bind(),t.context.drawArrays(t.context.TRIANGLES,0,t.tris.getCABO().getElementCount()),t.tris.getVAO().release(),t.openGLTexture.deactivate()}},e.updateBufferObjects=function(){if(!t.tris.getCABO().getElementCount()){for(var e=new Float32Array(12),r=0;r<4;r++)e[3*r]=r%2*2-1,e[3*r+1]=r>1?1:-1,e[3*r+2]=1;var n=Dl.newInstance({numberOfComponents:3,values:e});n.setName("points");var a=new Uint16Array(8);a[0]=3,a[1]=0,a[2]=1,a[3]=3,a[4]=3,a[5]=0,a[6]=3,a[7]=2;var o=Dl.newInstance({numberOfComponents:1,values:a});t.tris.getCABO().createVBO(o,"polys",nl.SURFACE,{points:n,cellOffset:0})}t.renderable.getFormat()!==t.lastFormat&&(t.lastFormat=t.renderable.getFormat(),"box"===t.lastFormat&&t.tris.setProgram(t._openGLRenderWindow.getShaderCache().readyShaderProgramArray("//VTK::System::Dec\n             attribute vec3 vertexMC;\n             uniform mat4 IMCPCMatrix;\n             varying vec3 TexCoords;\n             void main () {\n              gl_Position = vec4(vertexMC.xyz, 1.0);\n              vec4 wpos = IMCPCMatrix * gl_Position;\n              TexCoords = wpos.xyz/wpos.w;\n             }","//VTK::System::Dec\n             //VTK::Output::Dec\n             varying vec3 TexCoords;\n             uniform samplerCube sbtexture;\n             uniform vec3 camPos;\n             void main () {\n               // skybox looks from inside out\n               // which means we have to adjust\n               // our tcoords. Otherwise text would\n               // be flipped\n               vec3 tc = normalize(TexCoords - camPos);\n               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))\n               {\n                 tc = vec3(1.0, 1.0, -1.0) * tc;\n               }\n               else\n               {\n                 tc = vec3(-1.0, 1.0, 1.0) * tc;\n               }\n               gl_FragData[0] = textureCube(sbtexture, tc);\n             }","")),"background"===t.lastFormat&&t.tris.setProgram(t._openGLRenderWindow.getShaderCache().readyShaderProgramArray("//VTK::System::Dec\n             attribute vec3 vertexMC;\n             uniform mat4 IMCPCMatrix;\n             varying vec2 TexCoords;\n             void main () {\n              gl_Position = vec4(vertexMC.xyz, 1.0);\n              vec4 wpos = IMCPCMatrix * gl_Position;\n              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;\n             }","//VTK::System::Dec\n             //VTK::Output::Dec\n             varying vec2 TexCoords;\n             uniform sampler2D sbtexture;\n             void main () {\n               gl_FragData[0] = texture2D(sbtexture, TexCoords);\n             }","")),t.tris.getShaderSourceTime().modified(),t.tris.getVAO().bind(),t.tris.getVAO().addAttributeArray(t.tris.getProgram(),t.tris.getCABO(),"vertexMC",t.tris.getCABO().getVertexOffset(),t.tris.getCABO().getStride(),t.context.FLOAT,3,t.context.FALSE)||yd("Error setting vertexMC in shader VAO."));var i=t.renderable.getTextures();i.length||yd("vtkSkybox requires a texture map"),t.openGLTexture.getRenderable()!==i[0]&&(t.openGLTexture.releaseGraphicsResources(t._openGLRenderWindow),t.openGLTexture.setRenderable(i[0]))}}(e,t)}var xd=Yt(Td);sr("vtkSkybox",xd);var Sd=Pt;var wd={};function Cd(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,wd,r),ar.extend(e,t,r),function(e,t){t.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),e.opaquePass=function(r,n){t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent();var a=t._openGLRenderer.getAspectRatio(),o=t._openGLRenderer?t._openGLRenderer.getRenderable().getActiveCamera():null,i=t._openGLRenderer.getTiledSizeAndOrigin(),l=null;if(t.renderable.getUseZValues()){var u=n.getZBufferTexture(),s=Math.floor(u.getWidth()),c=Math.floor(u.getHeight()),f=t._openGLRenderWindow.getContext();u.bind();var d=n.getFramebuffer();d?d.saveCurrentBindingsAndBuffers():Sd("No framebuffer to save/restore");var p=f.createFramebuffer();f.bindFramebuffer(f.FRAMEBUFFER,p),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,u.getHandle(),0),f.checkFramebufferStatus(f.FRAMEBUFFER)===f.FRAMEBUFFER_COMPLETE&&(l=new Uint8Array(s*c*4),f.viewport(0,0,s,c),f.readPixels(0,0,s,c,f.RGBA,f.UNSIGNED_BYTE,l)),d&&d.restorePreviousBindingsAndBuffers(),f.deleteFramebuffer(p)}t.renderable.invokeCallback(t.renderable.getInputData(),o,a,i,l)},e.queryPass=function(e,r){e&&t.renderable.getUseZValues()&&r.requestDepth()}}(e,t)}var Pd=Yt(Cd,"vtkOpenGLPixelSpaceCallbackMapper");sr("vtkPixelSpaceCallbackMapper",Pd);var Od=Object.create(null);function Ad(e,t){Od[e]=t}var Ed={};function Id(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ed,r),t.overrides=Od,lr.extend(e,t,r),function(e,t){t.classHierarchy.push("vtkWebGPUViewNodeFactory")}(0,t)}var Rd={newInstance:er.newInstance(Id,"vtkWebGPUViewNodeFactory"),extend:Id};var Md={keyMatrixTime:null,keyMatrices:null};function Dd(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Md,r),ar.extend(e,t,r),t.keyMatrixTime={},er.obj(t.keyMatrixTime),t.keyMatrices={normalMatrix:new Float64Array(16),vcpc:new Float64Array(16),pcsc:new Float64Array(16),wcvc:new Float64Array(16),scpc:new Float64Array(16),scvc:new Float64Array(16)},er.setGet(e,t,["keyMatrixTime"]),function(e,t){t.classHierarchy.push("vtkWebGPUCamera"),e.getProjectionMatrix=function(e,r,n,a){if(S(e),t.renderable.getParallelProjection()){var o=t.renderable.getParallelScale(),i=o*r,l=o,u=(a[0]-1)*i,s=(a[0]+1)*i,c=(a[1]-1)*l,f=(a[1]+1)*l,d=1/(s-u),p=1/(f-c);e[0]=2*d,e[5]=2*p,e[10]=1/(n[1]-n[0]),e[12]=(s+u)*d,e[13]=(f+c)*p,e[14]=n[1]/(n[1]-n[0])}else{var g,m,v=Math.tan(Math.PI*t.renderable.getViewAngle()/360);!0===t.renderable.getUseHorizontalViewAngle()?(g=n[0]*v,m=n[0]*v/r):(g=n[0]*v*r,m=n[0]*v);var h=(a[0]-1)*g,y=(a[0]+1)*g,b=(a[1]-1)*m,T=(a[1]+1)*m;e[0]=2*n[0]/(y-h),e[5]=2*n[0]/(T-b),e[12]=(h+y)/(y-h),e[13]=(b+T)/(T-b),e[10]=0,e[14]=n[0],e[11]=-1,e[15]=0}},e.convertToOpenGLDepth=function(e){if(t.renderable.getParallelProjection())return 1-e;var r=t.renderable.getClippingRangeByReference(),n=-r[0]/e;return.5*(n=(r[0]+r[1])/(r[1]-r[0])+2*r[0]*r[1]/(n*(r[1]-r[0])))+.5},e.getKeyMatrices=function(r){var n=r.getRenderable(),a=r.getParent();if(Math.max(a.getMTime(),e.getMTime(),n.getMTime(),t.renderable.getMTime(),r.getStabilizedTime())>t.keyMatrixTime.getMTime()){var o=t.renderable.getViewMatrix();b(t.keyMatrices.normalMatrix,o),t.keyMatrices.normalMatrix[3]=0,t.keyMatrices.normalMatrix[7]=0,t.keyMatrices.normalMatrix[11]=0,C(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),w(t.keyMatrices.wcvc,o);var i=r.getStabilizedCenterByReference();E(t.keyMatrices.scvc,t.keyMatrices.wcvc,i);var l=r.getAspectRatio(),u=t.renderable.getClippingRangeByReference();e.getProjectionMatrix(t.keyMatrices.vcpc,l,u,t.renderable.getWindowCenterByReference()),A(t.keyMatrices.scpc,t.keyMatrices.vcpc,t.keyMatrices.scvc),C(t.keyMatrices.pcsc,t.keyMatrices.scpc),t.keyMatrixTime.modified()}return t.keyMatrices}}(e,t)}var kd=er.newInstance(Dd);Ad("vtkCamera",kd);var _d={device:null,handle:null,label:null};function Ld(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,_d,r),er.obj(e,t),t.bindables=[],t.bindGroupTime={},er.obj(t.bindGroupTime,{mtime:0}),er.get(e,t,["bindGroupTime","handle","sizeInBytes","usage"]),er.setGet(e,t,["label","device","arrayInformation"]),function(e,t){t.classHierarchy.push("vtkWebGPUBindGroup"),e.setBindables=function(r){if(t.bindables.length===r.length){for(var n=!0,a=0;a<t.bindables.length;a++)t.bindables[a]!==r[a]&&(n=!1);if(n)return}t.bindables=r,e.modified()},e.getBindGroupLayout=function(e){for(var r=[],n=0;n<t.bindables.length;n++){var a=t.bindables[n].getBindGroupLayoutEntry();a.binding=n,r.push(a)}return e.getBindGroupLayout({entries:r})},e.getBindGroup=function(r){for(var n=e.getMTime(),a=0;a<t.bindables.length;a++){var o=t.bindables[a].getBindGroupTime().getMTime();n=o>n?o:n}if(n<t.bindGroupTime.getMTime())return t.bindGroup;for(var i=[],l=0;l<t.bindables.length;l++){var u=t.bindables[l].getBindGroupEntry();u.binding=l,i.push(u)}return t.bindGroup=r.getHandle().createBindGroup({layout:e.getBindGroupLayout(r),entries:i,label:t.label}),t.bindGroupTime.modified(),t.bindGroup},e.getShaderCode=function(e){for(var r=[],n=e.getBindGroupLayoutCount(t.label),a=0;a<t.bindables.length;a++)r.push(t.bindables[a].getShaderCode(a,n));return r.join("\n")}}(e,t)}var Bd={newInstance:er.newInstance(Ld),extend:Ld};var Vd={device:null,handle:null};function Nd(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Vd,r),er.obj(e,t),er.get(e,t,["lastCameraMTime"]),er.setGet(e,t,["device","handle"]),function(e,t){t.classHierarchy.push("vtkWebGPUShaderModule"),e.initialize=function(e,r){t.device=e,t.handle=t.device.getHandle().createShaderModule({code:r.getCode()})}}(e,t)}var Fd={newInstance:er.newInstance(Nd,"vtkWebGPUShaderModule"),extend:Nd};var Ud={shaderModules:null,device:null,window:null};function Gd(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ud,r),t._shaderModules=new Map,er.obj(e,t),er.setGet(e,t,["device","window"]),function(e,t){t.classHierarchy.push("vtkWebGPUShaderCache"),e.getShaderModule=function(e){for(var r=e.getType(),n=e.getHash(),a=t._shaderModules.keys(),o=0;o<a.length;o++){var i=a[o];if(i.getHash()===n&&i.getType()===r)return t._shaderModules.get(i)}var l=Fd.newInstance();return l.initialize(t.device,e),t._shaderModules.set(e,l),l}}(e,t)}var jd={newInstance:er.newInstance(Gd,"vtkWebGPUShaderCache"),extend:Gd,substitute:function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=Array.isArray(r)?r.join("\n"):r,o=!1;-1!==e.search(t)&&(o=!0);var i="";n&&(i="g");var l=new RegExp(t,i);return{replace:o,result:e.replace(l,a)}}};var zd={handle:null,layouts:null,renderEncoder:null,shaderDescriptions:null,vertexState:null,topology:null,pipelineDescription:null};function Wd(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zd,r),Vt(e,t),t.layouts=[],t.shaderDescriptions=[],Ft(e,t,["handle","pipelineDescription"]),zt(e,t,["device","renderEncoder","topology","vertexState"]),function(e,t){t.classHierarchy.push("vtkWebGPUPipeline"),e.getShaderDescriptions=function(){return t.shaderDescriptions},e.initialize=function(e,r){t.pipelineDescription=t.renderEncoder.getPipelineSettings(),t.pipelineDescription.primitive.topology=t.topology,t.pipelineDescription.vertex=t.vertexState,t.pipelineDescription.label=r;for(var n=[],a=0;a<t.layouts.length;a++)n.push(t.layouts[a].layout);t.pipelineLayout=e.getHandle().createPipelineLayout({bindGroupLayouts:n}),t.pipelineDescription.layout=t.pipelineLayout;for(var o=0;o<t.shaderDescriptions.length;o++){var i=t.shaderDescriptions[o],l=e.getShaderModule(i);"vertex"===i.getType()&&(t.pipelineDescription.vertex.module=l.getHandle(),t.pipelineDescription.vertex.entryPoint="main"),"fragment"===i.getType()&&(t.pipelineDescription.fragment.module=l.getHandle(),t.pipelineDescription.fragment.entryPoint="main")}t.handle=e.getHandle().createRenderPipeline(t.pipelineDescription)},e.getShaderDescription=function(e){for(var r=0;r<t.shaderDescriptions.length;r++)if(t.shaderDescriptions[r].getType()===e)return t.shaderDescriptions[r];return null},e.addBindGroupLayout=function(e){e&&t.layouts.push({layout:e.getBindGroupLayout(t.device),label:e.getLabel()})},e.getBindGroupLayout=function(e){return t.layouts[e].layout},e.getBindGroupLayoutCount=function(e){for(var r=0;r<t.layouts.length;r++)if(t.layouts[r].label===e)return r;return 0},e.bindVertexInput=function(e,t){t.bindBuffers(e)}}(e,t)}var Hd={newInstance:Yt(Wd,"vtkWebGPUPipeline"),extend:Wd};var Kd={type:null,hash:null,code:null,outputNames:null,outputTypes:null};function Xd(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Kd,r),t.outputNames=[],t.outputTypes=[],t.outputInterpolations=[],t.builtinOutputNames=[],t.builtinOutputTypes=[],t.builtinInputNames=[],t.builtinInputTypes=[],er.obj(e,t),er.setGet(e,t,["type","hash","code"]),er.getArray(e,t,["outputTypes","outputNames","outputInterpolations"]),function(e,t){t.classHierarchy.push("vtkWebGPUShaderDescription"),e.hasOutput=function(e){return t.outputNames.includes(e)},e.addOutput=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;t.outputTypes.push(e),t.outputNames.push(r),t.outputInterpolations.push(n)},e.addBuiltinOutput=function(e,r){t.builtinOutputTypes.push(e),t.builtinOutputNames.push(r)},e.addBuiltinInput=function(e,r){t.builtinInputTypes.push(e),t.builtinInputNames.push(r)},e.replaceShaderCode=function(e,r){var n=[],a=[];if(r&&n.push(r.getShaderCode()),e||t.builtinInputNames.length){var o=[];if(o.push("struct ".concat(t.type,"Input\n{")),e)for(var i=e.getOutputNamesByReference(),l=e.getOutputTypesByReference(),u=e.getOutputInterpolationsByReference(),s=0;s<i.length;s++)void 0!==u[s]?o.push("  @location(".concat(s,") @interpolate(").concat(u[s],") ").concat(i[s]," : ").concat(l[s],",")):o.push("  @location(".concat(s,") ").concat(i[s]," : ").concat(l[s],","));for(var c=0;c<t.builtinInputNames.length;c++)o.push("  ".concat(t.builtinInputNames[c]," : ").concat(t.builtinInputTypes[c],","));o.length>1&&(o.push("};"),a=o,n[n.length-1]+=",",n.push("input: ".concat(t.type,"Input")))}if(n.length&&(t.code=jd.substitute(t.code,"//VTK::IOStructs::Input",n).result),t.outputNames.length+t.builtinOutputNames.length){for(var f=["struct ".concat(t.type,"Output\n{")],d=0;d<t.outputNames.length;d++)void 0!==t.outputInterpolations[d]?f.push("  @location(".concat(d,") @interpolate(").concat(t.outputInterpolations[d],") ").concat(t.outputNames[d]," : ").concat(t.outputTypes[d],",")):f.push("  @location(".concat(d,") ").concat(t.outputNames[d]," : ").concat(t.outputTypes[d],","));for(var p=0;p<t.builtinOutputNames.length;p++)f.push("  ".concat(t.builtinOutputNames[p]," : ").concat(t.builtinOutputTypes[p],","));f.push("};"),a=a.concat(f),t.code=jd.substitute(t.code,"//VTK::IOStructs::Output",["-> ".concat(t.type,"Output")]).result}t.code=jd.substitute(t.code,"//VTK::IOStructs::Dec",a).result}}(e,t)}var qd={newInstance:er.newInstance(Xd,"vtkWebGPUShaderDescription"),extend:Xd},Yd={r8unorm:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"float"},r8snorm:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"float"},r8uint:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},r8sint:{numComponents:1,nativeType:Int8Array,stride:1,elementSize:1,sampleType:"sint"},r16uint:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"uint"},r16sint:{numComponents:1,nativeType:Int16Array,stride:2,elementSize:2,sampleType:"sint"},r16float:{numComponents:1,nativeType:Float32Array,stride:2,elementSize:2,sampleType:"float"},rg8unorm:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"float"},rg8snorm:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"float"},rg8uint:{numComponents:2,nativeType:Uint8Array,stride:2,elementSize:1,sampleType:"uint"},rg8sint:{numComponents:2,nativeType:Int8Array,stride:2,elementSize:1,sampleType:"sint"},r32uint:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:4,sampleType:"uint"},r32sint:{numComponents:1,nativeType:Int32Array,stride:4,elementSize:4,sampleType:"sint"},r32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"unfilterable-float"},rg16uint:{numComponents:2,nativeType:Uint16Array,stride:4,elementSize:2,sampleType:"uint"},rg16sint:{numComponents:2,nativeType:Int16Array,stride:4,elementSize:2,sampleType:"sint"},rg16float:{numComponents:2,nativeType:Float32Array,stride:4,elementSize:2,sampleType:"float"},rgba8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"rgba8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgba8snorm:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"float"},rgba8uint:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"uint"},rgba8sint:{numComponents:4,nativeType:Int8Array,stride:4,elementSize:1,sampleType:"sint"},bgra8unorm:{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},"bgra8unorm-srgb":{numComponents:4,nativeType:Uint8Array,stride:4,elementSize:1,sampleType:"float"},rgb9e5ufloat:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rgb10a2unorm:{numComponents:4,nativeType:Uint32Array,stride:4,sampleType:"float"},rg11b10ufloat:{numComponents:4,nativeType:Float32Array,stride:4,sampleType:"float"},rg32uint:{numComponents:2,nativeType:Uint32Array,stride:8,elementSize:4,sampleType:"uint"},rg32sint:{numComponents:2,nativeType:Int32Array,stride:8,elementSize:4,sampleType:"sint"},rg32float:{numComponents:2,nativeType:Float32Array,stride:8,elementSize:4,sampleType:"unfilterable-float"},rgba16uint:{numComponents:4,nativeType:Uint16Array,stride:8,elementSize:2,sampleType:"uint"},rgba16sint:{numComponents:4,nativeType:Int16Array,stride:8,elementSize:2,sampleType:"sint"},rgba16float:{numComponents:4,nativeType:Float32Array,stride:8,elementSize:2,sampleType:"float"},rgba32uint:{numComponents:4,nativeType:Uint32Array,stride:16,elementSize:4,sampleType:"uint"},rgba32sint:{numComponents:4,nativeType:Int32Array,stride:16,elementSize:4,sampleType:"sint"},rgba32float:{numComponents:4,nativeType:Float32Array,stride:16,elementSize:4,sampleType:"unfilterable-float"},stencil8:{numComponents:1,nativeType:Uint8Array,stride:1,elementSize:1,sampleType:"uint"},depth16unorm:{numComponents:1,nativeType:Uint16Array,stride:2,elementSize:2,sampleType:"depth"},depth24plus:{numComponents:1,nativeType:Uint32Array,stride:4,elementSize:3,sampleType:"depth"},"depth24plus-stencil8":{numComponents:2,nativeType:Uint32Array,stride:4,sampleType:"mixed"},depth32float:{numComponents:1,nativeType:Float32Array,stride:4,elementSize:4,sampleType:"depth"}};var Qd={getDetailsFromTextureFormat:function(e){return!e||e.length<6?0:e in Yd===!0?Yd[e]:(Ot("unknown format ".concat(e)),null)},getByteStrideFromBufferFormat:function(e){if(!e||e.length<5)return 0;var t=1;"x"===e[e.length-2]&&(t=Number(e[e.length-1]));var r=1===t?e.length-1:e.length-3,n=Number(e[r]);return Number.isNaN(n)?(Ot("unknown format ".concat(e)),0):t*(5-n/2)},getNumberOfComponentsFromBufferFormat:function(e){if(!e||e.length<5)return 0;var t=1;return"x"===e[e.length-2]&&(t=Number(e[e.length-1])),t},getNativeTypeFromBufferFormat:function(e){if(!e||e.length<5)return 0;var t;if("f"===e[0])t="Float";else if("s"===e[0])t="Int";else{if("u"!==e[0])return void Ot("unknown format ".concat(e));t="Uint"}var r=e.split("x")[0],n=Number(r[r.length-1]);if(!Number.isNaN(n))return t+=8*(5-n/2),t+="Array";Ot("unknown format ".concat(e))},getShaderTypeFromBufferFormat:function(e){var t;if("f"===e[0]||"n"===e[1])t="f32";else if("s"===e[0]&&"i"===e[1])t="i32";else{if("u"!==e[0]||"i"!==e[1])return void Ot("unknown format ".concat(e));t="u32"}var r=1;return"x"===e[e.length-2]&&(r=Number(e[e.length-1])),4===r?"vec4<".concat(t,">"):3===r?"vec3<".concat(t,">"):2===r?"vec2<".concat(t,">"):t},getByteStrideFromShaderFormat:function(e){if(!e)return 0;var t=1;return"vec"===e.substring(0,3)?t=Number(e[3]):"mat"===e.substring(0,3)&&(t=e[3]*e[5]),4*t},getNativeTypeFromShaderFormat:function(e){if(e)return e.includes("f32")?"Float32Array":e.includes("i32")?"Int32Array":e.includes("u32")?"Uint32Array":void Ot("unknown format ".concat(e))}};function $d(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!t.includes(e[r]))return!1;return!0}var Zd={inputs:null,bindingDescriptions:!1,attributeDescriptions:null,indexBuffer:null};function Jd(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Zd,r),Vt(e,t),t.bindingDescriptions=[],t.attributeDescriptions=[],t.inputs=[],zt(e,t,["created","device","handle","indexBuffer"]),function(e,t){t.classHierarchy.push("vtkWebGPUVertexInput"),e.addBuffer=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertex",a=r;Array.isArray(a)||(a=[a]);for(var o=0;o<t.inputs.length;o++)if($d(t.inputs[o].names,a)){if(t.inputs[o].buffer===e)return;return void(t.inputs[o].buffer=e)}t.inputs.push({buffer:e,stepMode:n,names:a}),t.inputs=t.inputs.sort((function(e,t){return e.names[0]<t.names[0]?-1:e.names[0]>t.names[0]?1:0}))},e.removeBufferIfPresent=function(e){for(var r=0;r<t.inputs.length;r++)t.inputs[r].names.includes(e)&&t.inputs.splice(r,1)},e.getBuffer=function(e){for(var r=0;r<t.inputs.length;r++)if(t.inputs[r].names.includes(e))return t.inputs[r].buffer;return null},e.hasAttribute=function(e){for(var r=0;r<t.inputs.length;r++)if(t.inputs[r].names.includes(e))return!0;return!1},e.getAttributeTime=function(e){for(var r=0;r<t.inputs.length;r++)if(t.inputs[r].names.includes(e))return t.inputs[r].buffer.getSourceTime();return 0},e.getShaderCode=function(){for(var e="",r=0,n=0;n<t.inputs.length;n++)for(var a=0;a<t.inputs[n].names.length;a++){var o=t.inputs[n].buffer.getArrayInformation()[a],i=Qd.getShaderTypeFromBufferFormat(o.format);r>0&&(e+=",\n"),e="".concat(e,"  @location(").concat(r,") ").concat(t.inputs[n].names[a]," : ").concat(i),r++}return e},e.getVertexInputInformation=function(){var e={};if(t.inputs.length){for(var r=[],n=0,a=0;a<t.inputs.length;a++){for(var o=t.inputs[a].buffer,i={arrayStride:o.getStrideInBytes(),stepMode:t.inputs[a].stepMode,attributes:[]},l=o.getArrayInformation(),u=0;u<t.inputs[a].names.length;u++)i.attributes.push({shaderLocation:n,offset:l[u].offset,format:l[u].format}),n++;r.push(i)}e.buffers=r}return e},e.bindBuffers=function(e){for(var r=0;r<t.inputs.length;r++)e.setVertexBuffer(r,t.inputs[r].buffer.getHandle());t.indexBuffer&&e.setIndexBuffer(t.indexBuffer.getHandle(),t.indexBuffer.getArrayInformation()[0].format)},e.getReady=function(){},e.releaseGraphicsResources=function(){t.created&&(t.inputs=[],t.bindingDescriptions=[],t.attributeDescriptions=[])}}(e,t)}var ep={newInstance:Yt(Jd,"vtkWebGPUVertexInput"),extend:Jd};var tp={additionalBindables:void 0,bindGroup:null,device:null,fragmentShaderTemplate:null,numberOfInstances:1,numberOfVertices:0,pipelineHash:null,shaderReplacements:null,SSBO:null,textureViews:null,topology:"triangle-list",UBO:null,vertexShaderTemplate:null,WebGPURenderer:null};function rp(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,tp,r),ar.extend(e,t,r),t.textureViews=[],t.vertexInput=ep.newInstance(),t.bindGroup=Bd.newInstance({label:"mapperBG"}),t.additionalBindables=[],t.fragmentShaderTemplate=t.fragmentShaderTemplate||"\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::Normal::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Select::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : fragmentOutput;\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::Light::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Select::Impl\n\n  // var computedColor:vec4<f32> = vec4<f32>(1.0,0.5,0.5,1.0);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n",t.vertexShaderTemplate=t.vertexShaderTemplate||"\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::Normal::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Select::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@vertex\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : vertexOutput;\n\n  // var vertex: vec4<f32> = vertexBC;\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Select::Impl\n\n  //VTK::Position::Impl\n\n  return output;\n}\n",t.shaderReplacements=new Map,er.get(e,t,["pipeline","vertexInput"]),er.setGet(e,t,["additionalBindables","device","fragmentShaderTemplate","interpolate","numberOfInstances","numberOfVertices","pipelineHash","shaderReplacements","SSBO","textureViews","topology","UBO","vertexShaderTemplate","WebGPURenderer"]),function(e,t){t.classHierarchy.push("vtkWebGPUSimpleMapper"),e.generateShaderDescriptions=function(r,n,a){var o=qd.newInstance({type:"vertex",hash:r,code:t.vertexShaderTemplate}),i=qd.newInstance({type:"fragment",hash:r,code:t.fragmentShaderTemplate}),l=n.getShaderDescriptions();l.push(o),l.push(i);for(var u=t.vertexShaderTemplate+t.fragmentShaderTemplate,s=new RegExp("//VTK::[^:]*::","g"),c=u.match(s).filter((function(e,t,r){return r.indexOf(e)===t})),f=c.map((function(e){return"replaceShader".concat(e.substring(7,e.length-2))})),d=0;d<f.length;d++){var p=f[d];"replaceShaderIOStructs"!==p&&t.shaderReplacements.has(p)&&t.shaderReplacements.get(p)(r,n,a)}e.replaceShaderIOStructs(r,n,a)},e.replaceShaderIOStructs=function(e,t,r){var n=t.getShaderDescription("vertex");n.replaceShaderCode(null,r),t.getShaderDescription("fragment").replaceShaderCode(n)},e.replaceShaderRenderEncoder=function(e,r,n){t.renderEncoder.replaceShaderCode(r)},t.shaderReplacements.set("replaceShaderRenderEncoder",e.replaceShaderRenderEncoder),e.replaceShaderRenderer=function(e,r,n){if(t.WebGPURenderer){var a=t.WebGPURenderer.getBindGroup().getShaderCode(r),o=r.getShaderDescription("vertex"),i=o.getCode();i=jd.substitute(i,"//VTK::Renderer::Dec",[a]).result,o.setCode(i);var l=r.getShaderDescription("fragment");i=l.getCode(),i=jd.substitute(i,"//VTK::Renderer::Dec",[a]).result,l.setCode(i)}},t.shaderReplacements.set("replaceShaderRenderer",e.replaceShaderRenderer),e.replaceShaderMapper=function(e,r,n){var a=t.bindGroup.getShaderCode(r),o=r.getShaderDescription("vertex"),i=o.getCode();i=jd.substitute(i,"//VTK::Mapper::Dec",[a]).result,o.setCode(i);var l=r.getShaderDescription("fragment");l.addBuiltinInput("bool","@builtin(front_facing) frontFacing"),i=l.getCode(),i=jd.substitute(i,"//VTK::Mapper::Dec",[a]).result,l.setCode(i)},t.shaderReplacements.set("replaceShaderMapper",e.replaceShaderMapper),e.replaceShaderPosition=function(e,t,r){var n=t.getShaderDescription("vertex");n.addBuiltinOutput("vec4<f32>","@builtin(position) Position");var a=n.getCode();a=jd.substitute(a,"//VTK::Position::Impl",["    output.Position = rendererUBO.SCPCMatrix*vertexBC;"]).result,n.setCode(a)},t.shaderReplacements.set("replaceShaderPosition",e.replaceShaderPosition),e.replaceShaderTCoord=function(e,t,r){t.getShaderDescription("vertex").addOutput("vec2<f32>","tcoordVS")},t.shaderReplacements.set("replaceShaderTCoord",e.replaceShaderTCoord),e.addTextureView=function(e){t.textureViews.includes(e)||t.textureViews.push(e)},e.prepareToDraw=function(r){t.renderEncoder=r,e.updateInput(),e.updateBuffers(),e.updateBindings(),e.updatePipeline()},e.updateInput=function(){},e.updateBuffers=function(){},e.updateBindings=function(){t.bindGroup.setBindables(e.getBindables())},e.computePipelineHash=function(){},e.registerDrawCallback=function(r){r.registerDrawCallback(t.pipeline,e.draw)},e.prepareAndDraw=function(r){e.prepareToDraw(r),r.setPipeline(t.pipeline),e.draw(r)},e.draw=function(e){var r=e.getBoundPipeline();e.activateBindGroup(t.bindGroup),t.WebGPURenderer&&t.WebGPURenderer.bindUBO(e),r.bindVertexInput(e,t.vertexInput);var n=t.vertexInput.getIndexBuffer();n?e.drawIndexed(n.getIndexCount(),t.numberOfInstances,0,0,0):e.draw(t.numberOfVertices,t.numberOfInstances,0,0)},e.getBindables=function(){var e=$e(t.additionalBindables);t.UBO&&e.push(t.UBO),t.SSBO&&e.push(t.SSBO);for(var r=0;r<t.textureViews.length;r++){e.push(t.textureViews[r]);var n=t.textureViews[r].getSampler();n&&e.push(n)}return e},e.updatePipeline=function(){e.computePipelineHash(),t.pipeline=t.device.getPipeline(t.pipelineHash),t.pipeline||(t.pipeline=Hd.newInstance(),t.pipeline.setDevice(t.device),t.WebGPURenderer&&t.pipeline.addBindGroupLayout(t.WebGPURenderer.getBindGroup()),t.pipeline.addBindGroupLayout(t.bindGroup),e.generateShaderDescriptions(t.pipelineHash,t.pipeline,t.vertexInput),t.pipeline.setTopology(t.topology),t.pipeline.setRenderEncoder(t.renderEncoder),t.pipeline.setVertexState(t.vertexInput.getVertexInputInformation()),t.device.createPipeline(t.pipelineHash,t.pipeline))}}(e,t)}var np={newInstance:er.newInstance(rp,"vtkWebGPUSimpleMapper"),extend:rp};var ap={};function op(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ap,r),np.extend(e,t,r),function(e,t){t.classHierarchy.push("vtkWebGPUFullScreenQuad"),e.replaceShaderPosition=function(e,t,r){var n=t.getShaderDescription("vertex");n.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),n.addOutput("vec4<f32>","vertexVC");var a=n.getCode();a=jd.substitute(a,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);","output.vertexVC = vec4<f32>(vertexBC, 1);"]).result,n.setCode(a)},t.shaderReplacements.set("replaceShaderPosition",e.replaceShaderPosition),e.updateBuffers=function(){var e=t.device.getBufferManager().getFullScreenQuadBuffer();t.vertexInput.addBuffer(e,["vertexBC"]),t.numberOfVertices=6}}(e,t)}var ip={newInstance:er.newInstance(op,"vtkWebGPUFullScreenQuad"),extend:op},lp={BufferUsage:{Verts:0,Lines:1,Triangles:2,Strips:3,LinesFromStrips:4,LinesFromTriangles:5,Points:6,UniformArray:7,PointArray:8,NormalsFromPoints:9,Texture:10,RawVertex:11,Storage:12,Index:13},PrimitiveTypes:{Start:0,Points:0,Lines:1,Triangles:2,TriangleStrips:3,TriangleEdges:4,TriangleStripEdges:5,End:6}};function up(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var sp=["getMappedRange","mapAsync","unmap"];function cp(e,t){t.classHierarchy.push("vtkWebGPUBuffer"),e.create=function(e,r){t.handle=t.device.getHandle().createBuffer({size:e,usage:r,label:t.label}),t.sizeInBytes=e,t.usage=r},e.write=function(e){!function(e,t,r,n){var a=n.byteLength,o=e.createBuffer({size:a,usage:GPUBufferUsage.COPY_SRC,mappedAtCreation:!0}),i=o.getMappedRange(0,a);new Uint8Array(i).set(new Uint8Array(n)),o.unmap();var l=e.createCommandEncoder();l.copyBufferToBuffer(o,0,t,r,a);var u=l.finish();e.queue.submit([u]),o.destroy()}(t.device.getHandle(),t.handle,0,e.buffer)},e.createAndWrite=function(e,r){t.handle=t.device.getHandle().createBuffer({size:e.byteLength,usage:r,mappedAtCreation:!0,label:t.label}),t.sizeInBytes=e.byteLength,t.usage=r,new Uint8Array(t.handle.getMappedRange()).set(new Uint8Array(e.buffer)),t.handle.unmap()};for(var r=function(r){e[sp[r]]=function(){var e;return(e=t.handle)[sp[r]].apply(e,arguments)}},n=0;n<sp.length;n++)r(n)}var fp={device:null,handle:null,sizeInBytes:0,strideInBytes:0,arrayInformation:null,usage:null,label:null,sourceTime:null};function dp(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fp,r),er.obj(e,t),er.get(e,t,["handle","sizeInBytes","usage"]),er.setGet(e,t,["strideInBytes","device","arrayInformation","label","sourceTime"]),cp(e,t)}var pp=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?up(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):up(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({newInstance:er.newInstance(dp),extend:dp},lp);function gp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var mp,vp=fl.Representation,hp=lp.PrimitiveTypes,yp=function(){function e(){lt(this,e),this.keys=new Uint32Array(10),this.values=new Uint32Array(10),this.count=0}return st(e,[{key:"clear",value:function(){this.count=0}},{key:"has",value:function(e){for(var t=0;t<this.count;t++)if(this.keys[t]===e)return!0}},{key:"get",value:function(e){for(var t=0;t<this.count;t++)if(this.keys[t]===e)return this.values[t]}},{key:"set",value:function(e,t){this.count<9&&(this.keys[this.count]=e,this.values[this.count++]=t)}}]),e}();function bp(e,t,r){var n=e.pointIdToFlatId[t];return n<0&&(n=e.flatId,e.pointIdToFlatId[t]=n,e.flatIdToPointId[e.flatId]=t,e.flatIdToCellId[e.flatId]=r,e.flatId++),n}function Tp(e,t,r){for(var n=e.length,a=0;a<n;a++){var o=e[a];if(r.cellProvokedMap.has(o)){r.ibo[r.iboId++]=r.cellProvokedMap.get(o);for(var i=a+1;i<a+n;i++){var l=bp(r,o=e[i%n],t);r.ibo[r.iboId++]=l}return}}for(var u=0;u<n;u++){var s=e[u];if(!r.provokedPointIds[s]){var c=bp(r,s,t);r.provokedPointIds[s]=1,r.cellProvokedMap.set(s,c),r.flatIdToCellId[c]=t,r.ibo[r.iboId++]=c;for(var f=u+1;f<u+n;f++)c=bp(r,s=e[f%n],t),r.ibo[r.iboId++]=c;return}}var d=e[0],p=r.flatId;r.cellProvokedMap.set(d,p),r.flatIdToPointId[r.flatId]=d,r.flatIdToCellId[r.flatId]=t,r.flatId++,r.ibo[r.iboId++]=p;for(var g=1;g<n;g++)p=bp(r,d=e[g],t),r.ibo[r.iboId++]=p}function xp(e,t,r){var n=e.length;r.iboSize+=n;for(var a=0;a<n;a++){var o=e[a];if(r.cellProvokedMap.has(o))return}for(var i=0;i<n;i++){var l=e[i];if(!r.provokedPointIds[l])return r.provokedPointIds[l]=1,void r.cellProvokedMap.set(l,1)}r.cellProvokedMap.set(e[0],1),r.extraPoints++}var Sp=new Uint32Array(1),wp=new Uint32Array(2),Cp=new Uint32Array(3),Pp={anythingToPoints:function(e,t,r,n,a){for(var o=0;o<e;++o)Sp[0]=t[r+o],mp(Sp,n,a)},linesToWireframe:function(e,t,r,n,a){for(var o=0;o<e-1;++o)wp[0]=t[r+o],wp[1]=t[r+o+1],mp(wp,n,a)},polysToWireframe:function(e,t,r,n,a){if(e>2)for(var o=0;o<e;++o)wp[0]=t[r+o],wp[1]=t[r+(o+1)%e],mp(wp,n,a)},stripsToWireframe:function(e,t,r,n,a){if(e>2){for(var o=0;o<e-1;++o)wp[0]=t[r+o],wp[1]=t[r+o+1],mp(wp,n,a);for(var i=0;i<e-2;i++)wp[0]=t[r+i],wp[1]=t[r+i+2],mp(wp,n,a)}},polysToSurface:function(e,t,r,n,a){for(var o=0;o<e-2;o++)Cp[0]=t[r],Cp[1]=t[r+o+1],Cp[2]=t[r+o+2],mp(Cp,n,a)},stripsToSurface:function(e,t,r,n,a){for(var o=0;o<e-2;o++)Cp[0]=t[r+o],Cp[1]=t[r+o+1+o%2],Cp[2]=t[r+o+1+(o+1)%2],mp(Cp,n,a)}};function Op(e,t){t.classHierarchy.push("vtkWebGPUIndexBuffer"),e.buildIndexBuffer=function(e){var r=e.cells,n=e.primitiveType,a=e.representation,o=e.cellOffset,i=r.getData(),l=i.length,u=function(e){switch(e){case hp.Points:return"points";case hp.Lines:return"lines";case hp.Triangles:case hp.TriangleEdges:return"polys";case hp.TriangleStripEdges:case hp.TriangleStrips:return"strips";default:return""}}(n),s=e.numberOfPoints,c={provokedPointIds:new Uint8Array(s),extraPoints:0,iboSize:0,flatId:0,iboId:0,cellProvokedMap:new yp},f=null;f=a===vp.POINTS||n===hp.Points?Pp.anythingToPoints:a===vp.WIREFRAME||n===hp.Lines?Pp["".concat(u,"ToWireframe")]:Pp["".concat(u,"ToSurface")],mp=xp;for(var d=o||0,p=0;p<l;)c.cellProvokedMap.clear(),f(i[p],i,p+1,d,c),p+=i[p]+1,d++;c.flatIdToPointId=s<=65535?new Uint16Array(s+c.extraPoints):new Uint32Array(s+c.extraPoints),s+c.extraPoints<36863?c.pointIdToFlatId=new Int16Array(s):c.pointIdToFlatId=new Int32Array(s),s+c.extraPoints<=65535?(c.ibo=new Uint16Array(c.iboSize),e.format="uint16"):(c.ibo=new Uint32Array(c.iboSize),e.format="uint32"),c.flatIdToCellId=d<=65535?new Uint16Array(s+c.extraPoints):new Uint32Array(s+c.extraPoints),c.pointIdToFlatId.fill(-1),c.provokedPointIds.fill(0),mp=Tp,d=o||0;for(var g=0;g<l;)c.cellProvokedMap.clear(),f(i[g],i,g+1,d,c),g+=i[g]+1,d++;delete c.provokedPointIds,delete c.pointIdToFlatId,e.nativeArray=c.ibo,t.flatIdToPointId=c.flatIdToPointId,t.flatIdToCellId=c.flatIdToCellId,t.flatSize=c.flatId,t.indexCount=c.iboId}}var Ap={flatIdToPointId:null,flatIdToCellId:null,flatSize:0,indexCount:0};function Ep(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ap,r),pp.extend(e,t,r),er.setGet(e,t,["flatIdToPointId","flatIdToCellId","flatSize","indexCount"]),Op(e,t)}var Ip=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gp(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({newInstance:er.newInstance(Ep),extend:Ep},lp);function Rp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rp(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Dp=lp.BufferUsage,kp=Ot,_p=Dl.VtkDataTypes;function Lp(e,t,r,n,a){var o={},i=e.getFlatSize();if(!i)return o;var l=[0,0,0,0];a.shift&&(a.shift.length?l=a.shift:l.fill(a.shift));var u=[1,1,1,1];a.scale&&(a.scale.length?u=a.scale:u.fill(a.scale));var s,c=!!Object.prototype.hasOwnProperty.call(a,"packExtra")&&a.packExtra,f=0,d=Rt(n,i*(r+(c?1:0))),p=e.getFlatIdToPointId();a.cellData&&(p=e.getFlatIdToCellId()),1===r?s=function(e){d[f++]=u[0]*t[e]+l[0]}:2===r?s=function(e){d[f++]=u[0]*t[e]+l[0],d[f++]=u[1]*t[e+1]+l[1]}:3!==r||c?3===r&&c?s=function(e){d[f++]=u[0]*t[e]+l[0],d[f++]=u[1]*t[e+1]+l[1],d[f++]=u[2]*t[e+2]+l[2],d[f++]=1*u[3]+l[3]}:4===r&&(s=function(e){d[f++]=u[0]*t[e]+l[0],d[f++]=u[1]*t[e+1]+l[1],d[f++]=u[2]*t[e+2]+l[2],d[f++]=u[3]*t[e+3]+l[3]}):s=function(e){d[f++]=u[0]*t[e]+l[0],d[f++]=u[1]*t[e+1]+l[1],d[f++]=u[2]*t[e+2]+l[2]};for(var g=0;g<i;g++){s(r*p[g])}return o.nativeArray=d,o}function Bp(e,t,r,n){var a=[];return bo([e[3*n]-e[3*r],e[3*n+1]-e[3*r+1],e[3*n+2]-e[3*r+2]],[e[3*t]-e[3*r],e[3*t+1]-e[3*r+1],e[3*t+2]-e[3*r+2]],a),xo(a),a}function Vp(e,t){function r(e){var r,n;if(e.dataArray&&!e.nativeArray&&(e.nativeArray=e.dataArray.getData()),e.usage===Dp.Index&&((r=Ip.newInstance({label:e.label})).setDevice(t.device),n=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST,r.buildIndexBuffer(e),r.createAndWrite(e.nativeArray,n),r.setArrayInformation([{format:e.format}])),r||(r=pp.newInstance({label:e.label})).setDevice(t.device),e.usage===Dp.UniformArray&&(n=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,r.createAndWrite(e.nativeArray,n)),e.usage===Dp.Storage&&(n=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST,r.createAndWrite(e.nativeArray,n)),e.usage===Dp.Texture&&(n=GPUBufferUsage.COPY_SRC,r.createAndWrite(e.nativeArray,n)),e.usage===Dp.PointArray){n=GPUBufferUsage.VERTEX;var a=Qd.getNativeTypeFromBufferFormat(e.format),o=Lp(e.indexBuffer,e.dataArray.getData(),e.dataArray.getNumberOfComponents(),a,{packExtra:e.packExtra,shift:e.shift,scale:e.scale,cellData:e.cellData,cellOffset:e.cellOffset});r.createAndWrite(o.nativeArray,n),r.setStrideInBytes(Qd.getByteStrideFromBufferFormat(e.format)),r.setArrayInformation([{offset:0,format:e.format,interpolation:e.cellData?"flat":"perspective"}])}if(e.usage===Dp.NormalsFromPoints){n=GPUBufferUsage.VERTEX;var i=Qd.getNativeTypeFromBufferFormat(e.format),l=function(e,t){var r=t.getData(),n=e.getData();if(!n||!r)return null;for(var a=new Int8Array(4*e.getNumberOfCells()),o=n.length,i=0,l=0;l<o;){var u=Bp(r,n[l+1],n[l+2],n[l+3]);a[i++]=127*u[0],a[i++]=127*u[1],a[i++]=127*u[2],a[i++]=127,l+=n[l]+1}return a}(e.cells,e.dataArray),u=Lp(e.indexBuffer,l,4,i,{cellData:!0});r.createAndWrite(u.nativeArray,n),r.setStrideInBytes(Qd.getByteStrideFromBufferFormat(e.format)),r.setArrayInformation([{offset:0,format:e.format,interpolation:"flat"}])}return e.usage===Dp.RawVertex&&(n=GPUBufferUsage.VERTEX,r.createAndWrite(e.nativeArray,n),r.setStrideInBytes(Qd.getByteStrideFromBufferFormat(e.format)),r.setArrayInformation([{offset:0,format:e.format}])),r.setSourceTime(e.time),r}t.classHierarchy.push("vtkWebGPUBufferManager"),e.hasBuffer=function(e){return t.device.hasCachedObject(e)},e.getBuffer=function(e){return e.hash?t.device.getCachedObject(e.hash,r,e):r(e)},e.getBufferForPointArray=function(t,r){var n=function(e){var t;switch(e.getDataType()){case _p.UNSIGNED_CHAR:t="uint8";break;case _p.FLOAT:t="float32";break;case _p.UNSIGNED_INT:t="uint32";break;case _p.INT:t="sint32";break;case _p.DOUBLE:t="float32";break;case _p.UNSIGNED_SHORT:t="uint16";break;case _p.SHORT:t="sin16";break;default:t="float32"}switch(e.getNumberOfComponents()){case 2:t+="x2";break;case 3:t.includes("32")||kp("unsupported x3 type for ".concat(t)),t+="x3";break;case 4:t+="x4"}return t}(t),a={hash:"".concat(t.getMTime(),"I").concat(r.getMTime()).concat(n),usage:Dp.PointArray,format:n,dataArray:t,indexBuffer:r};return e.getBuffer(a)},e.getFullScreenQuadBuffer=function(){if(t.fullScreenQuadBuffer)return t.fullScreenQuadBuffer;t.fullScreenQuadBuffer=pp.newInstance(),t.fullScreenQuadBuffer.setDevice(t.device);var e=new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,-1,0,1,1,0,-1,1,0]);return t.fullScreenQuadBuffer.createAndWrite(e,GPUBufferUsage.VERTEX),t.fullScreenQuadBuffer.setStrideInBytes(12),t.fullScreenQuadBuffer.setArrayInformation([{offset:0,format:"float32x3"}]),t.fullScreenQuadBuffer}}var Np={device:null,fullScreenQuadBuffer:null};function Fp(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Np,r),Vt(e,t),zt(e,t,["device"]),Vp(e,t)}var Up=Mp(Mp({newInstance:Yt(Fp),extend:Fp},{}),lp),Gp=Up.BufferUsage,jp=er.vtkErrorMacro;var zp={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,numberOfInstances:1};function Wp(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zp,r),er.obj(e,t),t._bufferEntryNames=new Map,t.bufferEntries=[],t._sendTime={},er.obj(t._sendTime,{mtime:0}),t.bindGroupTime={},er.obj(t.bindGroupTime,{mtime:0}),t.bindGroupLayoutEntry=t.bindGroupLayoutEntry||{buffer:{type:"read-only-storage"}},er.get(e,t,["bindGroupTime"]),er.setGet(e,t,["device","bindGroupLayoutEntry","label","numberOfInstances","sizeInBytes"]),function(e,t){t.classHierarchy.push("vtkWebGPUStorageBuffer"),e.addEntry=function(e,r){if(t._bufferEntryNames.has(e))jp("entry named ".concat(e," already exists"));else{t._bufferEntryNames.set(e,t.bufferEntries.length);var n=Qd.getByteStrideFromShaderFormat(r);t.bufferEntries.push({name:e,type:r,sizeInBytes:n,offset:t.sizeInBytes,nativeType:Qd.getNativeTypeFromShaderFormat(r)}),t.sizeInBytes+=n}},e.send=function(e){if(!t._buffer){var r={nativeArray:t.Float32Array,usage:Gp.Storage,label:t.label};return t._buffer=e.getBufferManager().getBuffer(r),t.bindGroupTime.modified(),void t._sendTime.modified()}e.getHandle().queue.writeBuffer(t._buffer.getHandle(),0,t.arrayBuffer,0,t.sizeInBytes*t.numberOfInstances),t._sendTime.modified()},e.createView=function(e){e in t===!1&&(t.arrayBuffer||(t.arrayBuffer=new ArrayBuffer(t.sizeInBytes*t.numberOfInstances)),t[e]=er.newTypedArray(e,t.arrayBuffer))},e.setValue=function(r,n,a){var o=t._bufferEntryNames.get(r);if(void 0!==o){var i=t.bufferEntries[o];e.createView(i.nativeType);var l=t[i.nativeType];l[(i.offset+n*t.sizeInBytes)/l.BYTES_PER_ELEMENT]=a}else jp("entry named ".concat(r," not found in UBO"))},e.setArray=function(r,n,a){var o=t._bufferEntryNames.get(r);if(void 0!==o){var i=t.bufferEntries[o];e.createView(i.nativeType);for(var l=t[i.nativeType],u=(i.offset+n*t.sizeInBytes)/l.BYTES_PER_ELEMENT,s=0;s<a.length;s++)l[u+s]=a[s]}else jp("entry named ".concat(r," not found in UBO"))},e.setAllInstancesFromArray=function(r,n){var a=t._bufferEntryNames.get(r);if(void 0!==a){var o=t.bufferEntries[a];e.createView(o.nativeType);for(var i=t[o.nativeType],l=n.length/t.numberOfInstances,u=0;u<t.numberOfInstances;u++)for(var s=(o.offset+u*t.sizeInBytes)/i.BYTES_PER_ELEMENT,c=0;c<l;c++)i[s+c]=n[u*l+c]}else jp("entry named ".concat(r," not found in UBO"))},e.setAllInstancesFromArrayColorToFloat=function(r,n){var a=t._bufferEntryNames.get(r);if(void 0!==a){var o=t.bufferEntries[a];e.createView(o.nativeType);for(var i=t[o.nativeType],l=n.length/t.numberOfInstances,u=0;u<t.numberOfInstances;u++)for(var s=(o.offset+u*t.sizeInBytes)/i.BYTES_PER_ELEMENT,c=0;c<l;c++)i[s+c]=n[u*l+c]/255}else jp("entry named ".concat(r," not found in UBO"))},e.setAllInstancesFromArray3x3To4x4=function(r,n){var a=t._bufferEntryNames.get(r);if(void 0!==a){var o=t.bufferEntries[a];e.createView(o.nativeType);for(var i=t[o.nativeType],l=0;l<t.numberOfInstances;l++)for(var u=(o.offset+l*t.sizeInBytes)/i.BYTES_PER_ELEMENT,s=0;s<3;s++)for(var c=0;c<3;c++)i[u+4*s+c]=n[9*l+3*s+c]}else jp("entry named ".concat(r," not found in UBO"))},e.getSendTime=function(){return t._sendTime.getMTime()},e.getShaderCode=function(e,r){for(var n=["struct ".concat(t.label,"StructEntry\n{")],a=0;a<t.bufferEntries.length;a++){var o=t.bufferEntries[a];n.push("  ".concat(o.name,": ").concat(o.type,","))}return n.push("\n};\nstruct ".concat(t.label,"Struct\n{\n  values: array<").concat(t.label,"StructEntry>,\n};\n@binding(").concat(e,") @group(").concat(r,") var<storage, read> ").concat(t.label,": ").concat(t.label,"Struct;\n")),n.join("\n")},e.getBindGroupEntry=function(){return{resource:{buffer:t._buffer.getHandle()}}},e.clearData=function(){t.numberOfInstances=0,t.sizeInBytes=0,t.bufferEntries=[],t._bufferEntryNames=new Map,t._buffer=null,delete t.arrayBuffer,delete t.Float32Array}}(e,t)}var Hp={newInstance:er.newInstance(Wp,"vtkWebGPUStorageBuffer"),extend:Wp},Kp=Up.BufferUsage,Xp=er.vtkErrorMacro;var qp={bufferEntries:null,bufferEntryNames:null,sizeInBytes:0,label:null,bindGroupLayoutEntry:null,bindGroupEntry:null};function Yp(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,qp,r),er.obj(e,t),t._bufferEntryNames=new Map,t.bufferEntries=[],t.bindGroupLayoutEntry=t.bindGroupLayoutEntry||{buffer:{type:"uniform"}},t.sendTime={},er.obj(t.sendTime,{mtime:0}),t.bindGroupTime={},er.obj(t.bindGroupTime,{mtime:0}),t.sendDirty=!0,t.sortDirty=!0,er.get(e,t,["binding","bindGroupTime"]),er.setGet(e,t,["bindGroupLayoutEntry","device","label","sizeInBytes"]),function(e,t){t.classHierarchy.push("vtkWebGPUUniformBuffer"),e.addEntry=function(e,r){t._bufferEntryNames.has(e)?Xp("entry named ".concat(e," already exists")):(t.sortDirty=!0,t._bufferEntryNames.set(e,t.bufferEntries.length),t.bufferEntries.push({name:e,type:r,sizeInBytes:Qd.getByteStrideFromShaderFormat(r),offset:-1,nativeType:Qd.getNativeTypeFromShaderFormat(r),packed:!1}))},e.sortBufferEntries=function(){if(t.sortDirty){for(var e=0,r=[],n=4,a=0;a<t.bufferEntries.length;a++){var o=t.bufferEntries[a];o.sizeInBytes%16===0&&(n=Math.max(16,n)),o.sizeInBytes%8===0&&(n=Math.max(8,n))}for(var i=0;i<t.bufferEntries.length;i++){var l=t.bufferEntries[i];!1===l.packed&&l.sizeInBytes%16===0&&(l.packed=!0,l.offset=e,r.push(l),e+=l.sizeInBytes)}for(var u=0;u<t.bufferEntries.length;u++){var s=t.bufferEntries[u];if(!1===s.packed&&12===s.sizeInBytes)for(var c=0;c<t.bufferEntries.length;c++){var f=t.bufferEntries[c];if(!1===f.packed&&4===f.sizeInBytes){s.packed=!0,s.offset=e,r.push(s),e+=s.sizeInBytes,f.packed=!0,f.offset=e,r.push(f),e+=f.sizeInBytes;break}}}for(var d=0;d<t.bufferEntries.length;d++){var p=t.bufferEntries[d];if(!p.packed&&p.sizeInBytes%8===0)for(var g=d+1;g<t.bufferEntries.length;g++){var m=t.bufferEntries[g];if(!m.packed&&m.sizeInBytes%8===0){p.packed=!0,p.offset=e,r.push(p),e+=p.sizeInBytes,m.packed=!0,m.offset=e,r.push(m),e+=m.sizeInBytes;break}}}for(var v=0;v<t.bufferEntries.length;v++){var h=t.bufferEntries[v];if(!h.packed&&h.sizeInBytes%8===0)for(var y=!1,b=0;!y&&b<t.bufferEntries.length;b++){var T=t.bufferEntries[b];if(!T.packed&&4===T.sizeInBytes)for(var x=b+1;x<t.bufferEntries.length;x++){var S=t.bufferEntries[x];if(!S.packed&&4===S.sizeInBytes){h.packed=!0,h.offset=e,r.push(h),e+=h.sizeInBytes,T.packed=!0,T.offset=e,r.push(T),e+=T.sizeInBytes,S.packed=!0,S.offset=e,r.push(S),e+=S.sizeInBytes,y=!0;break}}}}for(var w=0;w<t.bufferEntries.length;w++){var C=t.bufferEntries[w];!C.packed&&C.sizeInBytes>4&&(C.packed=!0,C.offset=e,r.push(C),e+=C.sizeInBytes)}for(var P=0;P<t.bufferEntries.length;P++){var O=t.bufferEntries[P];O.packed||(O.packed=!0,O.offset=e,r.push(O),e+=O.sizeInBytes)}t.bufferEntries=r,t._bufferEntryNames.clear();for(var A=0;A<t.bufferEntries.length;A++)t._bufferEntryNames.set(t.bufferEntries[A].name,A);t.sizeInBytes=e,t.sizeInBytes=n*Math.ceil(t.sizeInBytes/n),t.sortDirty=!1}},e.sendIfNeeded=function(e){if(!t.UBO){var r={nativeArray:t.Float32Array,usage:Kp.UniformArray,label:t.label};t.UBO=e.getBufferManager().getBuffer(r),t.bindGroupTime.modified(),t.sendDirty=!1}t.sendDirty&&(e.getHandle().queue.writeBuffer(t.UBO.getHandle(),0,t.arrayBuffer,0,t.sizeInBytes),t.sendDirty=!1),t.sendTime.modified()},e.createView=function(e){e in t===!1&&(t.arrayBuffer||(t.arrayBuffer=new ArrayBuffer(t.sizeInBytes)),t[e]=er.newTypedArray(e,t.arrayBuffer))},e.setValue=function(r,n){e.sortBufferEntries();var a=t._bufferEntryNames.get(r);if(void 0!==a){var o=t.bufferEntries[a];e.createView(o.nativeType);var i=t[o.nativeType];o.lastValue!==n&&(i[o.offset/i.BYTES_PER_ELEMENT]=n,t.sendDirty=!0),o.lastValue=n}else Xp("entry named ".concat(r," not found in UBO"))},e.setArray=function(r,n){e.sortBufferEntries();var a=t._bufferEntryNames.get(r);if(void 0!==a){var o=t.bufferEntries[a];e.createView(o.nativeType);for(var i=t[o.nativeType],l=!1,u=0;u<n.length;u++)o.lastValue&&o.lastValue[u]===n[u]||(i[o.offset/i.BYTES_PER_ELEMENT+u]=n[u],l=!0);l&&(t.sendDirty=!0,o.lastValue=$e(n))}else Xp("entry named ".concat(r," not found in UBO"))},e.getBindGroupEntry=function(){return{resource:{buffer:t.UBO.getHandle()}}},e.getSendTime=function(){return t.sendTime.getMTime()},e.getShaderCode=function(r,n){e.sortBufferEntries();for(var a=["struct ".concat(t.label,"Struct\n{")],o=0;o<t.bufferEntries.length;o++){var i=t.bufferEntries[o];a.push("  ".concat(i.name,": ").concat(i.type,","))}return a.push("};\n@binding(".concat(r,") @group(").concat(n,") var<uniform> ").concat(t.label,": ").concat(t.label,"Struct;")),a.join("\n")}}(e,t)}var Qp={newInstance:er.newInstance(Yp,"vtkWebGPUUniformBuffer"),extend:Yp},$p=Pt,Zp="\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var computedColor: vec4<f32> = mapperUBO.BackgroundColor;\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n",Jp="\nfn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {\n  var tau: f32 = 6.28318530718;\n  var pi: f32 = 3.14159265359;\n  var out: vec2<f32> = vec2<f32>(0.0);\n\n  out.x = atan2(dir.z, dir.x) / tau;\n  out.x += 0.5;\n\n  var phix: f32 = length(vec2(dir.x, dir.z));\n  out.y = atan2(dir.y, phix) / pi + 0.5;\n\n  return out;\n}\n\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var tcoord: vec4<f32> = vec4<f32>(input.vertexVC.xy, -1, 1);\n  var V: vec4<f32> = normalize(mapperUBO.FSQMatrix * tcoord); // vec2<f32>((input.tcoordVS.x - 0.5) * 2, -(input.tcoordVS.y - 0.5) * 2);\n  // textureSampleLevel gets rid of some ugly artifacts\n  var background = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, vecToRectCoord(V.xyz), 0);\n  var computedColor: vec4<f32> = vec4<f32>(background.rgb, 1);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n",eg=new Float64Array(16),tg=new Float64Array(16);var rg={bindGroup:null,selector:null,renderEncoder:null,recenterThreshold:20,suppressClear:!1,stabilizedCenter:[0,0,0]};function ng(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rg,r),ar.extend(e,t,r),t.UBO=Qp.newInstance({label:"rendererUBO"}),t.UBO.addEntry("WCVCMatrix","mat4x4<f32>"),t.UBO.addEntry("SCPCMatrix","mat4x4<f32>"),t.UBO.addEntry("PCSCMatrix","mat4x4<f32>"),t.UBO.addEntry("SCVCMatrix","mat4x4<f32>"),t.UBO.addEntry("VCPCMatrix","mat4x4<f32>"),t.UBO.addEntry("WCVCNormals","mat4x4<f32>"),t.UBO.addEntry("viewportSize","vec2<f32>"),t.UBO.addEntry("LightCount","i32"),t.UBO.addEntry("MaxEnvironmentMipLevel","f32"),t.UBO.addEntry("BackgroundDiffuseStrength","f32"),t.UBO.addEntry("BackgroundSpecularStrength","f32"),t.UBO.addEntry("cameraParallel","u32"),t.SSBO=Hp.newInstance({label:"rendererLightSSBO"}),t.lightTimeString="",t.bindGroup=Bd.newInstance({label:"rendererBG"}),t.bindGroup.setBindables([t.UBO,t.SSBO]),t.tmpMat4=S(new Float64Array(16)),t.stabilizedTime={},Vt(t.stabilizedTime,{mtime:0}),Ft(e,t,["bindGroup","stabilizedTime"]),Wt(e,t,["stabilizedCenter"]),zt(e,t,["renderEncoder","selector","suppressClear","UBO"]),function(e,t){t.classHierarchy.push("vtkWebGPURenderer"),e.buildPass=function(r){if(r){if(!t.renderable)return;t.camera=t.renderable.getActiveCamera(),e.updateLights(),e.prepareNodes(),e.addMissingNode(t.camera),e.addMissingNodes(t.renderable.getViewPropsWithNestedProps()),e.removeUnusedNodes(),t.webgpuCamera=e.getViewNodeFor(t.camera),e.updateStabilizedMatrix()}},e.updateStabilizedMatrix=function(){var e=t.camera.getClippingRange(),r=t.camera.getPositionByReference(),n=[],a=[];Gr(a,t.camera.getDirectionOfProjectionByReference(),.5*(e[0]+e[1])),Dr(n,r,a),pn(a,n,t.stabilizedCenter),yn(a)/(e[1]-e[0])>t.recenterThreshold&&(t.stabilizedCenter=n,t.stabilizedTime.modified())},e.updateLights=function(){for(var e=0,r=t.renderable.getLightsByReference(),n=0;n<r.length;++n)r[n].getSwitch()>0&&e++;return e||($p("No lights are on, creating one."),t.renderable.createLight()),e},e.updateUBO=function(){var r=t.UBO.getSendTime();if(t._parent.getMTime()>r||e.getMTime()>r||t.camera.getMTime()>r||t.renderable.getMTime()>r){var n,a=t.webgpuCamera.getKeyMatrices(e);t.UBO.setArray("WCVCMatrix",a.wcvc),t.UBO.setArray("SCPCMatrix",a.scpc),t.UBO.setArray("PCSCMatrix",a.pcsc),t.UBO.setArray("SCVCMatrix",a.scvc),t.UBO.setArray("VCPCMatrix",a.vcpc),t.UBO.setArray("WCVCNormals",a.normalMatrix),t.UBO.setValue("LightCount",t.renderable.getLights().length),t.UBO.setValue("MaxEnvironmentMipLevel",null===(n=t.renderable.getEnvironmentTexture())||void 0===n?void 0:n.getMipLevel()),t.UBO.setValue("BackgroundDiffuseStrength",t.renderable.getEnvironmentTextureDiffuseStrength()),t.UBO.setValue("BackgroundSpecularStrength",t.renderable.getEnvironmentTextureSpecularStrength());var o=e.getYInvertedTiledSizeAndOrigin();t.UBO.setArray("viewportSize",[o.usize,o.vsize]),t.UBO.setValue("cameraParallel",t.camera.getParallelProjection());var i=t._parent.getDevice();t.UBO.sendIfNeeded(i)}},e.updateSSBO=function(){for(var r,n=t.renderable.getLights(),a=t.webgpuCamera.getKeyMatrices(e),o="".concat(t.renderable.getMTime()),i=0;i<n.length;i++)o+=n[i].getMTime();if(o!==t.lightTimeString){for(var l=new Float32Array(4*n.length),u=new Float32Array(4*n.length),s=new Float32Array(4*n.length),c=new Float32Array(4*n.length),f=0;f<n.length;f++){var d=4*f,p=n[f].getPosition();tn(p,p,a.wcvc),l[d]=p[0],l[d+1]=p[1],l[d+2]=p[2],l[d+3]=0,u[d]=-n[f].getDirection()[0],u[d+1]=-n[f].getDirection()[1],u[d+2]=-n[f].getDirection()[2],u[d+3]=0,s[d]=n[f].getColor()[0],s[d+1]=n[f].getColor()[1],s[d+2]=n[f].getColor()[2],s[d+3]=5*n[f].getIntensity(),c[d]=(r=n[f]).getPositional()?r.getConeAngle()>=90?0:2:1,c[d+1]=Math.cos(so(n[f].getConeAngle())),c[d+2]=Math.cos(so(n[f].getConeAngle()+n[f].getConeFalloff())),c[d+3]=0}t.SSBO.clearData(),t.SSBO.setNumberOfInstances(n.length),t.SSBO.addEntry("LightPos","vec4<f32>"),t.SSBO.addEntry("LightDir","vec4<f32>"),t.SSBO.addEntry("LightColor","vec4<f32>"),t.SSBO.addEntry("LightData","vec4<f32>"),t.SSBO.setAllInstancesFromArray("LightPos",l),t.SSBO.setAllInstancesFromArray("LightDir",u),t.SSBO.setAllInstancesFromArray("LightColor",s),t.SSBO.setAllInstancesFromArray("LightData",c);var g=t._parent.getDevice();t.SSBO.send(g)}t.lightTimeString=o},e.scissorAndViewport=function(t){var r=e.getYInvertedTiledSizeAndOrigin();t.getHandle().setViewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize,0,1),t.getHandle().setScissorRect(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize)},e.bindUBO=function(e){e.activateBindGroup(t.bindGroup)},e.opaquePass=function(r){r?(t.renderEncoder.begin(t._parent.getCommandEncoder()),e.updateUBO(),e.updateSSBO()):(e.scissorAndViewport(t.renderEncoder),e.clear(),t.renderEncoder.end())},e.clear=function(){var r;if(!t.renderable.getTransparent()&&!t.suppressClear){var n=t._parent.getDevice();if(!t.clearFSQ){t.clearFSQ=ip.newInstance(),t.clearFSQ.setDevice(n),t.clearFSQ.setPipelineHash("clearfsq"),t.clearFSQ.setFragmentShaderTemplate(Zp);var a=Qp.newInstance({label:"mapperUBO"});a.addEntry("FSQMatrix","mat4x4<f32>"),a.addEntry("BackgroundColor","vec4<f32>"),t.clearFSQ.setUBO(a),t.backgroundTex=t.renderable.getEnvironmentTexture()}if("clearfsqwithtexture"!==t.clearFSQ.getPipelineHash()&&t.renderable.getUseEnvironmentTextureAsBackground()&&null!==(r=t.backgroundTex)&&void 0!==r&&r.getImageLoaded()){t.clearFSQ.setFragmentShaderTemplate(Jp);var o=Qp.newInstance({label:"mapperUBO"});o.addEntry("FSQMatrix","mat4x4<f32>"),o.addEntry("BackgroundColor","vec4<f32>"),t.clearFSQ.setUBO(o);var i=n.getTextureManager().getTextureForVTKTexture(t.backgroundTex);if(i.getReady()){var l=i.createView("EnvironmentTexture");t.clearFSQ.setTextureViews([l]),t.backgroundTexLoaded=!0;var u=t.backgroundTex.getInterpolate()?"linear":"nearest";l.addSampler(n,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:u,magFilter:u,mipmapFilter:"linear"})}t.clearFSQ.setPipelineHash("clearfsqwithtexture")}else if("clearfsqwithtexture"===t.clearFSQ.getPipelineHash()&&!t.renderable.getUseEnvironmentTextureAsBackground()){t.clearFSQ=ip.newInstance(),t.clearFSQ.setDevice(n),t.clearFSQ.setPipelineHash("clearfsq"),t.clearFSQ.setFragmentShaderTemplate(Zp);var s=Qp.newInstance({label:"mapperUBO"});s.addEntry("FSQMatrix","mat4x4<f32>"),s.addEntry("BackgroundColor","vec4<f32>"),t.clearFSQ.setUBO(s)}var c=t.webgpuCamera.getKeyMatrices(e),f=t.renderable.getBackgroundByReference();t.clearFSQ.getUBO().setArray("BackgroundColor",f),w(tg,c.normalMatrix),de(eg,c.scvc,c.pcsc),de(eg,tg,eg),t.clearFSQ.getUBO().setArray("FSQMatrix",eg),t.clearFSQ.getUBO().sendIfNeeded(n),t.clearFSQ.prepareAndDraw(t.renderEncoder)}},e.translucentPass=function(r){r?t.renderEncoder.begin(t._parent.getCommandEncoder()):(e.scissorAndViewport(t.renderEncoder),t.renderEncoder.end())},e.volumeDepthRangePass=function(r){r?t.renderEncoder.begin(t._parent.getCommandEncoder()):(e.scissorAndViewport(t.renderEncoder),t.renderEncoder.end())},e.getAspectRatio=function(){var e=t._parent.getSizeByReference(),r=t.renderable.getViewportByReference();return e[0]*(r[2]-r[0])/((r[3]-r[1])*e[1])},e.convertToOpenGLDepth=function(e){return t.webgpuCamera.convertToOpenGLDepth(e)},e.getYInvertedTiledSizeAndOrigin=function(){var r=e.getTiledSizeAndOrigin(),n=t._parent.getSizeByReference();return r.lowerLeftV=n[1]-r.vsize-r.lowerLeftV,r},e.getTiledSizeAndOrigin=function(){var e=t.renderable.getViewportByReference(),r=[0,0,1,1],n=e[0]-r[0],a=e[1]-r[1],o=t._parent.normalizedDisplayToDisplay(n,a),i=Math.round(o[0]),l=Math.round(o[1]),u=e[2]-r[0],s=e[3]-r[1],c=t._parent.normalizedDisplayToDisplay(u,s),f=Math.round(c[0])-i,d=Math.round(c[1])-l;return f<0&&(f=0),d<0&&(d=0),{usize:f,vsize:d,lowerLeftU:i,lowerLeftV:l}},e.getPropFromID=function(e){for(var r=0;r<t.children.length;r++)if((t.children[r].getPropID?t.children[r].getPropID():-1)===e)return t.children[r];return null},e.getStabilizedTime=function(){return t.stabilizedTime.getMTime()},e.releaseGraphicsResources=function(){null!==t.selector&&t.selector.releaseGraphicsResources()}}(e,t)}var ag=Yt(ng,"vtkWebGPURenderer");Ad("vtkRenderer",ag);var og=$i.CoordinateSystem;var ig={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function lg(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ig,r),ar.extend(e,t,r),t.keyMatricesTime={},er.obj(t.keyMatricesTime,{mtime:0}),t.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},er.get(e,t,["propID","keyMatricesTime"]),t.bufferShift=[0,0,0,0],function(e,t){t.classHierarchy.push("vtkWebGPUActor"),e.buildPass=function(r){r&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),void 0===t.propID&&(t.propID=t.WebGPURenderWindow.getUniquePropID()),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes())},e.traverseOpaquePass=function(r){t.renderable&&t.renderable.getNestedVisibility()&&t.renderable.getIsOpaque()&&(!t.WebGPURenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(r,!0),t.children[0]&&t.children[0].traverse(r),e.apply(r,!1))},e.traverseTranslucentPass=function(r){!t.renderable||!t.renderable.getNestedVisibility()||t.renderable.getIsOpaque()||t.WebGPURenderer.getSelector()&&!t.renderable.getNestedPickable()||(e.apply(r,!0),t.children[0]&&t.children[0].traverse(r),e.apply(r,!1))},e.queryPass=function(e,r){if(e){if(!t.renderable||!t.renderable.getVisibility())return;t.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},e.getBufferShift=function(r){return e.getKeyMatrices(r),t.bufferShift},e.getKeyMatrices=function(e){if(Math.max(t.renderable.getMTime(),e.getStabilizedTime())>t.keyMatricesTime.getMTime()){t.renderable.computeMatrix();var r=t.renderable.getMatrix();t.bufferShift[0]=r[3],t.bufferShift[1]=r[7],t.bufferShift[2]=r[11];var n=e.getStabilizedCenterByReference();t.renderable.getCoordinateSystem()===og.WORLD&&(t.bufferShift[0]-=n[0],t.bufferShift[1]-=n[1],t.bufferShift[2]-=n[2]),w(t.keyMatrices.bcwc,r),t.renderable.getIsIdentity()?S(t.keyMatrices.normalMatrix):(b(t.keyMatrices.normalMatrix,t.keyMatrices.bcwc),t.keyMatrices.normalMatrix[3]=0,t.keyMatrices.normalMatrix[7]=0,t.keyMatrices.normalMatrix[11]=0,C(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),w(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix)),E(t.keyMatrices.bcwc,t.keyMatrices.bcwc,[-t.bufferShift[0],-t.bufferShift[1],-t.bufferShift[2]]),t.renderable.getCoordinateSystem()===og.WORLD?E(t.keyMatrices.bcsc,t.keyMatrices.bcwc,[-n[0],-n[1],-n[2]]):b(t.keyMatrices.bcsc,t.keyMatrices.bcwc),t.keyMatricesTime.modified()}return t.keyMatrices}}(e,t)}var ug=er.newInstance(lg);Ad("vtkActor",ug);var sg=$i.CoordinateSystem;var cg={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0};function fg(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,cg,r),ar.extend(e,t,r),t.keyMatricesTime={},er.obj(t.keyMatricesTime,{mtime:0}),t.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},er.get(e,t,["propID","keyMatricesTime"]),t.bufferShift=[0,0,0,0],function(e,t){t.classHierarchy.push("vtkWebGPUActor2D"),e.buildPass=function(r){r&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),void 0===t.propID&&(t.propID=t.WebGPURenderWindow.getUniquePropID()),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes())},e.traverseOpaquePass=function(r){t.renderable&&t.renderable.getNestedVisibility()&&t.renderable.getIsOpaque()&&(!t.WebGPURenderer.getSelector()||t.renderable.getNestedPickable())&&(e.apply(r,!0),t.children[0]&&t.children[0].traverse(r),e.apply(r,!1))},e.traverseTranslucentPass=function(r){!t.renderable||!t.renderable.getNestedVisibility()||t.renderable.getIsOpaque()||t.WebGPURenderer.getSelector()&&!t.renderable.getNestedPickable()||(e.apply(r,!0),t.children[0]&&t.children[0].traverse(r),e.apply(r,!1))},e.queryPass=function(e,r){if(e){if(!t.renderable||!t.renderable.getVisibility())return;t.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount()}},e.getBufferShift=function(r){return e.getKeyMatrices(r),t.bufferShift},e.getKeyMatrices=function(e){if(Math.max(t.renderable.getMTime(),e.getStabilizedTime())>t.keyMatricesTime.getMTime()){t.bufferShift[0]=0,t.bufferShift[1]=0,t.bufferShift[2]=0;var r=e.getStabilizedCenterByReference();t.renderable.getCoordinateSystem()===sg.WORLD&&(t.bufferShift[0]-=r[0],t.bufferShift[1]-=r[1],t.bufferShift[2]-=r[2]),S(t.keyMatrices.bcwc),S(t.keyMatrices.normalMatrix),E(t.keyMatrices.bcwc,t.keyMatrices.bcwc,[-t.bufferShift[0],-t.bufferShift[1],-t.bufferShift[2]]),t.renderable.getCoordinateSystem()===sg.WORLD?E(t.keyMatrices.bcsc,t.keyMatrices.bcwc,[-r[0],-r[1],-r[2]]):b(t.keyMatrices.bcsc,t.keyMatrices.bcwc),t.keyMatricesTime.modified()}return t.keyMatrices}}(e,t)}var dg=er.newInstance(fg);Ad("vtkActor2D",dg);var pg={};function gg(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,pg,r),ar.extend(e,t,r),t.CubeAxesActorHelper=Pc.newCubeAxesActorHelper(),function(e,t){t.classHierarchy.push("vtkWebGPUCubeAxesActor"),e.buildPass=function(r){r&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getParent(),t.CubeAxesActorHelper.getRenderable()||t.CubeAxesActorHelper.setRenderable(t.renderable),e.prepareNodes(),e.addMissingNode(t.CubeAxesActorHelper.getTmActor()),e.addMissingNode(t.renderable.getGridActor()),e.removeUnusedNodes())},e.opaquePass=function(e,r){if(e){var n=t.WebGPURenderer?t.WebGPURenderer.getRenderable().getActiveCamera():null,a=t.WebGPURenderer.getTiledSizeAndOrigin();t.CubeAxesActorHelper.updateAPISpecificData([a.usize,a.vsize],n,t.WebGPURenderWindow.getRenderable())}}}(e,t)}var mg=Yt(gg,"vtkWebGPUCubeAxesActor");function vg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}Ad("vtkCubeAxesActor",mg);var hg=$f.DisplayLocation;var yg={color:[1,1,1],opacity:1,pointSize:1,lineWidth:1,representation:nl.SURFACE,displayLocation:hg.FOREGROUND};function bg(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yg,r),er.obj(e,t),er.setGet(e,t,["opacity","lineWidth","pointSize","displayLocation","representation"]),er.setGetArray(e,t,["color"],3),function(e,t){t.classHierarchy.push("vtkProperty2D"),e.setDisplayLocationToBackground=function(){return e.setDisplayLocation(hg.BACKGROUND)},e.setDisplayLocationToForeground=function(){return e.setDisplayLocation(hg.FOREGROUND)},e.setRepresentationToWireframe=function(){return e.setRepresentation(nl.WIREFRAME)},e.setRepresentationToSurface=function(){return e.setRepresentation(nl.SURFACE)},e.setRepresentationToPoints=function(){return e.setRepresentation(nl.POINTS)},e.getRepresentationAsString=function(){return er.enumToString(nl,t.representation)}}(e,t)}var Tg=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vg(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({newInstance:er.newInstance(bg,"vtkProperty2D"),extend:bg},$f),xg=Up.BufferUsage,Sg=Up.PrimitiveTypes,wg=fl.Representation,Cg=as.ScalarMode,Pg=$i.CoordinateSystem,Og=Tg.DisplayLocation;function Ag(e){return e.indexOf("edge")>=0}var Eg={is2D:!1,cellArray:null,currentInput:null,cellOffset:0,primitiveType:0,colorTexture:null,renderEncoder:null,textures:null};function Ig(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Eg,r),np.extend(e,t,r),t.fragmentShaderTemplate='\nstruct PBRData {\n  diffuse: vec3<f32>,\n  specular: vec3<f32>,\n}\n\n// Dot product with the max already in it\nfn mdot(a: vec3<f32>, b: vec3<f32>) -> f32 {\n  return max(0.0, dot(a, b));\n}\n// Dot product with a max in it that does not allow for negative values\n// Physically based rendering is accurate as long as normals are accurate,\n// however this is pretty often not the case. In order to prevent negative\n// values from ruining light calculations and creating zones of zero light,\n// this remapping is used, which smoothly clamps the dot product between\n// zero and one while still maintaining a good amount of accuracy.\nfn cdot(a: vec3<f32>, b: vec3<f32>) -> f32 {\n  var d: f32 = max(0.0, dot(a, b));\n  d = pow((d + 1) / 2.0, 2.6);\n  return d;\n}\n\n// Lambertian diffuse model\nfn lambertDiffuse(base: vec3<f32>, N: vec3<f32>, L: vec3<f32>) -> vec3<f32> {\n  var pi: f32 = 3.14159265359; \n  var NdotL: f32 = mdot(N, L);\n  NdotL = pow(NdotL, 1.5);\n  return (base/pi)*NdotL;\n}\n\n// Yasuhiro Fujii improvement on the Oren-Nayar model\n// https://mimosa-pudica.net/improved-oren-nayar.html\n// p is surface color, o is roughness\nfn fujiiOrenNayar(p: vec3<f32>, o: f32, N: vec3<f32>, L: vec3<f32>, V: vec3<f32>) -> vec3<f32> {\n  var invpi: f32 = 0.31830988618; // 1/pi\n\n  var o2 = o*o;\n  var NdotL: f32 = mdot(N, L);\n  NdotL = pow(NdotL, 1.5); // Less physically accurate, but hides the "seams" between lights better\n\n  var NdotV: f32 = mdot(N, V);\n  var LdotV: f32 = mdot(L, V);\n\n  var s: f32 = LdotV - NdotL*NdotV;\n  var t: f32 = mix(1, max(NdotL, NdotV), step(0, s)); // Mix with step is the equivalent of an if statement\n  var A: vec3<f32> = 0.5*(o2 / (o2 + 0.33)) + 0.17*p*(o2 / (o2 + 0.13));\n  A = invpi*(1 - A);\n  var B: f32 = 0.45*(o2 / (o2 + 0.09));\n  B = invpi*B;\n\n  return p*NdotL*(A + B*(s/t));\n}\n\n// Fresnel portion of BRDF (IOR only, simplified)\nfn schlickFresnelIOR(V: vec3<f32>, N: vec3<f32>, ior: f32, k: f32) -> f32 {\n  var NdotV: f32 = mdot(V, N);\n  var F0: f32 = (pow((ior - 1.0), 2) + k*k) / (pow((ior + 1.0), 2) + k*k); // This takes into account the roughness, which the other one does not\n  return F0 + (1 - F0) * pow((1-NdotV), 5); \n}\n\n// Fresnel portion of BRDF (Color ior, better)\nfn schlickFresnelRGB(V: vec3<f32>, N: vec3<f32>, F0: vec3<f32>) -> vec3<f32> {\n  var NdotV: f32 = mdot(V, N);\n  return F0 + (1 - F0) * pow((1-NdotV), 5); \n}\n\n// Normal portion of BRDF\n// https://learnopengl.com/PBR/Theory\n// Trowbridge-Reitz GGX functions: normal, halfway, roughness^2\nfn trGGX(N: vec3<f32>, H: vec3<f32>, a: f32) -> f32 {\n  var pi: f32 = 3.14159265359; \n\n  var a2: f32 = a*a;\n  var NdotH = mdot(N, H);\n  var NdotH2 = NdotH*NdotH;\n  \n  var denom: f32 = NdotH2 * (a2 - 1.0) + 1.0;\n\n  return a2 / max((pi*denom*denom), 0.000001);\n}\n\n// A VERY bad approximation of anisotropy. Real anisotropic calculations require tangent and bitangent\nfn anisotrophicTrGGX(N: vec3<f32>, H: vec3<f32>, O: vec3<f32>, s: f32, a: f32) -> f32 {\n  var Op: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(O) * s, 0.)).xyz;\n\n  var ggx1: f32 = trGGX(N + Op*s, H, a);\n  var ggx2: f32 = trGGX(N - Op*s, H, a);\n  return (0.5 * ggx1 + 0.5 * ggx2);\n}\n\n// Geometry portion of BRDF\nfn schlickGGX(N: vec3<f32>, X: vec3<f32>, k: f32) -> f32 {\n  var NdotX = cdot(N, X);\n  return NdotX / max(0.000001, (NdotX*(1-k) + k));\n}\n\nfn smithSurfaceRoughness(N: vec3<f32>, V: vec3<f32>, L: vec3<f32>, k: f32) -> f32 {\n  var ggx1: f32 = min(1, schlickGGX(N, V, k));\n  var ggx2: f32 = min(1, schlickGGX(N, L, k));\n  return ggx1*ggx2;\n}\n\n// BRDF Combination\nfn cookTorrance(D: f32, F: f32, G: f32, N: vec3<f32>, V: vec3<f32>, L: vec3<f32>) -> f32 {\n  var num: f32 = D*F*G;\n  var denom: f32 = 4*cdot(V, N)*cdot(L, N);\n\n  return num / max(denom, 0.000001);\n}\n\n// Different lighting calculations for different light sources\nfn calcDirectionalLight(N: vec3<f32>, V: vec3<f32>, ior: f32, roughness: f32, metallic: f32, direction: vec3<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {  \n  var L: vec3<f32> = normalize(direction); // Light Vector\n  var H: vec3<f32> = normalize(L + V); // Halfway Vector\n\n  var alpha = roughness*roughness;\n  var k: f32 = alpha*alpha / 2;\n\n  var D: f32 = trGGX(N, H, alpha); // Distribution\n  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel\n  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry\n\n  var brdf: f32 = cookTorrance(D, 1, G, N, V, L); // Fresnel term is replaced with 1 because it is added later\n  var incoming: vec3<f32> = color;\n  var angle: f32 = mdot(L, N);\n  angle = pow(angle, 1.5);\n\n  var specular: vec3<f32> = brdf*incoming*angle;\n  // Oren-Nayar gives a clay-like effect when fully rough which some people may not want, so it might be better to give a separate\n  // control property for the diffuse vs specular roughness\n  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V); \n  // Stores the specular and diffuse separately to allow for finer post processing\n  var out = PBRData(diffuse, specular);\n  \n  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)\n}\n\n// TODO: find some way to reduce the number of arguments going in here\nfn calcPointLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, ior: f32, roughness: f32, metallic: f32, position: vec3<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {\n  var L: vec3<f32> = normalize(position - fragPos); // Light Vector\n  var H: vec3<f32> = normalize(L + V); // Halfway Vector\n  var dist = distance(position, fragPos);\n\n  var alpha = roughness*roughness;\n  var k: f32 = alpha*alpha / 2; // could also be pow(alpha + 1.0, 2) / 8\n\n  var D: f32 = trGGX(N, H, alpha); // Distribution\n  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel\n  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry\n\n  var brdf: f32 = cookTorrance(D, 1, G, N, V, L);  \n  var incoming: vec3<f32> = color * (1. / (dist*dist));\n  var angle: f32 = mdot(L, N);\n  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" bewteen light sources\n\n  var specular: vec3<f32> = brdf*incoming*angle;\n  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V);\n\n  // Stores the specular and diffuse separately to allow for finer post processing\n  // Could also be done (propably more properly) with a struct\n  var out = PBRData(diffuse, specular);\n  \n  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)\n}\n\n// For a reason unknown to me, spheres dont seem to behave propperly with head-on spot lights\nfn calcSpotLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, ior: f32, roughness: f32, metallic: f32, position: vec3<f32>, direction: vec3<f32>, cones: vec2<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {\n  var L: vec3<f32> = normalize(position - fragPos);\n  var H: vec3<f32> = normalize(L + V); // Halfway Vector\n  var dist = distance(position, fragPos);\n\n  var alpha = roughness*roughness;\n  var k: f32 = alpha*alpha / 2; // could also be pow(alpha + 1.0, 2) / 8\n\n  var D: f32 = trGGX(N, H, alpha); // Distribution\n  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel\n  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry\n\n  var brdf: f32 = cookTorrance(D, 1, G, N, V, L);  \n  \n  // Cones.x is the inner phi and cones.y is the outer phi\n  var theta: f32 = mdot(normalize(direction), L);\n  var epsilon: f32 = cones.x - cones.y;\n  var intensity: f32 = (theta - cones.y) / epsilon;\n  intensity = clamp(intensity, 0.0, 1.0);\n  intensity /= dist*dist;\n\n  var incoming: vec3<f32> = color * intensity;\n\n  var angle: f32 = mdot(L, N);\n  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" bewteen light sources\n\n  var specular: vec3<f32> = brdf*incoming*angle;\n  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V);\n\n  // Stores the specular and diffuse separately to allow for finer post processing\n  // Could also be done (propably more properly) with a struct\n  var out = PBRData(diffuse, specular);\n  \n  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)\n}\n\n// Environment mapping stuff\n// Takes in a vector and converts it to an equivalent coordinate in a rectilinear texture. Should be replaced with cubemaps at some point\nfn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {\n  var tau: f32 = 6.28318530718;\n  var pi: f32 = 3.14159265359;\n  var out: vec2<f32> = vec2<f32>(0.0);\n\n  out.x = atan2(dir.z, dir.x) / tau;\n  out.x += 0.5;\n\n  var phix: f32 = length(vec2(dir.x, dir.z));\n  out.y = atan2(dir.y, phix) / pi + 0.5;\n\n  return out;\n}\n\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::TCoord::Dec\n\n// optional surface normal declaration\n//VTK::Normal::Dec\n\n//VTK::Select::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : fragmentOutput;\n\n  // Temporary ambient, diffuse, and opacity\n  var ambientColor: vec4<f32> = mapperUBO.AmbientColor;\n  var diffuseColor: vec4<f32> = mapperUBO.DiffuseColor;\n  var opacity: f32 = mapperUBO.Opacity;\n\n  // This should be declared somewhere else\n  var _diffuseMap: vec4<f32> = vec4<f32>(1);\n  var _roughnessMap: vec4<f32> = vec4<f32>(1);\n  var _metallicMap: vec4<f32> = vec4<f32>(1);\n  var _normalMap: vec4<f32> = vec4<f32>(0, 0, 1, 0); // normal map was setting off the normal vector detection in fragment\n  var _ambientOcclusionMap: vec4<f32> = vec4<f32>(1);\n  var _emissionMap: vec4<f32> = vec4<f32>(0);\n\n  //VTK::Color::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Normal::Impl\n\n  var computedColor: vec4<f32> = vec4<f32>(diffuseColor.rgb, 1.0);\n\n  //VTK::Light::Impl\n\n  //VTK::Select::Impl\n\n  if (computedColor.a == 0.0) { discard; };\n\n  //VTK::Position::Impl\n\n  //VTK::RenderEncoder::Impl\n\n  return output;\n}\n',t.vertexShaderTemplate="\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::Normal::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Select::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@vertex\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : vertexOutput;\n\n  var vertex: vec4<f32> = vertexBC;\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Select::Impl\n\n  //VTK::Position::Impl\n\n  return output;\n}\n",t._tmpMat3=Te(new Float64Array(9)),t._tmpMat4=S(new Float64Array(16)),t.UBO=Qp.newInstance({label:"mapperUBO"}),t.UBO.addEntry("BCWCMatrix","mat4x4<f32>"),t.UBO.addEntry("BCSCMatrix","mat4x4<f32>"),t.UBO.addEntry("MCWCNormals","mat4x4<f32>"),t.UBO.addEntry("AmbientColor","vec4<f32>"),t.UBO.addEntry("DiffuseColor","vec4<f32>"),t.UBO.addEntry("EdgeColor","vec4<f32>"),t.UBO.addEntry("SpecularColor","vec4<f32>"),t.UBO.addEntry("AmbientIntensity","f32"),t.UBO.addEntry("DiffuseIntensity","f32"),t.UBO.addEntry("Roughness","f32"),t.UBO.addEntry("Metallic","f32"),t.UBO.addEntry("Ambient","f32"),t.UBO.addEntry("Normal","f32"),t.UBO.addEntry("Emission","f32"),t.UBO.addEntry("NormalStrength","f32"),t.UBO.addEntry("BaseIOR","f32"),t.UBO.addEntry("SpecularIntensity","f32"),t.UBO.addEntry("LineWidth","f32"),t.UBO.addEntry("Opacity","f32"),t.UBO.addEntry("ZValue","f32"),t.UBO.addEntry("PropID","u32"),t.UBO.addEntry("ClipNear","f32"),t.UBO.addEntry("ClipFar","f32"),t.UBO.addEntry("Time","u32"),zt(e,t,["cellArray","currentInput","cellOffset","is2D","primitiveType","renderEncoder"]),t.textures=[],function(e,t){t.classHierarchy.push("vtkWebGPUCellArrayMapper"),e.buildPass=function(r){r&&(t.is2D?(t.WebGPUActor=e.getFirstAncestorOfType("vtkWebGPUActor2D"),t.forceZValue=!0):(t.WebGPUActor=e.getFirstAncestorOfType("vtkWebGPUActor"),t.forceZValue=!1),t.coordinateSystem=t.WebGPUActor.getRenderable().getCoordinateSystem(),t.useRendererMatrix=t.coordinateSystem!==Pg.DISPLAY,t.WebGPURenderer=t.WebGPUActor.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getParent(),t.device=t.WebGPURenderWindow.getDevice())},e.translucentPass=function(r){r&&(e.prepareToDraw(t.WebGPURenderer.getRenderEncoder()),t.renderEncoder.registerDrawCallback(t.pipeline,e.draw))},e.opaquePass=function(r){r&&(e.prepareToDraw(t.WebGPURenderer.getRenderEncoder()),t.renderEncoder.registerDrawCallback(t.pipeline,e.draw))},e.updateUBO=function(){var r=t.WebGPUActor.getRenderable().getProperty(),n=t.UBO.getSendTime();if(e.getMTime()>n||r.getMTime()>n||t.renderable.getMTime()>n){var a,o=t.WebGPUActor.getKeyMatrices(t.WebGPURenderer);if(t.UBO.setArray("BCWCMatrix",o.bcwc),t.UBO.setArray("BCSCMatrix",o.bcsc),t.UBO.setArray("MCWCNormals",o.normalMatrix),t.is2D){t.UBO.setValue("ZValue",t.WebGPUActor.getRenderable().getProperty().getDisplayLocation()===Og.FOREGROUND?1:0);var i=r.getColorByReference();t.UBO.setValue("AmbientIntensity",1),t.UBO.setArray("DiffuseColor",[i[0],i[1],i[2],1]),t.UBO.setValue("DiffuseIntensity",0),t.UBO.setValue("SpecularIntensity",0)}else{var l=r.getAmbientColorByReference();t.UBO.setValue("AmbientIntensity",r.getAmbient()),t.UBO.setArray("AmbientColor",[l[0],l[1],l[2],1]),t.UBO.setValue("DiffuseIntensity",r.getDiffuse()),l=r.getDiffuseColorByReference(),t.UBO.setArray("DiffuseColor",[l[0],l[1],l[2],1]),t.UBO.setValue("Roughness",r.getRoughness()),t.UBO.setValue("BaseIOR",r.getBaseIOR()),t.UBO.setValue("Metallic",r.getMetallic()),t.UBO.setValue("NormalStrength",r.getNormalStrength()),t.UBO.setValue("Emission",r.getEmission()),t.UBO.setValue("SpecularIntensity",r.getSpecular()),l=r.getSpecularColorByReference(),t.UBO.setArray("SpecularColor",[l[0],l[1],l[2],1])}var u=null===(a=r.getEdgeColorByReference)||void 0===a?void 0:a.call(r);u&&t.UBO.setArray("EdgeColor",[u[0],u[1],u[2],1]),t.UBO.setValue("LineWidth",r.getLineWidth()),t.UBO.setValue("Opacity",r.getOpacity()),t.UBO.setValue("PropID",t.WebGPUActor.getPropID());var s=t.WebGPURenderWindow.getDevice();t.UBO.sendIfNeeded(s)}},e.haveWideLines=function(){var e=t.WebGPUActor.getRenderable(),r=e.getProperty().getRepresentation();return!(e.getProperty().getLineWidth()<=1)&&t.primitiveType!==Sg.Verts&&(t.primitiveType!==Sg.Triangles&&t.primitiveType!==Sg.TriangleStrips||r===wg.WIREFRAME)},e.replaceShaderPosition=function(r,n,a){var o=n.getShaderDescription("vertex");o.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),o.hasOutput("vertexVC")||o.addOutput("vec4<f32>","vertexVC");var i=o.getCode();t.useRendererMatrix?(i=jd.substitute(i,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = rendererUBO.SCPCMatrix*mapperUBO.BCSCMatrix*vertexBC;","    output.vertexVC = rendererUBO.SCVCMatrix * mapperUBO.BCSCMatrix * vec4<f32>(vertexBC.xyz, 1.0);","//VTK::Position::Impl"]).result,t.forceZValue&&(i=jd.substitute(i,"//VTK::Position::Impl",["pCoord = vec4<f32>(pCoord.xyz/pCoord.w, 1.0);","pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)):(i=jd.substitute(i,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = mapperUBO.BCSCMatrix*vertexBC;","    pCoord.x = 2.0* pCoord.x / rendererUBO.viewportSize.x - 1.0;","    pCoord.y = 2.0* pCoord.y / rendererUBO.viewportSize.y - 1.0;","    pCoord.z = 0.5 - 0.5 * pCoord.z;","//VTK::Position::Impl"]).result,t.forceZValue&&(i=jd.substitute(i,"//VTK::Position::Impl",["    pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)),e.haveWideLines()&&(o.addBuiltinInput("u32","@builtin(instance_index) instanceIndex"),i=jd.substitute(i,"//VTK::Position::Impl",["    var tmpPos: vec4<f32> = pCoord;","    var numSteps: f32 = ceil(mapperUBO.LineWidth - 1.0);","    var offset: f32 = (mapperUBO.LineWidth - 1.0) * (f32(input.instanceIndex / 2u) - numSteps/2.0) / numSteps;","    var tmpPos2: vec3<f32> = tmpPos.xyz / tmpPos.w;","    tmpPos2.x = tmpPos2.x + 2.0 * (f32(input.instanceIndex) % 2.0) * offset / rendererUBO.viewportSize.x;","    tmpPos2.y = tmpPos2.y + 2.0 * (f32(input.instanceIndex + 1u) % 2.0) * offset / rendererUBO.viewportSize.y;","    tmpPos2.z = min(1.0, tmpPos2.z + 0.00001);","    pCoord = vec4<f32>(tmpPos2.xyz * tmpPos.w, tmpPos.w);","//VTK::Position::Impl"]).result),i=jd.substitute(i,"//VTK::Position::Impl",["    output.Position = pCoord;"]).result,o.setCode(i)},t.shaderReplacements.set("replaceShaderPosition",e.replaceShaderPosition),e.replaceShaderNormal=function(e,r,n){var a=n.getBuffer("normalMC"),o=t.WebGPUActor.getRenderable();if(a){var i=r.getShaderDescription("vertex");i.hasOutput("normalVC")||i.addOutput("vec3<f32>","normalVC",a.getArrayInformation()[0].interpolation),i.hasOutput("tangentVC")||i.addOutput("vec3<f32>","tangentVC",a.getArrayInformation()[0].interpolation),i.hasOutput("bitangentVC")||i.addOutput("vec3<f32>","bitangentVC",a.getArrayInformation()[0].interpolation);var l=i.getCode();l=jd.substitute(l,"//VTK::Normal::Impl",["  output.normalVC = normalize((rendererUBO.WCVCNormals * mapperUBO.MCWCNormals * normalMC).xyz);","  var c1: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 0, 1));","  var c2: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 1, 0));","  var tangent: vec3<f32> = mix(c1, c2, distance(c1, c2));","  output.tangentVC = normalize(tangent);","  output.bitangentVC = normalize(cross(output.normalVC, tangent));"]).result,i.setCode(l);var u=r.getShaderDescription("fragment");l=u.getCode(),l=o.getProperty().getNormalTexture()?jd.substitute(l,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  var tangent: vec3<f32> = input.tangentVC;","  var bitangent: vec3<f32> = input.bitangentVC;","  var TCVCMatrix: mat3x3<f32> = mat3x3<f32>(","    tangent.x, bitangent.x, normal.x,","    tangent.y, bitangent.y, normal.y,","    tangent.z, bitangent.z, normal.z,","  );","  var mappedNormal: vec3<f32> = TCVCMatrix * (_normalMap.xyz * 2 - 1);","  normal = mix(normal, mappedNormal, mapperUBO.NormalStrength);","  normal = normalize(normal);"]).result:jd.substitute(l,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  normal = normalize(normal);"]).result,u.setCode(l)}},t.shaderReplacements.set("replaceShaderNormal",e.replaceShaderNormal),e.replaceShaderLight=function(e,r,n){if(!e.includes("sel")){var a=r.getShaderDescription("vertex");a.hasOutput("vertexVC")||a.addOutput("vec4<f32>","vertexVC");var o=t.WebGPURenderer.getRenderable(),i=r.getShaderDescription("fragment"),l=i.getCode();if(!l.includes("var normal:")||!t.useRendererMatrix||Ag(e)||t.is2D||e.includes("sel"))l=jd.substitute(l,"//VTK::Light::Impl",["  var diffuse: vec3<f32> = diffuseColor.rgb;","  var specular: vec3<f32> = mapperUBO.SpecularColor.rgb * mapperUBO.SpecularColor.a;","  computedColor = vec4<f32>(diffuse * _diffuseMap.rgb, mapperUBO.Opacity);"]).result,i.setCode(l);else{var u,s=["  var pi: f32 = 3.14159265359;","  var fragPos: vec3<f32> = vec3<f32>(input.vertexVC.xyz);","  var V: vec3<f32> = mix(normalize(-fragPos), vec3<f32>(0, 0, 1), f32(rendererUBO.cameraParallel)); // View Vector","  var baseColor: vec3<f32> = _diffuseMap.rgb * diffuseColor.rgb;","  var roughness: f32 = max(0.000001, mapperUBO.Roughness * _roughnessMap.r);","  var metallic: f32 = mapperUBO.Metallic * _metallicMap.r;","  var alpha: f32 = roughness*roughness;","  var ior: f32 = mapperUBO.BaseIOR;","  var k: f32 = alpha*alpha / 2;","  var diffuse: vec3<f32> = vec3<f32>(0.);","  var specular: vec3<f32> = vec3<f32>(0.);","  var emission: vec3<f32> = _emissionMap.rgb * mapperUBO.Emission;","  {","    var i: i32 = 0;","    loop {","      if !(i < rendererUBO.LightCount) { break; }","      switch (i32(rendererLightSSBO.values[i].LightData.x)) {","         // Point Light","         case 0 {","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var pos: vec3<f32> = (rendererLightSSBO.values[i].LightPos).xyz;","           var calculated: PBRData = calcPointLight(normal, V, fragPos, ior, roughness, metallic, pos, color, baseColor);","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","          }","         // Directional light","         case 1 {","           var dir: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz;","           dir = normalize(dir);","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var calculated: PBRData = calcDirectionalLight(normal, V, ior, roughness, metallic, dir, color, baseColor); // diffuseColor.rgb needs to be fixed with a more dynamic diffuse color","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","         }","         // Spot Light","         case 2 {","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var pos: vec3<f32> = (rendererLightSSBO.values[i].LightPos).xyz;","           var dir: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz;","           dir = normalize(dir);","           var cones: vec2<f32> = vec2<f32>(rendererLightSSBO.values[i].LightData.y, rendererLightSSBO.values[i].LightData.z);","           var calculated: PBRData = calcSpotLight(normal, V, fragPos, ior, roughness, metallic, pos, dir, cones, color, baseColor);","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","         }","         default { continue; }","       }","      continuing { i++; }","    }","  }","  var fresnel: f32 = schlickFresnelIOR(V, normal, ior, k); // Fresnel","  fresnel = min(1, fresnel);","  // This could be controlled with its own variable (that isnt base color) for better artistic control","  var fresnelMetallic: vec3<f32> = schlickFresnelRGB(V, normal, baseColor); // Fresnel for metal, takes color into account","  var kS: vec3<f32> = mix(vec3<f32>(fresnel), fresnelMetallic, metallic);","  kS = min(vec3<f32>(1), kS);","  var kD: vec3<f32> = (1.0 - kS) * (1.0 - metallic);","  var PBR: vec3<f32> = mapperUBO.DiffuseIntensity*kD*diffuse + kS*specular;","  PBR += emission;","  computedColor = vec4<f32>(PBR, mapperUBO.Opacity);"];null!==(u=o.getEnvironmentTexture())&&void 0!==u&&u.getImageLoaded()&&s.push("  // To get diffuse IBL, the texture is sampled with normals in worldspace","  var diffuseIBLCoords: vec3<f32> = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(normal, 1.)).xyz;","  var diffuseCoords: vec2<f32> = vecToRectCoord(diffuseIBLCoords);","  // To get specular IBL, the texture is sampled as the worldspace reflection between the normal and view vectors","  // Reflections are first calculated in viewspace, then converted to worldspace to sample the environment","  var VreflN: vec3<f32> = normalize(reflect(-V, normal));","  var reflectionIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(VreflN, 1.)).xyz;","  var specularCoords: vec2<f32> = vecToRectCoord(reflectionIBLCoords);","  var diffuseIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, diffuseCoords, rendererUBO.MaxEnvironmentMipLevel);","  var level = roughness * rendererUBO.MaxEnvironmentMipLevel;","  var specularIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, specularCoords, level);","  var specularIBLContribution: vec3<f32> = specularIBL.rgb*rendererUBO.BackgroundSpecularStrength;","  computedColor += vec4<f32>(specularIBLContribution*kS, 0);","  var diffuseIBLContribution: vec3<f32> = diffuseIBL.rgb*rendererUBO.BackgroundDiffuseStrength;","  diffuseIBLContribution *= baseColor * _ambientOcclusionMap.rgb;","  computedColor += vec4<f32>(diffuseIBLContribution*kD, 0);"),l=jd.substitute(l,"//VTK::Light::Impl",s).result,i.setCode(l)}}},t.shaderReplacements.set("replaceShaderLight",e.replaceShaderLight),e.replaceShaderColor=function(e,t,r){if(Ag(e)){var n=t.getShaderDescription("fragment"),a=n.getCode();return a=jd.substitute(a,"//VTK::Color::Impl",["ambientColor = mapperUBO.EdgeColor;","diffuseColor = mapperUBO.EdgeColor;"]).result,void n.setCode(a)}var o=r.getBuffer("colorVI");if(o){var i=t.getShaderDescription("vertex");i.addOutput("vec4<f32>","color",o.getArrayInformation()[0].interpolation);var l=i.getCode();l=jd.substitute(l,"//VTK::Color::Impl",["  output.color = colorVI;"]).result,i.setCode(l);var u=t.getShaderDescription("fragment");l=u.getCode(),l=jd.substitute(l,"//VTK::Color::Impl",["ambientColor = input.color;","diffuseColor = input.color;","opacity = mapperUBO.Opacity * input.color.a;"]).result,u.setCode(l)}},t.shaderReplacements.set("replaceShaderColor",e.replaceShaderColor),e.replaceShaderTCoord=function(e,r,n){var a,o,i,l,u,s,c,f,d,p,g,m,v,h,y,b,T,x;if(n.hasAttribute("tcoord")){var S=r.getShaderDescription("vertex"),w=n.getBuffer("tcoord"),C=Qd.getNumberOfComponentsFromBufferFormat(w.getArrayInformation()[0].format),P=S.getCode();S.addOutput("vec".concat(C,"<f32>"),"tcoordVS"),P=jd.substitute(P,"//VTK::TCoord::Impl",["  output.tcoordVS = tcoord;"]).result,S.setCode(P);var O=r.getShaderDescription("fragment");P=O.getCode();var A,E,I=t.WebGPUActor.getRenderable(),R=function(e){return!!e&&e.getDimensionality()===C},M=[];(null!==(a=(o=I.getProperty()).getDiffuseTexture)&&void 0!==a&&null!==(i=a.call(o))&&void 0!==i&&i.getImageLoaded()||I.getTextures()[0]||t.colorTexture)&&(R(null===(A=(E=I.getProperty()).getDiffuseTexture)||void 0===A?void 0:A.call(E))||R(I.getTextures()[0])||R(t.colorTexture))&&M.push("_diffuseMap = textureSample(DiffuseTexture, DiffuseTextureSampler, input.tcoordVS);"),null!==(l=(u=I.getProperty()).getRoughnessTexture)&&void 0!==l&&null!==(s=l.call(u))&&void 0!==s&&s.getImageLoaded()&&R(I.getProperty().getRoughnessTexture())&&M.push("_roughnessMap = textureSample(RoughnessTexture, RoughnessTextureSampler, input.tcoordVS);"),null!==(c=(f=I.getProperty()).getMetallicTexture)&&void 0!==c&&null!==(d=c.call(f))&&void 0!==d&&d.getImageLoaded()&&R(I.getProperty().getMetallicTexture())&&M.push("_metallicMap = textureSample(MetallicTexture, MetallicTextureSampler, input.tcoordVS);"),null!==(p=(g=I.getProperty()).getNormalTexture)&&void 0!==p&&null!==(m=p.call(g))&&void 0!==m&&m.getImageLoaded()&&R(I.getProperty().getNormalTexture())&&M.push("_normalMap = textureSample(NormalTexture, NormalTextureSampler, input.tcoordVS);"),null!==(v=(h=I.getProperty()).getAmbientOcclusionTexture)&&void 0!==v&&null!==(y=v.call(h))&&void 0!==y&&y.getImageLoaded()&&R(I.getProperty().getAmbientOcclusionTexture())&&M.push("_ambientOcclusionMap = textureSample(AmbientOcclusionTexture, AmbientOcclusionTextureSampler, input.tcoordVS);"),null!==(b=(T=I.getProperty()).getEmissionTexture)&&void 0!==b&&null!==(x=b.call(T))&&void 0!==x&&x.getImageLoaded()&&R(I.getProperty().getEmissionTexture())&&M.push("_emissionMap = textureSample(EmissionTexture, EmissionTextureSampler, input.tcoordVS);"),P=jd.substitute(P,"//VTK::TCoord::Impl",M).result,O.setCode(P)}},t.shaderReplacements.set("replaceShaderTCoord",e.replaceShaderTCoord),e.replaceShaderSelect=function(e,t,r){if(e.includes("sel")){var n=t.getShaderDescription("fragment"),a=n.getCode();a=jd.substitute(a,"//VTK::Select::Impl",["  var compositeID: u32 = 0u;"]).result,n.setCode(a)}},t.shaderReplacements.set("replaceShaderSelect",e.replaceShaderSelect),e.getUsage=function(e,t){return e===wg.POINTS||t===Sg.Points?xg.Verts:t===Sg.Lines?xg.Lines:e===wg.WIREFRAME?t===Sg.Triangles?xg.LinesFromTriangles:xg.LinesFromStrips:t===Sg.Triangles?xg.Triangles:t===Sg.TriangleStrips?xg.Strips:t===Sg.TriangleEdges?xg.LinesFromTriangles:xg.LinesFromStrips},e.getHashFromUsage=function(e){return"pt".concat(e)},e.getTopologyFromUsage=function(e){switch(e){case xg.Triangles:return"triangle-list";case xg.Verts:return"point-list";case xg.Lines:default:return"line-list"}},e.buildVertexInput=function(){var r,n,a=t.currentInput,o=t.cellArray,i=t.primitiveType,l=t.WebGPUActor.getRenderable().getProperty().getRepresentation(),u=t.WebGPURenderWindow.getDevice(),s=!1;i===Sg.TriangleEdges&&(s=!0,l=wg.WIREFRAME);var c,f=t.vertexInput,d=a.getPoints();if(o){var p={hash:"R".concat(l,"P").concat(i).concat(o.getMTime()),usage:xg.Index,cells:o,numberOfPoints:d.getNumberOfPoints(),primitiveType:i,representation:l};c=u.getBufferManager().getBuffer(p),f.setIndexBuffer(c)}else f.setIndexBuffer(null);if(d){var g=t.WebGPUActor.getBufferShift(t.WebGPURenderer),m={hash:"".concat(d.getMTime(),"I").concat(c.getMTime()).concat(g.join(),"float32x4"),usage:xg.PointArray,format:"float32x4",dataArray:d,indexBuffer:c,shift:g,packExtra:!0},v=u.getBufferManager().getBuffer(m);f.addBuffer(v,["vertexBC"])}else f.removeBufferIfPresent("vertexBC");var h=e.getUsage(l,i);if(t._usesCellNormals=!1,t.is2D||h!==xg.Triangles&&h!==xg.Strips)f.removeBufferIfPresent("normalMC");else{var y=a.getPointData().getNormals(),b={format:"snorm8x4",indexBuffer:c,packExtra:!0,shift:0,scale:127};if(y){b.hash="".concat(y.getMTime(),"I").concat(c.getMTime(),"snorm8x4"),b.dataArray=y,b.usage=xg.PointArray;var T=u.getBufferManager().getBuffer(b);f.addBuffer(T,["normalMC"])}else if(i===Sg.Triangles){t._usesCellNormals=!0,b.hash="PFN".concat(d.getMTime(),"I").concat(c.getMTime(),"snorm8x4"),b.dataArray=d,b.cells=o,b.usage=xg.NormalsFromPoints;var x=u.getBufferManager().getBuffer(b);f.addBuffer(x,["normalMC"])}else f.removeBufferIfPresent("normalMC")}var S=!1;if(t.renderable.getScalarVisibility()){var w=t.renderable.getColorMapColors();if(w&&!s){var C=t.renderable.getScalarMode(),P=!1;C!==Cg.USE_CELL_DATA&&C!==Cg.USE_CELL_FIELD_DATA&&C!==Cg.USE_FIELD_DATA&&a.getPointData().getScalars()||C===Cg.USE_POINT_FIELD_DATA||!w||(P=!0);var O={usage:xg.PointArray,format:"unorm8x4",hash:"".concat(P).concat(w.getMTime(),"I").concat(c.getMTime(),"unorm8x4"),dataArray:w,indexBuffer:c,cellData:P,cellOffset:0},A=u.getBufferManager().getBuffer(O);f.addBuffer(A,["colorVI"]),S=!0}}S||f.removeBufferIfPresent("colorVI");var E=null;if((E=null!==(r=(n=t.renderable).getInterpolateScalarsBeforeMapping)&&void 0!==r&&r.call(n)&&t.renderable.getColorCoordinates()?t.renderable.getColorCoordinates():a.getPointData().getTCoords())&&!s){var I=u.getBufferManager().getBufferForPointArray(E,f.getIndexBuffer());f.addBuffer(I,["tcoord"])}else f.removeBufferIfPresent("tcoord")},e.updateTextures=function(){var e,r,n,a,o,i,l,u,s,c,f,d,p,g,m,v=[],h=[],y=null===(e=(r=t.renderable).getColorTextureMap)||void 0===e?void 0:e.call(r);y&&(t.colorTexture||(t.colorTexture=lc.newInstance({label:"polyDataColor"})),t.colorTexture.setInputData(y),h.push(["Diffuse",t.colorTexture]));var b=t.WebGPUActor.getRenderable(),T=t.WebGPURenderer.getRenderable(),x=[];if(null!==(n=(a=b.getProperty()).getDiffuseTexture)&&void 0!==n&&n.call(a)){var S=["Diffuse",b.getProperty().getDiffuseTexture()];x.push(S)}if(b.getTextures()[0]){var w=["Diffuse",b.getTextures()[0]];x.push(w)}if(t.colorTexture){var C=["Diffuse",t.colorTexture];x.push(C)}if(null!==(o=(i=b.getProperty()).getRoughnessTexture)&&void 0!==o&&o.call(i)){var P=["Roughness",b.getProperty().getRoughnessTexture()];x.push(P)}if(null!==(l=(u=b.getProperty()).getMetallicTexture)&&void 0!==l&&l.call(u)){var O=["Metallic",b.getProperty().getMetallicTexture()];x.push(O)}if(null!==(s=(c=b.getProperty()).getNormalTexture)&&void 0!==s&&s.call(c)){var A=["Normal",b.getProperty().getNormalTexture()];x.push(A)}if(null!==(f=(d=b.getProperty()).getAmbientOcclusionTexture)&&void 0!==f&&f.call(d)){var E=["AmbientOcclusion",b.getProperty().getAmbientOcclusionTexture()];x.push(E)}if(null!==(p=(g=b.getProperty()).getEmissionTexture)&&void 0!==p&&p.call(g)){var I=["Emission",b.getProperty().getEmissionTexture()];x.push(I)}if(null!==(m=T.getEnvironmentTexture)&&void 0!==m&&m.call(T)){var R=["Environment",T.getEnvironmentTexture()];x.push(R)}for(var M=0;M<x.length;M++)(x[M][1].getInputData()||x[M][1].getJsImageData()||x[M][1].getCanvas())&&h.push(x[M]),x[M][1].getImage()&&x[M][1].getImageLoaded()&&h.push(x[M]);for(var D=0;D<h.length;D++){var k=h[D][1],_=h[D][0],L=t.device.getTextureManager().getTextureForVTKTexture(k);if(L.getReady()){for(var B=!1,V=0;V<t.textures.length;V++)t.textures[V]===L&&(B=!0,v[V]=!0);if(!B){v[t.textures.length]=!0;var N=L.createView("".concat(_,"Texture"));t.textures.push(L),t.textureViews.push(N);var F=k.getInterpolate()?"linear":"nearest",U=null;!U&&k.getEdgeClamp()&&k.getRepeat()&&(U="mirror-repeat"),!U&&k.getEdgeClamp()&&(U="clamp-to-edge"),!U&&k.getRepeat()&&(U="repeat"),"Environment"!==_?N.addSampler(t.device,{addressModeU:U,addressModeV:U,addressModeW:U,minFilter:F,magFilter:F}):N.addSampler(t.device,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:F,magFilter:F,mipmapFilter:"linear"})}}}for(var G=t.textures.length-1;G>=0;G--)v[G]||(t.textures.splice(G,1),t.textureViews.splice(G,1))},e.computePipelineHash=function(){var r="pd".concat(t.useRendererMatrix?"r":"").concat(t.forceZValue?"z":"");if(t.primitiveType===Sg.TriangleEdges||t.primitiveType===Sg.TriangleStripEdges)r+="edge";else{if(t.vertexInput.hasAttribute("normalMC")&&(r+="n"),t.vertexInput.hasAttribute("colorVI")&&(r+="c"),t.vertexInput.hasAttribute("tcoord")){var n=t.vertexInput.getBuffer("tcoord"),a=Qd.getNumberOfComponentsFromBufferFormat(n.getArrayInformation()[0].format);r+="t".concat(a)}t.textures.length&&(r+="tx".concat(t.textures.length))}t._usesCellNormals&&(r+="cn"),t.SSBO&&(r+="ssbo"),r+=e.getHashFromUsage(t.usage),r+=t.renderEncoder.getPipelineHash(),t.pipelineHash=r},e.updateBuffers=function(){t.primitiveType!==Sg.TriangleEdges&&t.primitiveType!==Sg.TriangleStripEdges&&e.updateTextures();var r=t.WebGPUActor.getRenderable(),n=r.getProperty().getRepresentation();t.usage=e.getUsage(n,t.primitiveType),e.buildVertexInput();var a=t.vertexInput.getBuffer("vertexBC");if(e.setNumberOfVertices(a.getSizeInBytes()/a.getStrideInBytes()),e.setTopology(e.getTopologyFromUsage(t.usage)),e.updateUBO(),e.haveWideLines()){var o=r.getProperty();e.setNumberOfInstances(Math.ceil(2*o.getLineWidth()))}else e.setNumberOfInstances(1)}}(e,t)}var Rg={newInstance:Yt(Ig,"vtkWebGPUCellArrayMapper"),extend:Ig},Mg=Up.PrimitiveTypes;var Dg={primitives:null};function kg(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Dg,r),ar.extend(e,t,r),t.primitives=[],function(e,t){t.classHierarchy.push("vtkWebGPUPolyDataMapper"),e.createCellArrayMapper=function(){return Rg.newInstance()},e.buildPass=function(r){if(r){t.WebGPUActor=e.getFirstAncestorOfType("vtkWebGPUActor"),t.renderable.getStatic()||t.renderable.update();var n=t.renderable.getInputData();t.renderable.mapScalars(n,1),e.updateCellArrayMappers(n)}},e.updateCellArrayMappers=function(r){for(var n=[r.getVerts(),r.getLines(),r.getPolys(),r.getStrips()],a=[],o=0,i=Mg.Points;i<=Mg.Triangles;i++)if(n[i].getNumberOfValues()>0){t.primitives[i]||(t.primitives[i]=e.createCellArrayMapper());var l=t.primitives[i];l.setCellArray(n[i]),l.setCurrentInput(r),l.setCellOffset(o),l.setPrimitiveType(i),l.setRenderable(t.renderable),o+=n[i].getNumberOfCells(),a.push(l)}else t.primitives[i]=null;if(t.WebGPUActor.getRenderable().getProperty().getEdgeVisibility())for(var u=Mg.TriangleEdges;u<=Mg.TriangleStripEdges;u++)if(n[u-2].getNumberOfValues()>0){t.primitives[u]||(t.primitives[u]=e.createCellArrayMapper());var s=t.primitives[u];s.setCellArray(n[u-2]),s.setCurrentInput(r),s.setCellOffset(t.primitives[u-2].getCellOffset()),s.setPrimitiveType(u),s.setRenderable(t.renderable),a.push(s)}else t.primitives[u]=null;e.prepareNodes(),e.addMissingChildren(a),e.removeUnusedNodes()}}(e,t)}var _g=Yt(kg,"vtkWebGPUPolyDataMapper");function Lg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}Ad("vtkMapper",_g);var Bg=Up.PrimitiveTypes;function Vg(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lg(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lg(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({primitives:[]},e)}function Ng(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Vg(r)),ar.extend(e,t,r),t.primitives=[],function(e,t){t.classHierarchy.push("vtkWebGPUPolyDataMapper2D"),e.createCellArrayMapper=function(){return Rg.newInstance()},e.buildPass=function(r){if(r){t.WebGPUActor=e.getFirstAncestorOfType("vtkWebGPUActor2D"),t.renderable.getStatic()||t.renderable.update();var n=t.renderable.getInputData();t.renderable.mapScalars(n,1),e.updateCellArrayMappers(n)}},e.updateCellArrayMappers=function(r){for(var n=[r.getVerts(),r.getLines(),r.getPolys(),r.getStrips()],a=[],o=0,i=Bg.Points;i<=Bg.Triangles;i++)if(n[i].getNumberOfValues()>0){t.primitives[i]||(t.primitives[i]=e.createCellArrayMapper());var l=t.primitives[i];l.setCellArray(n[i]),l.setCurrentInput(r),l.setCellOffset(o),l.setPrimitiveType(i),l.setRenderable(t.renderable),l.setIs2D(!0),o+=n[i].getNumberOfCells(),a.push(l)}else t.primitives[i]=null;e.prepareNodes(),e.addMissingChildren(a),e.removeUnusedNodes()}}(e,t)}var Fg=Yt(Ng,"vtkWebGPUPolyDataMapper2D");Ad("vtkMapper2D",Fg);var Ug={};function Gg(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ug,r),ar.extend(e,t,r),t.scalarBarActorHelper=gd.newScalarBarActorHelper(),function(e,t){t.classHierarchy.push("vtkWebGPUScalarBarActor"),e.buildPass=function(r){r&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getParent(),t.scalarBarActorHelper.getRenderable()||t.scalarBarActorHelper.setRenderable(t.renderable),e.prepareNodes(),e.addMissingNode(t.scalarBarActorHelper.getBarActor()),e.addMissingNode(t.scalarBarActorHelper.getTmActor()),e.removeUnusedNodes())},e.opaquePass=function(e,r){if(e){var n=t.WebGPURenderer?t.WebGPURenderer.getRenderable().getActiveCamera():null,a=t.WebGPURenderer.getTiledSizeAndOrigin();t.scalarBarActorHelper.updateAPISpecificData([a.usize,a.vsize],n,t.WebGPURenderWindow.getRenderable())}}}(e,t)}var jg=Yt(Gg,"vtkWebGPUScalarBarActor");Ad("vtkScalarBarActor",jg);var zg={device:null,handle:null,label:null,options:null};function Wg(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zg,r),er.obj(e,t),t.options={},t.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,sampler:{}},t.bindGroupTime={},er.obj(t.bindGroupTime,{mtime:0}),er.get(e,t,["bindGroupTime","handle","options"]),er.setGet(e,t,["bindGroupLayoutEntry","device","label"]),function(e,t){t.classHierarchy.push("vtkWebGPUSampler"),e.create=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.device=e,t.options.addressModeU=r.addressModeU?r.addressModeU:"clamp-to-edge",t.options.addressModeV=r.addressModeV?r.addressModeV:"clamp-to-edge",t.options.addressModeW=r.addressModeW?r.addressModeW:"clamp-to-edge",t.options.magFilter=r.magFilter?r.magFilter:"nearest",t.options.minFilter=r.minFilter?r.minFilter:"nearest",t.options.mipmapFilter=r.mipmapFilter?r.mipmapFilter:"nearest",t.options.label=t.label,t.handle=t.device.getHandle().createSampler(t.options),t.bindGroupTime.modified()},e.getShaderCode=function(e,r){return"@binding(".concat(e,") @group(").concat(r,") var ").concat(t.label,": sampler;")},e.getBindGroupEntry=function(){return{resource:t.handle}}}(e,t)}var Hg={newInstance:er.newInstance(Wg),extend:Wg};var Kg={texture:null,handle:null,sampler:null,label:null};function Xg(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Kg,r),er.obj(e,t),t.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}},t.bindGroupTime={},er.obj(t.bindGroupTime,{mtime:0}),er.get(e,t,["bindGroupTime","texture"]),er.setGet(e,t,["bindGroupLayoutEntry","label","sampler"]),function(e,t){t.classHierarchy.push("vtkWebGPUTextureView"),e.create=function(e,r){t.texture=e,t.options=r,t.options.dimension=t.options.dimension||"2d",t.options.label=t.label,t.textureHandle=e.getHandle(),t.handle=t.textureHandle.createView(t.options),t.bindGroupLayoutEntry.texture.viewDimension=t.options.dimension;var n=Qd.getDetailsFromTextureFormat(t.texture.getFormat());t.bindGroupLayoutEntry.texture.sampleType=n.sampleType},e.createFromTextureHandle=function(e,r){t.texture=null,t.options=r,t.options.dimension=t.options.dimension||"2d",t.options.label=t.label,t.textureHandle=e,t.handle=t.textureHandle.createView(t.options),t.bindGroupLayoutEntry.texture.viewDimension=t.options.dimension;var n=Qd.getDetailsFromTextureFormat(r.format);t.bindGroupLayoutEntry.texture.sampleType=n.sampleType,t.bindGroupTime.modified()},e.getBindGroupEntry=function(){return{resource:e.getHandle()}},e.getShaderCode=function(e,r){var n="f32";"sint"===t.bindGroupLayoutEntry.texture.sampleType?n="i32":"uint"===t.bindGroupLayoutEntry.texture.sampleType&&(n="u32");var a="@binding(".concat(e,") @group(").concat(r,") var ").concat(t.label,": texture_").concat(t.options.dimension,"<").concat(n,">;");return"depth"===t.bindGroupLayoutEntry.texture.sampleType&&(a="@binding(".concat(e,") @group(").concat(r,") var ").concat(t.label,": texture_depth_").concat(t.options.dimension,";")),a},e.addSampler=function(r,n){var a=Hg.newInstance({label:"".concat(t.label,"Sampler")});a.create(r,n),e.setSampler(a)},e.getBindGroupTime=function(){return t.texture&&t.texture.getHandle()!==t.textureHandle&&(t.textureHandle=t.texture.getHandle(),t.handle=t.textureHandle.createView(t.options),t.bindGroupTime.modified()),t.bindGroupTime},e.getHandle=function(){return t.texture&&t.texture.getHandle()!==t.textureHandle&&(t.textureHandle=t.texture.getHandle(),t.handle=t.textureHandle.createView(t.options),t.bindGroupTime.modified()),t.handle}}(e,t)}var qg={newInstance:er.newInstance(Xg),extend:Xg},Yg=Up.BufferUsage;var Qg={device:null,handle:null,buffer:null,ready:!1,label:null};function $g(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Qg,r),er.obj(e,t),er.get(e,t,["handle","ready","width","height","depth","format","usage"]),er.setGet(e,t,["device","label"]),function(e,t){t.classHierarchy.push("vtkWebGPUTexture"),e.create=function(e,r){t.device=e,t.width=r.width,t.height=r.height,t.depth=r.depth?r.depth:1;var n=1===t.depth?"2d":"3d";t.format=r.format?r.format:"rgba8unorm",t.mipLevel=r.mipLevel?r.mipLevel:0,t.usage=r.usage?r.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,t.handle=t.device.getHandle().createTexture({size:[t.width,t.height,t.depth],format:t.format,usage:t.usage,label:t.label,dimension:n,mipLevelCount:t.mipLevel+1})},e.assignFromHandle=function(e,r,n){t.device=e,t.handle=r,t.width=n.width,t.height=n.height,t.depth=n.depth?n.depth:1,t.format=n.format?n.format:"rgba8unorm",t.usage=n.usage?n.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST},e.writeImageData=function(r){var n=[];if(r.canvas)return t.device.getHandle().queue.copyExternalImageToTexture({source:r.canvas,flipY:r.flip},{texture:t.handle,premultipliedAlpha:!0},[t.width,t.height,t.depth]),void(t.ready=!0);r.jsImageData&&!r.nativeArray&&(r.width=r.jsImageData.width,r.height=r.jsImageData.height,r.depth=1,r.format="rgba8unorm",r.flip=!0,r.nativeArray=r.jsImageData.data);var a=Qd.getDetailsFromTextureFormat(t.format),o=t.width*a.stride,i=function(e,t,r){var n=e.length/(t*r)*e.BYTES_PER_ELEMENT,o=2===a.elementSize&&"float"===a.sampleType;if(o||n%256){for(var i=e,l=n/i.BYTES_PER_ELEMENT,u=a.elementSize,s=256*Math.floor((l*u+255)/256),c=s/u,f=er.newTypedArray(o?"Uint16Array":i.constructor.name,c*t*r),d=0;d<t*r;d++)if(o)for(var p=0;p<l;p++)f[d*c+p]=uf.toHalf(i[d*l+p]);else f.set(i.subarray(d*l,(d+1)*l),d*c);return[f,s]}return[e,n]};if(r.nativeArray&&(n=r.nativeArray),r.image){var l=document.createElement("canvas");l.width=r.image.width,l.height=r.image.height;var u=l.getContext("2d");u.translate(0,l.height),u.scale(1,-1),u.drawImage(r.image,0,0,r.image.width,r.image.height,0,0,l.width,l.height),n=u.getImageData(0,0,r.image.width,r.image.height).data}var s=t.device.createCommandEncoder();if(3!==e.getDimensionality()){for(var c=lc.generateMipmaps(n,t.width,t.height,t.mipLevel),f=t.width,d=t.height,p=0;p<=t.mipLevel;p++){var g=i(c[p],d,1);o=g[1];var m={dataArray:r.dataArray?r.dataArray:null,nativeArray:g[0],usage:Yg.Texture},v=t.device.getBufferManager().getBuffer(m);s.copyBufferToTexture({buffer:v.getHandle(),offset:0,bytesPerRow:o,rowsPerImage:d},{texture:t.handle,mipLevel:p},[f,d,1]),f/=2,d/=2}t.device.submitCommandEncoder(s),t.ready=!0}else{var h=i(n,t.height,t.depth);o=h[1];var y={dataArray:r.dataArray?r.dataArray:null,usage:Yg.Texture};y.nativeArray=h[0];var b=t.device.getBufferManager().getBuffer(y);s.copyBufferToTexture({buffer:b.getHandle(),offset:0,bytesPerRow:o,rowsPerImage:t.height},{texture:t.handle},[t.width,t.height,t.depth]),t.device.submitCommandEncoder(s),t.ready=!0}},e.getScale=function(){var e=Qd.getDetailsFromTextureFormat(t.format);return 2===e.elementSize&&"float"===e.sampleType?1:255},e.getNumberOfComponents=function(){return Qd.getDetailsFromTextureFormat(t.format).numComponents},e.getDimensionality=function(){var e=0;return t.width>1&&e++,t.height>1&&e++,t.depth>1&&e++,e},e.resizeToMatch=function(e){e.getWidth()===t.width&&e.getHeight()===t.height&&e.getDepth()===t.depth||(t.width=e.getWidth(),t.height=e.getHeight(),t.depth=e.getDepth(),t.handle=t.device.getHandle().createTexture({size:[t.width,t.height,t.depth],format:t.format,usage:t.usage,label:t.label}))},e.resize=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;e===t.width&&r===t.height&&n===t.depth||(t.width=e,t.height=r,t.depth=n,t.handle=t.device.getHandle().createTexture({size:[t.width,t.height,t.depth],format:t.format,usage:t.usage,label:t.label}))},e.createView=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.dimension||(n.dimension=1===t.depth?"2d":"3d");var a=qg.newInstance({label:r});return a.create(e,n),a}}(e,t)}var Zg={newInstance:er.newInstance($g),extend:$g};var Jg={};function em(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Jg,r),ar.extend(e,t,r),function(e,t){t.classHierarchy.push("vtkWebGPUPixelSpaceCallbackMapper"),e.opaquePass=function(r,n){t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getParent();var a=t.WebGPURenderer.getAspectRatio(),o=t.WebGPURenderer?t.WebGPURenderer.getRenderable().getActiveCamera():null,i=t.WebGPURenderer.getTiledSizeAndOrigin();t.renderable.getUseZValues(),t.renderable.invokeCallback(t.renderable.getInputData(),o,a,i,null)}}(e,t)}var tm=er.newInstance(em,"vtkWebGPUPixelSpaceCallbackMapper");Ad("vtkPixelSpaceCallbackMapper",tm);var rm=er.vtkDebugMacro;var nm={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,cameraLightTransform:h(),physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function am(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,nm,r),er.obj(e,t),er.get(e,t,["distance"]),er.setGet(e,t,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),er.getArray(e,t,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),er.setGetArray(e,t,["clippingRange","windowCenter"],2),er.setGetArray(e,t,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),function(e,t){t.classHierarchy.push("vtkCamera");var r=new Float64Array(3),n=new Float64Array([0,0,-1]),a=new Float64Array([0,1,0]),o=S(new Float64Array(16)),i=S(new Float64Array(16)),l=new Float64Array(3),u=new Float64Array(3),s=new Float64Array(3),c=S(new Float64Array(16)),f=S(new Float64Array(16)),d=new Float64Array(3),p=new Float64Array(3);function g(){t.viewPlaneNormal[0]=-t.directionOfProjection[0],t.viewPlaneNormal[1]=-t.directionOfProjection[1],t.viewPlaneNormal[2]=-t.directionOfProjection[2]}e.orthogonalizeViewUp=function(){var r=e.getViewMatrix();t.viewUp[0]=r[4],t.viewUp[1]=r[5],t.viewUp[2]=r[6],e.modified()},e.setPosition=function(r,n,a){r===t.position[0]&&n===t.position[1]&&a===t.position[2]||(t.position[0]=r,t.position[1]=n,t.position[2]=a,e.computeDistance(),e.modified())},e.setFocalPoint=function(r,n,a){r===t.focalPoint[0]&&n===t.focalPoint[1]&&a===t.focalPoint[2]||(t.focalPoint[0]=r,t.focalPoint[1]=n,t.focalPoint[2]=a,e.computeDistance(),e.modified())},e.setDistance=function(r){if(t.distance!==r){t.distance=r,t.distance<1e-20&&(t.distance=1e-20,rm("Distance is set to minimum."));var n=t.directionOfProjection;t.focalPoint[0]=t.position[0]+n[0]*t.distance,t.focalPoint[1]=t.position[1]+n[1]*t.distance,t.focalPoint[2]=t.position[2]+n[2]*t.distance,e.modified()}},e.computeDistance=function(){var e=t.focalPoint[0]-t.position[0],r=t.focalPoint[1]-t.position[1],n=t.focalPoint[2]-t.position[2];if(t.distance=Math.sqrt(e*e+r*r+n*n),t.distance<1e-20){t.distance=1e-20,rm("Distance is set to minimum.");var a=t.directionOfProjection;t.focalPoint[0]=t.position[0]+a[0]*t.distance,t.focalPoint[1]=t.position[1]+a[1]*t.distance,t.focalPoint[2]=t.position[2]+a[2]*t.distance}t.directionOfProjection[0]=e/t.distance,t.directionOfProjection[1]=r/t.distance,t.directionOfProjection[2]=n/t.distance,g()},e.dolly=function(r){if(!(r<=0)){var n=t.distance/r;e.setPosition(t.focalPoint[0]-n*t.directionOfProjection[0],t.focalPoint[1]-n*t.directionOfProjection[1],t.focalPoint[2]-n*t.directionOfProjection[2])}},e.roll=function(r){var n=t.position,a=t.focalPoint,o=t.viewUp,i=new Float64Array([o[0],o[1],o[2],0]);S(c);var l=new Float64Array([a[0]-n[0],a[1]-n[1],a[2]-n[2]]);R(c,c,so(r),l),Ni(i,i,c),t.viewUp[0]=i[0],t.viewUp[1]=i[1],t.viewUp[2]=i[2],e.modified()},e.azimuth=function(r){var n=t.focalPoint;S(f),E(f,f,n),R(f,f,so(r),t.viewUp),E(f,f,[-n[0],-n[1],-n[2]]),tn(d,t.position,f),e.setPosition(d[0],d[1],d[2])},e.yaw=function(r){var n=t.position;S(f),E(f,f,n),R(f,f,so(r),t.viewUp),E(f,f,[-n[0],-n[1],-n[2]]),tn(p,t.focalPoint,f),e.setFocalPoint(p[0],p[1],p[2])},e.elevation=function(r){var n=t.focalPoint,a=e.getViewMatrix(),o=[-a[0],-a[1],-a[2]];S(f),E(f,f,n),R(f,f,so(r),o),E(f,f,[-n[0],-n[1],-n[2]]),tn(d,t.position,f),e.setPosition(d[0],d[1],d[2])},e.pitch=function(r){var n=t.position,a=e.getViewMatrix(),o=[a[0],a[1],a[2]];S(f),E(f,f,n),R(f,f,so(r),o),E(f,f,[-n[0],-n[1],-n[2]]),tn(p,t.focalPoint,f),e.setFocalPoint.apply(e,$e(p))},e.zoom=function(r){r<=0||(t.parallelProjection?t.parallelScale/=r:t.viewAngle/=r,e.modified())},e.translate=function(r,n,a){var o=[r,n,a];mo(t.position,o,t.position),mo(t.focalPoint,o,t.focalPoint),e.computeDistance(),e.modified()},e.applyTransform=function(r){var n=[].concat($e(t.viewUp),[1]),a=[],o=[],i=[];n[0]+=t.position[0],n[1]+=t.position[1],n[2]+=t.position[2],Ni(a,[].concat($e(t.position),[1]),r),Ni(o,[].concat($e(t.focalPoint),[1]),r),Ni(i,n,r),i[0]-=a[0],i[1]-=a[1],i[2]-=a[2],e.setPosition.apply(e,$e(a.slice(0,3))),e.setFocalPoint.apply(e,$e(o.slice(0,3))),e.setViewUp.apply(e,$e(i.slice(0,3)))},e.getThickness=function(){return t.clippingRange[1]-t.clippingRange[0]},e.setThickness=function(r){var n=r;n<1e-20&&(n=1e-20,rm("Thickness is set to minimum.")),e.setClippingRange(t.clippingRange[0],t.clippingRange[0]+n)},e.setThicknessFromFocalPoint=function(r){var n=r;n<1e-20&&(n=1e-20,rm("Thickness is set to minimum.")),e.setClippingRange(t.distance-n/2,t.distance+n/2)},e.setRoll=function(e){},e.getRoll=function(){},e.setObliqueAngles=function(e,t){},e.getOrientation=function(){},e.getOrientationWXYZ=function(){},e.getFrustumPlanes=function(e){},e.getCameraLightTransformMatrix=function(e){return b(e,t.cameraLightTransform),e},e.computeCameraLightTransform=function(){b(o,e.getViewMatrix()),C(o,o),L(i,[t.distance,t.distance,t.distance]),A(o,o,i),S(t.cameraLightTransform),E(t.cameraLightTransform,o,[0,0,-1])},e.deepCopy=function(e){},e.physicalOrientationToWorldDirection=function(e){var t,r,n=zi(e[0],e[1],e[2],e[3]),a=Fi(),o=zi(0,0,1,0);return r=n,(t=a)[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],Gi(o,n,o),Gi(o,o,a),[o[0],o[1],o[2]]},e.getPhysicalToWorldMatrix=function(t){e.getWorldToPhysicalMatrix(t),C(t,t)},e.getWorldToPhysicalMatrix=function(e){S(e);var r=[3];bo(t.physicalViewNorth,t.physicalViewUp,r),e[0]=r[0],e[1]=r[1],e[2]=r[2],e[4]=t.physicalViewUp[0],e[5]=t.physicalViewUp[1],e[6]=t.physicalViewUp[2],e[8]=-t.physicalViewNorth[0],e[9]=-t.physicalViewNorth[1],e[10]=-t.physicalViewNorth[2],w(e,e),Mr(l,1/t.physicalScale,1/t.physicalScale,1/t.physicalScale),I(e,e,l),E(e,e,t.physicalTranslation)},e.computeViewParametersFromViewMatrix=function(i){C(o,i),tn(l,r,o),e.computeDistance();var c=t.distance;e.setPosition(l[0],l[1],l[2]),tn(u,n,o),kr(u,u,l),qr(u,u),e.setDirectionOfProjection(u[0],u[1],u[2]),tn(s,a,o),kr(s,s,l),qr(s,s),e.setViewUp(s[0],s[1],s[2]),e.setDistance(c)},e.computeViewParametersFromPhysicalMatrix=function(t){e.getWorldToPhysicalMatrix(o),A(o,t,o),e.computeViewParametersFromViewMatrix(o)},e.setViewMatrix=function(r){t.viewMatrix=r,t.viewMatrix&&(b(o,t.viewMatrix),e.computeViewParametersFromViewMatrix(o),w(t.viewMatrix,t.viewMatrix))},e.getViewMatrix=function(){if(t.viewMatrix)return t.viewMatrix;re(o,t.position,t.focalPoint,t.viewUp),w(o,o);var e=new Float64Array(16);return b(e,o),e},e.setProjectionMatrix=function(e){t.projectionMatrix=e},e.getProjectionMatrix=function(e,r,n){var a=new Float64Array(16);if(S(a),t.projectionMatrix){var i=1/t.physicalScale;return Mr(l,i,i,i),b(a,t.projectionMatrix),I(a,a,l),w(a,a),a}S(o);var u=t.clippingRange[1]-t.clippingRange[0],s=[t.clippingRange[0]+(r+1)*u/2,t.clippingRange[0]+(n+1)*u/2];if(t.parallelProjection){var c=t.parallelScale*e,f=t.parallelScale,d=(t.windowCenter[0]-1)*c,p=(t.windowCenter[0]+1)*c,g=(t.windowCenter[1]-1)*f,m=(t.windowCenter[1]+1)*f;ee(o,d,p,g,m,s[0],s[1]),w(o,o)}else{if(t.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");var v,h,y=Math.tan(so(t.viewAngle)/2);!0===t.useHorizontalViewAngle?(v=t.clippingRange[0]*y,h=t.clippingRange[0]*y/e):(v=t.clippingRange[0]*y*e,h=t.clippingRange[0]*y);var T=(t.windowCenter[0]-1)*v,x=(t.windowCenter[0]+1)*v,C=(t.windowCenter[1]-1)*h,P=(t.windowCenter[1]+1)*h,O=s[0],A=s[1];o[0]=2*O/(x-T),o[5]=2*O/(P-C),o[2]=(T+x)/(x-T),o[6]=(C+P)/(P-C),o[10]=-(O+A)/(A-O),o[14]=-1,o[11]=-2*O*A/(A-O),o[15]=0}return b(a,o),a},e.getCompositeProjectionMatrix=function(t,r,n){var a=e.getViewMatrix(),o=e.getProjectionMatrix(t,r,n);return A(o,a,o),o},e.setDirectionOfProjection=function(e,r,n){if(t.directionOfProjection[0]!==e||t.directionOfProjection[1]!==r||t.directionOfProjection[2]!==n){t.directionOfProjection[0]=e,t.directionOfProjection[1]=r,t.directionOfProjection[2]=n;var a=t.directionOfProjection;t.focalPoint[0]=t.position[0]+a[0]*t.distance,t.focalPoint[1]=t.position[1]+a[1]*t.distance,t.focalPoint[2]=t.position[2]+a[2]*t.distance,g()}},e.setDeviceAngles=function(r,n,a,o){var i=[3];bo(t.physicalViewNorth,t.physicalViewUp,i);var l=S(new Float64Array(16));R(l,l,so(r),t.physicalViewUp),R(l,l,so(n),i),R(l,l,so(a),t.physicalViewNorth),R(l,l,so(-o),t.physicalViewUp);var u=new Float64Array([-t.physicalViewUp[0],-t.physicalViewUp[1],-t.physicalViewUp[2]]),s=new Float64Array(t.physicalViewNorth);tn(u,u,l),tn(s,s,l),e.setDirectionOfProjection(u[0],u[1],u[2]),e.setViewUp(s[0],s[1],s[2]),e.modified()},e.setOrientationWXYZ=function(t,r,n,a){var o=S(new Float64Array(16));if(0!==t&&(0!==r||0!==n||0!==a)){var i=so(t),l=Fi();Ui(l,[r,n,a],i),X(o,l)}var u=new Float64Array(3);tn(u,[0,0,-1],o);var s=new Float64Array(3);tn(s,[0,1,0],o),e.setDirectionOfProjection.apply(e,$e(u)),e.setViewUp.apply(e,$e(s)),e.modified()},e.computeClippingRange=function(e){var r,n;r=t.viewPlaneNormal,n=t.position;for(var a=-r[0],o=-r[1],i=-r[2],l=-(a*n[0]+o*n[1]+i*n[2]),u=[a*e[0]+o*e[2]+i*e[4]+l,1e-18],s=0;s<2;s++)for(var c=0;c<2;c++)for(var f=0;f<2;f++){var d=a*e[f]+o*e[2+c]+i*e[4+s]+l;u[0]=d<u[0]?d:u[0],u[1]=d>u[1]?d:u[1]}return u}}(e,t)}var om={newInstance:er.newInstance(am,"vtkCamera"),extend:am};var im={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,coneFalloff:5,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function lm(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,im,r),er.obj(e,t),er.setGet(e,t,["intensity","switch","positional","exponent","coneAngle","coneFalloff","transformMatrix","lightType","shadowAttenuation","attenuationValues"]),er.setGetArray(e,t,["color","position","focalPoint","attenuationValues"],3),function(e,t){t.classHierarchy.push("vtkLight");var r=new Float64Array(3);e.getTransformedPosition=function(){return t.transformMatrix?tn(r,t.position,t.transformMatrix):Mr(r,t.position[0],t.position[1],t.position[2]),r},e.getTransformedFocalPoint=function(){return t.transformMatrix?tn(r,t.focalPoint,t.transformMatrix):Mr(r,t.focalPoint[0],t.focalPoint[1],t.focalPoint[2]),r},e.getDirection=function(){return t.directionMTime<t.mtime&&(pn(t.direction,t.focalPoint,t.position),xo(t.direction),t.directionMTime=t.mtime),t.direction},e.setDirection=function(e){var r=new Float64Array(3);pn(r,t.position,e),t.focalPoint=r},e.setDirectionAngle=function(t,r){var n=so(t),a=so(r);e.setPosition(Math.cos(n)*Math.sin(a),Math.sin(n),Math.cos(n)*Math.cos(a)),e.setFocalPoint(0,0,0),e.setPositional(0)},e.setLightTypeToHeadLight=function(){e.setLightType("HeadLight")},e.setLightTypeToCameraLight=function(){e.setLightType("CameraLight")},e.setLightTypeToSceneLight=function(){e.setTransformMatrix(null),e.setLightType("SceneLight")},e.lightTypeIsHeadLight=function(){return"HeadLight"===t.lightType},e.lightTypeIsSceneLight=function(){return"SceneLight"===t.lightType},e.lightTypeIsCameraLight=function(){return"CameraLight"===t.lightType}}(e,t)}var um={newInstance:er.newInstance(lm,"vtkLight"),extend:lm,LIGHT_TYPES:["HeadLight","CameraLight","SceneLight"]},sm=er.vtkErrorMacro;function cm(e,t){function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.push(e);var n=e.getNestedProps();if(n&&n.length)for(var a=0;a<n.length;a++)r(n[a],t);return t}var n;t.classHierarchy.push("vtkViewport"),e.getViewProps=function(){return t.props},e.hasViewProp=function(e){return t.props.includes(e)},e.addViewProp=function(r){r&&!e.hasViewProp(r)&&t.props.push(r)},e.removeViewProp=function(e){var r=t.props.filter((function(t){return t!==e}));t.props.length!==r.length&&(t.props=r)},e.removeAllViewProps=function(){t.props=[]},e.getViewPropsWithNestedProps=function(){for(var e=[],n=0;n<t.props.length;n++)r(t.props[n],e);return e},e.addActor2D=e.addViewProp,e.removeActor2D=function(t){e.removeViewProp(t)},e.getActors2D=function(){return t.actors2D=[],t.props.forEach((function(e){t.actors2D=t.actors2D.concat(e.getActors2D())})),t.actors2D},e.displayToView=function(){return sm("call displayToView on your view instead")},e.viewToDisplay=function(){return sm("callviewtodisplay on your view instead")},e.getSize=function(){return sm("call getSize on your View instead")},e.normalizedDisplayToProjection=function(t,r,n){var a=e.normalizedDisplayToNormalizedViewport(t,r,n);return e.normalizedViewportToProjection(a[0],a[1],a[2])},e.normalizedDisplayToNormalizedViewport=function(e,r,n){var a=[t.viewport[2]-t.viewport[0],t.viewport[3]-t.viewport[1]];return[(e-t.viewport[0])/a[0],(r-t.viewport[1])/a[1],n]},e.normalizedViewportToProjection=function(e,t,r){return[2*e-1,2*t-1,2*r-1]},e.projectionToNormalizedDisplay=function(t,r,n){var a=e.projectionToNormalizedViewport(t,r,n);return e.normalizedViewportToNormalizedDisplay(a[0],a[1],a[2])},e.normalizedViewportToNormalizedDisplay=function(e,r,n){var a=[t.viewport[2]-t.viewport[0],t.viewport[3]-t.viewport[1]];return[e*a[0]+t.viewport[0],r*a[1]+t.viewport[1],n]},e.projectionToNormalizedViewport=function(e,t,r){return[.5*(e+1),.5*(t+1),.5*(r+1)]},e.PickPropFrom=(n="PickPropFrom",function(){return sm("vtkViewport::".concat(n," - NOT IMPLEMENTED"))})}var fm={background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function dm(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fm,r),er.obj(e,t),er.event(e,t,"event"),er.setGetArray(e,t,["viewport"],4),er.setGetArray(e,t,["background","background2"],3),cm(e,t)}var pm={newInstance:er.newInstance(dm,"vtkViewport"),extend:dm},gm=Pt,mm=Ot,vm=At;function hm(e){return function(){return mm("vtkRenderer::".concat(e," - NOT IMPLEMENTED"))}}var ym={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:Uo(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,environmentTexture:null,environmentTextureDiffuseStrength:1,environmentTextureSpecularStrength:1,useEnvironmentTextureAsBackground:!1,pass:0};function bm(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(Object.assign(t,ym,r),pm.extend(e,t,r),t.background||(t.background=[0,0,0,1]);t.background.length<3;)t.background.push(0);3===t.background.length&&t.background.push(1),Ft(e,t,["_renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),zt(e,t,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","environmentTexture","environmentTextureDiffuseStrength","environmentTextureSpecularStrength","useEnvironmentTextureAsBackground","useShadows","pass"]),Wt(e,t,["actors","volumes","lights"]),Kt(e,t,["background"],4,1),Xt(0,t,["renderWindow"]),function(e,t){t.classHierarchy.push("vtkRenderer");var r={type:"ComputeVisiblePropBoundsEvent",renderer:e},n={type:"ResetCameraClippingRangeEvent",renderer:e},a={type:"ResetCameraEvent",renderer:e};e.updateCamera=function(){return t.activeCamera||(gm("No cameras are on, creating one."),e.getActiveCameraAndResetIfCreated()),t.activeCamera.render(e),!0},e.updateLightsGeometryToFollowCamera=function(){var r=e.getActiveCameraAndResetIfCreated();t.lights.forEach((function(e){e.lightTypeIsSceneLight()||(e.lightTypeIsHeadLight()?(e.setPositionFrom(r.getPositionByReference()),e.setFocalPointFrom(r.getFocalPointByReference()),e.modified(r.getMTime())):e.lightTypeIsCameraLight()?e.setTransformMatrix(r.getCameraLightTransformMatrix(h())):mm("light has unknown light type",e.get()))}))},e.updateLightGeometry=function(){return!t.lightFollowCamera||e.updateLightsGeometryToFollowCamera()},e.allocateTime=hm("allocateTime"),e.updateGeometry=hm("updateGeometry"),e.getVTKWindow=function(){return t._renderWindow},e.setLayer=function(r){gm(e.getClassName(),e,"setting Layer to ",r),t.layer!==r&&(t.layer=r,e.modified()),e.setPreserveColorBuffer(!!r)},e.setActiveCamera=function(r){return t.activeCamera!==r&&(t.activeCamera=r,e.modified(),e.invokeEvent({type:"ActiveCameraEvent",camera:r}),!0)},e.makeCamera=function(){var t=om.newInstance();return e.invokeEvent({type:"CreateCameraEvent",camera:t}),t},e.getActiveCamera=function(){return t.activeCamera||(t.activeCamera=e.makeCamera()),t.activeCamera},e.getActiveCameraAndResetIfCreated=function(){return t.activeCamera||(e.getActiveCamera(),e.resetCamera()),t.activeCamera},e.getActors=function(){return t.actors=[],t.props.forEach((function(e){t.actors=t.actors.concat(e.getActors())})),t.actors},e.addActor=e.addViewProp,e.removeActor=function(r){t.actors=t.actors.filter((function(e){return e!==r})),e.removeViewProp(r),e.modified()},e.removeAllActors=function(){e.getActors().forEach((function(t){e.removeViewProp(t)})),t.actors=[],e.modified()},e.getVolumes=function(){return t.volumes=[],t.props.forEach((function(e){t.volumes=t.volumes.concat(e.getVolumes())})),t.volumes},e.addVolume=e.addViewProp,e.removeVolume=function(r){t.volumes=t.volumes.filter((function(e){return e!==r})),e.removeViewProp(r),e.modified()},e.removeAllVolumes=function(){e.getVolumes().forEach((function(t){e.removeViewProp(t)})),t.volumes=[],e.modified()},e.hasLight=function(e){return t.lights.includes(e)},e.addLight=function(r){r&&!e.hasLight(r)&&(t.lights.push(r),e.modified())},e.removeLight=function(r){t.lights=t.lights.filter((function(e){return e!==r})),e.modified()},e.removeAllLights=function(){t.lights=[],e.modified()},e.setLightCollection=function(r){t.lights=r,e.modified()},e.makeLight=um.newInstance,e.createLight=function(){t.automaticLightCreation&&(t._createdLight&&(e.removeLight(t._createdLight),t._createdLight.delete(),t._createdLight=null),t._createdLight=e.makeLight(),e.addLight(t._createdLight),t._createdLight.setLightTypeToHeadLight(),t._createdLight.setPosition(e.getActiveCamera().getPosition()),t._createdLight.setFocalPoint(e.getActiveCamera().getFocalPoint()))},e.normalizedDisplayToWorld=function(t,r,n,a){var o=e.normalizedDisplayToProjection(t,r,n);return o=e.projectionToView(o[0],o[1],o[2],a),e.viewToWorld(o[0],o[1],o[2])},e.worldToNormalizedDisplay=function(t,r,n,a){var o=e.worldToView(t,r,n);return o=e.viewToProjection(o[0],o[1],o[2],a),e.projectionToNormalizedDisplay(o[0],o[1],o[2])},e.viewToWorld=function(e,r,n){if(null===t.activeCamera)return mm("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var a=t.activeCamera.getViewMatrix();C(a,a),w(a,a);var o=new Float64Array([e,r,n]);return tn(o,o,a),o},e.projectionToView=function(e,r,n,a){if(null===t.activeCamera)return mm("ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0"),[0,0,0];var o=t.activeCamera.getProjectionMatrix(a,-1,1);C(o,o),w(o,o);var i=new Float64Array([e,r,n]);return tn(i,i,o),i},e.worldToView=function(e,r,n){if(null===t.activeCamera)return mm("WorldToView: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];var a=t.activeCamera.getViewMatrix();w(a,a);var o=new Float64Array([e,r,n]);return tn(o,o,a),o},e.viewToProjection=function(e,r,n,a){if(null===t.activeCamera)return mm("ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0"),[0,0,0];var o=t.activeCamera.getProjectionMatrix(a,-1,1);w(o,o);var i=new Float64Array([e,r,n]);return tn(i,i,o),i},e.computeVisiblePropBounds=function(){t.allBounds[0]=Vi.INIT_BOUNDS[0],t.allBounds[1]=Vi.INIT_BOUNDS[1],t.allBounds[2]=Vi.INIT_BOUNDS[2],t.allBounds[3]=Vi.INIT_BOUNDS[3],t.allBounds[4]=Vi.INIT_BOUNDS[4],t.allBounds[5]=Vi.INIT_BOUNDS[5];var n=!0;e.invokeEvent(r);for(var a=0;a<t.props.length;++a){var o=t.props[a];if(o.getVisibility()&&o.getUseBounds()){var i=o.getBounds();i&&Lo(i)&&(n=!1,i[0]<t.allBounds[0]&&(t.allBounds[0]=i[0]),i[1]>t.allBounds[1]&&(t.allBounds[1]=i[1]),i[2]<t.allBounds[2]&&(t.allBounds[2]=i[2]),i[3]>t.allBounds[3]&&(t.allBounds[3]=i[3]),i[4]<t.allBounds[4]&&(t.allBounds[4]=i[4]),i[5]>t.allBounds[5]&&(t.allBounds[5]=i[5]))}}return n&&(_o(t.allBounds),gm("Can't compute bounds, no 3D props are visible")),t.allBounds},e.resetCamera=function(){var r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||e.computeVisiblePropBounds(),n=[0,0,0];if(!Lo(r))return gm("Cannot reset camera!"),!1;var o=null;if(!e.getActiveCamera())return mm("Trying to reset non-existent camera"),!1;o=t.activeCamera.getViewPlaneNormal(),t.activeCamera.setViewAngle(30),n[0]=(r[0]+r[1])/2,n[1]=(r[2]+r[3])/2,n[2]=(r[4]+r[5])/2;var i=r[1]-r[0],l=r[3]-r[2],u=r[5]-r[4],s=(i*=i)+(l*=l)+(u*=u);s=0===s?1:s,s=.5*Math.sqrt(s);var c=so(t.activeCamera.getViewAngle()),f=s,d=s/Math.sin(.5*c),p=t.activeCamera.getViewUp();return Math.abs(yo(p,o))>.999&&(vm("Resetting view-up since view plane normal is parallel"),t.activeCamera.setViewUp(-p[2],p[0],p[1])),t.activeCamera.setFocalPoint(n[0],n[1],n[2]),t.activeCamera.setPosition(n[0]+d*o[0],n[1]+d*o[1],n[2]+d*o[2]),e.resetCameraClippingRange(r),t.activeCamera.setParallelScale(f),t.activeCamera.setPhysicalScale(s),t.activeCamera.setPhysicalTranslation(-n[0],-n[1],-n[2]),e.invokeEvent(a),!0},e.resetCameraClippingRange=function(){var r=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||e.computeVisiblePropBounds();if(!Lo(r))return gm("Cannot reset camera clipping range!"),!1;if(e.getActiveCameraAndResetIfCreated(),!t.activeCamera)return mm("Trying to reset clipping range of non-existent camera"),!1;var a=t.activeCamera.computeClippingRange(r),o=0;if(t.activeCamera.getParallelProjection())o=.2*t.activeCamera.getParallelScale();else{var i=so(t.activeCamera.getViewAngle());o=.2*Math.tan(i/2)*a[1]}return a[1]-a[0]<o&&(o=o-a[1]+a[0],a[1]+=o/2,a[0]-=o/2),a[0]<0&&(a[0]=0),a[0]=.99*a[0]-(a[1]-a[0])*t.clippingRangeExpansion,a[1]=1.01*a[1]+(a[1]-a[0])*t.clippingRangeExpansion,a[0]=a[0]>=a[1]?.01*a[1]:a[0],t.nearClippingPlaneTolerance||(t.nearClippingPlaneTolerance=.01),a[0]<t.nearClippingPlaneTolerance*a[1]&&(a[0]=t.nearClippingPlaneTolerance*a[1]),t.activeCamera.setClippingRange(a[0],a[1]),e.invokeEvent(n),!1},e.setRenderWindow=function(e){e!==t._renderWindow&&(t._vtkWindow=e,t._renderWindow=e)},e.visibleActorCount=function(){return t.props.filter((function(e){return e.getVisibility()})).length},e.visibleVolumeCount=e.visibleActorCount,e.getMTime=function(){var e=t.mtime,r=t.activeCamera?t.activeCamera.getMTime():0;r>e&&(e=r);var n=t._createdLight?t._createdLight.getMTime():0;return n>e&&(e=n),e},e.getTransparent=function(){return!!t.preserveColorBuffer},e.isActiveCameraCreated=function(){return!!t.activeCamera}}(e,t)}var Tm={newInstance:Yt(bm,"vtkRenderer"),extend:bm},xm=Object.create(null);function Sm(e,t){xm[e]=t}function wm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return xm[e]&&xm[e](t)}var Cm={defaultViewAPI:"WebGL",renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1};function Pm(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Cm,r),er.obj(e,t),er.setGet(e,t,["interactor","numberOfLayers","_views","defaultViewAPI"]),er.get(e,t,["neverRendered"]),er.getArray(e,t,["renderers"]),er.moveToProtected(e,t,["views"]),er.event(e,t,"completion"),function(e,t){t.classHierarchy.push("vtkRenderWindow"),e.addRenderer=function(r){e.hasRenderer(r)||(r.setRenderWindow(e),t.renderers.push(r),e.modified())},e.removeRenderer=function(r){t.renderers=t.renderers.filter((function(e){return e!==r})),e.modified()},e.hasRenderer=function(e){return-1!==t.renderers.indexOf(e)},e.newAPISpecificView=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return wm(e||t.defaultViewAPI,r)},e.addView=function(r){e.hasView(r)||(r.setRenderable(e),t._views.push(r),e.modified())},e.removeView=function(r){t._views=t._views.filter((function(e){return e!==r})),e.modified()},e.hasView=function(e){return-1!==t._views.indexOf(e)},e.preRender=function(){t.renderers.forEach((function(e){e.isActiveCameraCreated()||e.resetCamera()}))},e.render=function(){e.preRender(),t.interactor?t.interactor.render():t._views.forEach((function(e){return e.traverseAllPasses()}))},e.getStatistics=function(){var e={propCount:0,invisiblePropCount:0};return t.renderers.forEach((function(t){t.getViewProps().forEach((function(t){if(t.getVisibility()){e.propCount+=1;var r=t.getMapper&&t.getMapper();if(r&&r.getPrimitiveCount){var n=r.getPrimitiveCount();Object.keys(n).forEach((function(t){e[t]||(e[t]=0),e[t]+=n[t]}))}}else e.invisiblePropCount+=1}))})),e.str=Object.keys(e).map((function(t){return"".concat(t,": ").concat(e[t])})).join("\n"),e},e.captureImages=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return er.setImmediate(e.render),t._views.map((function(e){return e.captureNextImage?e.captureNextImage(r,n):void 0})).filter((function(e){return!!e}))}}(e,t)}var Om={newInstance:er.newInstance(Pm,"vtkRenderWindow"),extend:Pm,registerViewConstructor:Sm,listViewAPIs:function(){return Object.keys(xm)},newAPISpecificView:wm},Am={Unknown:0,LeftController:1,RightController:2},Em={Unknown:0,Trigger:1,TrackPad:2,Grip:3,Thumbstick:4,A:5,B:6,ApplicationMenu:7},Im={Device:Am,Input:Em,Axis:{Unknown:0,TouchpadX:1,TouchpadY:2,ThumbstickX:3,ThumbstickY:4}};function Rm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rm(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Dm=Im.Device,km=Im.Input,_m=er.vtkWarningMacro,Lm=er.vtkErrorMacro,Bm=er.normalizeWheel,Vm=er.vtkOnceErrorMacro,Nm=new MouseEvent(""),Fm={"xr-standard":[km.Trigger,km.Grip,km.TrackPad,km.Thumbstick,km.A,km.B]},Um=["StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"];function Gm(e){e.cancelable&&e.preventDefault()}function jm(e){var t=Object.create(null);return e.forEach((function(e){var r=e.pointerId,n=e.position;t[r]=n})),t}var zm={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,recentAnimationFrameRate:10,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{},preventDefaultOnPointerDown:!1,preventDefaultOnPointerUp:!1,mouseScrollDebounceByPass:!1};function Wm(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zm,r),er.obj(e,t),t._animationExtendedEnd=0,er.event(e,t,"RenderEvent"),Um.forEach((function(r){return er.event(e,t,r)})),er.get(e,t,["initialized","container","interactorStyle","lastFrameTime","recentAnimationFrameRate","_view"]),er.setGet(e,t,["lightFollowCamera","enabled","enableRender","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker","preventDefaultOnPointerDown","preventDefaultOnPointerUp","mouseScrollDebounceByPass"]),er.moveToProtected(e,t,["view"]),function(e,t){t.classHierarchy.push("vtkRenderWindowInteractor");var r=new Set,n=new Map,a=1;function o(r,n){t._forcedRenderer||(t.currentRenderer=e.findPokedRenderer(r,n))}function i(e){var r=t._view.getCanvas(),a=r.getBoundingClientRect(),i=r.width/a.width,l=r.height/a.height,u={x:i*(e.clientX-a.left),y:l*(a.height-e.clientY+a.top),z:0};return(n.size<=1||!t.currentRenderer)&&o(u.x,u.y),u}function l(e){return{controlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey}}function u(e){var t=l(e);return Mm({key:e.key,keyCode:e.charCode},t)}function s(e){return e.pointerType||""}function c(){t._view&&t.enabled&&t.enableRender&&(t.inRender=!0,t._view.traverseAllPasses(),t.inRender=!1),e.invokeRenderEvent()}e.start=function(){(t.initialized||(e.initialize(),t.initialized))&&e.startEventLoop()},e.setRenderWindow=function(e){Lm("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},e.setInteractorStyle=function(r){t.interactorStyle!==r&&(null!=t.interactorStyle&&t.interactorStyle.setInteractor(null),t.interactorStyle=r,null!=t.interactorStyle&&t.interactorStyle.getInteractor()!==e&&t.interactorStyle.setInteractor(e))},e.initialize=function(){t.initialized=!0,e.enable(),e.render()},e.enable=function(){return e.setEnabled(!0)},e.disable=function(){return e.setEnabled(!1)},e.startEventLoop=function(){return _m("empty event loop")},e.getCurrentRenderer=function(){return t.currentRenderer||o(0,0),t.currentRenderer},e.bindEvents=function(r){t.container=r,r.addEventListener("contextmenu",Gm),r.addEventListener("wheel",e.handleWheel),r.addEventListener("DOMMouseScroll",e.handleWheel),r.addEventListener("pointerenter",e.handlePointerEnter),r.addEventListener("pointerleave",e.handlePointerLeave),r.addEventListener("pointermove",e.handlePointerMove,{passive:!1}),r.addEventListener("pointerdown",e.handlePointerDown,{passive:!1}),r.addEventListener("pointerup",e.handlePointerUp),r.addEventListener("pointercancel",e.handlePointerCancel),document.addEventListener("keypress",e.handleKeyPress),document.addEventListener("keydown",e.handleKeyDown),document.addEventListener("keyup",e.handleKeyUp),document.addEventListener("pointerlockchange",e.handlePointerLockChange),r.style.touchAction="none",r.style.userSelect="none",r.style.webkitTapHighlightColor="rgba(0,0,0,0)"},e.unbindEvents=function(){var r=t.container;r.removeEventListener("contextmenu",Gm),r.removeEventListener("wheel",e.handleWheel),r.removeEventListener("DOMMouseScroll",e.handleWheel),r.removeEventListener("pointerenter",e.handlePointerEnter),r.removeEventListener("pointerleave",e.handlePointerLeave),r.removeEventListener("pointermove",e.handlePointerMove,{passive:!1}),r.removeEventListener("pointerdown",e.handlePointerDown,{passive:!1}),r.removeEventListener("pointerup",e.handlePointerUp),r.removeEventListener("pointercancel",e.handlePointerCancel),document.removeEventListener("keypress",e.handleKeyPress),document.removeEventListener("keydown",e.handleKeyDown),document.removeEventListener("keyup",e.handleKeyUp),document.removeEventListener("pointerlockchange",e.handlePointerLockChange),t.container=null,n.clear()},e.handleKeyPress=function(t){var r=u(t);e.keyPressEvent(r)},e.handleKeyDown=function(t){var r=u(t);e.keyDownEvent(r)},e.handleKeyUp=function(t){var r=u(t);e.keyUpEvent(r)},e.handlePointerEnter=function(t){var r=Mm(Mm({},l(t)),{},{position:i(t),deviceType:s(t)});e.pointerEnterEvent(r),"mouse"===r.deviceType&&e.mouseEnterEvent(r)},e.handlePointerLeave=function(t){var r=Mm(Mm({},l(t)),{},{position:i(t),deviceType:s(t)});e.pointerLeaveEvent(r),"mouse"===r.deviceType&&e.mouseLeaveEvent(r)},e.handlePointerDown=function(r){if(!(r.button>2||e.isPointerLocked()))switch(t.preventDefaultOnPointerDown&&Gm(r),r.target.hasPointerCapture(r.pointerId)&&r.target.releasePointerCapture(r.pointerId),t.container.setPointerCapture(r.pointerId),n.has(r.pointerId)&&_m("[RenderWindowInteractor] duplicate pointerId detected"),n.set(r.pointerId,{pointerId:r.pointerId,position:i(r)}),r.pointerType){case"pen":case"touch":e.handleTouchStart(r);break;default:e.handleMouseDown(r)}},e.handlePointerUp=function(r){if(n.has(r.pointerId))switch(t.preventDefaultOnPointerUp&&Gm(r),n.delete(r.pointerId),t.container.releasePointerCapture(r.pointerId),r.pointerType){case"pen":case"touch":e.handleTouchEnd(r);break;default:e.handleMouseUp(r)}},e.handlePointerCancel=function(t){if(n.has(t.pointerId))switch(n.delete(t.pointerId),t.pointerType){case"pen":case"touch":e.handleTouchEnd(t);break;default:e.handleMouseUp(t)}},e.handlePointerMove=function(t){switch(n.has(t.pointerId)&&(n.get(t.pointerId).position=i(t)),t.pointerType){case"pen":case"touch":e.handleTouchMove(t);break;default:e.handleMouseMove(t)}},e.handleMouseDown=function(t){var r=Mm(Mm({},l(t)),{},{position:i(t),deviceType:s(t)});switch(t.button){case 0:e.leftButtonPressEvent(r);break;case 1:e.middleButtonPressEvent(r);break;case 2:e.rightButtonPressEvent(r);break;default:Lm("Unknown mouse button pressed: ".concat(t.button))}},e.requestPointerLock=function(){t.container&&t.container.requestPointerLock()},e.exitPointerLock=function(){var e,t;return null===(e=(t=document).exitPointerLock)||void 0===e?void 0:e.call(t)},e.isPointerLocked=function(){return!!t.container&&document.pointerLockElement===t.container},e.handlePointerLockChange=function(){e.isPointerLocked()?e.startPointerLockEvent():e.endPointerLockEvent()},e.requestAnimation=function(n){void 0!==n?r.has(n)?_m("requester is already registered for animating"):(r.add(n),t.animationRequest||1!==r.size||t.xrAnimation||(t._animationStartTime=Date.now(),t._animationFrameCount=0,t.animationRequest=requestAnimationFrame(e.handleAnimation),e.startAnimationEvent())):Lm("undefined requester, can not start animating")},e.extendAnimation=function(n){var a=Date.now()+n;t._animationExtendedEnd=Math.max(t._animationExtendedEnd,a),t.animationRequest||0!==r.size||t.xrAnimation||(t._animationStartTime=Date.now(),t._animationFrameCount=0,t.animationRequest=requestAnimationFrame(e.handleAnimation),e.startAnimationEvent())},e.isAnimating=function(){return t.xrAnimation||null!==t.animationRequest},e.cancelAnimation=function(n){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r.has(n))r.delete(n),t.animationRequest&&0===r.size&&Date.now()>t._animationExtendedEnd&&(cancelAnimationFrame(t.animationRequest),t.animationRequest=null,e.endAnimationEvent(),e.render());else if(!a){var o=n&&n.getClassName?n.getClassName():n;_m("".concat(o," did not request an animation"))}},e.switchToXRAnimation=function(){t.animationRequest&&(cancelAnimationFrame(t.animationRequest),t.animationRequest=null),t.xrAnimation=!0},e.returnFromXRAnimation=function(){t.xrAnimation=!1,0!==r.size&&(t.recentAnimationFrameRate=10,t.animationRequest=requestAnimationFrame(e.handleAnimation))},e.updateXRGamepads=function(r,n,a){r.inputSources.forEach((function(r){var o=null==r.gripSpace?null:n.getPose(r.gripSpace,a),i=r.gamepad,l=r.handedness;if(i){i.index in t.lastGamepadValues||(t.lastGamepadValues[i.index]={left:{buttons:{}},right:{buttons:{}},none:{buttons:{}}});for(var u=0;u<i.buttons.length;++u)u in t.lastGamepadValues[i.index][l].buttons||(t.lastGamepadValues[i.index][l].buttons[u]=!1),t.lastGamepadValues[i.index][l].buttons[u]!==i.buttons[u].pressed&&null!=o&&(e.button3DEvent({gamepad:i,position:o.transform.position,orientation:o.transform.orientation,pressed:i.buttons[u].pressed,device:"left"===r.handedness?Dm.LeftController:Dm.RightController,input:Fm[i.mapping]&&Fm[i.mapping][u]?Fm[i.mapping][u]:km.Trigger}),t.lastGamepadValues[i.index][l].buttons[u]=i.buttons[u].pressed),t.lastGamepadValues[i.index][l].buttons[u]&&null!=o&&e.move3DEvent({gamepad:i,position:o.transform.position,orientation:o.transform.orientation,device:"left"===r.handedness?Dm.LeftController:Dm.RightController})}}))},e.handleMouseMove=function(r){var n=Mm(Mm({},l(r)),{},{position:i(r),deviceType:s(r)});0===t.moveTimeoutID?e.startMouseMoveEvent(n):(e.mouseMoveEvent(n),clearTimeout(t.moveTimeoutID)),t.moveTimeoutID=setTimeout((function(){e.endMouseMoveEvent(),t.moveTimeoutID=0}),200)},e.handleAnimation=function(){var n=Date.now();t._animationFrameCount++,n-t._animationStartTime>1e3&&t._animationFrameCount>1&&(t.recentAnimationFrameRate=1e3*(t._animationFrameCount-1)/(n-t._animationStartTime),t.lastFrameTime=1/t.recentAnimationFrameRate,e.animationFrameRateUpdateEvent(),t._animationStartTime=n,t._animationFrameCount=1),e.animationEvent(),c(),r.size>0||Date.now()<t._animationExtendedEnd?t.animationRequest=requestAnimationFrame(e.handleAnimation):(cancelAnimationFrame(t.animationRequest),t.animationRequest=null,e.endAnimationEvent(),e.render())},e.handleWheel=function(r){Gm(r);var n=Mm(Mm(Mm({},Bm(r)),l(r)),{},{position:i(r),deviceType:s(r)});0===t.wheelTimeoutID&&(a=Math.abs(n.spinY)>=.3?Math.abs(n.spinY):1),n.spinY/=a,0===t.wheelTimeoutID?(e.startMouseWheelEvent(n),e.mouseWheelEvent(n)):(e.mouseWheelEvent(n),clearTimeout(t.wheelTimeoutID)),t.mouseScrollDebounceByPass?(e.extendAnimation(600),e.endMouseWheelEvent(),t.wheelTimeoutID=0):t.wheelTimeoutID=setTimeout((function(){e.extendAnimation(600),e.endMouseWheelEvent(),t.wheelTimeoutID=0}),200)},e.handleMouseUp=function(t){var r=Mm(Mm({},l(t)),{},{position:i(t),deviceType:s(t)});switch(t.button){case 0:e.leftButtonReleaseEvent(r);break;case 1:e.middleButtonReleaseEvent(r);break;case 2:e.rightButtonReleaseEvent(r);break;default:Lm("Unknown mouse button released: ".concat(t.button))}},e.handleTouchStart=function(r){var a=$e(n.values());if(t.recognizeGestures&&a.length>1){var o=jm(n);if(2===a.length){var u=Mm(Mm({},l(Nm)),{},{position:a[0].position,deviceType:s(r)});e.leftButtonReleaseEvent(u)}e.recognizeGesture("TouchStart",o)}else if(1===a.length){var c=Mm(Mm({},l(Nm)),{},{position:i(r),deviceType:s(r)});e.leftButtonPressEvent(c)}},e.handleTouchMove=function(r){var a=$e(n.values());if(t.recognizeGestures&&a.length>1){var o=jm(n);e.recognizeGesture("TouchMove",o)}else if(1===a.length){var i=Mm(Mm({},l(Nm)),{},{position:a[0].position,deviceType:s(r)});e.mouseMoveEvent(i)}},e.handleTouchEnd=function(r){var a=$e(n.values());if(t.recognizeGestures)if(0===a.length){var o=Mm(Mm({},l(Nm)),{},{position:i(r),deviceType:s(r)});e.leftButtonReleaseEvent(o)}else if(1===a.length){var u=jm(n);e.recognizeGesture("TouchEnd",u);var c=Mm(Mm({},l(Nm)),{},{position:a[0].position,deviceType:s(r)});e.leftButtonPressEvent(c)}else{var f=jm(n);e.recognizeGesture("TouchMove",f)}else if(1===a.length){var d=Mm(Mm({},l(Nm)),{},{position:a[0].position,deviceType:s(r)});e.leftButtonReleaseEvent(d)}},e.setView=function(r){t._view!==r&&(t._view=r,t._view.getRenderable().setInteractor(e),e.modified())},e.getFirstRenderer=function(){var e,r,n;return null===(e=t._view)||void 0===e||null===(r=e.getRenderable())||void 0===r||null===(n=r.getRenderersByReference())||void 0===n?void 0:n[0]},e.findPokedRenderer=function(){var e,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!t._view)return null;var o=null===(e=t._view)||void 0===e||null===(r=e.getRenderable())||void 0===r?void 0:r.getRenderers();if(!o||0===o.length)return null;o.sort((function(e,t){return e.getLayer()-t.getLayer()}));for(var i=null,l=null,u=null,s=o.length;s--;){var c=o[s];if(t._view.isInViewport(n,a,c)&&c.getInteractive()){u=c;break}null===i&&c.getInteractive()&&(i=c),null===l&&t._view.isInViewport(n,a,c)&&(l=c)}return null===u&&(u=i),null===u&&(u=l),null==u&&(u=o[0]),u},e.render=function(){e.isAnimating()||t.inRender||c()},Um.forEach((function(r){var n=r.charAt(0).toLowerCase()+r.slice(1);e["".concat(n,"Event")]=function(n){if(t.enabled)if(e.getCurrentRenderer()){var a=Mm({type:r,pokedRenderer:t.currentRenderer,firstRenderer:e.getFirstRenderer()},n);e["invoke".concat(r)](a)}else Vm("\n          Can not forward events without a current renderer on the interactor.\n        ")}})),e.recognizeGesture=function(r,n){if(!(Object.keys(n).length>2)){if(t.startingEventPositions||(t.startingEventPositions={}),"TouchStart"===r)return Object.keys(n).forEach((function(e){t.startingEventPositions[e]=n[e]})),void(t.currentGesture="Start");if("TouchEnd"===r)return"Pinch"===t.currentGesture&&(e.render(),e.endPinchEvent()),"Rotate"===t.currentGesture&&(e.render(),e.endRotateEvent()),"Pan"===t.currentGesture&&(e.render(),e.endPanEvent()),t.currentGesture="Start",void(t.startingEventPositions={});var a=0,o=[],i=[];Object.keys(n).forEach((function(e){o[a]=n[e],i[a]=t.startingEventPositions[e],a++}));var l=Math.sqrt((i[0].x-i[1].x)*(i[0].x-i[1].x)+(i[0].y-i[1].y)*(i[0].y-i[1].y)),u=Math.sqrt((o[0].x-o[1].x)*(o[0].x-o[1].x)+(o[0].y-o[1].y)*(o[0].y-o[1].y)),s=co(Math.atan2(i[1].y-i[0].y,i[1].x-i[0].x)),c=co(Math.atan2(o[1].y-o[0].y,o[1].x-o[0].x)),f=c-s;c=c+180>=360?c-180:c+180,s=s+180>=360?s-180:s+180,Math.abs(c-s)<Math.abs(f)&&(f=c-s);var d=[];if(d[0]=(o[0].x-i[0].x+o[1].x-i[1].x)/2,d[1]=(o[0].y-i[0].y+o[1].y-i[1].y)/2,"TouchMove"===r)if("Start"===t.currentGesture){var p=.01*Math.sqrt(t.container.clientWidth*t.container.clientWidth+t.container.clientHeight*t.container.clientHeight);p<15&&(p=15);var g=Math.abs(u-l),m=3.1415926*u*Math.abs(f)/360,v=Math.sqrt(d[0]*d[0]+d[1]*d[1]);if(g>p&&g>m&&g>v){t.currentGesture="Pinch";var h={scale:1,touches:n};e.startPinchEvent(h)}else if(m>p&&m>v){t.currentGesture="Rotate";var y={rotation:0,touches:n};e.startRotateEvent(y)}else if(v>p){t.currentGesture="Pan";var b={translation:[0,0],touches:n};e.startPanEvent(b)}}else{if("Rotate"===t.currentGesture){var T={rotation:f,touches:n};e.rotateEvent(T)}if("Pinch"===t.currentGesture){var x={scale:u/l,touches:n};e.pinchEvent(x)}if("Pan"===t.currentGesture){var S={translation:d,touches:n};e.panEvent(S)}}}},e.handleVisibilityChange=function(){t._animationStartTime=Date.now(),t._animationFrameCount=0},e.setCurrentRenderer=function(e){t._forcedRenderer=!!e,t.currentRenderer=e};var f=e.delete;e.delete=function(){for(;r.size;)e.cancelAnimation(r.values().next().value);"undefined"!==typeof document.hidden&&document.removeEventListener("visibilitychange",e.handleVisibilityChange),t.container&&e.unbindEvents(),f()},"undefined"!==typeof document.hidden&&document.addEventListener("visibilitychange",e.handleVisibilityChange,!1)}(e,t)}var Hm=Mm({newInstance:er.newInstance(Wm,"vtkRenderWindowInteractor"),extend:Wm,handledEvents:Um},Im);function Km(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Km(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Km(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var qm=er.vtkErrorMacro,Ym=er.VOID;var Qm={computeWorldToDisplay:function(e,t,r,n){return e.getRenderWindow().getViews()[0].worldToDisplay(t,r,n,e)},computeDisplayToWorld:function(e,t,r,n){return e.getRenderWindow().getViews()[0].displayToWorld(t,r,n,e)}};var $m={enabled:!0,priority:0,processEvents:!0,subscribedEvents:[]};function Zm(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,$m,r),er.obj(e,t),er.event(e,t,"InteractionEvent"),er.event(e,t,"StartInteractionEvent"),er.event(e,t,"EndInteractionEvent"),er.get(e,t,["_interactor","enabled"]),er.setGet(e,t,["priority","processEvents"]),er.moveToProtected(e,t,["interactor"]),function(e,t){t.classHierarchy.push("vtkInteractorObserver");var r=Xm({},e);function n(){for(;t.subscribedEvents.length;)t.subscribedEvents.pop().unsubscribe()}function a(){Hm.handledEvents.forEach((function(r){e["handle".concat(r)]&&t.subscribedEvents.push(t._interactor["on".concat(r)]((function(n){return t.processEvents?e["handle".concat(r)](n):Ym}),t.priority))}))}e.setInteractor=function(r){r!==t._interactor&&(n(),t._interactor=r,r&&t.enabled&&a(),e.modified())},e.setEnabled=function(r){r!==t.enabled&&(n(),r&&(t._interactor?a():qm("\n          The interactor must be set before subscribing to events\n        ")),t.enabled=r,e.modified())},e.computeDisplayToWorld=function(e,r,n,a){return e?t._interactor.getView().displayToWorld(r,n,a,e):null},e.computeWorldToDisplay=function(e,r,n,a){return e?t._interactor.getView().worldToDisplay(r,n,a,e):null},e.setPriority=function(e){r.setPriority(e)&&t._interactor&&(n(),a())}}(e,t)}var Jm=Xm({newInstance:er.newInstance(Zm,"vtkInteractorObserver"),extend:Zm},Qm),ev={States:{IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025}};function tv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var rv=ev.States,nv={Rotate:rv.IS_ROTATE,Pan:rv.IS_PAN,Spin:rv.IS_SPIN,Dolly:rv.IS_DOLLY,CameraPose:rv.IS_CAMERA_POSE,WindowLevel:rv.IS_WINDOW_LEVEL,Slice:rv.IS_SLICE};var av={state:rv.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1};function ov(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,av,r),Jm.extend(e,t,r),function(e,t){t.classHierarchy.push("vtkInteractorStyle"),Object.keys(nv).forEach((function(r){er.event(e,t,"Start".concat(r,"Event")),e["start".concat(r)]=function(){t.state===rv.IS_NONE&&(t.state=nv[r],t._interactor.requestAnimation(e),e.invokeStartInteractionEvent({type:"StartInteractionEvent"}),e["invokeStart".concat(r,"Event")]({type:"Start".concat(r,"Event")}))},er.event(e,t,"End".concat(r,"Event")),e["end".concat(r)]=function(){t.state===nv[r]&&(t.state=rv.IS_NONE,t._interactor.cancelAnimation(e),e.invokeEndInteractionEvent({type:"EndInteractionEvent"}),e["invokeEnd".concat(r,"Event")]({type:"End".concat(r,"Event")}),t._interactor.render())}})),e.handleKeyPress=function(e){var r=t._interactor;switch(e.key){case"r":case"R":e.pokedRenderer.resetCamera(),r.render();break;case"w":case"W":e.pokedRenderer.getActors().forEach((function(e){var t=e.getProperty();t.setRepresentationToWireframe&&t.setRepresentationToWireframe()})),r.render();break;case"s":case"S":e.pokedRenderer.getActors().forEach((function(e){var t=e.getProperty();t.setRepresentationToSurface&&t.setRepresentationToSurface()})),r.render();break;case"v":case"V":e.pokedRenderer.getActors().forEach((function(e){var t=e.getProperty();t.setRepresentationToPoints&&t.setRepresentationToPoints()})),r.render()}}}(e,t)}var iv=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tv(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({newInstance:er.newInstance(ov,"vtkInteractorStyle"),extend:ov},ev),lv=ev.States;var uv={motionFactor:10,zoomFactor:10};function sv(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,uv,r),iv.extend(e,t,r),er.setGet(e,t,["motionFactor","zoomFactor"]),function(e,t){t.classHierarchy.push("vtkInteractorStyleTrackballCamera"),e.handleMouseMove=function(r){var n=r.position,a=r.pokedRenderer;switch(t.state){case lv.IS_ROTATE:e.handleMouseRotate(a,n),e.invokeInteractionEvent({type:"InteractionEvent"});break;case lv.IS_PAN:e.handleMousePan(a,n),e.invokeInteractionEvent({type:"InteractionEvent"});break;case lv.IS_DOLLY:e.handleMouseDolly(a,n),e.invokeInteractionEvent({type:"InteractionEvent"});break;case lv.IS_SPIN:e.handleMouseSpin(a,n),e.invokeInteractionEvent({type:"InteractionEvent"})}t.previousPosition=n},e.handleButton3D=function(r){!r||!r.pressed||r.device!==Am.RightController||r.input!==Em.Trigger&&r.input!==Em.TrackPad?!r||r.pressed||r.device!==Am.RightController||r.input!==Em.Trigger&&r.input!==Em.TrackPad||t.state!==lv.IS_CAMERA_POSE||e.endCameraPose():e.startCameraPose()},e.handleMove3D=function(r){t.state===lv.IS_CAMERA_POSE&&e.updateCameraPose(r)},e.updateCameraPose=function(e){var t=e.pokedRenderer.getActiveCamera(),r=t.getPhysicalTranslation(),n=.025*t.getPhysicalScale(),a=t.physicalOrientationToWorldDirection([e.orientation.x,e.orientation.y,e.orientation.z,e.orientation.w]);t.setPhysicalTranslation(r[0]+a[0]*n,r[1]+a[1]*n,r[2]+a[2]*n)},e.handleLeftButtonPress=function(r){var n=r.position;t.previousPosition=n,r.shiftKey?r.controlKey||r.altKey?e.startDolly():e.startPan():r.controlKey||r.altKey?e.startSpin():e.startRotate()},e.handleLeftButtonRelease=function(){switch(t.state){case lv.IS_DOLLY:e.endDolly();break;case lv.IS_PAN:e.endPan();break;case lv.IS_SPIN:e.endSpin();break;case lv.IS_ROTATE:e.endRotate()}},e.handleStartMouseWheel=function(){e.startDolly()},e.handleEndMouseWheel=function(){e.endDolly()},e.handleStartPinch=function(r){t.previousScale=r.scale,e.startDolly()},e.handleEndPinch=function(){e.endDolly()},e.handleStartRotate=function(r){t.previousRotation=r.rotation,e.startRotate()},e.handleEndRotate=function(){e.endRotate()},e.handleStartPan=function(r){t.previousTranslation=r.translation,e.startPan()},e.handleEndPan=function(){e.endPan()},e.handlePinch=function(r){e.dollyByFactor(r.pokedRenderer,r.scale/t.previousScale),t.previousScale=r.scale},e.handlePan=function(r){var n=r.pokedRenderer.getActiveCamera(),a=n.getFocalPoint(),o=(a=e.computeWorldToDisplay(r.pokedRenderer,a[0],a[1],a[2]))[2],i=r.translation,l=t.previousTranslation,u=e.computeDisplayToWorld(r.pokedRenderer,a[0]+i[0]-l[0],a[1]+i[1]-l[1],o),s=e.computeDisplayToWorld(r.pokedRenderer,a[0],a[1],o),c=[];c[0]=s[0]-u[0],c[1]=s[1]-u[1],c[2]=s[2]-u[2],a=n.getFocalPoint();var f=n.getPosition();n.setFocalPoint(c[0]+a[0],c[1]+a[1],c[2]+a[2]),n.setPosition(c[0]+f[0],c[1]+f[1],c[2]+f[2]),t._interactor.getLightFollowCamera()&&r.pokedRenderer.updateLightsGeometryToFollowCamera(),n.orthogonalizeViewUp(),t.previousTranslation=r.translation},e.handleRotate=function(e){var r=e.pokedRenderer.getActiveCamera();r.roll(e.rotation-t.previousRotation),r.orthogonalizeViewUp(),t.previousRotation=e.rotation},e.handleMouseRotate=function(e,r){if(t.previousPosition){var n=t._interactor,a=r.x-t.previousPosition.x,o=r.y-t.previousPosition.y,i=n.getView().getViewportSize(e),l=-.1,u=-.1;i[0]&&i[1]&&(l=-20/i[1],u=-20/i[0]);var s=a*u*t.motionFactor,c=o*l*t.motionFactor,f=e.getActiveCamera();Number.isNaN(s)||Number.isNaN(c)||(f.azimuth(s),f.elevation(c),f.orthogonalizeViewUp()),t.autoAdjustCameraClippingRange&&e.resetCameraClippingRange(),n.getLightFollowCamera()&&e.updateLightsGeometryToFollowCamera()}},e.handleMouseSpin=function(e,r){if(t.previousPosition){var n=t._interactor,a=e.getActiveCamera(),o=n.getView().getViewportCenter(e),i=co(Math.atan2(t.previousPosition.y-o[1],t.previousPosition.x-o[0])),l=co(Math.atan2(r.y-o[1],r.x-o[0]))-i;Number.isNaN(l)||(a.roll(l),a.orthogonalizeViewUp())}},e.handleMousePan=function(r,n){if(t.previousPosition){var a=r.getActiveCamera(),o=a.getFocalPoint(),i=(o=e.computeWorldToDisplay(r,o[0],o[1],o[2]))[2],l=e.computeDisplayToWorld(r,n.x,n.y,i),u=e.computeDisplayToWorld(r,t.previousPosition.x,t.previousPosition.y,i),s=[];s[0]=u[0]-l[0],s[1]=u[1]-l[1],s[2]=u[2]-l[2],o=a.getFocalPoint();var c=a.getPosition();a.setFocalPoint(s[0]+o[0],s[1]+o[1],s[2]+o[2]),a.setPosition(s[0]+c[0],s[1]+c[1],s[2]+c[2]),t._interactor.getLightFollowCamera()&&r.updateLightsGeometryToFollowCamera()}},e.handleMouseDolly=function(r,n){if(t.previousPosition){var a=n.y-t.previousPosition.y,o=t._interactor.getView().getViewportCenter(r),i=t.motionFactor*a/o[1];e.dollyByFactor(r,Math.pow(1.1,i))}},e.handleMouseWheel=function(r){var n=1-r.spinY/t.zoomFactor;e.dollyByFactor(r.pokedRenderer,n)},e.dollyByFactor=function(e,r){if(!Number.isNaN(r)){var n=e.getActiveCamera();n.getParallelProjection()?n.setParallelScale(n.getParallelScale()/r):(n.dolly(r),t.autoAdjustCameraClippingRange&&e.resetCameraClippingRange()),t._interactor.getLightFollowCamera()&&e.updateLightsGeometryToFollowCamera()}}}(e,t)}var cv={newInstance:er.newInstance(sv,"vtkInteractorStyleTrackballCamera"),extend:sv};function fv(e){return e}function dv(e){return null===e||"null"===e?null:"true"===e||"false"!==e&&(void 0!==e&&"undefined"!==e?"["===e[0]&&"]"===e[e.length-1]?e.substring(1,e.length-1).split(",").map((function(e){return dv(e.trim())})):""===e||Number.isNaN(Number(e))?e:Number(e):void 0)}var pv={toNativeType:dv,extractURLParameters:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.search,r={},n=e?dv:fv;return(t||"").replace(/#.*/,"").replace("?","").split("&").forEach((function(e){var t=qe(e.split("=").map((function(e){return decodeURIComponent(e)})),2),a=t[0],o=t[1];a&&(r[a]=!o||n(o))})),r}};function gv(e,t,r,n,a,o,i){try{var l=e[o](i),u=l.value}catch(s){return void r(s)}l.done?t(u):Promise.resolve(u).then(n,a)}function mv(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){gv(o,n,a,i,l,"next",e)}function l(e){gv(o,n,a,i,l,"throw",e)}i(void 0)}))}}var vv=r(109),hv=r.n(vv);var yv={glFramebuffer:null,colorBuffers:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function bv(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,yv,r),Vt(e,t),t.colorBuffers&&Ot("you cannot initialize colorBuffers through the constructor. You should call setColorBuffer() instead."),t.colorBuffers=[],Wt(e,t,["colorBuffers"]),function(e,t){t.classHierarchy.push("vtkFramebuffer"),e.getBothMode=function(){return t.context.FRAMEBUFFER},e.saveCurrentBindingsAndBuffers=function(t){var r="undefined"!==typeof t?t:e.getBothMode();e.saveCurrentBindings(r),e.saveCurrentBuffers(r)},e.saveCurrentBindings=function(e){if(t.context){var r=t.context;t.previousDrawBinding=r.getParameter(t.context.FRAMEBUFFER_BINDING),t.previousActiveFramebuffer=t._openGLRenderWindow.getActiveFramebuffer()}else Ot("you must set the OpenGLRenderWindow before calling saveCurrentBindings")},e.saveCurrentBuffers=function(e){},e.restorePreviousBindingsAndBuffers=function(t){var r="undefined"!==typeof t?t:e.getBothMode();e.restorePreviousBindings(r),e.restorePreviousBuffers(r)},e.restorePreviousBindings=function(e){if(t.context){var r=t.context;r.bindFramebuffer(r.FRAMEBUFFER,t.previousDrawBinding),t._openGLRenderWindow.setActiveFramebuffer(t.previousActiveFramebuffer)}else Ot("you must set the OpenGLRenderWindow before calling restorePreviousBindings")},e.restorePreviousBuffers=function(e){},e.bind=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===r&&(r=t.context.FRAMEBUFFER),t.context.bindFramebuffer(r,t.glFramebuffer);for(var n=0;n<t.colorBuffers.length;n++)t.colorBuffers[n].bind();t._openGLRenderWindow.setActiveFramebuffer(e)},e.create=function(e,r){t.context?(t.glFramebuffer=t.context.createFramebuffer(),t.glFramebuffer.width=e,t.glFramebuffer.height=r):Ot("you must set the OpenGLRenderWindow before calling create")},e.setColorBuffer=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.context;if(n){var a=n.COLOR_ATTACHMENT0;if(r>0){if(!t._openGLRenderWindow.getWebgl2())return void Ot("Using multiple framebuffer attachments requires WebGL 2");a+=r}t.colorBuffers[r]=e,n.framebufferTexture2D(n.FRAMEBUFFER,a,n.TEXTURE_2D,e.getHandle(),0)}else Ot("you must set the OpenGLRenderWindow before calling setColorBuffer")},e.removeColorBuffer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=t.context;if(r){var n=r.COLOR_ATTACHMENT0;if(e>0){if(!t._openGLRenderWindow.getWebgl2())return void Ot("Using multiple framebuffer attachments requires WebGL 2");n+=e}r.framebufferTexture2D(r.FRAMEBUFFER,n,r.TEXTURE_2D,null,0),t.colorBuffers=t.colorBuffers.splice(e,1)}else Ot("you must set the OpenGLRenderWindow before calling removeColorBuffer")},e.setDepthBuffer=function(e){if(t.context)if(t._openGLRenderWindow.getWebgl2()){var r=t.context;r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,e.getHandle(),0)}else Ot("Attaching depth buffer textures to fbo requires WebGL 2");else Ot("you must set the OpenGLRenderWindow before calling setDepthBuffer")},e.removeDepthBuffer=function(){if(t.context)if(t._openGLRenderWindow.getWebgl2()){var e=t.context;e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,null,0)}else Ot("Attaching depth buffer textures to framebuffers requires WebGL 2");else Ot("you must set the OpenGLRenderWindow before calling removeDepthBuffer")},e.getGLFramebuffer=function(){return t.glFramebuffer},e.setOpenGLRenderWindow=function(r){t._openGLRenderWindow!==r&&(e.releaseGraphicsResources(),t._openGLRenderWindow=r,t.context=null,r&&(t.context=t._openGLRenderWindow.getContext()))},e.releaseGraphicsResources=function(){t.glFramebuffer&&t.context.deleteFramebuffer(t.glFramebuffer)},e.getSize=function(){var e=[0,0];return null!==t.glFramebuffer&&(e[0]=t.glFramebuffer.width,e[1]=t.glFramebuffer.height),e},e.populateFramebuffer=function(){if(t.context){e.bind();var r=t.context,n=xf.newInstance();n.setOpenGLRenderWindow(t._openGLRenderWindow),n.setMinificationFilter(nf.LINEAR),n.setMagnificationFilter(nf.LINEAR),n.create2DFromRaw(t.glFramebuffer.width,t.glFramebuffer.height,4,bl.UNSIGNED_CHAR,null),e.setColorBuffer(n),t.depthTexture=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,t.depthTexture),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,t.glFramebuffer.width,t.glFramebuffer.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,t.depthTexture)}else Ot("you must set the OpenGLRenderWindow before calling populateFrameBuffer")},e.getColorTexture=function(){return t.colorBuffers[0]}}(e,t)}var Tv={newInstance:Yt(bv,"vtkFramebuffer"),extend:bv};var xv={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function Sv(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,xv,r),er.obj(e,t),er.get(e,t,["currentOperation"]),er.setGet(e,t,["delegates","_currentParent","preDelegateOperations","postDelegateOperations"]),er.moveToProtected(e,t,["currentParent"]),function(e,t){t.classHierarchy.push("vtkRenderPass"),e.getOperation=function(){return t.currentOperation},e.setCurrentOperation=function(e){t.currentOperation=e,t.currentTraverseOperation="traverse".concat(er.capitalize(t.currentOperation))},e.getTraverseOperation=function(){return t.currentTraverseOperation},e.traverse=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.deleted||(t._currentParent=n,t.preDelegateOperations.forEach((function(t){e.setCurrentOperation(t),r.traverse(e)})),t.delegates.forEach((function(t){t.traverse(r,e)})),t.postDelegateOperations.forEach((function(t){e.setCurrentOperation(t),r.traverse(e)})))}}(e,t)}var wv={newInstance:er.newInstance(Sv,"vtkRenderPass"),extend:Sv},Cv=fl.Representation,Pv=er.vtkErrorMacro;function Ov(e){var t=Yc.substitute(e.Fragment,"//VTK::RenderPassFragmentShader::Impl","\n      float weight = gl_FragData[0].a * pow(max(1.1 - gl_FragCoord.z, 0.0), 2.0);\n      gl_FragData[0] = vec4(gl_FragData[0].rgb*weight, gl_FragData[0].a);\n      gl_FragData[1].r = weight;\n    ",!1);e.Fragment=t.result}var Av="//VTK::System::Dec\n\nin vec2 tcoord;\n\nuniform sampler2D translucentRTexture;\nuniform sampler2D translucentRGBATexture;\n\n// the output of this shader\n//VTK::Output::Dec\n\nvoid main()\n{\n  vec4 t1Color = texture(translucentRGBATexture, tcoord);\n  float t2Color = texture(translucentRTexture, tcoord).r;\n  gl_FragData[0] = vec4(t1Color.rgb/max(t2Color,0.01), 1.0 - t1Color.a);\n}\n";var Ev={framebuffer:null,copyShader:null,tris:null};function Iv(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ev,r),wv.extend(e,t,r),t.VBOBuildTime={},er.obj(t.VBOBuildTime,{mtime:0}),t.tris=rf.newInstance(),er.get(e,t,["framebuffer"]),function(e,t){t.classHierarchy.push("vtkOpenGLOrderIndependentTranslucentPass"),e.createVertexBuffer=function(){var e=new Float32Array([-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1]),r=new Float32Array([0,0,1,0,0,1,1,1]),n=new Uint16Array([4,0,1,3,2]),a=Dl.newInstance({numberOfComponents:3,values:e});a.setName("points");var o=Dl.newInstance({numberOfComponents:2,values:r});o.setName("tcoords");var i=Dl.newInstance({numberOfComponents:1,values:n});t.tris.getCABO().createVBO(i,"polys",Cv.SURFACE,{points:a,tcoords:o,cellOffset:0}),t.VBOBuildTime.modified()},e.createFramebuffer=function(e){var r,n=e.getSize(),a=e.getContext();t.framebuffer=Tv.newInstance(),t.framebuffer.setOpenGLRenderWindow(e),(r=t.framebuffer).create.apply(r,$e(n)),t.framebuffer.saveCurrentBindingsAndBuffers(),t.framebuffer.bind(),t.translucentRGBATexture=xf.newInstance(),t.translucentRGBATexture.setInternalFormat(a.RGBA16F),t.translucentRGBATexture.setFormat(a.RGBA),t.translucentRGBATexture.setOpenGLDataType(a.HALF_FLOAT),t.translucentRGBATexture.setOpenGLRenderWindow(e),t.translucentRGBATexture.create2DFromRaw(n[0],n[1],4,"Float32Array",null),t.translucentRTexture=xf.newInstance(),t.translucentRTexture.setInternalFormat(a.R16F),t.translucentRTexture.setFormat(a.RED),t.translucentRTexture.setOpenGLDataType(a.HALF_FLOAT),t.translucentRTexture.setOpenGLRenderWindow(e),t.translucentRTexture.create2DFromRaw(n[0],n[1],1,"Float32Array",null),t.translucentZTexture=xf.newInstance(),t.translucentZTexture.setOpenGLRenderWindow(e),t.translucentZTexture.createDepthFromRaw(n[0],n[1],"Float32Array",null),t.framebuffer.setColorBuffer(t.translucentRGBATexture,0),t.framebuffer.setColorBuffer(t.translucentRTexture,1),t.framebuffer.setDepthBuffer(t.translucentZTexture)},e.createCopyShader=function(e){t.copyShader=e.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","attribute vec2 tcoordTC;","varying vec2 tcoord;","void main() { tcoord = tcoordTC; gl_Position = vertexDC; }"].join("\n"),Av,"")},e.createVBO=function(r){var n=r.getContext();t.tris.setOpenGLRenderWindow(r),e.createVertexBuffer();var a=t.copyShader;t.tris.getCABO().bind(),t.copyVAO.addAttributeArray(a,t.tris.getCABO(),"vertexDC",t.tris.getCABO().getVertexOffset(),t.tris.getCABO().getStride(),n.FLOAT,3,n.FALSE)||Pv("Error setting vertexDC in copy shader VAO."),t.copyVAO.addAttributeArray(a,t.tris.getCABO(),"tcoordTC",t.tris.getCABO().getTCoordOffset(),t.tris.getCABO().getStride(),n.FLOAT,2,n.FALSE)||Pv("Error setting vertexDC in copy shader VAO.")},e.traverse=function(r,n,a){if(!t.deleted){var o=r.getSize(),i=r.getContext();if(t._supported=!1,n.getSelector()||!i||!r.getWebgl2()||!i.getExtension("EXT_color_buffer_half_float")&&!i.getExtension("EXT_color_buffer_float"))return e.setCurrentOperation("translucentPass"),void n.traverse(e);if(t._supported=!0,null===t.framebuffer)e.createFramebuffer(r);else{var l=t.framebuffer.getSize();null===l||l[0]!==o[0]||l[1]!==o[1]?(t.framebuffer.releaseGraphicsResources(),t.translucentRGBATexture.releaseGraphicsResources(r),t.translucentRTexture.releaseGraphicsResources(r),t.translucentZTexture.releaseGraphicsResources(r),e.createFramebuffer(r)):(t.framebuffer.saveCurrentBindingsAndBuffers(),t.framebuffer.bind())}i.drawBuffers([i.COLOR_ATTACHMENT0]),i.clearBufferfv(i.COLOR,0,[0,0,0,0]),i.clearBufferfv(i.DEPTH,0,[1]),i.colorMask(!1,!1,!1,!1),a.getOpaqueActorCount()>0&&(a.setCurrentOperation("opaqueZBufferPass"),n.traverse(a)),i.colorMask(!0,!0,!0,!0),i.drawBuffers([i.COLOR_ATTACHMENT0,i.COLOR_ATTACHMENT1]),i.viewport(0,0,o[0],o[1]),i.scissor(0,0,o[0],o[1]),i.clearBufferfv(i.COLOR,0,[0,0,0,1]),i.clearBufferfv(i.COLOR,1,[0,0,0,0]),i.enable(i.DEPTH_TEST),i.enable(i.BLEND),i.blendFuncSeparate(i.ONE,i.ONE,i.ZERO,i.ONE_MINUS_SRC_ALPHA),e.setCurrentOperation("translucentPass"),n.traverse(e),i.drawBuffers([i.NONE]),t.framebuffer.restorePreviousBindingsAndBuffers(),null===t.copyShader?e.createCopyShader(r):r.getShaderCache().readyShaderProgram(t.copyShader),t.copyVAO||(t.copyVAO=Zc.newInstance(),t.copyVAO.setOpenGLRenderWindow(r)),t.copyVAO.bind(),t.VBOBuildTime.getMTime()<e.getMTime()&&e.createVBO(r),i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA),i.depthMask(!1),i.depthFunc(i.ALWAYS),i.viewport(0,0,o[0],o[1]),i.scissor(0,0,o[0],o[1]),t.translucentRGBATexture.activate(),t.copyShader.setUniformi("translucentRGBATexture",t.translucentRGBATexture.getTextureUnit()),t.translucentRTexture.activate(),t.copyShader.setUniformi("translucentRTexture",t.translucentRTexture.getTextureUnit()),i.drawArrays(i.TRIANGLES,0,t.tris.getCABO().getElementCount()),i.depthMask(!0),i.depthFunc(i.LEQUAL),t.translucentRGBATexture.deactivate(),t.translucentRTexture.deactivate()}},e.getShaderReplacement=function(){return t._supported?Ov:null},e.releaseGraphicsResources=function(r){t.framebuffer&&(t.framebuffer.releaseGraphicsResources(r),t.framebuffer=null),t.translucentRGBATexture&&(t.translucentRGBATexture.releaseGraphicsResources(r),t.translucentRGBATexture=null),t.translucentRTexture&&(t.translucentRTexture.releaseGraphicsResources(r),t.translucentRTexture=null),t.translucentZTexture&&(t.translucentZTexture.releaseGraphicsResources(r),t.translucentZTexture=null),t.copyVAO&&(t.copyVAO.releaseGraphicsResources(r),t.copyVAO=null),t.copyShader&&(t.copyShader.releaseGraphicsResources(r),t.copyShader=null),t.tris&&(t.tris.releaseGraphicsResources(r),t.tris=null),e.modified()}}(e,t)}var Rv={newInstance:er.newInstance(Iv,"vtkOpenGLOrderIndependentTranslucentPass"),extend:Iv};var Mv={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,overlayActorCount:0,framebuffer:null,depthRequested:!1};function Dv(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Mv,r),wv.extend(e,t,r),er.get(e,t,["framebuffer","opaqueActorCount","translucentActorCount","volumeCount"]),function(e,t){t.classHierarchy.push("vtkForwardPass"),e.traverse=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t.deleted){t._currentParent=n,e.setCurrentOperation("buildPass"),r.traverse(e);for(var a=r.getRenderable().getNumberOfLayers(),o=r.getChildren(),i=0;i<a;i++)for(var l=0;l<o.length;l++){var u=o[l],s=r.getRenderable().getRenderers()[l];if(s.getDraw()&&s.getLayer()===i){if(t.opaqueActorCount=0,t.translucentActorCount=0,t.volumeCount=0,t.overlayActorCount=0,e.setCurrentOperation("queryPass"),u.traverse(e),(t.opaqueActorCount>0||t.translucentActorCount>0)&&t.volumeCount>0||t.depthRequested){var c=r.getFramebufferSize();null===t.framebuffer&&(t.framebuffer=Tv.newInstance()),t.framebuffer.setOpenGLRenderWindow(r),t.framebuffer.saveCurrentBindingsAndBuffers();var f=t.framebuffer.getSize();null!==f&&f[0]===c[0]&&f[1]===c[1]||(t.framebuffer.create(c[0],c[1]),t.framebuffer.populateFramebuffer()),t.framebuffer.bind(),e.setCurrentOperation("zBufferPass"),u.traverse(e),t.framebuffer.restorePreviousBindingsAndBuffers(),t.depthRequested=!1}e.setCurrentOperation("cameraPass"),u.traverse(e),t.opaqueActorCount>0&&(e.setCurrentOperation("opaquePass"),u.traverse(e)),t.translucentActorCount>0&&(t.translucentPass||(t.translucentPass=Rv.newInstance()),t.translucentPass.traverse(r,u,e)),t.volumeCount>0&&(e.setCurrentOperation("volumePass"),u.traverse(e)),t.overlayActorCount>0&&(e.setCurrentOperation("overlayPass"),u.traverse(e))}}}},e.getZBufferTexture=function(){return t.framebuffer?t.framebuffer.getColorTexture():null},e.requestDepth=function(){t.depthRequested=!0},e.incrementOpaqueActorCount=function(){return t.opaqueActorCount++},e.incrementTranslucentActorCount=function(){return t.translucentActorCount++},e.incrementVolumeCount=function(){return t.volumeCount++},e.incrementOverlayActorCount=function(){return t.overlayActorCount++}}(e,t)}var kv={newInstance:er.newInstance(Dv,"vtkForwardPass"),extend:Dv};var _v={fieldAssociation:nu.FieldAssociations.FIELD_ASSOCIATION_CELLS,captureZValues:!1};function Lv(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,_v,r),er.obj(e,t),er.setGet(e,t,["fieldAssociation","captureZValues"]),function(e,t){t.classHierarchy.push("vtkHardwareSelector"),e.getSourceDataAsync=function(){var e=mv(hv().mark((function e(t,r,n,a,o){return hv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,r,n,a,o){return e.apply(this,arguments)}}(),e.selectAsync=function(){var t=mv(hv().mark((function t(r,n,a,o,i){var l;return hv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getSourceDataAsync(r,n,a,o,i);case 2:if(!(l=t.sent)){t.next=5;break}return t.abrupt("return",l.generateSelection(n,a,o,i));case 5:return t.abrupt("return",[]);case 6:case"end":return t.stop()}}),t)})));return function(e,r,n,a,o){return t.apply(this,arguments)}}()}(e,t)}var Bv={newInstance:er.newInstance(Lv,"vtkHardwareSelector"),extend:Lv},Vv={SelectionContent:{GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},SelectionField:{CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5}};function Nv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Fv={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function Uv(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Fv,r),er.obj(e,t),t.properties={},er.setGet(e,t,["contentType","fieldType","properties","selectionList"]),function(e,t){t.classHierarchy.push("vtkSelectionNode"),e.getBounds=function(){return t.points.getBounds()}}(e,t)}var Gv=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nv(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({newInstance:er.newInstance(Uv,"vtkSelectionNode"),extend:Uv},Vv);function jv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var zv=Wu.PassTypes,Wv=Gv.SelectionContent,Hv=Gv.SelectionField,Kv=nu.FieldAssociations,Xv=er.vtkErrorMacro,qv=1;function Yv(e){return"".concat(e.propID," ").concat(e.compositeID)}function Qv(e,t,r,n){return r?r[4*(t*(n[2]-n[0]+1)+e)+3]:0}function $v(e,t,r,n){if(!r)return 0;var a=4*(t*(n[2]-n[0]+1)+e),o=r[a],i=r[a+1];return 256*(256*r[a+2]+i)+o}function Zv(e,t){var r=t;return r<<=24,r|=e}function Jv(e,t,r,n){var a=r<0?0:r;if(0===a){if(n[0]=t[0],n[1]=t[1],t[0]<e.area[0]||t[0]>e.area[2]||t[1]<e.area[1]||t[1]>e.area[3])return null;var o=[t[0]-e.area[0],t[1]-e.area[1]],i=$v(o[0],o[1],e.pixBuffer[zv.ACTOR_PASS],e.area);if(i<=0||i-qv>=e.props.length)return null;var l={valid:!0};l.propID=i-qv,l.prop=e.props[l.propID];var u=$v(o[0],o[1],e.pixBuffer[zv.COMPOSITE_INDEX_PASS],e.area);if((u<0||u>16777215)&&(u=0),l.compositeID=u-qv,e.captureZValues){var s=4*(o[1]*(e.area[2]-e.area[0]+1)+o[0]);l.zValue=(256*e.zBuffer[s]+e.zBuffer[s+1])/65535,l.displayPosition=t}if(e.pixBuffer[zv.ID_LOW24]&&0===Qv(o[0],o[1],e.pixBuffer[zv.ID_LOW24],e.area))return l;var c=$v(o[0],o[1],e.pixBuffer[zv.ID_LOW24],e.area),f=$v(o[0],o[1],e.pixBuffer[zv.ID_HIGH24],e.area);return l.attributeID=Zv(c,f),l}var d=[t[0],t[1]],p=[0,0],g=Jv(e,t,0,n);if(g&&g.valid)return g;for(var m=1;m<a;++m){for(var v=d[1]>m?d[1]-m:0;v<=d[1]+m;++v){if(p[1]=v,d[0]>=m&&(p[0]=d[0]-m,(g=Jv(e,p,0,n))&&g.valid))return g;if(p[0]=d[0]+m,(g=Jv(e,p,0,n))&&g.valid)return g}for(var h=d[0]>=m?d[0]-(m-1):0;h<=d[0]+(m-1);++h){if(p[0]=h,d[1]>=m&&(p[1]=d[1]-m,(g=Jv(e,p,0,n))&&g.valid))return g;if(p[1]=d[1]+m,(g=Jv(e,p,0,n))&&g.valid)return g}}return n[0]=t[0],n[1]=t[1],null}function eh(e,t,r,n,a){var o=[],i=0;return t.forEach((function(t,l){var u=Gv.newInstance();switch(u.setContentType(Wv.INDICES),e){case Kv.FIELD_ASSOCIATION_CELLS:u.setFieldType(Hv.CELL);break;case Kv.FIELD_ASSOCIATION_POINTS:u.setFieldType(Hv.POINT);break;default:Xv("Unknown field association")}u.getProperties().propID=t.info.propID,u.getProperties().prop=t.info.prop,u.getProperties().compositeID=t.info.compositeID,u.getProperties().attributeID=t.info.attributeID,u.getProperties().pixelCount=t.pixelCount,r&&(u.getProperties().displayPosition=[t.info.displayPosition[0],t.info.displayPosition[1],t.info.zValue],u.getProperties().worldPosition=a.displayToWorld(t.info.displayPosition[0],t.info.displayPosition[1],t.info.zValue,n)),u.setSelectionList(t.attributeIDs),o[i]=u,i++})),o}function th(e,t,r,n,a){for(var o=Math.floor(t),i=Math.floor(r),l=Math.floor(n),u=Math.floor(a),s=new Map,c=[0,0],f=i;f<=u;f++)for(var d=o;d<=l;d++){var p=Jv(e,[d,f],0,c);if(p&&p.valid){var g=Yv(p);if(s.has(g)){var m=s.get(g);m.pixelCount++,e.captureZValues&&p.zValue<m.info.zValue&&(m.info=p),-1===m.attributeIDs.indexOf(p.attributeID)&&m.attributeIDs.push(p.attributeID)}else s.set(g,{info:p,pixelCount:1,attributeIDs:[p.attributeID]})}}return eh(e.fieldAssociation,s,e.captureZValues,e.renderer,e.openGLRenderWindow)}var rh={area:void 0,currentPass:-1,propColorValue:null,props:null,maximumPointId:0,maximumCellId:0,idOffset:1};function nh(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rh,r),Bv.extend(e,t,r),t.propColorValue=[0,0,0],t.props=[],t.area||(t.area=[0,0,0,0]),er.setGetArray(e,t,["area"],4),er.setGet(e,t,["_renderer","currentPass","_openGLRenderWindow","maximumPointId","maximumCellId"]),er.setGetArray(e,t,["propColorValue"],3),er.moveToProtected(e,t,["renderer","openGLRenderWindow"]),er.event(e,t,"event"),function(e,t){t.classHierarchy.push("vtkOpenGLHardwareSelector"),e.releasePixBuffers=function(){t.rawPixBuffer=[],t.pixBuffer=[],t.zBuffer=null},e.beginSelection=function(){t._openGLRenderer=t._openGLRenderWindow.getViewNodeFor(t._renderer),t.maxAttributeId=0;var r=t._openGLRenderWindow.getSize();if(t.framebuffer){t.framebuffer.setOpenGLRenderWindow(t._openGLRenderWindow),t.framebuffer.saveCurrentBindingsAndBuffers();var n=t.framebuffer.getSize();n[0]!==r[0]||n[1]!==r[1]?(t.framebuffer.create(r[0],r[1]),t.framebuffer.populateFramebuffer()):t.framebuffer.bind()}else t.framebuffer=Tv.newInstance(),t.framebuffer.setOpenGLRenderWindow(t._openGLRenderWindow),t.framebuffer.saveCurrentBindingsAndBuffers(),t.framebuffer.create(r[0],r[1]),t.framebuffer.populateFramebuffer();if(t._openGLRenderer.clear(),t._openGLRenderer.setSelector(e),t.hitProps={},t.propPixels={},t.props=[],e.releasePixBuffers(),t.fieldAssociation===Kv.FIELD_ASSOCIATION_POINTS){var a=t._openGLRenderWindow.getContext(),o=a.isEnabled(a.BLEND);a.disable(a.BLEND),t._openGLRenderWindow.traverseAllPasses(),o&&a.enable(a.BLEND)}},e.endSelection=function(){t.hitProps={},t._openGLRenderer.setSelector(null),t.framebuffer.restorePreviousBindingsAndBuffers()},e.preCapturePass=function(){var e=t._openGLRenderWindow.getContext();t.originalBlending=e.isEnabled(e.BLEND),e.disable(e.BLEND)},e.postCapturePass=function(){var e=t._openGLRenderWindow.getContext();t.originalBlending&&e.enable(e.BLEND)},e.select=function(){var r=null;return e.captureBuffers()&&(r=e.generateSelection(t.area[0],t.area[1],t.area[2],t.area[3]),e.releasePixBuffers()),r},e.getSourceDataAsync=function(){var r=mv(hv().mark((function r(n,a,o,i,l){var u,s;return hv().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t._renderer=n,void 0===a?(u=t._openGLRenderWindow.getSize(),e.setArea(0,0,u[0]-1,u[1]-1)):e.setArea(a,o,i,l),e.captureBuffers()){r.next=4;break}return r.abrupt("return",!1);case 4:return(s={area:$e(t.area),pixBuffer:$e(t.pixBuffer),captureZValues:t.captureZValues,zBuffer:t.zBuffer,props:$e(t.props),fieldAssociation:t.fieldAssociation,renderer:n,openGLRenderWindow:t._openGLRenderWindow}).generateSelection=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return th.apply(void 0,[s].concat(t))},r.abrupt("return",s);case 7:case"end":return r.stop()}}),r)})));return function(e,t,n,a,o){return r.apply(this,arguments)}}(),e.captureBuffers=function(){if(!t._renderer||!t._openGLRenderWindow)return Xv("Renderer and view must be set before calling Select."),!1;t._openGLRenderer=t._openGLRenderWindow.getViewNodeFor(t._renderer),t._openGLRenderWindow.getRenderable().preRender(),e.invokeEvent({type:"StartEvent"}),t.originalBackground=t._renderer.getBackgroundByReference(),t._renderer.setBackground(0,0,0,0);var r=t._openGLRenderWindow.getRenderPasses();for(e.beginSelection(),t.currentPass=zv.MIN_KNOWN_PASS;t.currentPass<=zv.MAX_KNOWN_PASS;t.currentPass++)e.passRequired(t.currentPass)&&(e.preCapturePass(t.currentPass),t.captureZValues&&t.currentPass===zv.ACTOR_PASS&&"function"===typeof r[0].requestDepth&&"function"===typeof r[0].getFramebuffer?(r[0].requestDepth(),t._openGLRenderWindow.traverseAllPasses()):t._openGLRenderWindow.traverseAllPasses(),e.postCapturePass(t.currentPass),e.savePixelBuffer(t.currentPass),e.processPixelBuffers());return e.endSelection(),t._renderer.setBackground(t.originalBackground),e.invokeEvent({type:"EndEvent"}),!0},e.processPixelBuffers=function(){t.props.forEach((function(r,n){e.isPropHit(n)&&r.processSelectorPixelBuffers(e,t.propPixels[n])}))},e.passRequired=function(e){if(e===zv.ID_HIGH24){if(t.fieldAssociation===Kv.FIELD_ASSOCIATION_POINTS)return t.maximumPointId>16777215;if(t.fieldAssociation===Kv.FIELD_ASSOCIATION_CELLS)return t.maximumCellId>16777215}return!0},e.savePixelBuffer=function(r){if(t.pixBuffer[r]=t._openGLRenderWindow.getPixelData(t.area[0],t.area[1],t.area[2],t.area[3]),!t.rawPixBuffer[r]){var n=(t.area[2]-t.area[0]+1)*(t.area[3]-t.area[1]+1)*4;t.rawPixBuffer[r]=new Uint8Array(n),t.rawPixBuffer[r].set(t.pixBuffer[r])}if(r===zv.ACTOR_PASS){if(t.captureZValues){var a=t._openGLRenderWindow.getRenderPasses();if("function"===typeof a[0].requestDepth&&"function"===typeof a[0].getFramebuffer){var o=a[0].getFramebuffer();o.saveCurrentBindingsAndBuffers(),o.bind(),t.zBuffer=t._openGLRenderWindow.getPixelData(t.area[0],t.area[1],t.area[2],t.area[3]),o.restorePreviousBindingsAndBuffers()}}e.buildPropHitList(t.rawPixBuffer[r])}},e.buildPropHitList=function(e){for(var r=0,n=0;n<=t.area[3]-t.area[1];n++)for(var a=0;a<=t.area[2]-t.area[0];a++){var o=$v(a,n,e,t.area);o>0&&(--o in t.hitProps||(t.hitProps[o]=!0,t.propPixels[o]=[]),t.propPixels[o].push(4*r)),++r}},e.renderProp=function(r){t.currentPass===zv.ACTOR_PASS&&(e.setPropColorValueFromInt(t.props.length+qv),t.props.push(r))},e.renderCompositeIndex=function(r){t.currentPass===zv.COMPOSITE_INDEX_PASS&&e.setPropColorValueFromInt(r+qv)},e.renderAttributeId=function(e){e<0||(t.maxAttributeId=e>t.maxAttributeId?e:t.maxAttributeId)},e.passTypeToString=function(e){return er.enumToString(zv,e)},e.isPropHit=function(e){return Boolean(t.hitProps[e])},e.setPropColorValueFromInt=function(e){t.propColorValue[0]=e%256/255,t.propColorValue[1]=Math.floor(e/256)%256/255,t.propColorValue[2]=Math.floor(e/65536)%256/255},e.getPixelInformation=function(r,n,a){var o=n<0?0:n;if(0===o){if(a[0]=r[0],a[1]=r[1],r[0]<t.area[0]||r[0]>t.area[2]||r[1]<t.area[1]||r[1]>t.area[3])return null;var i=[r[0]-t.area[0],r[1]-t.area[1]],l=$v(i[0],i[1],t.pixBuffer[zv.ACTOR_PASS],t.area);if(l<=0||l-qv>=t.props.length)return null;var u={valid:!0};u.propID=l-qv,u.prop=t.props[u.propID];var s=$v(i[0],i[1],t.pixBuffer[zv.COMPOSITE_INDEX_PASS],t.area);if((s<0||s>16777215)&&(s=0),u.compositeID=s-qv,t.captureZValues){var c=4*(i[1]*(t.area[2]-t.area[0]+1)+i[0]);u.zValue=(256*t.zBuffer[c]+t.zBuffer[c+1])/65535,u.displayPosition=r}if(t.pixBuffer[zv.ID_LOW24]&&0===Qv(i[0],i[1],t.pixBuffer[zv.ID_LOW24],t.area))return u;var f=$v(i[0],i[1],t.pixBuffer[zv.ID_LOW24],t.area),d=$v(i[0],i[1],t.pixBuffer[zv.ID_HIGH24],t.area);return u.attributeID=Zv(f,d),u}var p=[r[0],r[1]],g=[0,0],m=e.getPixelInformation(r,0,a);if(m&&m.valid)return m;for(var v=1;v<o;++v){for(var h=p[1]>v?p[1]-v:0;h<=p[1]+v;++h){if(g[1]=h,p[0]>=v&&(g[0]=p[0]-v,(m=e.getPixelInformation(g,0,a))&&m.valid))return m;if(g[0]=p[0]+v,(m=e.getPixelInformation(g,0,a))&&m.valid)return m}for(var y=p[0]>=v?p[0]-(v-1):0;y<=p[0]+(v-1);++y){if(g[0]=y,p[1]>=v&&(g[1]=p[1]-v,(m=e.getPixelInformation(g,0,a))&&m.valid))return m;if(g[1]=p[1]+v,(m=e.getPixelInformation(g,0,a))&&m.valid)return m}}return a[0]=r[0],a[1]=r[1],null},e.generateSelection=function(r,n,a,o){for(var i=Math.floor(r),l=Math.floor(n),u=Math.floor(a),s=Math.floor(o),c=new Map,f=[0,0],d=l;d<=s;d++)for(var p=i;p<=u;p++){var g=[p,d],m=e.getPixelInformation(g,0,f);if(m&&m.valid){var v=Yv(m);if(c.has(v)){var h=c.get(v);h.pixelCount++,t.captureZValues&&m.zValue<h.info.zValue&&(h.info=m),-1===h.attributeIDs.indexOf(m.attributeID)&&h.attributeIDs.push(m.attributeID)}else c.set(v,{info:m,pixelCount:1,attributeIDs:[m.attributeID]})}}return eh(t.fieldAssociation,c,t.captureZValues,t._renderer,t._openGLRenderWindow)},e.getRawPixelBuffer=function(e){return t.rawPixBuffer[e]},e.getPixelBuffer=function(e){return t.pixBuffer[e]},e.attach=function(e,r){t._openGLRenderWindow=e,t._renderer=r};var r=e.setArea;e.setArea=function(){return!!r.apply(void 0,arguments)&&(t.area[0]=Math.floor(t.area[0]),t.area[1]=Math.floor(t.area[1]),t.area[2]=Math.floor(t.area[2]),t.area[3]=Math.floor(t.area[3]),!0)}}(e,t)}var ah=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jv(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({newInstance:er.newInstance(nh,"vtkOpenGLHardwareSelector"),extend:nh},Wu),oh=r(420),ih=r.n(oh),lh=["lastShaderBound","context","_openGLRenderWindow"];var uh={lastShaderBound:null,shaderPrograms:null,context:null};function sh(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,uh,r),t.shaderPrograms={},er.obj(e,t),er.setGet(e,t,lh),er.moveToProtected(e,t,["openGLRenderWindow"]),function(e,t){t.classHierarchy.push("vtkShaderCache"),e.replaceShaderValues=function(e,r,n){var a=r;n.length>0&&(a=Yc.substitute(a,"VSOut","GSOut").result);var o=t._openGLRenderWindow.getWebgl2(),i="\n",l="#version 100\n";o?l="#version 300 es\n#define attribute in\n#define textureCube texture\n#define texture2D texture\n#define textureCubeLod textureLod\n#define texture2DLod textureLod\n":(t.context.getExtension("OES_standard_derivatives"),t.context.getExtension("EXT_frag_depth")&&(i="#extension GL_EXT_frag_depth : enable\n"),t.context.getExtension("EXT_shader_texture_lod")&&(i+="#extension GL_EXT_shader_texture_lod : enable\n#define textureCubeLod textureCubeLodEXT\n#define texture2DLod texture2DLodEXT")),a=Yc.substitute(a,"//VTK::System::Dec",["".concat(l,"\n"),o?"":"#extension GL_OES_standard_derivatives : enable\n",i,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;var u=Yc.substitute(e,"//VTK::System::Dec",["".concat(l,"\n"),"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;if(o){u=Yc.substitute(u,"varying","out").result,a=Yc.substitute(a,"varying","in").result;for(var s="",c=0;a.includes("gl_FragData[".concat(c,"]"));)a=Yc.substitute(a,"gl_FragData\\[".concat(c,"\\]"),"fragOutput".concat(c)).result,s+="layout(location = ".concat(c,") out vec4 fragOutput").concat(c,";\n"),c++;a=Yc.substitute(a,"//VTK::Output::Dec",s).result}return{VSSource:u,FSSource:a,GSSource:Yc.substitute(n,"//VTK::System::Dec",l).result}},e.readyShaderProgramArray=function(t,r,n){var a=e.replaceShaderValues(t,r,n),o=e.getShaderProgram(a.VSSource,a.FSSource,a.GSSource);return e.readyShaderProgram(o)},e.readyShaderProgram=function(t){return t&&(t.getCompiled()||t.compileShader())&&e.bindShader(t)?t:null},e.getShaderProgram=function(e,r,n){var a="".concat(e).concat(r).concat(n),o=ih().hash(a);if(!(o in t.shaderPrograms)){var i=Yc.newInstance();return i.setContext(t.context),i.getVertexShader().setSource(e),i.getFragmentShader().setSource(r),n&&i.getGeometryShader().setSource(n),i.setMd5Hash(o),t.shaderPrograms[o]=i,i}return t.shaderPrograms[o]},e.releaseGraphicsResources=function(r){e.releaseCurrentShader(),Object.keys(t.shaderPrograms).map((function(e){return t.shaderPrograms[e]})).forEach((function(e){return e.releaseGraphicsResources(r)}))},e.releaseGraphicsResources=function(){t.astShaderBound&&(t.lastShaderBound.release(),t.lastShaderBound=null)},e.bindShader=function(e){return t.lastShaderBound===e||(t.lastShaderBound&&t.lastShaderBound.release(),e.bind(),t.lastShaderBound=e),1}}(e,t)}var ch={newInstance:er.newInstance(sh,"vtkShaderCache"),extend:sh},fh=er.vtkErrorMacro;var dh={context:null,numberOfTextureUnits:0,textureUnits:0};function ph(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,dh,r),er.obj(e,t),t.textureUnits=[],er.get(e,t,["numberOfTextureUnits"]),er.setGet(e,t,["context"]),function(e,t){t.classHierarchy.push("vtkOpenGLTextureUnitManager"),e.deleteTable=function(){for(var e=0;e<t.numberOfTextureUnits;++e)!0===t.textureUnits[e]&&fh("some texture units  were not properly released");t.textureUnits=[],t.numberOfTextureUnits=0},e.setContext=function(r){if(t.context!==r){if(0!==t.context&&e.deleteTable(),t.context=r,t.context){t.numberOfTextureUnits=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS);for(var n=0;n<t.numberOfTextureUnits;++n)t.textureUnits[n]=!1}e.modified()}},e.allocate=function(){for(var r=0;r<t.numberOfTextureUnits;r++)if(!e.isAllocated(r))return t.textureUnits[r]=!0,r;return-1},e.allocateUnit=function(r){return e.isAllocated(r)?-1:(t.textureUnits[r]=!0,r)},e.isAllocated=function(e){return t.textureUnits[e]},e.free=function(e){t.textureUnits[e]=!1}}(e,t)}var gh={newInstance:er.newInstance(ph,"vtkOpenGLTextureUnitManager"),extend:ph};var mh={size:void 0,selector:void 0};function vh(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,mh,r),t.size||(t.size=[300,300]),er.getArray(e,t,["size"],2),er.get(e,t,["selector"]),ar.extend(e,t,r),function(e,t){t.classHierarchy.push("vtkRenderWindowViewNode"),e.getViewNodeFactory=function(){return null},e.getAspectRatio=function(){return t.size[0]/t.size[1]},e.getAspectRatioForRenderer=function(e){var r=e.getViewportByReference();return t.size[0]*(r[2]-r[0])/((r[3]-r[1])*t.size[1])},e.isInViewport=function(t,r,n){var a=n.getViewportByReference(),o=e.getFramebufferSize();return a[0]*o[0]<=t&&a[2]*o[0]>=t&&a[1]*o[1]<=r&&a[3]*o[1]>=r},e.getViewportSize=function(t){var r=t.getViewportByReference(),n=e.getFramebufferSize();return[(r[2]-r[0])*n[0],(r[3]-r[1])*n[1]]},e.getViewportCenter=function(t){var r=e.getViewportSize(t);return[.5*r[0],.5*r[1]]},e.displayToNormalizedDisplay=function(t,r,n){var a=e.getFramebufferSize();return[t/a[0],r/a[1],n]},e.normalizedDisplayToDisplay=function(t,r,n){var a=e.getFramebufferSize();return[t*a[0],r*a[1],n]},e.worldToView=function(e,t,r,n){return n.worldToView(e,t,r)},e.viewToWorld=function(e,t,r,n){return n.viewToWorld(e,t,r)},e.worldToDisplay=function(t,r,n,a){var o=a.worldToView(t,r,n),i=e.getViewportSize(a),l=a.viewToProjection(o[0],o[1],o[2],i[0]/i[1]),u=a.projectionToNormalizedDisplay(l[0],l[1],l[2]);return e.normalizedDisplayToDisplay(u[0],u[1],u[2])},e.displayToWorld=function(t,r,n,a){var o=e.displayToNormalizedDisplay(t,r,n),i=a.normalizedDisplayToProjection(o[0],o[1],o[2]),l=e.getViewportSize(a),u=a.projectionToView(i[0],i[1],i[2],l[0]/l[1]);return a.viewToWorld(u[0],u[1],u[2])},e.normalizedDisplayToViewport=function(t,r,n,a){var o=a.getViewportByReference();o=e.normalizedDisplayToDisplay(o[0],o[1],0);var i=e.normalizedDisplayToDisplay(t,r,n);return[i[0]-o[0]-.5,i[1]-o[1]-.5,n]},e.viewportToNormalizedViewport=function(t,r,n,a){var o=e.getViewportSize(a);return o&&0!==o[0]&&0!==o[1]?[t/(o[0]-1),r/(o[1]-1),n]:[t,r,n]},e.normalizedViewportToViewport=function(t,r,n,a){var o=e.getViewportSize(a);return[t*(o[0]-1),r*(o[1]-1),n]},e.displayToLocalDisplay=function(t,r,n){return[t,e.getFramebufferSize()[1]-r-1,n]},e.viewportToNormalizedDisplay=function(t,r,n,a){var o=a.getViewportByReference(),i=t+(o=e.normalizedDisplayToDisplay(o[0],o[1],0))[0]+.5,l=r+o[1]+.5;return e.displayToNormalizedDisplay(i,l,n)},e.getComputedDevicePixelRatio=function(){return t.size[0]/e.getContainerSize()[0]},e.getContainerSize=function(){er.vtkErrorMacro("not implemented")},e.getPixelData=function(e,t,r,n){er.vtkErrorMacro("not implemented")},e.createSelector=function(){er.vtkErrorMacro("not implemented")}}(e,t)}var hh={newInstance:er.newInstance(vh,"vtkRenderWindowViewNode"),extend:vh},yh={HmdVR:0,MobileAR:1,LookingGlassVR:2,HmdAR:3},bh="__getUnderlyingContext";function Th(){var e=new Map,t={apply:function(t,r,n){return e.has(n[0])?e.get(n[0]):t.apply(r,n)}};var r=Object.create(null);return r.getParameter=function(e,r,n,a){return new Proxy(a.bind(e),t)},r.depthMask=function(t,r,n,a){return new Proxy(a.bind(t),(o=t.DEPTH_WRITEMASK,{apply:function(t,r,n){return e.set(o,n[0]),t.apply(r,n)}}));var o},{get:function(e,t,n){if(t===bh)return function(){return e};var a=Reflect.get(e,t,e);a instanceof Function&&(a=a.bind(e));var o=r[t];return o?o(e,t,n,a):a}}}var xh=er.vtkDebugMacro,Sh=er.vtkErrorMacro,wh=yh,Ch={position:"absolute",top:0,left:0,width:"100%",height:"100%"},Ph={rescaleFactor:.25,translateZ:-1.5};function Oh(e,t,r){var n=e.createFramebuffer(),a=e.createTexture();e.bindTexture(e.TEXTURE_2D,a),e.texImage2D(e.TEXTURE_2D,0,t,2,2,0,t,r,null),e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER);return e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),o===e.FRAMEBUFFER_COMPLETE}var Ah=0,Eh=[];function Ih(){Ah--,Eh.forEach((function(e){return e(Ah)}))}function Rh(e){e.preventDefault()}function Mh(e,t){t.classHierarchy.push("vtkOpenGLRenderWindow");var n=Th();e.getViewNodeFactory=function(){return t.myFactory},t.canvas.addEventListener("webglcontextlost",Rh,!1),t.canvas.addEventListener("webglcontextrestored",e.restoreContext,!1);var a,o=[0,0];e.onModified((function(){t.renderable&&(t.size[0]===o[0]&&t.size[1]===o[1]||(o[0]=t.size[0],o[1]=t.size[1],t.canvas.setAttribute("width",t.size[0]),t.canvas.setAttribute("height",t.size[1]))),t.viewStream&&t.viewStream.setSize(t.size[0],t.size[1]),t.canvas.style.display=t.useOffScreen?"none":"block",t.el&&(t.el.style.cursor=t.cursorVisibility?t.cursor:"none"),t.containerSize=null})),e.buildPass=function(r){if(r){if(!t.renderable)return;e.prepareNodes(),e.addMissingNodes(t.renderable.getRenderersByReference()),e.removeUnusedNodes(),e.initialize(),t.children.forEach((function(t){t.setOpenGLRenderWindow(e)}))}},e.initialize=function(){if(!t.initialized){t.context=e.get3DContext(),t.textureUnitManager=gh.newInstance(),t.textureUnitManager.setContext(t.context),t.shaderCache.setContext(t.context);var r=t.context;r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA),r.depthFunc(r.LEQUAL),r.enable(r.BLEND),t.initialized=!0}},e.makeCurrent=function(){t.context.makeCurrent()},e.setContainer=function(r){t.el&&t.el!==r&&(t.canvas.parentNode!==t.el&&Sh("Error: canvas parent node does not match container"),t.el.removeChild(t.canvas),t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)),t.el!==r&&(t.el=r,t.el&&(t.el.appendChild(t.canvas),t.useBackgroundImage&&t.el.appendChild(t.bgImage)),e.modified())},e.getContainer=function(){return t.el},e.getContainerSize=function(){if(!t.containerSize&&t.el){var e=t.el.getBoundingClientRect(),r=e.width,n=e.height;t.containerSize=[r,n]}return t.containerSize||t.size},e.getFramebufferSize=function(){return t.activeFramebuffer?t.activeFramebuffer.getSize():t.size},e.getPixelData=function(e,r,n,a){var o=new Uint8Array((n-e+1)*(a-r+1)*4);return t.context.readPixels(e,r,n-e+1,a-r+1,t.context.RGBA,t.context.UNSIGNED_BYTE,o),o},e.get3DContext=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0,powerPreference:"high-performance"},r=null,a="undefined"!==typeof WebGL2RenderingContext;return t.webgl2=!1,t.defaultToWebgl2&&a&&(r=t.canvas.getContext("webgl2",e))&&(t.webgl2=!0,xh("using webgl2")),r||(xh("using webgl1"),r=t.canvas.getContext("webgl",e)||t.canvas.getContext("experimental-webgl",e)),new Proxy(r,n)},e.startXR=function(r){if(void 0===navigator.xr)throw new Error("WebXR is not available");t.xrSessionType=void 0!==r?r:wh.HmdVR;var n=[wh.HmdAR,wh.MobileAR].includes(t.xrSessionType),a=n?"immersive-ar":"immersive-vr";if(!navigator.xr.isSessionSupported(a))throw n?new Error("Device does not support AR session"):new Error("VR display is not available");if(null!==t.xrSession)throw new Error("XR Session already exists!");navigator.xr.requestSession(a).then(e.enterXR,(function(){throw new Error("Failed to create XR session!")}))},e.enterXR=function(){var n=mv(hv().mark((function n(a){var o,i,l;return hv().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.xrSession=a,t.oldCanvasSize=t.size.slice(),null===t.xrSession){n.next=17;break}return o=e.get3DContext(),n.next=6,o.makeXRCompatible();case 6:i=new r.g.XRWebGLLayer(t.xrSession,o[bh]()),e.setSize(i.framebufferWidth,i.framebufferHeight),t.xrSession.updateRenderState({baseLayer:i}),t.xrSession.requestReferenceSpace("local").then((function(e){t.xrReferenceSpace=e})),[wh.HmdAR,wh.MobileAR].includes(t.xrSessionType)&&(l=t.renderable.getRenderers()[0],t.preXrSessionBackground=l.getBackground(),l.setBackground([0,0,0,0])),e.resetXRScene(),t.renderable.getInteractor().switchToXRAnimation(),t.xrSceneFrame=t.xrSession.requestAnimationFrame(e.xrRender),n.next=18;break;case 17:throw new Error("Failed to enter XR with a null xrSession.");case 18:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e.resetXRScene=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ph.rescaleFactor,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ph.translateZ,n=t.renderable.getRenderers()[0];n.resetCamera();var a=n.getActiveCamera(),o=a.getPhysicalScale(),i=a.getPhysicalTranslation(),l=r*o;o/=e,i[2]+=l,a.setPhysicalScale(o),a.setPhysicalTranslation(i),a.setClippingRange(.1*o,100*o)},e.stopXR=mv(hv().mark((function r(){var n,a;return hv().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==navigator.xr){r.next=2;break}return r.abrupt("return");case 2:if(null===t.xrSession){r.next=10;break}return t.xrSession.cancelAnimationFrame(t.xrSceneFrame),t.renderable.getInteractor().returnFromXRAnimation(),(n=e.get3DContext()).bindFramebuffer(n.FRAMEBUFFER,null),r.next=9,t.xrSession.end().catch((function(e){if(!(e instanceof DOMException))throw e}));case 9:t.xrSession=null;case 10:void 0!==t.oldCanvasSize&&e.setSize.apply(e,$e(t.oldCanvasSize)),a=t.renderable.getRenderers()[0],null!=t.preXrSessionBackground&&(a.setBackground(t.preXrSessionBackground),t.preXrSessionBackground=null),a.getActiveCamera().setProjectionMatrix(null),a.resetCamera(),a.setViewport(0,0,1,1),e.traverseAllPasses();case 17:case"end":return r.stop()}}),r)}))),e.xrRender=function(){var r=mv(hv().mark((function r(n,a){var o,i,l,u,s,c;return hv().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=a.session,i=[wh.HmdVR,wh.HmdAR].includes(t.xrSessionType),t.renderable.getInteractor().updateXRGamepads(o,a,t.xrReferenceSpace),t.xrSceneFrame=t.xrSession.requestAnimationFrame(e.xrRender),(l=a.getViewerPose(t.xrReferenceSpace))&&(u=e.get3DContext(),t.xrSessionType===wh.MobileAR&&void 0!==t.oldCanvasSize&&(u.canvas.width=t.oldCanvasSize[0],u.canvas.height=t.oldCanvasSize[1]),s=o.renderState.baseLayer,u.bindFramebuffer(u.FRAMEBUFFER,s.framebuffer),u.clear(u.COLOR_BUFFER_BIT),u.clear(u.DEPTH_BUFFER_BIT),e.setSize(s.framebufferWidth,s.framebufferHeight),c=t.renderable.getRenderers()[0],l.views.forEach((function(r,n){var a=s.getViewport(r);if(i)if("left"===r.eye)c.setViewport(0,0,.5,1);else{if("right"!==r.eye)return;c.setViewport(.5,0,1,1)}else if(t.xrSessionType===wh.LookingGlassVR){var o=a.x/s.framebufferWidth,l=a.y/s.framebufferHeight,u=(a.x+a.width)/s.framebufferWidth,f=(a.y+a.height)/s.framebufferHeight;c.setViewport(o,l,u,f)}else c.setViewport(0,0,1,1);c.getActiveCamera().computeViewParametersFromPhysicalMatrix(r.transform.inverse.matrix),c.getActiveCamera().setProjectionMatrix(r.projectionMatrix),e.traverseAllPasses()})),u.scissor(0,0,s.framebufferWidth,s.framebufferHeight),u.disable(u.SCISSOR_TEST));case 6:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),e.restoreContext=function(){var t=wv.newInstance();t.setCurrentOperation("Release"),t.traverse(e,null)},e.activateTexture=function(r){var n=t._textureResourceIds.get(r);if(void 0===n){var a=e.getTextureUnitManager().allocate();a<0?Sh("Hardware does not support the number of textures defined."):(t._textureResourceIds.set(r,a),t.context.activeTexture(t.context.TEXTURE0+a))}else t.context.activeTexture(t.context.TEXTURE0+n)},e.deactivateTexture=function(r){var n=t._textureResourceIds.get(r);void 0!==n&&(e.getTextureUnitManager().free(n),t._textureResourceIds.delete(r))},e.getTextureUnitForTexture=function(e){var r=t._textureResourceIds.get(e);return void 0!==r?r:-1},e.getDefaultTextureInternalFormat=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t.webgl2)switch(e){case bl.UNSIGNED_CHAR:switch(r){case 1:return t.context.R8;case 2:return t.context.RG8;case 3:return t.context.RGB8;default:return t.context.RGBA8}case n&&!a&&bl.UNSIGNED_SHORT:switch(r){case 1:return n.R16_EXT;case 2:return n.RG16_EXT;case 3:return n.RGB16_EXT;default:return n.RGBA16_EXT}case n&&!a&&bl.SHORT:switch(r){case 1:return n.R16_SNORM_EXT;case 2:return n.RG16_SNORM_EXT;case 3:return n.RGB16_SNORM_EXT;default:return n.RGBA16_SNORM_EXT}case bl.FLOAT:default:switch(r){case 1:return t.context.R16F;case 2:return t.context.RG16F;case 3:return t.context.RGB16F;default:return t.context.RGBA16F}}switch(r){case 1:return t.context.LUMINANCE;case 2:return t.context.LUMINANCE_ALPHA;case 3:return t.context.RGB;default:return t.context.RGBA}},e.setBackgroundImage=function(e){t.bgImage.src=e.src},e.setUseBackgroundImage=function(e){t.useBackgroundImage=e,t.useBackgroundImage&&!t.el.contains(t.bgImage)?t.el.appendChild(t.bgImage):!t.useBackgroundImage&&t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)},e.captureNextImage=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.resetCamera,o=void 0!==a&&a,i=n.size,l=void 0===i?null:i,u=n.scale,s=void 0===u?1:u;if(t.deleted)return null;t.imageFormat=r;var c=t.notifyStartCaptureImage;return t.notifyStartCaptureImage=!0,t._screenshot={size:l||1!==s?l||t.size.map((function(e){return e*s})):null},new Promise((function(r,n){var a=e.onImageReady((function(n){if(null===t._screenshot.size)t.notifyStartCaptureImage=c,a.unsubscribe(),t._screenshot.placeHolder&&(t.size=t._screenshot.originalSize,e.modified(),t._screenshot.cameras&&t._screenshot.cameras.forEach((function(e){return(0,e.restoreParamsFn)(e.arg)})),e.traverseAllPasses(),t.el.removeChild(t._screenshot.placeHolder),t._screenshot.placeHolder.remove(),t._screenshot=null),r(n);else{var i=document.createElement("img");if(i.style=Ch,i.src=n,t._screenshot.placeHolder=t.el.appendChild(i),t.canvas.style.display="none",t._screenshot.originalSize=t.size,t.size=t._screenshot.size,t._screenshot.size=null,e.modified(),o){var l=!0!==o;t._screenshot.cameras=t.renderable.getRenderers().map((function(e){var t=e.getActiveCamera(),r=t.get("focalPoint","position","parallelScale");return{resetCameraArgs:l?{renderer:e}:void 0,resetCameraFn:l?o:e.resetCamera,restoreParamsFn:t.set,arg:JSON.parse(JSON.stringify(r))}})),t._screenshot.cameras.forEach((function(e){return(0,e.resetCameraFn)(e.resetCameraArgs)}))}e.traverseAllPasses()}}))}))},e.getHardwareMaximumLineWidth=function(){if(null!=a)return a;var t=e.get3DContext(),r=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE);return a=r[1],r[1]},e.getGLInformations=function(){for(var r=e.get3DContext(),n=r.getExtension("OES_texture_float"),a=r.getExtension("OES_texture_half_float"),o=r.getExtension("WEBGL_debug_renderer_info"),i=r.getExtension("WEBGL_draw_buffers"),l=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),u=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",r.getParameter(r.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",r.getParameter(r.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",r.getParameter(r.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",l&&r.getParameter(l.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",r.getParameter(r.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",r.getParameter(r.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",r.getParameter(r.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",r.getParameter(r.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",r.getParameter(r.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",r.getParameter(r.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",r.getParameter(r.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",r.getParameter(r.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",r.getParameter(r.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",r.getParameter(r.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",r.getParameter(r.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",r.getParameter(r.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",r.getParameter(r.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[n&&Oh(r,r.RGBA,r.UNSIGNED_BYTE)?"RGBA":"",n&&Oh(r,r.RGB,r.UNSIGNED_BYTE)?"RGB":"",n&&Oh(r,r.LUMINANCE,r.UNSIGNED_BYTE)?"LUMINANCE":"",n&&Oh(r,r.ALPHA,r.UNSIGNED_BYTE)?"ALPHA":"",n&&Oh(r,r.LUMINANCE_ALPHA,r.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[a&&Oh(r,r.RGBA,a.HALF_FLOAT_OES)?"RGBA":"",a&&Oh(r,r.RGB,a.HALF_FLOAT_OES)?"RGB":"",a&&Oh(r,r.LUMINANCE,a.HALF_FLOAT_OES)?"LUMINANCE":"",a&&Oh(r,r.ALPHA,a.HALF_FLOAT_OES)?"ALPHA":"",a&&Oh(r,r.LUMINANCE_ALPHA,a.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[n&&Oh(r,r.RGBA,r.FLOAT)?"RGBA":"",n&&Oh(r,r.RGB,r.FLOAT)?"RGB":"",n&&Oh(r,r.LUMINANCE,r.FLOAT)?"LUMINANCE":"",n&&Oh(r,r.ALPHA,r.FLOAT)?"ALPHA":"",n&&Oh(r,r.LUMINANCE_ALPHA,r.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",i?r.getParameter(i.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",[r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision," (-2<sup>",r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",[r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision," (-2<sup>",r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",[r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.LOW_FLOAT).precision," (-2<sup>",r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",[r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision," (-2<sup>",r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",[r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision," (-2<sup>",r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",[r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.LOW_FLOAT).precision," (-2<sup>",r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",[r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_INT).precision," (-2<sup>",r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_INT).rangeMin,"</sup> - 2<sup>",r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",[r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_INT).precision," (-2<sup>",r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",[r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.LOW_INT).precision," (-2<sup>",r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.LOW_INT).rangeMin,"</sup> - 2<sup>",r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.LOW_INT).rangeMax,"</sup>)"].join("")],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",[r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_INT).precision," (-2<sup>",r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_INT).rangeMin,"</sup> - 2<sup>",r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",[r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_INT).precision," (-2<sup>",r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",[r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.LOW_INT).precision," (-2<sup>",r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.LOW_INT).rangeMin,"</sup> - 2<sup>",r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.LOW_INT).rangeMax,"</sup>)"].join("")],["Supported Extensions","EXTENSIONS",r.getSupportedExtensions().join("<br/>\t\t\t\t\t    ")],["WebGL Renderer","RENDERER",r.getParameter(r.RENDERER)],["WebGL Vendor","VENDOR",r.getParameter(r.VENDOR)],["WebGL Version","VERSION",r.getParameter(r.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",r.getParameter(r.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",o&&r.getParameter(o.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",o&&r.getParameter(o.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",t.webgl2?2:1]],s={};u.length;){var c=qe(u.pop(),3),f=c[0],d=c[1],p=c[2];d&&(s[d]={label:f,value:p})}return s},e.traverseAllPasses=function(){if(t.renderPasses)for(var r=0;r<t.renderPasses.length;++r)t.renderPasses[r].traverse(e,null);t.notifyStartCaptureImage&&function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.imageFormat,n=document.createElement("canvas"),a=n.getContext("2d");n.width=t.canvas.width,n.height=t.canvas.height,a.drawImage(t.canvas,0,0);var o=t.canvas.getBoundingClientRect();t.renderable.getRenderers().forEach((function(e){e.getViewProps().forEach((function(e){if(e.getContainer)for(var t=e.getContainer().getElementsByTagName("canvas"),r=0;r<t.length;r++){var n=t[r],i=n.getBoundingClientRect(),l=i.x-o.x,u=i.y-o.y;a.drawImage(n,l,u)}}))}));var i=n.toDataURL(r);n.remove(),e.invokeImageReady(i)}()},e.disableCullFace=function(){t.cullFaceEnabled&&(t.context.disable(t.context.CULL_FACE),t.cullFaceEnabled=!1)},e.enableCullFace=function(){t.cullFaceEnabled||(t.context.enable(t.context.CULL_FACE),t.cullFaceEnabled=!0)},e.setViewStream=function(r){if(t.viewStream===r)return!1;(t.subscription&&(t.subscription.unsubscribe(),t.subscription=null),t.viewStream=r,t.viewStream)&&(t.renderable.getRenderers()[0].getBackgroundByReference()[3]=0,e.setUseBackgroundImage(!0),t.subscription=t.viewStream.onImageReady((function(t){return e.setBackgroundImage(t.image)})),t.viewStream.setSize(t.size[0],t.size[1]),t.viewStream.invalidateCache(),t.viewStream.render(),e.modified());return!0},e.createSelector=function(){var t=ah.newInstance();return t.setOpenGLRenderWindow(e),t},e.delete=er.chain((function(){t.canvas.removeEventListener("webglcontextlost",Rh),t.canvas.removeEventListener("webglcontextrestored",e.restoreContext)}),e.delete,e.setViewStream,Ih),e.setActiveFramebuffer=function(e){t.activeFramebuffer=e};var i=e.setSize;e.setSize=function(t,r){var n=i(t,r);return n&&e.invokeWindowResizeEvent({width:t,height:r}),n}}var Dh={cullFaceEnabled:!1,shaderCache:null,initialized:!1,context:null,canvas:null,cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,activeFramebuffer:null,xrSession:null,xrReferenceSpace:null,xrSupported:!0,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};function kh(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Dh,r),hh.extend(e,t,r),t.canvas=document.createElement("canvas"),t.canvas.style.width="100%",Ah++,Eh.forEach((function(e){return e(Ah)})),t.selector||(t.selector=ah.newInstance(),t.selector.setOpenGLRenderWindow(e)),t.bgImage=new Image,t.bgImage.style.position="absolute",t.bgImage.style.left="0",t.bgImage.style.top="0",t.bgImage.style.width="100%",t.bgImage.style.height="100%",t.bgImage.style.zIndex="-1",t._textureResourceIds=new Map,t.myFactory=dr.newInstance(),t.myFactory.registerOverride("vtkRenderWindow",_h),t.shaderCache=ch.newInstance(),t.shaderCache.setOpenGLRenderWindow(e),t.renderPasses[0]=kv.newInstance(),er.event(e,t,"imageReady"),er.get(e,t,["shaderCache","textureUnitManager","webgl2","vrDisplay","useBackgroundImage","xrSupported","activeFramebuffer"]),er.setGet(e,t,["initialized","context","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","useOffScreen"]),er.setGetArray(e,t,["size"],2),er.event(e,t,"windowResizeEvent"),Mh(e,t)}var _h=er.newInstance(kh,"vtkOpenGLRenderWindow");Sm("WebGL",_h);var Lh=["setBindGroup","setIndexBuffer","setVertexBuffer","draw","drawIndexed"];var Bh={description:null,handle:null,boundPipeline:null,pipelineHash:null,pipelineSettings:null,replaceShaderCodeFunction:null,depthTextureView:null,label:null};function Vh(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Bh,r),Vt(e,t),t.description={colorAttachments:[{view:void 0,loadOp:"load",storeOp:"store"}],depthStencilAttachment:{view:void 0,depthLoadOp:"clear",depthClearValue:0,depthStoreOp:"store"}},t.replaceShaderCodeFunction=function(e){var t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor");var r=t.getCode();r=jd.substitute(r,"//VTK::RenderEncoder::Impl",["output.outColor = computedColor;"]).result,t.setCode(r)},t.pipelineSettings={primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater-equal",format:"depth32float"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}},t.colorTextureViews=[],Ft(e,t,["boundPipeline","colorTextureViews"]),zt(e,t,["depthTextureView","description","handle","label","pipelineHash","pipelineSettings","replaceShaderCodeFunction"]),function(e,t){t.classHierarchy.push("vtkWebGPURenderEncoder"),e.begin=function(e){t.drawCallbacks=[],t.handle=e.beginRenderPass(t.description),t.label&&t.handle.pushDebugGroup(t.label)},e.end=function(){for(var r=0;r<t.drawCallbacks.length;r++){var n=t.drawCallbacks[r],a=n.pipeline;e.setPipeline(a);for(var o=0;o<n.callbacks.length;o++)n.callbacks[o](e)}t.label&&t.handle.popDebugGroup(),t.handle.end(),t.boundPipeline=null},e.setPipeline=function(e){if(t.boundPipeline!==e){t.handle.setPipeline(e.getHandle());var r=e.getPipelineDescription();if(t.colorTextureViews.length!==r.fragment.targets.length)console.log("mismatched attachment counts on pipeline ".concat(r.fragment.targets.length," while encoder has ").concat(t.colorTextureViews.length)),console.trace();else for(var n=0;n<t.colorTextureViews.length;n++){var a,o=null===(a=t.colorTextureViews[n].getTexture())||void 0===a?void 0:a.getFormat();o&&o!==r.fragment.targets[n].format&&(console.log("mismatched attachments for attachment ".concat(n," on pipeline ").concat(r.fragment.targets[n].format," while encoder has ").concat(o)),console.trace())}if(!t.depthTextureView!==!("depthStencil"in r))console.log("mismatched depth attachments"),console.trace();else if(t.depthTextureView){var i,l=null===(i=t.depthTextureView.getTexture())||void 0===i?void 0:i.getFormat();l&&l!==r.depthStencil.format&&(console.log("mismatched depth attachments on pipeline ".concat(r.depthStencil.format," while encoder has ").concat(l)),console.trace())}t.boundPipeline=e}},e.replaceShaderCode=function(e){t.replaceShaderCodeFunction(e)},e.setColorTextureView=function(e,r){t.colorTextureViews[e]!==r&&(t.colorTextureViews[e]=r)},e.activateBindGroup=function(e){var r=t.boundPipeline.getDevice(),n=t.boundPipeline.getBindGroupLayoutCount(e.getLabel());t.handle.setBindGroup(n,e.getBindGroup(r));var a=r.getBindGroupLayoutDescription(e.getBindGroupLayout(r)),o=r.getBindGroupLayoutDescription(t.boundPipeline.getBindGroupLayout(n));a!==o&&(console.log("renderEncoder ".concat(t.pipelineHash," mismatched bind group layouts bind group has\n").concat(a,"\n versus pipeline\n").concat(o,"\n")),console.trace())},e.attachTextureViews=function(){for(var e=0;e<t.colorTextureViews.length;e++)t.description.colorAttachments[e]?t.description.colorAttachments[e].view=t.colorTextureViews[e].getHandle():t.description.colorAttachments[e]={view:t.colorTextureViews[e].getHandle()};t.depthTextureView&&(t.description.depthStencilAttachment.view=t.depthTextureView.getHandle())},e.registerDrawCallback=function(e,r){for(var n=0;n<t.drawCallbacks.length;n++)if(t.drawCallbacks[n].pipeline===e)return void t.drawCallbacks[n].callbacks.push(r);t.drawCallbacks.push({pipeline:e,callbacks:[r]})};for(var r=function(r){e[Lh[r]]=function(){var e;return(e=t.handle)[Lh[r]].apply(e,arguments)}},n=0;n<Lh.length;n++)r(n)}(e,t)}var Nh={newInstance:Yt(Vh,"vtkWebGPURenderEncoder"),extend:Vh};var Fh={renderEncoder:null,colorTexture:null,depthTexture:null};function Uh(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Fh,r),wv.extend(e,t,r),er.get(e,t,["colorTexture","depthTexture"]),function(e,t){t.classHierarchy.push("vtkWebGPUOpaquePass"),e.traverse=function(r,n){if(!t.deleted){t._currentParent=n;var a=n.getDevice();if(t.renderEncoder)t.colorTexture.resize(n.getCanvas().width,n.getCanvas().height),t.depthTexture.resize(n.getCanvas().width,n.getCanvas().height);else{e.createRenderEncoder(),t.colorTexture=Zg.newInstance({label:"opaquePassColor"}),t.colorTexture.create(a,{width:n.getCanvas().width,height:n.getCanvas().height,format:"rgba16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC});var o=t.colorTexture.createView("opaquePassColorTexture");t.renderEncoder.setColorTextureView(0,o),t.depthFormat="depth32float",t.depthTexture=Zg.newInstance({label:"opaquePassDepth"}),t.depthTexture.create(a,{width:n.getCanvas().width,height:n.getCanvas().height,format:t.depthFormat,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC});var i=t.depthTexture.createView("opaquePassDepthTexture");t.renderEncoder.setDepthTextureView(i)}t.renderEncoder.attachTextureViews(),e.setCurrentOperation("opaquePass"),r.setRenderEncoder(t.renderEncoder),r.traverse(e)}},e.getColorTextureView=function(){return t.renderEncoder.getColorTextureViews()[0]},e.getDepthTextureView=function(){return t.renderEncoder.getDepthTextureView()},e.createRenderEncoder=function(){t.renderEncoder=Nh.newInstance({label:"OpaquePass"}),t.renderEncoder.setPipelineHash("op")}}(e,t)}var Gh={newInstance:er.newInstance(Uh,"vtkWebGPUOpaquePass"),extend:Uh},jh="\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var tcoord: vec2<i32> = vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y));\n  var reveal: f32 = textureLoad(oitpAccumTexture, tcoord, 0).r;\n  if (reveal == 1.0) { discard; }\n  var tcolor: vec4<f32> = textureLoad(oitpColorTexture, tcoord, 0);\n  var total: f32 = max(tcolor.a, 0.01);\n  var computedColor: vec4<f32> = vec4<f32>(tcolor.r/total, tcolor.g/total, tcolor.b/total, 1.0 - reveal);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n";var zh={colorTextureView:null,depthTextureView:null};function Wh(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zh,r),wv.extend(e,t,r),er.setGet(e,t,["colorTextureView","depthTextureView"]),function(e,t){t.classHierarchy.push("vtkWebGPUOrderIndependentTranslucentPass"),e.traverse=function(r,n){if(!t.deleted){t._currentParent=n;var a=n.getDevice();if(t.translucentRenderEncoder)t.translucentColorTexture.resizeToMatch(t.colorTextureView.getTexture()),t.translucentAccumulateTexture.resizeToMatch(t.colorTextureView.getTexture());else{e.createRenderEncoder(),e.createFinalEncoder(),t.translucentColorTexture=Zg.newInstance({label:"translucentPassColor"}),t.translucentColorTexture.create(a,{width:n.getCanvas().width,height:n.getCanvas().height,format:"rgba16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});var o=t.translucentColorTexture.createView("oitpColorTexture");t.translucentRenderEncoder.setColorTextureView(0,o),t.translucentAccumulateTexture=Zg.newInstance({label:"translucentPassAccumulate"}),t.translucentAccumulateTexture.create(a,{width:n.getCanvas().width,height:n.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});var i=t.translucentAccumulateTexture.createView("oitpAccumTexture");t.translucentRenderEncoder.setColorTextureView(1,i),t.fullScreenQuad=ip.newInstance(),t.fullScreenQuad.setDevice(n.getDevice()),t.fullScreenQuad.setPipelineHash("oitpfsq"),t.fullScreenQuad.setTextureViews(t.translucentRenderEncoder.getColorTextureViews()),t.fullScreenQuad.setFragmentShaderTemplate(jh)}t.translucentRenderEncoder.setDepthTextureView(t.depthTextureView),t.translucentRenderEncoder.attachTextureViews(),e.setCurrentOperation("translucentPass"),r.setRenderEncoder(t.translucentRenderEncoder),r.traverse(e),e.finalPass(n,r)}},e.finalPass=function(e,r){t.translucentFinalEncoder.setColorTextureView(0,t.colorTextureView),t.translucentFinalEncoder.attachTextureViews(),t.translucentFinalEncoder.begin(e.getCommandEncoder()),r.scissorAndViewport(t.translucentFinalEncoder),t.fullScreenQuad.prepareAndDraw(t.translucentFinalEncoder),t.translucentFinalEncoder.end()},e.getTextures=function(){return[t.translucentColorTexture,t.translucentAccumulateTexture]},e.createRenderEncoder=function(){t.translucentRenderEncoder=Nh.newInstance({label:"translucentRender"});var e=t.translucentRenderEncoder.getDescription();e.colorAttachments=[{view:void 0,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"},{view:void 0,clearValue:[1,0,0,0],loadOp:"clear",storeOp:"store"}],e.depthStencilAttachment={view:void 0,depthLoadOp:"load",depthStoreOp:"store"},t.translucentRenderEncoder.setReplaceShaderCodeFunction((function(e){var t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor"),t.addOutput("f32","outAccum"),t.addBuiltinInput("vec4<f32>","@builtin(position) fragPos");var r=t.getCode();r=jd.substitute(r,"//VTK::RenderEncoder::Impl",["var w: f32 = computedColor.a * pow(0.1 + input.fragPos.z, 2.0);","output.outColor = vec4<f32>(computedColor.rgb*w, w);","output.outAccum = computedColor.a;"]).result,t.setCode(r)})),t.translucentRenderEncoder.setPipelineHash("oitpr"),t.translucentRenderEncoder.setPipelineSettings({primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!1,depthCompare:"greater",format:"depth32float"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"one",dstFactor:"one"},alpha:{srcfactor:"one",dstFactor:"one"}}},{format:"r16float",blend:{color:{srcFactor:"zero",dstFactor:"one-minus-src"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},e.createFinalEncoder=function(){t.translucentFinalEncoder=Nh.newInstance({label:"translucentFinal"}),t.translucentFinalEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),t.translucentFinalEncoder.setReplaceShaderCodeFunction((function(e){var t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor"),t.addBuiltinInput("vec4<f32>","@builtin(position) fragPos");var r=t.getCode();r=jd.substitute(r,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);"]).result,t.setCode(r)})),t.translucentFinalEncoder.setPipelineHash("oitpf"),t.translucentFinalEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})}}(e,t)}var Hh={newInstance:er.newInstance(Wh,"vtkWebGPUOrderIndependentTranslucentPass"),extend:Wh},Kh={COMPOSITE_BLEND:0,MAXIMUM_INTENSITY_BLEND:1,MINIMUM_INTENSITY_BLEND:2,AVERAGE_INTENSITY_BLEND:3,ADDITIVE_INTENSITY_BLEND:4,RADON_TRANSFORM_BLEND:5},Xh=new Float64Array(16),qh=new Float64Array(16);var Yh={volumes:null,rowLength:1024,lastVolumeLength:0};function Qh(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Yh,r),ip.extend(e,t,r),t.fragmentShaderTemplate="\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Volume::TraverseDec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\nfn getTextureValue(vTex: texture_3d<f32>, tpos: vec4<f32>) -> f32\n{\n  // todo multicomponent support\n  return textureSampleLevel(vTex, clampSampler, tpos.xyz, 0.0).r;\n}\n\nfn getGradient(vTex: texture_3d<f32>, tpos: vec4<f32>, vNum: i32, scalar: f32) -> vec4<f32>\n{\n  var result: vec4<f32>;\n\n  var tstep: vec4<f32> = volumeSSBO.values[vNum].tstep;\n  result.x = getTextureValue(vTex, tpos + vec4<f32>(tstep.x, 0.0, 0.0, 1.0)) - scalar;\n  result.y = getTextureValue(vTex, tpos + vec4<f32>(0.0, tstep.y, 0.0, 1.0)) - scalar;\n  result.z = getTextureValue(vTex, tpos + vec4<f32>(0.0, 0.0, tstep.z, 1.0)) - scalar;\n  result.w = 0.0;\n\n  // divide by spacing as that is our delta\n  result = result / volumeSSBO.values[vNum].spacing;\n  // now we have a gradient in unit tcoords\n\n  var grad: f32 = length(result.xyz);\n  if (grad > 0.0)\n  {\n    // rotate to View Coords, needed for lighting and shading\n    var nMat: mat4x4<f32> = rendererUBO.SCVCMatrix * volumeSSBO.values[vNum].planeNormals;\n    result = nMat * result;\n    result = result / length(result);\n  }\n\n  // store gradient magnitude in .w\n  result.w = grad;\n\n  return result;\n}\n\nfn processVolume(vTex: texture_3d<f32>, vNum: i32, cNum: i32, posSC: vec4<f32>, tfunRows: f32) -> vec4<f32>\n{\n  var outColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);\n\n  // convert to tcoords and reject if outside the volume\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*posSC;\n  if (tpos.x < 0.0 || tpos.y < 0.0 || tpos.z < 0.0 ||\n      tpos.x > 1.0 || tpos.y > 1.0 || tpos.z > 1.0) { return outColor; }\n\n  var scalar: f32 = getTextureValue(vTex, tpos);\n\n  var coord: vec2<f32> =\n    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,\n      (0.5 + 2.0 * f32(vNum)) / tfunRows);\n  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);\n\n  var gofactor: f32 = 1.0;\n  var normal: vec4<f32> = vec4<f32>(0.0,0.0,0.0,0.0);\n  if (componentSSBO.values[cNum].gomin <  1.0 || volumeSSBO.values[vNum].shade[0] > 0.0)\n  {\n    normal = getGradient(vTex, tpos, vNum, scalar);\n    if (componentSSBO.values[cNum].gomin <  1.0)\n    {\n      gofactor = clamp(normal.a*componentSSBO.values[cNum].goScale + componentSSBO.values[cNum].goShift,\n      componentSSBO.values[cNum].gomin, componentSSBO.values[cNum].gomax);\n    }\n  }\n\n  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);\n  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;\n\n  if (volumeSSBO.values[vNum].shade[0] > 0.0)\n  {\n    color = color*abs(normal.z);\n  }\n\n  outColor = vec4<f32>(color.rgb, gofactor * opacity);\n\n  return outColor;\n}\n\n// adjust the start and end point of a raycast such that it intersects the unit cube.\n// This function is used to take a raycast starting point and step vector\n// and numSteps and return the startijng and ending steps for intersecting the\n// unit cube. Recall for a 3D texture, the unit cube is the range of texture coordsinates\n// that have valid values. So this funtion can be used to take a ray in texture coordinates\n// and bound it to intersecting the texture.\n//\nfn adjustBounds(tpos: vec4<f32>, tstep: vec4<f32>, numSteps: f32) -> vec2<f32>\n{\n  var result: vec2<f32> = vec2<f32>(0.0, numSteps);\n  var tpos2: vec4<f32> = tpos + tstep*numSteps;\n\n  // move tpos to the start of the volume\n  var adjust: f32 =\n    min(\n      max(tpos.x/tstep.x, (tpos.x - 1.0)/tstep.x),\n      min(\n        max((tpos.y - 1.0)/tstep.y, tpos.y/tstep.y),\n        max((tpos.z - 1.0)/tstep.z, tpos.z/tstep.z)));\n  if (adjust < 0.0)\n  {\n    result.x = result.x - adjust;\n  }\n\n  // adjust length to the end\n  adjust =\n    max(\n      min(tpos2.x/tstep.x, (tpos2.x - 1.0)/tstep.x),\n      max(\n        min((tpos2.y - 1.0)/tstep.y, tpos2.y/tstep.y),\n        min((tpos2.z - 1.0)/tstep.z, tpos2.z/tstep.z)));\n  if (adjust > 0.0)\n  {\n    result.y = result.y - adjust;\n  }\n\n  return result;\n}\n\nfn getSimpleColor(scalar: f32, vNum: i32, cNum: i32) -> vec4<f32>\n{\n  // how many rows (tfuns) do we have in our tfunTexture\n  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);\n\n  var coord: vec2<f32> =\n    vec2<f32>(scalar * componentSSBO.values[cNum].cScale + componentSSBO.values[cNum].cShift,\n      (0.5 + 2.0 * f32(vNum)) / tfunRows);\n  var color: vec4<f32> = textureSampleLevel(tfunTexture, clampSampler, coord, 0.0);\n  coord.x = (scalar * componentSSBO.values[cNum].oScale + componentSSBO.values[cNum].oShift);\n  var opacity: f32 = textureSampleLevel(ofunTexture, clampSampler, coord, 0.0).r;\n  return vec4<f32>(color.rgb, opacity);\n}\n\nfn traverseMax(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var maxVal: f32 = -1.0e37;\n  loop\n  {\n    var scalar: f32 = getTextureValue(vTex, tpos);\n    if (scalar > maxVal)\n    {\n      maxVal = scalar;\n    }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(maxVal, vNum, cNum);\n}\n\nfn traverseMin(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var minVal: f32 = 1.0e37;\n  loop\n  {\n    var scalar: f32 = getTextureValue(vTex, tpos);\n    if (scalar < minVal)\n    {\n      minVal = scalar;\n    }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(minVal, vNum, cNum);\n}\n\nfn traverseAverage(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var avgVal: f32 = 0.0;\n  var sampleCount: f32 = 0.0;\n  loop\n  {\n    var sample: f32 = getTextureValue(vTex, tpos);\n    // right now leave filtering off until WebGL changes get merged\n    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)\n    // {\n      avgVal = avgVal + sample;\n      sampleCount = sampleCount + 1.0;\n    // }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  if (sampleCount <= 0.0)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(avgVal/sampleCount, vNum, cNum);\n}\n\nfn traverseAdditive(vTex: texture_3d<f32>, vNum: i32, cNum: i32, rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>)\n{\n  // convert to tcoords and reject if outside the volume\n  var numSteps: f32 = rayLengthSC/mapperUBO.SampleDistance;\n  var tpos: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*minPosSC;\n  var tpos2: vec4<f32> = volumeSSBO.values[vNum].SCTCMatrix*(minPosSC + rayStepSC);\n  var tstep: vec4<f32> = tpos2 - tpos;\n\n  var rayBounds: vec2<f32> = adjustBounds(tpos, tstep, numSteps);\n\n  // did we hit anything\n  if (rayBounds.x >= rayBounds.y)\n  {\n    traverseVals[vNum] = vec4<f32>(0.0,0.0,0.0,0.0);\n    return;\n  }\n\n  let ipRange: vec4<f32> = volumeSSBO.values[vNum].ipScalarRange;\n  tpos = tpos + tstep*rayBounds.x;\n  var curDist: f32 = rayBounds.x;\n  var sumVal: f32 = 0.0;\n  loop\n  {\n    var sample: f32 = getTextureValue(vTex, tpos);\n    // right now leave filtering off until WebGL changes get merged\n    // if (ipRange.z == 0.0 || sample >= ipRange.x && sample <= ipRange.y)\n    // {\n      sumVal = sumVal + sample;\n    // }\n\n    // increment position\n    curDist = curDist + 1.0;\n    tpos = tpos + tstep;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayBounds.y) { break; }\n  }\n\n  // process to get the color and opacity\n  traverseVals[vNum] = getSimpleColor(sumVal, vNum, cNum);\n}\n\nfn composite(rayLengthSC: f32, minPosSC: vec4<f32>, rayStepSC: vec4<f32>) -> vec4<f32>\n{\n  // initial ray position is at the beginning\n  var rayPosSC: vec4<f32> = minPosSC;\n\n  // how many rows (tfuns) do we have in our tfunTexture\n  var tfunRows: f32 = f32(textureDimensions(tfunTexture).y);\n\n  var curDist: f32 = 0.0;\n  var computedColor: vec4<f32> = vec4<f32>(0.0, 0.0, 0.0, 0.0);\n  var sampleColor: vec4<f32>;\n//VTK::Volume::TraverseCalls\n\n  loop\n  {\n    // for each volume, sample and accumulate color\n//VTK::Volume::CompositeCalls\n\n    // increment position\n    curDist = curDist + mapperUBO.SampleDistance;\n    rayPosSC = rayPosSC + rayStepSC;\n\n    // check if we have reached a terminating condition\n    if (curDist > rayLengthSC) { break; }\n    if (computedColor.a > 0.98) { break; }\n  }\n  return computedColor;\n}\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var rayMax: f32 = textureSampleLevel(maxTexture, clampSampler, input.tcoordVS, 0.0).r;\n  var rayMin: f32 = textureSampleLevel(minTexture, clampSampler, input.tcoordVS, 0.0).r;\n\n  // discard empty rays\n  if (rayMax <= rayMin) { discard; }\n  else\n  {\n    // compute start and end ray positions in view coordinates\n    var minPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMax, 1.0);\n    minPosSC = minPosSC * (1.0 / minPosSC.w);\n    var maxPosSC: vec4<f32> = rendererUBO.PCSCMatrix*vec4<f32>(2.0 * input.tcoordVS.x - 1.0, 1.0 - 2.0 * input.tcoordVS.y, rayMin, 1.0);\n    maxPosSC = maxPosSC * (1.0 / maxPosSC.w);\n\n    var rayLengthSC: f32 = distance(minPosSC.xyz, maxPosSC.xyz);\n    var rayStepSC: vec4<f32> = (maxPosSC - minPosSC)*(mapperUBO.SampleDistance/rayLengthSC);\n    rayStepSC.w = 0.0;\n\n    var computedColor: vec4<f32>;\n\n//VTK::Volume::Loop\n\n//VTK::RenderEncoder::Impl\n  }\n\n  return output;\n}\n",t.UBO=Qp.newInstance({label:"mapperUBO"}),t.UBO.addEntry("SampleDistance","f32"),t.SSBO=Hp.newInstance({label:"volumeSSBO"}),t.componentSSBO=Hp.newInstance({label:"componentSSBO"}),t.lutBuildTime={},er.obj(t.lutBuildTime,{mtime:0}),function(e,t){t.classHierarchy.push("vtkWebGPUVolumePassFSQ"),e.replaceShaderPosition=function(e,t,r){var n=t.getShaderDescription("vertex");n.addBuiltinOutput("vec4<f32>","@builtin(position) Position");var a=n.getCode();a=jd.substitute(a,"//VTK::Position::Impl",["output.tcoordVS = vec2<f32>(vertexBC.x * 0.5 + 0.5, 1.0 - vertexBC.y * 0.5 - 0.5);","output.Position = vec4<f32>(vertexBC, 1.0);"]).result,n.setCode(a),t.getShaderDescription("fragment").addBuiltinInput("vec4<f32>","@builtin(position) fragPos")},t.shaderReplacements.set("replaceShaderPosition",e.replaceShaderPosition),e.replaceShaderVolume=function(e,r,n){for(var a=r.getShaderDescription("fragment"),o=a.getCode(),i=[],l=[],u=0;u<t.volumes.length;u++)t.volumes[u].getRenderable().getMapper().getBlendMode()===Kh.COMPOSITE_BLEND?(i.push("    sampleColor = processVolume(volTexture".concat(u,", ").concat(u,", ").concat(t.rowStarts[u],", rayPosSC, tfunRows);")),i.push("    computedColor = vec4<f32>(\n          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,\n          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);")):(l.push("  sampleColor = traverseVals[".concat(u,"];")),l.push("  computedColor = vec4<f32>(\n          sampleColor.a * sampleColor.rgb * (1.0 - computedColor.a) + computedColor.rgb,\n          (1.0 - computedColor.a)*sampleColor.a + computedColor.a);"));o=jd.substitute(o,"//VTK::Volume::CompositeCalls",i).result,o=jd.substitute(o,"//VTK::Volume::TraverseCalls",l).result,o=jd.substitute(o,"//VTK::Volume::TraverseDec",["var<private> traverseVals: array<vec4<f32>,".concat(t.volumes.length,">;")]).result;for(var s=!1,c=0;c<t.volumes.length;c++){var f=t.volumes[c].getRenderable().getMapper().getBlendMode();f===Kh.COMPOSITE_BLEND?s=!0:f===Kh.MAXIMUM_INTENSITY_BLEND?o=jd.substitute(o,"//VTK::Volume::Loop",["    traverseMax(volTexture".concat(c,", ").concat(c,", ").concat(c,", rayLengthSC, minPosSC, rayStepSC);"),"    computedColor = traverseVals[".concat(c,"];"),"//VTK::Volume::Loop"]).result:f===Kh.MINIMUM_INTENSITY_BLEND?o=jd.substitute(o,"//VTK::Volume::Loop",["    traverseMin(volTexture".concat(c,", ").concat(c,", ").concat(c,", rayLengthSC, minPosSC, rayStepSC);"),"    computedColor = traverseVals[".concat(c,"];"),"//VTK::Volume::Loop"]).result:f===Kh.AVERAGE_INTENSITY_BLEND?o=jd.substitute(o,"//VTK::Volume::Loop",["    traverseAverage(volTexture".concat(c,", ").concat(c,", ").concat(c,", rayLengthSC, minPosSC, rayStepSC);"),"    computedColor = traverseVals[".concat(c,"];"),"//VTK::Volume::Loop"]).result:f===Kh.ADDITIVE_INTENSITY_BLEND&&(o=jd.substitute(o,"//VTK::Volume::Loop",["    traverseAdditive(volTexture".concat(c,", ").concat(c,", ").concat(c,", rayLengthSC, minPosSC, rayStepSC);"),"    computedColor = traverseVals[".concat(c,"];"),"//VTK::Volume::Loop"]).result)}s&&(o=jd.substitute(o,"//VTK::Volume::Loop",["    computedColor = composite(rayLengthSC, minPosSC, rayStepSC);"]).result),a.setCode(o)},t.shaderReplacements.set("replaceShaderVolume",e.replaceShaderVolume),e.updateLUTImage=function(r){for(var n=e.getMTime(),a=0;a<t.volumes.length;a++){var o=t.volumes[a].getRenderable(),i=o.getMapper().getInputData();n=Math.max(n,o.getMTime(),i.getMTime())}if(!(n<t.lutBuildTime.getMTime())){t.numRows=0,t.rowStarts=[];for(var l=0;l<t.volumes.length;l++){t.rowStarts.push(t.numRows);var u=t.volumes[l].getRenderable(),s=u.getMapper(),c=u.getProperty(),f=s.getInputData(),d=(f.getPointData()&&f.getPointData().getScalars()).getNumberOfComponents(),p=c.getIndependentComponents()?d:1;t.numRows+=p}for(var g=new Uint8Array(2*t.numRows*t.rowLength*4),m=new Float32Array(2*t.numRows*t.rowLength),v=0,h=new Float32Array(3*t.rowLength),y=t.rowLength,b=0;b<t.volumes.length;b++)for(var T=t.volumes[b].getRenderable(),x=T.getMapper(),S=T.getProperty(),w=x.getInputData(),C=(w.getPointData()&&w.getPointData().getScalars()).getNumberOfComponents(),P=S.getIndependentComponents()?C:1,O=0;O<P;++O){var A=S.getRGBTransferFunction(O),E=A.getRange();A.getTable(E[0],E[1],y,h,1);for(var I=v*y*4,R=0;R<y;++R){g[I+4*R]=255*h[3*R],g[I+4*R+1]=255*h[3*R+1],g[I+4*R+2]=255*h[3*R+2],g[I+4*R+3]=255;for(var M=0;M<4;M++)g[I+4*(y+R)+M]=g[I+4*R+M]}var D=S.getScalarOpacity(O),k=t.sampleDist/S.getScalarOpacityUnitDistance(O),_=D.getRange();D.getTable(_[0],_[1],y,h,1),I=v*y;for(var L=0;L<y;++L)m[I+L]=1-Math.pow(1-h[L],k),m[I+L+y]=m[I+L];v+=2}var B={nativeArray:g,width:t.rowLength,height:2*t.numRows,depth:1,format:"rgba8unorm"},V=r.getTextureManager().getTexture(B).createView("tfunTexture");t.textureViews[2]=V;var N={nativeArray:m,width:t.rowLength,height:2*t.numRows,depth:1,format:"r16float"},F=r.getTextureManager().getTexture(N).createView("ofunTexture");t.textureViews[3]=F,t.lutBuildTime.modified()}},e.updateSSBO=function(r){for(var n=Math.max(e.getMTime(),t.WebGPURenderer.getStabilizedTime()),a=0;a<t.volumes.length;a++){var o=t.volumes[a].getRenderable(),i=o.getMapper(),l=i.getInputData();n=Math.max(n,o.getMTime(),l.getMTime(),i.getMTime())}if(!(n<t.SSBO.getSendTime())){var u=t.WebGPURenderer.getStabilizedCenterByReference();t.SSBO.clearData(),t.SSBO.setNumberOfInstances(t.volumes.length);for(var s=new Float64Array(16*t.volumes.length),c=new Float64Array(16*t.volumes.length),f=new Float64Array(4*t.volumes.length),d=new Float64Array(4*t.volumes.length),p=new Float64Array(4*t.volumes.length),g=new Float64Array(4*t.volumes.length),m=0;m<t.volumes.length;m++){var v=t.volumes[m].getRenderable(),h=v.getMapper(),y=h.getInputData();S(Xh),E(Xh,Xh,u);var b=v.getMatrix();w(qh,b),C(qh,qh),A(Xh,qh,Xh);var T=y.getWorldToIndex();A(Xh,T,Xh);var x=y.getDimensions();S(qh),I(qh,qh,[1/x[0],1/x[1],1/x[2]]),A(Xh,qh,Xh);for(var P=0;P<16;P++)s[16*m+P]=Xh[P];C(Xh,Xh);for(var O=0;O<4;O++)c[16*m+4*O]=Xh[4*O],c[16*m+4*O+1]=Xh[4*O+1],c[16*m+4*O+2]=Xh[4*O+2],c[16*m+4*O+3]=0;f[4*m]=1/x[0],f[4*m+1]=1/x[1],f[4*m+2]=1/x[2],f[4*m+3]=1,d[4*m]=v.getProperty().getShade()?1:0;var R=y.getSpacing();p[4*m]=R[0],p[4*m+1]=R[1],p[4*m+2]=R[2],p[4*m+3]=1;var M=t.textureViews[m+4].getTexture().getScale(),D=h.getIpScalarRange();g[4*m]=D[0]/M,g[4*m+1]=D[1]/M,g[4*m+2]=h.getFilterMode()}t.SSBO.addEntry("SCTCMatrix","mat4x4<f32>"),t.SSBO.addEntry("planeNormals","mat4x4<f32>"),t.SSBO.addEntry("shade","vec4<f32>"),t.SSBO.addEntry("tstep","vec4<f32>"),t.SSBO.addEntry("spacing","vec4<f32>"),t.SSBO.addEntry("ipScalarRange","vec4<f32>"),t.SSBO.setAllInstancesFromArray("SCTCMatrix",s),t.SSBO.setAllInstancesFromArray("planeNormals",c),t.SSBO.setAllInstancesFromArray("shade",d),t.SSBO.setAllInstancesFromArray("tstep",f),t.SSBO.setAllInstancesFromArray("spacing",p),t.SSBO.setAllInstancesFromArray("ipScalarRange",g),t.SSBO.send(r),t.componentSSBO.clearData(),t.componentSSBO.setNumberOfInstances(t.numRows);for(var k=new Float64Array(t.numRows),_=new Float64Array(t.numRows),L=new Float64Array(t.numRows),B=new Float64Array(t.numRows),V=new Float64Array(t.numRows),N=new Float64Array(t.numRows),F=new Float64Array(t.numRows),U=new Float64Array(t.numRows),G=0,j=0;j<t.volumes.length;j++){var z=t.volumes[j].getRenderable(),W=z.getMapper(),H=z.getProperty(),K=W.getInputData(),X=(K.getPointData()&&K.getPointData().getScalars()).getNumberOfComponents(),q=H.getIndependentComponents(),Y=t.textureViews[j+4].getTexture().getFormat(),Q=Qd.getDetailsFromTextureFormat(Y),$={scale:[255],offset:[0]};2===Q.elementSize&&"float"===Q.sampleType&&($.scale[0]=1);for(var Z=0;Z<X;Z++){var J=q?Z:0,ee=$.scale[Z],te=H.getScalarOpacity(J).getRange(),re=ee/(te[1]-te[0]),ne=($.offset[Z]-te[0])/(te[1]-te[0]);B[G]=ne,L[G]=re;var ae=H.getRGBTransferFunction(J).getRange();if(_[G]=($.offset[Z]-ae[0])/(ae[1]-ae[0]),k[G]=ee/(ae[1]-ae[0]),H.getUseGradientOpacity(J)){var oe=H.getGradientOpacityMinimumOpacity(J),ie=H.getGradientOpacityMaximumOpacity(J);V[G]=oe,N[G]=ie;var le=[H.getGradientOpacityMinimumValue(J),H.getGradientOpacityMaximumValue(J)];U[G]=ee*(ie-oe)/(le[1]-le[0]),F[G]=-le[0]*(ie-oe)/(le[1]-le[0])+oe}else V[G]=1,N[G]=1,U[G]=0,F[G]=1;G++}}t.componentSSBO.addEntry("cScale","f32"),t.componentSSBO.addEntry("cShift","f32"),t.componentSSBO.addEntry("oScale","f32"),t.componentSSBO.addEntry("oShift","f32"),t.componentSSBO.addEntry("goShift","f32"),t.componentSSBO.addEntry("goScale","f32"),t.componentSSBO.addEntry("gomin","f32"),t.componentSSBO.addEntry("gomax","f32"),t.componentSSBO.setAllInstancesFromArray("cScale",k),t.componentSSBO.setAllInstancesFromArray("cShift",_),t.componentSSBO.setAllInstancesFromArray("oScale",L),t.componentSSBO.setAllInstancesFromArray("oShift",B),t.componentSSBO.setAllInstancesFromArray("goScale",U),t.componentSSBO.setAllInstancesFromArray("goShift",F),t.componentSSBO.setAllInstancesFromArray("gomin",V),t.componentSSBO.setAllInstancesFromArray("gomax",N),t.componentSSBO.send(r)}};var r=e.updateBuffers;e.updateBuffers=function(){r();for(var n=t.volumes[0].getRenderable().getMapper().getSampleDistance(),a=0;a<t.volumes.length;a++){var o=t.volumes[a].getRenderable().getMapper().getSampleDistance();o<n&&(n=o)}t.sampleDist!==n&&(t.sampleDist=n,t.UBO.setValue("SampleDistance",n),t.UBO.sendIfNeeded(t.device));for(var i=0;i<t.volumes.length;i++){var l=t.volumes[i].getRenderable().getMapper().getInputData(),u=t.device.getTextureManager().getTextureForImageData(l);if(!t.textureViews[i+4]||t.textureViews[i+4].getTexture()!==u){var s=u.createView("volTexture".concat(i));t.textureViews[i+4]=s}}if(t.volumes.length<t.lastVolumeLength)for(var c=t.volumes.length;c<t.lastVolumeLength;c++)t.textureViews.pop();t.lastVolumeLength=t.volumes.length,e.updateLUTImage(t.device),e.updateSSBO(t.device),t.clampSampler||(t.clampSampler=Hg.newInstance({label:"clampSampler"}),t.clampSampler.create(t.device,{minFilter:"linear",magFilter:"linear"}))},e.computePipelineHash=function(){t.pipelineHash="volfsq";for(var e=0;e<t.volumes.length;e++){var r=t.volumes[e].getRenderable().getMapper().getBlendMode();t.pipelineHash+="".concat(r)}},e.setVolumes=function(r){if(!t.volumes||t.volumes.length!==r.length)return t.volumes=$e(r),void e.modified();for(var n=0;n<r.length;n++)if(r[n]!==t.volumes[n])return t.volumes=$e(r),void e.modified()};var n=e.getBindables;e.getBindables=function(){var e=n();return e.push(t.componentSSBO),e.push(t.clampSampler),e}}(e,t)}var $h={newInstance:er.newInstance(Qh,"vtkWebGPUVolumePassFSQ"),extend:Qh},Zh=fl.Representation,Jh=Up.BufferUsage,ey=Up.PrimitiveTypes,ty=[[0,4,6],[0,6,2],[1,3,7],[1,7,5],[0,5,4],[0,1,5],[2,6,7],[2,7,3],[0,3,1],[0,2,3],[4,5,7],[4,7,6]],ry="\n//VTK::Renderer::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var computedColor: vec4<f32> = textureSample(volumePassColorTexture,\n    volumePassColorTextureSampler, mapperUBO.tscale*input.tcoordVS);\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n";var ny={colorTextureView:null,depthTextureView:null,volumes:null};function ay(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ny,r),wv.extend(e,t,r),t._mapper=np.newInstance(),t._mapper.setFragmentShaderTemplate("\n//VTK::Renderer::Dec\n\n//VTK::Select::Dec\n\n//VTK::VolumePass::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : fragmentOutput;\n\n  //VTK::Select::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::VolumePass::Impl\n\n  // use the maximum (closest) of the current value and the zbuffer\n  // the blend func will then take the min to find the farthest stop value\n  var stopval: f32 = max(input.fragPos.z, textureLoad(opaquePassDepthTexture, vec2<i32>(i32(input.fragPos.x), i32(input.fragPos.y)), 0));\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n"),t._mapper.getShaderReplacements().set("replaceShaderVolumePass",(function(e,t,r){t.getShaderDescription("fragment").addBuiltinInput("vec4<f32>","@builtin(position) fragPos")})),t._boundsPoly=rc.newInstance(),t._lastMTimes=[],er.setGet(e,t,["colorTextureView","depthTextureView"]),function(e,t){t.classHierarchy.push("vtkWebGPUVolumePass"),e.initialize=function(r){t._clearEncoder||e.createClearEncoder(r),t._mergeEncoder||e.createMergeEncoder(r),t._copyEncoder||e.createCopyEncoder(r),t._depthRangeEncoder||e.createDepthRangeEncoder(r),t.fullScreenQuad||(t.fullScreenQuad=$h.newInstance(),t.fullScreenQuad.setDevice(r.getDevice()),t.fullScreenQuad.setTextureViews($e(t._depthRangeEncoder.getColorTextureViews()))),t._volumeCopyQuad||(t._volumeCopyQuad=ip.newInstance(),t._volumeCopyQuad.setPipelineHash("volpassfsq"),t._volumeCopyQuad.setDevice(r.getDevice()),t._volumeCopyQuad.setFragmentShaderTemplate(ry),t._copyUBO=Qp.newInstance({label:"mapperUBO"}),t._copyUBO.addEntry("tscale","vec2<f32>"),t._volumeCopyQuad.setUBO(t._copyUBO),t._volumeCopyQuad.setTextureViews([t._colorTextureView]))},e.traverse=function(r,n){if(!t.deleted){t._currentParent=n,e.initialize(n),e.computeTiming(n),e.renderDepthBounds(r,n),t._firstGroup=!0;var a=n.getDevice(),o=a.getHandle().limits.maxSampledTexturesPerShaderStage-4;if(t.volumes.length>o){for(var i=r.getRenderable().getActiveCamera().getPosition(),l=[],u=0;u<t.volumes.length;u++){var s=t.volumes[u].getRenderable().getBounds(),c=[.5*(s[1]+s[0]),.5*(s[3]+s[2]),.5*(s[5]+s[4])];l[u]=So(c,i)}var f=$e(Array(t.volumes.length).keys());f.sort((function(e,t){return l[t]-l[e]}));for(var d=[],p=f.length%o,g=0;g<f.length;g++)d.push(t.volumes[f[g]]),d.length>=p&&(e.rayCastPass(n,r,d),d=[],p=o,t._firstGroup=!1)}else e.rayCastPass(n,r,t.volumes);if(t._volumeCopyQuad.setWebGPURenderer(r),t._useSmallViewport){var m=t._colorTextureView.getTexture().getWidth(),v=t._colorTextureView.getTexture().getHeight();t._copyUBO.setArray("tscale",[t._smallViewportWidth/m,t._smallViewportHeight/v])}else t._copyUBO.setArray("tscale",[1,1]);t._copyUBO.sendIfNeeded(a),t._copyEncoder.setColorTextureView(0,t.colorTextureView),t._copyEncoder.attachTextureViews(),t._copyEncoder.begin(n.getCommandEncoder()),r.scissorAndViewport(t._copyEncoder),t._volumeCopyQuad.prepareAndDraw(t._copyEncoder),t._copyEncoder.end()}},e.delete=er.chain((function(){t._animationRateSubscription&&(t._animationRateSubscription.unsubscribe(),t._animationRateSubscription=null)}),e.delete),e.computeTiming=function(e){var r=e.getRenderable().getInteractor();if(null==t._lastScale){var n=t.volumes[0].getRenderable().getMapper();t._lastScale=n.getInitialInteractionScale()||1}t._useSmallViewport=!1,r.isAnimating()&&t._lastScale>1.5&&(t._useSmallViewport=!0),t._colorTexture.resize(e.getCanvas().width,e.getCanvas().height),t._animationRateSubscription||(t._animationRateSubscription=r.onAnimationFrameRateUpdate((function(){var e=t.volumes[0].getRenderable().getMapper();if(e.getAutoAdjustSampleDistances()){var n=r.getRecentAnimationFrameRate(),a=t._lastScale*r.getDesiredUpdateRate()/n;t._lastScale=a,t._lastScale>400&&(t._lastScale=400)}else t._lastScale=e.getImageSampleDistance()*e.getImageSampleDistance();t._lastScale<1.5&&(t._lastScale=1.5)})))},e.rayCastPass=function(e,r,n){var a=t._firstGroup?t._clearEncoder:t._mergeEncoder;a.attachTextureViews(),a.begin(e.getCommandEncoder());var o=t._colorTextureView.getTexture().getWidth(),i=t._colorTextureView.getTexture().getHeight();if(t._useSmallViewport){var l=e.getCanvas(),u=1/Math.sqrt(t._lastScale);t._smallViewportWidth=Math.ceil(u*l.width),t._smallViewportHeight=Math.ceil(u*l.height),o=t._smallViewportWidth,i=t._smallViewportHeight}a.getHandle().setViewport(0,0,o,i,0,1),a.getHandle().setScissorRect(0,0,o,i),t.fullScreenQuad.setWebGPURenderer(r),t.fullScreenQuad.setVolumes(n),t.fullScreenQuad.prepareAndDraw(a),a.end()},e.renderDepthBounds=function(r,n){e.updateDepthPolyData(r);var a=t._boundsPoly,o=a.getPoints(),i=a.getPolys(),l={hash:"vp".concat(i.getMTime()),usage:Jh.Index,cells:i,numberOfPoints:o.getNumberOfPoints(),primitiveType:ey.Triangles,representation:Zh.SURFACE},u=n.getDevice().getBufferManager().getBuffer(l);t._mapper.getVertexInput().setIndexBuffer(u),l={usage:Jh.PointArray,format:"float32x4",hash:"vp".concat(o.getMTime()).concat(i.getMTime()),dataArray:o,indexBuffer:u,packExtra:!0};var s=n.getDevice().getBufferManager().getBuffer(l);t._mapper.getVertexInput().addBuffer(s,["vertexBC"]),t._mapper.setNumberOfVertices(s.getSizeInBytes()/s.getStrideInBytes()),e.drawDepthRange(r,n)},e.updateDepthPolyData=function(e){for(var r=!1,n=0;n<t.volumes.length;n++){var a=t.volumes[n].getMTime();t._lastMTimes[n]&&a===t._lastMTimes[n]||(r=!0,t._lastMTimes[n]=a)}var o=e.getStabilizedTime();if((t._lastMTimes.length<=t.volumes.length||o!==t._lastMTimes[t.volumes.length])&&(r=!0,t._lastMTimes[t.volumes.length]=o),r){for(var i=e.getStabilizedCenterByReference(),l=8*t.volumes.length,u=new Float64Array(3*l),s=12*t.volumes.length,c=new Uint16Array(4*s),f=0;f<t.volumes.length;f++){t.volumes[f].getBoundingCubePoints(u,24*f);for(var d=12*f*4,p=8*f,g=0;g<12;g++)c[d++]=3,c[d++]=p+ty[g][0],c[d++]=p+ty[g][1],c[d++]=p+ty[g][2]}for(var m=0;m<u.length;m+=3)u[m]-=i[0],u[m+1]-=i[1],u[m+2]-=i[2];t._boundsPoly.getPoints().setData(u,3),t._boundsPoly.getPoints().modified(),t._boundsPoly.getPolys().setData(c,1),t._boundsPoly.getPolys().modified(),t._boundsPoly.modified()}},e.drawDepthRange=function(r,n){t._depthRangeTexture.resizeToMatch(t.colorTextureView.getTexture()),t._depthRangeTexture2.resizeToMatch(t.colorTextureView.getTexture()),t._depthRangeEncoder.attachTextureViews(),e.setCurrentOperation("volumeDepthRangePass"),r.setRenderEncoder(t._depthRangeEncoder),r.volumeDepthRangePass(!0),t._mapper.setWebGPURenderer(r),t._mapper.prepareToDraw(t._depthRangeEncoder),t._mapper.registerDrawCallback(t._depthRangeEncoder),r.volumeDepthRangePass(!1)},e.createDepthRangeEncoder=function(e){var r=e.getDevice();t._depthRangeEncoder=Nh.newInstance({label:"VolumePass DepthRange"}),t._depthRangeEncoder.setPipelineHash("volr"),t._depthRangeEncoder.setReplaceShaderCodeFunction((function(e){var t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor1"),t.addOutput("vec4<f32>","outColor2");var r=t.getCode();r=jd.substitute(r,"//VTK::RenderEncoder::Impl",["output.outColor1 = vec4<f32>(input.fragPos.z, 0.0, 0.0, 0.0);","output.outColor2 = vec4<f32>(stopval, 0.0, 0.0, 0.0);"]).result,t.setCode(r)})),t._depthRangeEncoder.setDescription({colorAttachments:[{view:null,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"},{view:null,clearValue:[1,1,1,1],loadOp:"clear",storeOp:"store"}]}),t._depthRangeEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"r16float",blend:{color:{srcFactor:"one",dstFactor:"one",operation:"max"},alpha:{srcfactor:"one",dstFactor:"one",operation:"max"}}},{format:"r16float",blend:{color:{srcFactor:"one",dstFactor:"one",operation:"min"},alpha:{srcfactor:"one",dstFactor:"one",operation:"min"}}}]}}),t._depthRangeTexture=Zg.newInstance({label:"volumePassMaxDepth"}),t._depthRangeTexture.create(r,{width:e.getCanvas().width,height:e.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});var n=t._depthRangeTexture.createView("maxTexture");t._depthRangeEncoder.setColorTextureView(0,n),t._depthRangeTexture2=Zg.newInstance({label:"volumePassDepthMin"}),t._depthRangeTexture2.create(r,{width:e.getCanvas().width,height:e.getCanvas().height,format:"r16float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING});var a=t._depthRangeTexture2.createView("minTexture");t._depthRangeEncoder.setColorTextureView(1,a),t._mapper.setDevice(e.getDevice()),t._mapper.setTextureViews([t.depthTextureView])},e.createClearEncoder=function(e){t._colorTexture=Zg.newInstance({label:"volumePassColor"}),t._colorTexture.create(e.getDevice(),{width:e.getCanvas().width,height:e.getCanvas().height,format:"bgra8unorm",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC}),t._colorTextureView=t._colorTexture.createView("volumePassColorTexture"),t._colorTextureView.addSampler(e.getDevice(),{minFilter:"linear",magFilter:"linear"}),t._clearEncoder=Nh.newInstance({label:"VolumePass Clear"}),t._clearEncoder.setColorTextureView(0,t._colorTextureView),t._clearEncoder.setDescription({colorAttachments:[{view:null,clearValue:[0,0,0,0],loadOp:"clear",storeOp:"store"}]}),t._clearEncoder.setPipelineHash("volpf"),t._clearEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"bgra8unorm",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},e.createCopyEncoder=function(e){t._copyEncoder=Nh.newInstance({label:"volumePassCopy"}),t._copyEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),t._copyEncoder.setPipelineHash("volcopypf"),t._copyEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"rgba16float",blend:{color:{srcFactor:"one",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},e.createMergeEncoder=function(e){t._mergeEncoder=Nh.newInstance({label:"volumePassMerge"}),t._mergeEncoder.setColorTextureView(0,t._colorTextureView),t._mergeEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),t._mergeEncoder.setReplaceShaderCodeFunction((function(e){var t=e.getShaderDescription("fragment");t.addOutput("vec4<f32>","outColor");var r=t.getCode();r=jd.substitute(r,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<f32>(computedColor.rgb, computedColor.a);"]).result,t.setCode(r)})),t._mergeEncoder.setPipelineHash("volpf"),t._mergeEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:"bgra8unorm",blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}})},e.setVolumes=function(r){if(!t.volumes||t.volumes.length!==r.length)return t.volumes=$e(r),void e.modified();for(var n=0;n<r.length;n++)if(r[n]!==t.volumes[n])return t.volumes=$e(r),void e.modified()}}(e,t)}var oy={newInstance:er.newInstance(ay,"vtkWebGPUVolumePass"),extend:ay},iy="\n//VTK::Mapper::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output: fragmentOutput;\n\n  var computedColor: vec4<f32> = clamp(textureSampleLevel(opaquePassColorTexture, finalPassSampler, input.tcoordVS, 0),vec4<f32>(0.0),vec4<f32>(1.0));\n\n  //VTK::RenderEncoder::Impl\n  return output;\n}\n";var ly={opaqueActorCount:0,translucentActorCount:0,volumes:null,opaqueRenderEncoder:null,translucentPass:null,volumePass:null};function uy(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ly,r),wv.extend(e,t,r),er.setGet(e,t,["opaquePass","translucentPass","volumePass"]),function(e,t){t.classHierarchy.push("vtkForwardPass"),e.traverse=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t.deleted){t._currentParent=n,e.setCurrentOperation("buildPass"),r.traverse(e),t.opaquePass||(t.opaquePass=Gh.newInstance());for(var a=r.getRenderable().getNumberOfLayers(),o=r.getChildren(),i=0;i<a;i++)for(var l=0;l<o.length;l++){var u=o[l],s=r.getRenderable().getRenderers()[l];s.getDraw()&&s.getLayer()===i&&(t.opaqueActorCount=0,t.translucentActorCount=0,t.volumes=[],e.setCurrentOperation("queryPass"),u.traverse(e),e.setCurrentOperation("cameraPass"),u.traverse(e),t.opaquePass.traverse(u,r),t.translucentActorCount>0&&(t.translucentPass||(t.translucentPass=Hh.newInstance()),t.translucentPass.setColorTextureView(t.opaquePass.getColorTextureView()),t.translucentPass.setDepthTextureView(t.opaquePass.getDepthTextureView()),t.translucentPass.traverse(u,r)),t.volumes.length>0&&(t.volumePass||(t.volumePass=oy.newInstance()),t.volumePass.setColorTextureView(t.opaquePass.getColorTextureView()),t.volumePass.setDepthTextureView(t.opaquePass.getDepthTextureView()),t.volumePass.setVolumes(t.volumes),t.volumePass.traverse(u,r)),e.finalPass(r,u))}}},e.finalPass=function(r,n){t._finalBlitEncoder||e.createFinalBlitEncoder(r),t._finalBlitOutputTextureView.createFromTextureHandle(r.getCurrentTexture(),{depth:1,format:r.getPresentationFormat()}),t._finalBlitEncoder.attachTextureViews(),t._finalBlitEncoder.begin(r.getCommandEncoder()),n.scissorAndViewport(t._finalBlitEncoder),t._fullScreenQuad.prepareAndDraw(t._finalBlitEncoder),t._finalBlitEncoder.end()},e.createFinalBlitEncoder=function(e){t._finalBlitEncoder=Nh.newInstance({label:"forwardPassBlit"}),t._finalBlitEncoder.setDescription({colorAttachments:[{view:null,loadOp:"load",storeOp:"store"}]}),t._finalBlitEncoder.setPipelineHash("fpf"),t._finalBlitEncoder.setPipelineSettings({primitive:{cullMode:"none"},fragment:{targets:[{format:e.getPresentationFormat(),blend:{color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha"},alpha:{srcfactor:"one",dstFactor:"one-minus-src-alpha"}}}]}}),t._fsqSampler=Hg.newInstance({label:"finalPassSampler"}),t._fsqSampler.create(e.getDevice(),{minFilter:"linear",magFilter:"linear"}),t._fullScreenQuad=ip.newInstance(),t._fullScreenQuad.setDevice(e.getDevice()),t._fullScreenQuad.setPipelineHash("fpfsq"),t._fullScreenQuad.setTextureViews([t.opaquePass.getColorTextureView()]),t._fullScreenQuad.setAdditionalBindables([t._fsqSampler]),t._fullScreenQuad.setFragmentShaderTemplate(iy),t._finalBlitOutputTextureView=qg.newInstance(),t._finalBlitEncoder.setColorTextureView(0,t._finalBlitOutputTextureView)},e.incrementOpaqueActorCount=function(){return t.opaqueActorCount++},e.incrementTranslucentActorCount=function(){return t.translucentActorCount++},e.addVolume=function(e){t.volumes.push(e)}}(e,t)}var sy={newInstance:er.newInstance(uy,"vtkForwardPass"),extend:uy},cy=Dl.VtkDataTypes;var fy={handle:null,device:null};function dy(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,fy,r),er.obj(e,t),er.setGet(e,t,["device"]),function(e,t){function r(e){if(e.imageData){e.dataArray=e.imageData.getPointData().getScalars(),e.time=e.dataArray.getMTime(),e.nativeArray=e.dataArray.getData();var t=e.imageData.getDimensions();switch(e.width=t[0],e.height=t[1],e.depth=t[2],e.dataArray.getNumberOfComponents()){case 1:e.format="r";break;case 2:e.format="rg";break;default:e.format="rgba"}switch(e.dataArray.getDataType()){case cy.UNSIGNED_CHAR:e.format+="8unorm";break;case cy.FLOAT:case cy.UNSIGNED_INT:case cy.INT:case cy.DOUBLE:case cy.UNSIGNED_SHORT:case cy.SHORT:default:e.format+="16float"}}e.image&&(e.width=e.image.width,e.height=e.image.height,e.depth=1,e.format="rgba8unorm"),e.jsImageData&&(e.width=e.jsImageData.width,e.height=e.jsImageData.height,e.depth=1,e.format="rgba8unorm",e.flip=!0,e.nativeArray=e.jsImageData.data),e.canvas&&(e.width=e.canvas.width,e.height=e.canvas.height,e.depth=1,e.format="rgba8unorm",e.flip=!0,e.usage=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT)}function n(e){var r=Zg.newInstance();return r.create(t.device,{width:e.width,height:e.height,depth:e.depth,format:e.format,usage:e.usage,mipLevel:e.mipLevel}),(e.nativeArray||e.image||e.canvas)&&r.writeImageData(e),r}t.classHierarchy.push("vtkWebGPUTextureManager"),e.getTexture=function(e){return e.hash?t.device.getCachedObject(e.hash,n,e):n(e)},e.getTextureForImageData=function(e){var n={time:e.getMTime()};return n.imageData=e,r(n),n.hash=n.time+n.format+n.mipLevel,t.device.getTextureManager().getTexture(n)},e.getTextureForVTKTexture=function(e){var n={time:e.getMTime()};return e.getInputData()?n.imageData=e.getInputData():e.getImage()?n.image=e.getImage():e.getJsImageData()?n.jsImageData=e.getJsImageData():e.getCanvas()&&(n.canvas=e.getCanvas()),r(n),n.mipLevel=e.getMipLevel(),n.hash=n.time+n.format+n.mipLevel,t.device.getTextureManager().getTexture(n)}}(e,t)}var py={newInstance:er.newInstance(dy),extend:dy};function gy(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ct(e);if(t){var a=ct(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return gt(this,r)}}var my=function(e){dt(r,e);var t=gy(r);function r(){var e,n,a;return lt(this,r),(a=t.call(this)).registry=new FinalizationRegistry((function(t){var o=ft((e=pt(a),ct(r.prototype)),"get",e).call(e,t);o&&o.deref&&void 0===o.deref()&&ft((n=pt(a),ct(r.prototype)),"delete",n).call(n,t)})),a}return st(r,[{key:"getValue",value:function(e){var t=ft(ct(r.prototype),"get",this).call(this,e);if(t){var n=t.deref();if(void 0!==n)return n;ft(ct(r.prototype),"delete",this).call(this,e)}}},{key:"setValue",value:function(e,t){var n;return t&&"object"===Ye(t)&&(n=new WeakRef(t),this.registry.register(t,e),ft(ct(r.prototype),"set",this).call(this,e,n)),n}}]),r}(mt(Map));var vy={handle:null,pipelines:null,shaderCache:null,bindGroupLayouts:null,bufferManager:null,textureManager:null};function hy(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,vy,r),Vt(e,t),zt(e,t,["handle"]),Ft(e,t,["bufferManager","shaderCache","textureManager"]),t.objectCache=new my,t.shaderCache=jd.newInstance(),t.shaderCache.setDevice(e),t.bindGroupLayouts=[],t.bufferManager=Up.newInstance(),t.bufferManager.setDevice(e),t.textureManager=py.newInstance(),t.textureManager.setDevice(e),t.pipelines={},function(e,t){t.classHierarchy.push("vtkWebGPUDevice"),e.initialize=function(e){t.handle=e},e.createCommandEncoder=function(){return t.handle.createCommandEncoder()},e.submitCommandEncoder=function(e){t.handle.queue.submit([e.finish()])},e.getShaderModule=function(e){return t.shaderCache.getShaderModule(e)},e.getBindGroupLayout=function(e){if(!e.entries)return null;for(var r=0;r<e.entries.length;r++){var n=e.entries[r];n.binding=n.binding||0,n.visibility=n.visibility||GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT}for(var a=JSON.stringify(e),o=0;o<t.bindGroupLayouts.length;o++)if(t.bindGroupLayouts[o].sval===a)return t.bindGroupLayouts[o].layout;var i=t.handle.createBindGroupLayout(e);return t.bindGroupLayouts.push({sval:a,layout:i}),i},e.getBindGroupLayoutDescription=function(e){for(var r=0;r<t.bindGroupLayouts.length;r++)if(t.bindGroupLayouts[r].layout===e)return t.bindGroupLayouts[r].sval;return vtkErrorMacro("layout not found"),console.trace(),null},e.getPipeline=function(e){return e in t.pipelines?t.pipelines[e]:null},e.createPipeline=function(r,n){n.initialize(e,r),t.pipelines[r]=n},e.onSubmittedWorkDone=function(){return t.handle.queue.onSubmittedWorkDone()},e.hasCachedObject=function(e){return t.objectCache.getValue(e)},e.getCachedObject=function(e,r){if(!e)return vtkErrorMacro("attempt to cache an object without a hash"),null;var n=t.objectCache.getValue(e);if(n)return n;for(var a=arguments.length,o=new Array(a>2?a-2:0),i=2;i<a;i++)o[i-2]=arguments[i];var l=r.apply(void 0,o);return t.objectCache.setValue(e,l),l}}(e,t)}var yy={newInstance:Yt(hy,"vtkWebGPUDevice"),extend:hy};var by={selectionRenderEncoder:null,colorTexture:null,depthTexture:null};function Ty(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,by,r),wv.extend(e,t,r),er.get(e,t,["colorTexture","depthTexture"]),function(e,t){t.classHierarchy.push("vtkWebGPUHardwareSelectionPass"),e.traverse=function(r,n){if(!t.deleted){t._currentParent=null,e.setCurrentOperation("buildPass"),r.traverse(e);var a=r.getDevice();if(t.selectionRenderEncoder)t.colorTexture.resize(r.getCanvas().width,r.getCanvas().height),t.depthTexture.resizeToMatch(t.colorTexture);else{e.createRenderEncoder(),t.colorTexture=Zg.newInstance({label:"hardwareSelectorColor"}),t.colorTexture.create(a,{width:r.getCanvas().width,height:r.getCanvas().height,format:"rgba32uint",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});var o=t.colorTexture.createView("hardwareSelectColorTexture");t.selectionRenderEncoder.setColorTextureView(0,o),t.depthTexture=Zg.newInstance({label:"hardwareSelectorDepth"}),t.depthTexture.create(a,{width:r.getCanvas().width,height:r.getCanvas().height,format:"depth32float",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC});var i=t.depthTexture.createView("hardwareSelectDepthTexture");t.selectionRenderEncoder.setDepthTextureView(i)}t.selectionRenderEncoder.attachTextureViews(),n.setRenderEncoder(t.selectionRenderEncoder),e.setCurrentOperation("cameraPass"),n.traverse(e),e.setCurrentOperation("opaquePass"),n.traverse(e)}},e.createRenderEncoder=function(){t.selectionRenderEncoder=Nh.newInstance({label:"HardwareSelectionPass"}),t.selectionRenderEncoder.setPipelineHash("sel"),t.selectionRenderEncoder.setReplaceShaderCodeFunction((function(e){var t=e.getShaderDescription("fragment");t.addOutput("vec4<u32>","outColor");var r=t.getCode();r=jd.substitute(r,"//VTK::RenderEncoder::Impl",["output.outColor = vec4<u32>(mapperUBO.PropID, compositeID, 0u, 0u);"]).result,t.setCode(r)})),t.selectionRenderEncoder.getDescription().colorAttachments[0].clearValue=[0,0,0,0],t.selectionRenderEncoder.setPipelineSettings({primitive:{cullMode:"none"},depthStencil:{depthWriteEnabled:!0,depthCompare:"greater",format:"depth32float"},fragment:{targets:[{format:"rgba32uint",blend:void 0}]}})}}(e,t)}var xy={newInstance:er.newInstance(Ty,"vtkWebGPUHardwareSelectionPass"),extend:Ty},Sy=Gv.SelectionContent,wy=Gv.SelectionField,Cy=nu.FieldAssociations,Py=er.vtkErrorMacro;function Oy(e){return"".concat(e.propID," ").concat(e.compositeID)}function Ay(e,t,r,n){var a=4*((r.height-t-1)*r.colorBufferWidth+e)+n;return r.colorValues[a]}function Ey(e,t,r,n){var a=r<0?0:r;if(0===a){if(n[0]=t[0],n[1]=t[1],t[0]<0||t[0]>=e.width||t[1]<0||t[1]>=e.height)return null;var o=Ay(t[0],t[1],e,0);if(o<=0)return null;var i={};i.propID=o;var l=Ay(t[0],t[1],e,1);if((l<0||l>16777215)&&(l=0),i.compositeID=l,e.captureZValues){var u=(e.height-t[1]-1)*e.zbufferBufferWidth+t[0];i.zValue=e.depthValues[u],i.zValue=e.webGPURenderer.convertToOpenGLDepth(i.zValue),i.displayPosition=t}return i}var s=[t[0],t[1]],c=[0,0],f=Ey(e,t,0,n);if(f)return f;for(var d=1;d<a;++d){for(var p=s[1]>d?s[1]-d:0;p<=s[1]+d;++p){if(c[1]=p,s[0]>=d&&(c[0]=s[0]-d,f=Ey(e,c,0,n)))return f;if(c[0]=s[0]+d,f=Ey(e,c,0,n))return f}for(var g=s[0]>=d?s[0]-(d-1):0;g<=s[0]+(d-1);++g){if(c[0]=g,s[1]>=d&&(c[1]=s[1]-d,f=Ey(e,c,0,n)))return f;if(c[1]=s[1]+d,f=Ey(e,c,0,n))return f}}return n[0]=t[0],n[1]=t[1],null}function Iy(e,t,r,n,a){for(var o=Math.floor(t),i=Math.floor(r),l=Math.floor(n),u=Math.floor(a),s=new Map,c=[0,0],f=i;f<=u;f++)for(var d=o;d<=l;d++){var p=Ey(e,[d,f],0,c);if(p){var g=Oy(p);if(s.has(g)){var m=s.get(g);m.pixelCount++,e.captureZValues&&p.zValue<m.info.zValue&&(m.info=p),-1===m.attributeIDs.indexOf(p.attributeID)&&m.attributeIDs.push(p.attributeID)}else s.set(g,{info:p,pixelCount:1,attributeIDs:[p.attributeID]})}}return function(e,t,r){var n=[],a=0;return t.forEach((function(t,o){var i=Gv.newInstance();switch(i.setContentType(Sy.INDICES),e){case Cy.FIELD_ASSOCIATION_CELLS:i.setFieldType(wy.CELL);break;case Cy.FIELD_ASSOCIATION_POINTS:i.setFieldType(wy.POINT);break;default:Py("Unknown field association")}i.getProperties().propID=t.info.propID;var l=r.webGPURenderer.getPropFromID(t.info.propID);i.getProperties().prop=l.getRenderable(),i.getProperties().compositeID=t.info.compositeID,i.getProperties().pixelCount=t.pixelCount,r.captureZValues&&(i.getProperties().displayPosition=[t.info.displayPosition[0],t.info.displayPosition[1],t.info.zValue],i.getProperties().worldPosition=r.webGPURenderWindow.displayToWorld(t.info.displayPosition[0],t.info.displayPosition[1],t.info.zValue,r.renderer)),i.setSelectionList(t.attributeIDs),n[a]=i,a++})),n}(e.fieldAssociation,s,e)}var Ry={};function My(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Ry,r),Bv.extend(e,t,r),t._selectionPass=xy.newInstance(),er.setGet(e,t,["_WebGPURenderWindow"]),er.moveToProtected(e,t,["WebGPURenderWindow"]),function(e,t){t.classHierarchy.push("vtkWebGPUHardwareSelector"),e.endSelection=function(){t.WebGPURenderer.setSelector(null)},e.getSourceDataAsync=function(){var e=mv(hv().mark((function e(r){var n,a,o,i,l,u,s,c,f,d,p;return hv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&t._WebGPURenderWindow){e.next=3;break}return Py("Renderer and view must be set before calling Select."),e.abrupt("return",!1);case 3:if(t._WebGPURenderWindow.getRenderable().preRender(),t._WebGPURenderWindow.getInitialized()){e.next=8;break}return t._WebGPURenderWindow.initialize(),e.next=8,new Promise((function(e){t._WebGPURenderWindow.onInitialized(e)}));case 8:if(n=t._WebGPURenderWindow.getViewNodeFor(r)){e.next=11;break}return e.abrupt("return",!1);case 11:if(a=n.getSuppressClear(),n.setSuppressClear(!0),t._selectionPass.traverse(t._WebGPURenderWindow,n),n.setSuppressClear(a),o=t._WebGPURenderWindow.getDevice(),i=t._selectionPass.getColorTexture(),l=t._selectionPass.getDepthTexture(),(u={area:[0,0,i.getWidth()-1,i.getHeight()-1],captureZValues:t.captureZValues,fieldAssociation:t.fieldAssociation,renderer:r,webGPURenderer:n,webGPURenderWindow:t._WebGPURenderWindow,width:i.getWidth(),height:i.getHeight()}).colorBufferWidth=16*Math.floor((u.width+15)/16),u.colorBufferSizeInBytes=u.colorBufferWidth*u.height*4*4,(s=pp.newInstance({label:"hardwareSelectColorBuffer"})).setDevice(o),s.create(u.colorBufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),(c=t._WebGPURenderWindow.getCommandEncoder()).copyTextureToBuffer({texture:i.getHandle()},{buffer:s.getHandle(),bytesPerRow:16*u.colorBufferWidth,rowsPerImage:u.height},{width:u.width,height:u.height,depthOrArrayLayers:1}),t.captureZValues&&(u.zbufferBufferWidth=64*Math.floor((u.width+63)/64),(f=pp.newInstance({label:"hardwareSelectDepthBuffer"})).setDevice(o),u.zbufferSizeInBytes=u.height*u.zbufferBufferWidth*4,f.create(u.zbufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),c.copyTextureToBuffer({texture:l.getHandle(),aspect:"depth-only"},{buffer:f.getHandle(),bytesPerRow:4*u.zbufferBufferWidth,rowsPerImage:u.height},{width:u.width,height:u.height,depthOrArrayLayers:1})),o.submitCommandEncoder(c),d=s.mapAsync(GPUMapMode.READ),!t.captureZValues){e.next=37;break}return p=f.mapAsync(GPUMapMode.READ),e.next=33,Promise.all([d,p]);case 33:u.depthValues=new Float32Array(f.getMappedRange().slice()),f.unmap(),e.next=39;break;case 37:return e.next=39,d;case 39:return u.colorValues=new Uint32Array(s.getMappedRange().slice()),s.unmap(),u.generateSelection=function(e,t,r,n){return Iy(u,e,t,r,n)},e.abrupt("return",u);case 43:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(e,t)}var Dy={newInstance:er.newInstance(My,"vtkWebGPUHardwareSelector"),extend:My},ky=er.vtkErrorMacro,_y={position:"absolute",top:0,left:0,width:"100%",height:"100%"};function Ly(e,t){t.classHierarchy.push("vtkWebGPURenderWindow"),e.getViewNodeFactory=function(){return t.myFactory};var r=[0,0];function n(){return n=mv(hv().mark((function r(){var n,a,o,i,l,u,s,c,f=arguments;return hv().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=f.length>0&&void 0!==f[0]?f[0]:t.imageFormat,a=document.createElement("canvas"),o=a.getContext("2d"),a.width=t.canvas.width,a.height=t.canvas.height,r.next=7,e.getPixelsAsync();case 7:i=r.sent,l=new ImageData(i.colorValues,i.width,i.height),o.putImageData(l,0,0),u=t.canvas.getBoundingClientRect(),s=t.renderable,s.getRenderers().forEach((function(e){e.getViewProps().forEach((function(e){if(e.getContainer)for(var t=e.getContainer().getElementsByTagName("canvas"),r=0;r<t.length;r++){var n=t[r],a=n.getBoundingClientRect(),i=a.x-u.x,l=a.y-u.y;o.drawImage(n,i,l)}}))})),c=a.toDataURL(n),a.remove(),e.invokeImageReady(c);case 17:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}e.onModified((function(){t.renderable&&(t.size[0]===r[0]&&t.size[1]===r[1]||(r[0]=t.size[0],r[1]=t.size[1],t.canvas.setAttribute("width",t.size[0]),t.canvas.setAttribute("height",t.size[1]),e.recreateSwapChain())),t.viewStream&&t.viewStream.setSize(t.size[0],t.size[1]),t.canvas.style.display=t.useOffScreen?"none":"block",t.el&&(t.el.style.cursor=t.cursorVisibility?t.cursor:"none"),t.containerSize=null})),e.recreateSwapChain=function(){t.context&&(t.context.unconfigure(),t.presentationFormat=navigator.gpu.getPreferredCanvasFormat(t.adapter),t.context.configure({device:t.device.getHandle(),format:t.presentationFormat,alphaMode:"premultiplied",usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_DST,width:t.size[0],height:t.size[1]}),t._configured=!0)},e.getCurrentTexture=function(){return t.context.getCurrentTexture()},e.buildPass=function(r){if(r){if(!t.renderable)return;e.prepareNodes(),e.addMissingNodes(t.renderable.getRenderersByReference()),e.removeUnusedNodes(),e.initialize()}else t.initialized&&(t._configured||e.recreateSwapChain(),t.commandEncoder=t.device.createCommandEncoder())},e.initialize=function(){if(!t.initializing){if(t.initializing=!0,!navigator.gpu)return void ky("WebGPU is not enabled.");e.create3DContextAsync().then((function(){t.initialized=!0,t.deleted||e.invokeInitialized()}))}},e.setContainer=function(r){t.el&&t.el!==r&&(t.canvas.parentNode!==t.el&&ky("Error: canvas parent node does not match container"),t.el.removeChild(t.canvas),t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)),t.el!==r&&(t.el=r,t.el&&(t.el.appendChild(t.canvas),t.useBackgroundImage&&t.el.appendChild(t.bgImage)),e.modified())},e.getContainer=function(){return t.el},e.getContainerSize=function(){if(!t.containerSize&&t.el){var e=t.el.getBoundingClientRect(),r=e.width,n=e.height;t.containerSize=[r,n]}return t.containerSize||t.size},e.getFramebufferSize=function(){return t.size},e.create3DContextAsync=mv(hv().mark((function e(){return hv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.gpu.requestAdapter({powerPreference:"high-performance"});case 2:if(t.adapter=e.sent,!t.deleted){e.next=5;break}return e.abrupt("return");case 5:return t.device=yy.newInstance(),e.t0=t.device,e.next=9,t.adapter.requestDevice();case 9:if(e.t1=e.sent,e.t0.initialize.call(e.t0,e.t1),!t.deleted){e.next=14;break}return t.device=null,e.abrupt("return");case 14:t.context=t.canvas.getContext("webgpu");case 15:case"end":return e.stop()}}),e)}))),e.releaseGraphicsResources=function(){var r=wv.newInstance();r.setCurrentOperation("Release"),r.traverse(e,null),t.adapter=null,t.device=null,t.context=null,t.initialized=!1,t.initializing=!1},e.setBackgroundImage=function(e){t.bgImage.src=e.src},e.setUseBackgroundImage=function(e){t.useBackgroundImage=e,t.useBackgroundImage&&!t.el.contains(t.bgImage)?t.el.appendChild(t.bgImage):!t.useBackgroundImage&&t.el.contains(t.bgImage)&&t.el.removeChild(t.bgImage)},e.captureNextImage=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image/png",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.resetCamera,o=void 0!==a&&a,i=n.size,l=void 0===i?null:i,u=n.scale,s=void 0===u?1:u;if(t.deleted)return null;t.imageFormat=r;var c=t.notifyStartCaptureImage;return t.notifyStartCaptureImage=!0,t._screenshot={size:l||1!==s?l||t.size.map((function(e){return e*s})):null},new Promise((function(r,n){var a=e.onImageReady((function(n){if(null===t._screenshot.size)t.notifyStartCaptureImage=c,a.unsubscribe(),t._screenshot.placeHolder&&(t.size=t._screenshot.originalSize,e.modified(),t._screenshot.cameras&&t._screenshot.cameras.forEach((function(e){return(0,e.restoreParamsFn)(e.arg)})),e.traverseAllPasses(),t.el.removeChild(t._screenshot.placeHolder),t._screenshot.placeHolder.remove(),t._screenshot=null),r(n);else{var i=document.createElement("img");if(i.style=_y,i.src=n,t._screenshot.placeHolder=t.el.appendChild(i),t.canvas.style.display="none",t._screenshot.originalSize=t.size,t.size=t._screenshot.size,t._screenshot.size=null,e.modified(),o){var l=!0!==o;t._screenshot.cameras=t.renderable.getRenderers().map((function(e){var t=e.getActiveCamera(),r=t.get("focalPoint","position","parallelScale");return{resetCameraArgs:l?{renderer:e}:void 0,resetCameraFn:l?o:e.resetCamera,restoreParamsFn:t.set,arg:JSON.parse(JSON.stringify(r))}})),t._screenshot.cameras.forEach((function(e){return(0,e.resetCameraFn)(e.resetCameraArgs)}))}e.traverseAllPasses()}}))}))},e.traverseAllPasses=function(){if(!t.deleted)if(t.initialized){if(t.renderPasses)for(var r=0;r<t.renderPasses.length;++r)t.renderPasses[r].traverse(e,null);t.commandEncoder&&(t.device.submitCommandEncoder(t.commandEncoder),t.commandEncoder=null,t.notifyStartCaptureImage&&t.device.onSubmittedWorkDone().then((function(){!function(){n.apply(this,arguments)}()})))}else{e.initialize();var a=e.onInitialized((function(){a.unsubscribe(),e.traverseAllPasses()}))}},e.setViewStream=function(r){if(t.viewStream===r)return!1;(t.subscription&&(t.subscription.unsubscribe(),t.subscription=null),t.viewStream=r,t.viewStream)&&(t.renderable.getRenderers()[0].getBackgroundByReference()[3]=0,e.setUseBackgroundImage(!0),t.subscription=t.viewStream.onImageReady((function(t){return e.setBackgroundImage(t.image)})),t.viewStream.setSize(t.size[0],t.size[1]),t.viewStream.invalidateCache(),t.viewStream.render(),e.modified());return!0},e.getUniquePropID=function(){return t.nextPropID++},e.getPropFromID=function(e){for(var r=0;r<t.children.length;r++){var n=t.children[r].getPropFromID(e);if(null!==n)return n}return null},e.getPixelsAsync=mv(hv().mark((function e(){var r,n,a,o,i,l,u,s,c,f,d;return hv().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.device,n=t.renderPasses[0].getOpaquePass().getColorTexture(),(a={width:n.getWidth(),height:n.getHeight()}).colorBufferWidth=32*Math.floor((a.width+31)/32),a.colorBufferSizeInBytes=a.colorBufferWidth*a.height*8,(o=pp.newInstance()).setDevice(r),o.create(a.colorBufferSizeInBytes,GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST),(i=t.device.createCommandEncoder()).copyTextureToBuffer({texture:n.getHandle()},{buffer:o.getHandle(),bytesPerRow:8*a.colorBufferWidth,rowsPerImage:a.height},{width:a.width,height:a.height,depthOrArrayLayers:1}),r.submitCommandEncoder(i),l=o.mapAsync(GPUMapMode.READ),e.next=14,l;case 14:for(a.colorValues=new Uint16Array(o.getMappedRange().slice()),o.unmap(),u=new Uint8ClampedArray(a.height*a.width*4),s=0;s<a.height;s++)for(c=0;c<a.width;c++)f=4*(s*a.width+c),d=4*(s*a.colorBufferWidth+c),u[f]=255*uf.fromHalf(a.colorValues[d]),u[f+1]=255*uf.fromHalf(a.colorValues[d+1]),u[f+2]=255*uf.fromHalf(a.colorValues[d+2]),u[f+3]=255*uf.fromHalf(a.colorValues[d+3]);return a.colorValues=u,e.abrupt("return",a);case 20:case"end":return e.stop()}}),e)}))),e.createSelector=function(){var t=Dy.newInstance();return t.setWebGPURenderWindow(e),t},e.delete=er.chain(e.delete,e.setViewStream)}var By={initialized:!1,context:null,adapter:null,device:null,canvas:null,cursorVisibility:!0,cursor:"pointer",containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1,nextPropID:1,xrSupported:!1,presentationFormat:null};function Vy(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,By,r),t.canvas=document.createElement("canvas"),t.canvas.style.width="100%",t.bgImage=new Image,t.bgImage.style.position="absolute",t.bgImage.style.left="0",t.bgImage.style.top="0",t.bgImage.style.width="100%",t.bgImage.style.height="100%",t.bgImage.style.zIndex="-1",hh.extend(e,t,r),t.myFactory=Rd.newInstance(),t.myFactory.registerOverride("vtkRenderWindow",Ny),t.renderPasses[0]=sy.newInstance(),t.selector||(t.selector=Dy.newInstance(),t.selector.setWebGPURenderWindow(e)),er.event(e,t,"imageReady"),er.event(e,t,"initialized"),er.get(e,t,["commandEncoder","device","presentationFormat","useBackgroundImage","xrSupported"]),er.setGet(e,t,["initialized","context","canvas","device","renderPasses","notifyStartCaptureImage","cursor","useOffScreen"]),er.setGetArray(e,t,["size"],2),Ly(e,t)}var Ny=er.newInstance(Vy,"vtkWebGPURenderWindow");Sm("WebGPU",Ny);var Fy=pv.extractURLParameters(),Uy={margin:"0",padding:"0",position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden"},Gy={position:"absolute",left:"25px",top:"25px",backgroundColor:"white",borderRadius:"5px",listStyle:"none",padding:"5px 10px",margin:"0",display:"block",border:"solid 1px black",maxWidth:"calc(100% - 70px)",maxHeight:"calc(100% - 60px)",overflow:"auto"};function jy(e,t){Object.keys(t).forEach((function(r){e.style[r]=t[r]}))}var zy={background:[.32,.34,.43],containerStyle:null,controlPanelStyle:null,listenWindowResize:!0,resizeCallback:null,controllerVisibility:!0};function Wy(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,zy,r),er.obj(e,t),er.get(e,t,["renderWindow","renderer","apiSpecificRenderWindow","interactor","rootContainer","container","controlContainer"]),function(e,t){t.classHierarchy.push("vtkFullScreenRenderWindow");var r=document.querySelector("body");t.rootContainer||(t.rootContainer=r),t.container||(t.container=document.createElement("div"),jy(t.container,t.containerStyle||Uy),t.rootContainer.appendChild(t.container)),t.rootContainer===r&&(document.documentElement.style.height="100%",r.style.height="100%",r.style.padding="0",r.style.margin="0"),t.renderWindow=Om.newInstance(),t.renderer=Tm.newInstance(),t.renderWindow.addRenderer(t.renderer),t.apiSpecificRenderWindow=t.renderWindow.newAPISpecificView(Fy.viewAPI),t.apiSpecificRenderWindow.setContainer(t.container),t.renderWindow.addView(t.apiSpecificRenderWindow),t.interactor=Hm.newInstance(),t.interactor.setInteractorStyle(cv.newInstance()),t.interactor.setView(t.apiSpecificRenderWindow),t.interactor.initialize(),t.interactor.bindEvents(t.container),e.setBackground=t.renderer.setBackground,e.removeController=function(){var e=t.controlContainer;e&&e.parentNode.removeChild(e)},e.setControllerVisibility=function(e){t.controllerVisibility=e,t.controlContainer&&(t.controlContainer.style.display=e?"block":"none")},e.toggleControllerVisibility=function(){e.setControllerVisibility(!t.controllerVisibility)},e.addController=function(r){t.controlContainer=document.createElement("div"),jy(t.controlContainer,t.controlPanelStyle||Gy),t.rootContainer.appendChild(t.controlContainer),t.controlContainer.innerHTML=r,e.setControllerVisibility(t.controllerVisibility),t.rootContainer.addEventListener("keypress",(function(t){"c"===String.fromCharCode(t.charCode)&&e.toggleControllerVisibility()}))},e.setBackground.apply(e,$e(t.background)),e.addRepresentation=function(e){e.getActors().forEach((function(e){t.renderer.addActor(e)}))},e.removeRepresentation=function(e){e.getActors().forEach((function(e){return t.renderer.removeActor(e)}))},e.delete=er.chain(e.setContainer,t.apiSpecificRenderWindow.delete,e.delete),e.resize=function(){var e=t.container.getBoundingClientRect(),r=window.devicePixelRatio||1;t.apiSpecificRenderWindow.setSize(Math.floor(e.width*r),Math.floor(e.height*r)),t.resizeCallback&&t.resizeCallback(e),t.renderWindow.render()},e.setResizeCallback=function(r){t.resizeCallback=r,e.resize()},t.listenWindowResize&&window.addEventListener("resize",e.resize),e.resize()}(e,t)}var Hy={newInstance:er.newInstance(Wy),extend:Wy},Ky=function(e){return e},Xy=1e-6,qy=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];lt(this,e),this.matrix=S(new Float64Array(16)),this.tmp=new Float64Array(3),this.angleConv=t?v:Ky}return st(e,[{key:"rotateFromDirections",value:function(e,t){var r=new Float64Array(3),n=new Float64Array(3),a=new Float64Array(16);Mr(r,e[0],e[1],e[2]),Mr(n,t[0],t[1],t[2]),qr(r,r),qr(n,n);var o=Yr(r,n);return o>=1||(Qr(this.tmp,r,n),Er(this.tmp)<Xy&&(Qr(this.tmp,[1,0,0],e),Er(this.tmp)<Xy&&Qr(this.tmp,[0,1,0],e)),B(a,Math.acos(o),this.tmp),A(this.matrix,this.matrix,a)),this}},{key:"rotate",value:function(e,t){return Mr.apply(n,[this.tmp].concat($e(t))),qr(this.tmp,this.tmp),R(this.matrix,this.matrix,this.angleConv(e),this.tmp),this}},{key:"rotateX",value:function(e){return M(this.matrix,this.matrix,this.angleConv(e)),this}},{key:"rotateY",value:function(e){return D(this.matrix,this.matrix,this.angleConv(e)),this}},{key:"rotateZ",value:function(e){return k(this.matrix,this.matrix,this.angleConv(e)),this}},{key:"translate",value:function(e,t,r){return Mr(this.tmp,e,t,r),E(this.matrix,this.matrix,this.tmp),this}},{key:"scale",value:function(e,t,r){return Mr(this.tmp,e,t,r),I(this.matrix,this.matrix,this.tmp),this}},{key:"multiply",value:function(e){return A(this.matrix,this.matrix,e),this}},{key:"multiply3x3",value:function(e){return A(this.matrix,this.matrix,[e[0],e[1],e[2],0,e[3],e[4],e[5],0,e[6],e[7],e[8],0,0,0,0,1]),this}},{key:"invert",value:function(){return C(this.matrix,this.matrix),this}},{key:"identity",value:function(){return S(this.matrix),this}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(Ao(ro,this.matrix))return this;for(var n=-1===r?e.length:t+3*r,a=t;a<n;a+=3)Mr(this.tmp,e[a],e[a+1],e[a+2]),tn(this.tmp,this.tmp,this.matrix),e[a]=this.tmp[0],e[a+1]=this.tmp[1],e[a+2]=this.tmp[2];return this}},{key:"getMatrix",value:function(){return this.matrix}},{key:"setMatrix",value:function(e){return e&&16===e.length&&b(this.matrix,e),this}}]),e}();var Yy={buildFromDegree:function(){return new qy(!0)},buildFromRadian:function(){return new qy(!1)}};var Qy={height:1,radius:.5,resolution:6,center:[0,0,0],direction:[1,0,0],capping:!0,pointType:"Float64Array"};function $y(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,Qy,r),er.obj(e,t),er.setGet(e,t,["height","radius","resolution","capping"]),er.setGetArray(e,t,["center","direction"],3),er.algo(e,t,0,1),function(e,t){t.classHierarchy.push("vtkConeSource"),e.requestData=function(e,r){var n;if(!t.deleted){var a=r[0],o=2*Math.PI/t.resolution,i=-t.height/2,l=t.resolution+1,u=4*t.resolution+1+t.resolution,s=0,c=er.newTypedArray(t.pointType,3*l),f=0,d=new Uint32Array(u);c[0]=t.height/2,c[1]=0,c[2]=0,t.capping&&(d[f++]=t.resolution);for(var p=0;p<t.resolution;p++)c[3*++s+0]=i,c[3*s+1]=t.radius*Math.cos(p*o),c[3*s+2]=t.radius*Math.sin(p*o),t.capping&&(d[t.resolution-f+++1]=s);for(var g=0;g<t.resolution;g++)d[f++]=3,d[f++]=0,d[f++]=g+1,d[f++]=g+2>t.resolution?1:g+2;(n=Yy.buildFromRadian()).translate.apply(n,$e(t.center)).rotateFromDirections([1,0,0],t.direction).apply(c),(a=rc.newInstance()).getPoints().setData(c,3),a.getPolys().setData(d,1),r[0]=a}}}(e,t)}var Zy={newInstance:er.newInstance($y,"vtkConeSource"),extend:$y},Jy=r(881),eb=function(){var e=(0,a.useRef)(null),t=(0,a.useRef)(null),r=f((0,a.useState)(6),2),n=r[0],o=r[1],i=f((0,a.useState)(2),2),l=i[0],u=i[1];return(0,a.useEffect)((function(){if(!t.current){var r=Hy.newInstance({rootContainer:e.current}),n=Zy.newInstance({height:1}),a=as.newInstance();a.setInputConnection(n.getOutputPort());var o=hl.newInstance();o.setMapper(a);var i=r.getRenderer(),l=r.getRenderWindow();i.addActor(o),i.resetCamera(),l.render(),t.current={fullScreenRenderer:r,renderWindow:l,renderer:i,coneSource:n,actor:o,mapper:a}}return function(){if(t.current){var e=t.current,r=e.fullScreenRenderer,n=e.coneSource,a=e.actor,o=e.mapper;a.delete(),o.delete(),n.delete(),r.delete(),t.current=null}}}),[e]),(0,a.useEffect)((function(){if(t.current){var e=t.current,r=e.coneSource,a=e.renderWindow;r.setResolution(n),a.render()}}),[n]),(0,a.useEffect)((function(){if(t.current){var e=t.current,r=e.actor,n=e.renderWindow;r.getProperty().setRepresentation(l),n.render()}}),[l]),(0,Jy.jsxs)("div",{children:[(0,Jy.jsx)("div",{ref:e}),(0,Jy.jsx)("table",{style:{position:"absolute",top:"25px",left:"25px",background:"white",padding:"12px"},children:(0,Jy.jsxs)("tbody",{children:[(0,Jy.jsx)("tr",{children:(0,Jy.jsx)("td",{children:(0,Jy.jsxs)("select",{value:l,style:{width:"100%"},onInput:function(e){return u(Number(e.target.value))},children:[(0,Jy.jsx)("option",{value:"0",children:"Points"}),(0,Jy.jsx)("option",{value:"1",children:"Wireframe"}),(0,Jy.jsx)("option",{value:"2",children:"Surface"})]})})}),(0,Jy.jsx)("tr",{children:(0,Jy.jsx)("td",{children:(0,Jy.jsx)("input",{type:"range",min:"4",max:"80",value:n,onChange:function(e){return o(Number(e.target.value))}})})})]})})]})},tb={};function rb(e){return!!tb[e]}function nb(e,t){tb[e]=t}var ab={get:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return tb[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http"](e)},has:rb,registerType:nb};function ob(){var e=new ArrayBuffer(4),t=new Uint8Array(e),r=new Uint32Array(e);return t[0]=161,t[1]=178,t[2]=195,t[3]=212,3569595041===r[0]?"LittleEndian":2712847316===r[0]?"BigEndian":null}var ib={ENDIANNESS:ob(),getEndianness:ob,swapBytes:function(e,t){if(!(t<2))for(var r=new Int8Array(e),n=r.length,a=[],o=0;o<n;o+=t){for(var i=0;i<t;i++)a.push(r[o+i]);for(var l=0;l<t;l++)r[o+l]=a.pop()}}},lb=er.vtkErrorMacro,ub=er.vtkDebugMacro,sb=function(){return lb("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead."),Promise.reject(new Error("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead."))},cb=0;function fb(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=new XMLHttpRequest;return n.open(e,t,!0),r.headers&&Object.entries(r.headers).forEach((function(e){var t=qe(e,2),r=t[0],a=t[1];return n.setRequestHeader(r,a)})),r.progressCallback&&n.addEventListener("progress",r.progressCallback),n}var db={fetchArray:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n&&n.compression?sb():r.ref&&!r.ref.pending?new Promise((function(a,o){var i=fb("GET",[t,r.ref.basepath,r.ref.id].join("/"),n);i.onreadystatechange=function(t){1===i.readyState&&(r.ref.pending=!0,1===++cb&&null!==e&&void 0!==e&&e.invokeBusy&&e.invokeBusy(!0)),4===i.readyState&&(r.ref.pending=!1,200===i.status||0===i.status?(r.buffer=i.response,"JSON"===r.ref.encode?r.values=JSON.parse(r.buffer):(ib.ENDIANNESS!==r.ref.encode&&ib.ENDIANNESS&&(ub("Swap bytes of ".concat(r.name)),ib.swapBytes(r.buffer,yl[r.dataType])),r.values=er.newTypedArray(r.dataType,r.buffer)),r.values.length!==r.size&&lb("Error in FetchArray: ".concat(r.name,", does not have the proper array size. Got ").concat(r.values.length,", instead of ").concat(r.size)),delete r.ref,0===--cb&&null!==e&&void 0!==e&&e.invokeBusy&&e.invokeBusy(!1),null!==e&&void 0!==e&&e.modified&&e.modified(),a(r)):o({xhr:i,e:t}))},i.responseType="string"!==r.dataType?"arraybuffer":"text",i.send()})):Promise.resolve(r)},fetchJSON:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r&&r.compression?sb():new Promise((function(n,a){var o=fb("GET",t,r);o.onreadystatechange=function(t){1===o.readyState&&1===++cb&&null!==e&&void 0!==e&&e.invokeBusy&&e.invokeBusy(!0),4===o.readyState&&(0===--cb&&null!==e&&void 0!==e&&e.invokeBusy&&e.invokeBusy(!1),200===o.status||0===o.status?n(JSON.parse(o.responseText)):a({xhr:o,e:t}))},o.responseType="text",o.send()}))},fetchText:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r&&r.compression?sb():new Promise((function(n,a){var o=fb("GET",t,r);o.onreadystatechange=function(t){1===o.readyState&&1===++cb&&null!==e&&void 0!==e&&e.invokeBusy&&e.invokeBusy(!0),4===o.readyState&&(0===--cb&&null!==e&&void 0!==e&&e.invokeBusy&&e.invokeBusy(!1),200===o.status||0===o.status?n(o.responseText):a({xhr:o,e:t}))},o.responseType="text",o.send()}))},fetchBinary:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,n){var a=fb("GET",e,t);a.onreadystatechange=function(e){4===a.readyState&&(200===a.status||0===a.status?r(a.response):n({xhr:a,e:e}))},a.responseType="arraybuffer",a.send()}))},fetchImage:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(e,n){var a=new Image;r.crossOrigin&&(a.crossOrigin=r.crossOrigin),a.onload=function(){return e(a)},a.onerror=n,a.src=t}))}};function pb(e,t){t.classHierarchy.push("vtkElevationReader"),t.dataAccessHelper||(t.dataAccessHelper=ab.get("http")),e.setUrl=function(r,n){return t.url=r,e.loadData(n)},e.loadData=function(r){return function(r,n){return t.dataAccessHelper.fetchText(e,r,n)}(t.url,r).then((function(t){return e.parseAsText(t),!0}))},e.parseAsText=function(r){t.csv=r,t.elevation=[],t.csv.split("\n").forEach((function(e,r){t.elevation.push(e.split(",").map((function(e){return Number(e)})))})),e.modified()},e.requestData=function(e,r){var n=rc.newInstance();if(n.getPoints().setData(new Float32Array(0,0,0,1,1,1),3),t.elevation){var a=t.elevation.length,o=t.elevation[0].length,i=n.getPoints();i.setNumberOfPoints(o*a,3);var l=i.getData(),u=fs.newInstance({size:5*(o-1)*(a-1)});n.setPolys(u);var s=u.getData(),c=0,f=new Float32Array(o*a*2),d=Dl.newInstance({numberOfComponents:2,values:f,name:"TextureCoordinates"});n.getPointData().setTCoords(d);for(var p=0;p<a;p++)for(var g=0;g<o;g++){var m=p*o+g,v=3*m;l[v+0]=t.origin[0]+g*t.xSpacing*t.xDirection,l[v+1]=t.origin[1]+p*t.ySpacing*t.yDirection,l[v+2]=t.origin[2]+t.elevation[p][g]*t.zScaling,f[2*m]=g/(o-1),f[2*m+1]=1-p/(a-1),g>0&&p>0&&(s[c++]=4,s[c++]=m,s[c++]=m-1,s[c++]=m-1-o,s[c++]=m-o)}}t.output[0]=n},e.isBusy=function(){return!!t.requestCount}}rb("http")||nb("http",(function(e){return db}));var gb={origin:[0,0,0],xSpacing:1,ySpacing:1,zScaling:1,xDirection:1,yDirection:-1,requestCount:0};function mb(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,gb,r),er.obj(e,t),er.get(e,t,["url"]),er.setGet(e,t,["dataAccessHelper","xSpacing","ySpacing","zScaling","xDirection","yDirection"]),er.algo(e,t,0,1),er.event(e,t,"busy"),pb(e,t)}var vb={newInstance:er.newInstance(mb,"vtkElevationReader"),extend:mb},hb=r.p+"static/media/dem.61bbb440495483d09879.jpg",yb=function(){var e=(0,a.useRef)(null),t=(0,a.useRef)(null);return(0,a.useEffect)((function(){if(!t.current){var r=Hy.newInstance({rootContainer:e.current,background:[0,0,0]}),n=vb.newInstance({xSpacing:.01568,ySpacing:.01568,zScaling:.06666}),a=new Image;a.onload=function(){var e=lc.newInstance();e.setInterpolate(!0),e.setImage(a),i.addTexture(e),u.render()},a.src=hb,n.setUrl("https://kitware.github.io/vtk-js/data/elevation/dem.csv").then((function(){l.resetCamera(),u.render()}));var o=as.newInstance();o.setInputConnection(n.getOutputPort());var i=hl.newInstance();i.setMapper(o);var l=r.getRenderer(),u=r.getRenderWindow();l.addActor(i),l.resetCamera(),u.render(),t.current={fullScreenRenderer:r,actor:i,mapper:o,img:a,elevationReader:n}}return function(){t.current&&(t.current=null)}}),[]),(0,Jy.jsxs)(Jy.Fragment,{children:[(0,Jy.jsx)("header",{className:"App-header",style:{position:"relative",textAlign:"center",zIndex:1e3,color:"red"},children:(0,Jy.jsx)("h2",{children:"3D model with elevation data"})}),(0,Jy.jsx)("div",{ref:e,style:{width:"500px",height:"500px"}})]})},bb=r.p+"static/media/dem2.07d5e94ea652769b74ff.jpg",Tb=r.p+"static/media/dem.ab7748e5b4d16270b717.csv",xb=r.p+"static/media/dem2.82640fa335a38622edad.csv",Sb=function(){var e=(0,a.useRef)(null),t=(0,a.useRef)(null),r=window.location.origin,n=f((0,a.useState)(!0),2),o=n[0],i=n[1],l=f((0,a.useState)(!0),2),u=l[0],s=l[1],c=f((0,a.useState)(-1),2),d=c[0],p=c[1];return(0,a.useEffect)((function(){if(!t.current){var n=Hy.newInstance({rootContainer:e.current}),a=vb.newInstance({xSpacing:.01568,ySpacing:.01568,zScaling:.1}),o=new Image;o.onload=function(){var e=lc.newInstance();e.setInterpolate(!0),e.setImage(o),l.addTexture(e),g.render()},o.src=hb,a.setUrl("".concat(r+Tb)).then((function(){p.resetCamera(),g.render()}));var i=as.newInstance();i.setInputConnection(a.getOutputPort());var l=hl.newInstance();l.setMapper(i);var u=vb.newInstance({xSpacing:.01568,ySpacing:.01568,zScaling:.1}),s=new Image;s.onload=function(){var e=lc.newInstance();e.setInterpolate(!0),e.setImage(s),f.addTexture(e),f.setPosition(0,0,d),g.render()},s.src=bb,u.setUrl("".concat(r+xb)).then((function(){p.resetCamera(),g.render()}));var c=as.newInstance();c.setInputConnection(u.getOutputPort());var f=hl.newInstance();f.setMapper(c);var p=n.getRenderer(),g=n.getRenderWindow();p.addActor(l),p.addActor(f),p.resetCamera(),g.render(),t.current={fullScreenRenderer:n,actor1:l,actor2:f,mapper1:i,mapper2:c,img1:o,img2:s,elevationReader1:a,elevationReader2:u},console.log(t.current)}return function(){t.current&&(t.current=null)}}),[]),(0,a.useEffect)((function(){t.current&&(t.current.actor1.setVisibility(o),t.current.actor2.setVisibility(u),t.current.fullScreenRenderer.getRenderWindow().render())}),[o,u]),(0,a.useEffect)((function(){t.current.actor2.setPosition(0,0,d),t.current.fullScreenRenderer.getRenderWindow().render()}),[d]),(0,Jy.jsxs)(Jy.Fragment,{children:[(0,Jy.jsx)("h2",{style:{position:"relative",textAlign:"center",zIndex:2,color:"red"},children:"3D model with elevation data"}),(0,Jy.jsx)("table",{style:{position:"absolute",top:"25px",left:"25px",background:"white",padding:"12px",zIndex:2},children:(0,Jy.jsxs)("tbody",{children:[(0,Jy.jsx)("tr",{children:(0,Jy.jsx)("td",{children:(0,Jy.jsxs)("label",{children:["Layer 1:",(0,Jy.jsx)("input",{type:"checkbox",checked:o,onChange:function(){return i(!o)}})]})})}),(0,Jy.jsx)("tr",{children:(0,Jy.jsx)("td",{children:(0,Jy.jsxs)("label",{children:["Layer 2:",(0,Jy.jsx)("input",{type:"checkbox",checked:u,onChange:function(){return s(!u)}})]})})}),(0,Jy.jsx)("tr",{children:(0,Jy.jsx)("td",{children:(0,Jy.jsxs)("label",{children:["Space Between Layers:",(0,Jy.jsx)("input",{type:"range",min:"-5",max:"0",step:"0.5",value:d,onChange:function(e){return p(parseFloat(e.target.value))}})]})})})]})}),(0,Jy.jsx)("div",{ref:e,style:{width:"500px",height:"500px"}})]})};var wb,Cb=function(){var e=(0,a.useRef)(null),t=(0,a.useRef)(null),r=f((0,a.useState)(!0),2),n=r[0],o=r[1],i=f((0,a.useState)(!0),2),l=i[0],u=i[1],s=f((0,a.useState)(-1),2),c=s[0],d=s[1];return fetch(xb).then((function(e){return e.text()})).then((function(e){var t=function(e){return e.split("\n").map((function(e){return e.split(",").map((function(e){return parseFloat(e)}))}))}(e);console.log(t)})),(0,a.useEffect)((function(){if(!t.current){var r=Hy.newInstance({rootContainer:e.current}),n=vb.newInstance({xSpacing:.01568,ySpacing:.01568,zScaling:.1}),a=new Image;a.onload=function(){var e=lc.newInstance();e.setInterpolate(!0),e.setImage(a),i.addTexture(e),p.render()},a.src=hb,n.setUrl(Tb).then((function(){d.resetCamera(),p.render()}));var o=as.newInstance();o.setInputConnection(n.getOutputPort());var i=hl.newInstance();i.setMapper(o);var l=vb.newInstance({xSpacing:.01568,ySpacing:.01568,zScaling:.1}),u=function(){var e=document.createElement("canvas");e.width=256,e.height=256;var t=e.getContext("2d"),r=t.createLinearGradient(0,0,0,e.height);r.addColorStop(0,"black"),r.addColorStop(.5,"blue"),r.addColorStop(1,"yellow"),t.fillStyle=r,t.fillRect(0,0,e.width,e.height);var n=new Image;n.src=e.toDataURL();var a=lc.newInstance();return a.setInterpolate(!0),a.setImage(n),a}();l.setUrl(xb).then((function(){d.resetCamera(),p.render()}));var s=as.newInstance();s.setInputConnection(l.getOutputPort());var f=hl.newInstance();f.setMapper(s),f.addTexture(u),f.setPosition(0,0,c);var d=r.getRenderer(),p=r.getRenderWindow();d.addActor(i),d.addActor(f),d.resetCamera(),p.render(),t.current={fullScreenRenderer:r,actor1:i,actor2:f,mapper1:o,mapper2:s,img1:a,elevationReader1:n,elevationReader2:l}}return function(){t.current&&(t.current=null)}}),[]),(0,a.useEffect)((function(){t.current&&(t.current.actor1.setVisibility(n),t.current.actor2.setVisibility(l),t.current.fullScreenRenderer.getRenderWindow().render())}),[n,l]),(0,a.useEffect)((function(){t.current.actor2.setPosition(0,0,c),t.current.fullScreenRenderer.getRenderWindow().render()}),[c]),(0,Jy.jsxs)(Jy.Fragment,{children:[(0,Jy.jsx)("h2",{style:{position:"relative",textAlign:"center",zIndex:2,color:"red"},children:"3D model with elevation data"}),(0,Jy.jsx)("table",{style:{position:"absolute",top:"25px",left:"25px",background:"white",padding:"12px",zIndex:2},children:(0,Jy.jsxs)("tbody",{children:[(0,Jy.jsx)("tr",{children:(0,Jy.jsx)("td",{children:(0,Jy.jsxs)("label",{children:["Layer 1:",(0,Jy.jsx)("input",{type:"checkbox",checked:n,onChange:function(){return o(!n)}})]})})}),(0,Jy.jsx)("tr",{children:(0,Jy.jsx)("td",{children:(0,Jy.jsxs)("label",{children:["Layer 2:",(0,Jy.jsx)("input",{type:"checkbox",checked:l,onChange:function(){return u(!l)}})]})})}),(0,Jy.jsx)("tr",{children:(0,Jy.jsx)("td",{children:(0,Jy.jsxs)("label",{children:["Space Between Layers:",(0,Jy.jsx)("input",{type:"range",min:"-5",max:"0",step:"0.5",value:c,onChange:function(e){return d(parseFloat(e.target.value))}})]})})})]})}),(0,Jy.jsx)("div",{ref:e,style:{width:"500px",height:"500px"}})]})};function Pb(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ob(e){return function(e){if(Array.isArray(e))return u(e)}(e)||Pb(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ab(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Eb(e){return Eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Eb(e)}function Ib(e){var t=function(e,t){if("object"!==Eb(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Eb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Eb(t)?t:String(t)}function Rb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ib(n.key),n)}}function Mb(e,t,r){return t&&Rb(e.prototype,t),r&&Rb(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Db(e,t){return Db=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Db(e,t)}function kb(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Db(e,t)}function _b(e){return _b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_b(e)}function Lb(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Bb(e,t){if(t&&("object"===Eb(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Vb(e){var t=Lb();return function(){var r,n=_b(e);if(t){var a=_b(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Bb(this,r)}}function Nb(e,t,r){return Nb=Lb()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&Db(a,r.prototype),a},Nb.apply(null,arguments)}function Fb(e){var t="function"===typeof Map?new Map:void 0;return Fb=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Nb(e,arguments,_b(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Db(n,e)},Fb(e)}function Ub(){return Ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ub.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(wb||(wb={}));var Gb,jb="popstate";function zb(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function Wb(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(r){}}}function Hb(e,t){return{usr:e.state,key:e.key,idx:t}}function Kb(e,t,r,n){return void 0===r&&(r=null),Ub({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?qb(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function Xb(e){var t=e.pathname,r=void 0===t?"/":t,n=e.search,a=void 0===n?"":n,o=e.hash,i=void 0===o?"":o;return a&&"?"!==a&&(r+="?"===a.charAt(0)?a:"?"+a),i&&"#"!==i&&(r+="#"===i.charAt(0)?i:"#"+i),r}function qb(e){var t={};if(e){var r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));var n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Yb(e,t,r,n){void 0===n&&(n={});var a=n,o=a.window,i=void 0===o?document.defaultView:o,l=a.v5Compat,u=void 0!==l&&l,s=i.history,c=wb.Pop,f=null,d=p();function p(){return(s.state||{idx:null}).idx}function g(){c=wb.Pop;var e=p(),t=null==e?null:e-d;d=e,f&&f({action:c,location:v.location,delta:t})}function m(e){var t="null"!==i.location.origin?i.location.origin:i.location.href,r="string"===typeof e?e:Xb(e);return zb(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==d&&(d=0,s.replaceState(Ub({},s.state,{idx:d}),""));var v={get action(){return c},get location(){return e(i,s)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(jb,g),f=e,function(){i.removeEventListener(jb,g),f=null}},createHref:function(e){return t(i,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=wb.Push;var n=Kb(v.location,e,t);r&&r(n,e);var a=Hb(n,d=p()+1),o=v.createHref(n);try{s.pushState(a,"",o)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;i.location.assign(o)}u&&f&&f({action:c,location:v.location,delta:1})},replace:function(e,t){c=wb.Replace;var n=Kb(v.location,e,t);r&&r(n,e);var a=Hb(n,d=p()),o=v.createHref(n);s.replaceState(a,"",o),u&&f&&f({action:c,location:v.location,delta:0})},go:function(e){return s.go(e)}};return v}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Gb||(Gb={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function Qb(e,t,r){void 0===r&&(r="/");var n=cT(("string"===typeof t?qb(t):t).pathname||"/",r);if(null==n)return null;var a=$b(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var r=e.length===t.length&&e.slice(0,-1).every((function(e,r){return e===t[r]}));return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(a);for(var o=null,i=0;null==o&&i<a.length;++i)o=lT(a[i],sT(n));return o}function $b(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");var a=function(e,a,o){var i={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};i.relativePath.startsWith("/")&&(zb(i.relativePath.startsWith(n),'Absolute route path "'+i.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(n.length));var l=gT([n,i.relativePath]),u=r.concat(i);e.children&&e.children.length>0&&(zb(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),$b(e.children,t,u,l)),(null!=e.path||e.index)&&t.push({path:l,score:iT(l,e.index),routesMeta:u})};return e.forEach((function(e,t){var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?")){var n,o=function(e,t){var r="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=s(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}(Zb(e.path));try{for(o.s();!(n=o.n()).done;){var i=n.value;a(e,t,i)}}catch(l){o.e(l)}finally{o.f()}}else a(e,t)})),t}function Zb(e){var t=e.split("/");if(0===t.length)return[];var r,n=l(r=t)||Pb(r)||s(r)||c(),a=n[0],o=n.slice(1),i=a.endsWith("?"),u=a.replace(/\?$/,"");if(0===o.length)return i?[u,""]:[u];var f=Zb(o.join("/")),d=[];return d.push.apply(d,Ob(f.map((function(e){return""===e?u:[u,e].join("/")})))),i&&d.push.apply(d,Ob(f)),d.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var Jb=/^:\w+$/,eT=3,tT=2,rT=1,nT=10,aT=-2,oT=function(e){return"*"===e};function iT(e,t){var r=e.split("/"),n=r.length;return r.some(oT)&&(n+=aT),t&&(n+=tT),r.filter((function(e){return!oT(e)})).reduce((function(e,t){return e+(Jb.test(t)?eT:""===t?rT:nT)}),n)}function lT(e,t){for(var r=e.routesMeta,n={},a="/",o=[],i=0;i<r.length;++i){var l=r[i],u=i===r.length-1,s="/"===a?t:t.slice(a.length)||"/",c=uT({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},s);if(!c)return null;Object.assign(n,c.params);var f=l.route;o.push({params:n,pathname:gT([a,c.pathname]),pathnameBase:mT(gT([a,c.pathnameBase])),route:f}),"/"!==c.pathnameBase&&(a=gT([a,c.pathnameBase]))}return o}function uT(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var r=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);Wb("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return n.push(t),"/([^\\/]+)"}));e.endsWith("*")?(n.push("*"),a+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":""!==e&&"/"!==e&&(a+="(?:(?=\\/|$))");var o=new RegExp(a,t?void 0:"i");return[o,n]}(e.path,e.caseSensitive,e.end),n=f(r,2),a=n[0],o=n[1],i=t.match(a);if(!i)return null;var l=i[0],u=l.replace(/(.)\/+$/,"$1"),s=i.slice(1),c=o.reduce((function(e,t,r){if("*"===t){var n=s[r]||"";u=l.slice(0,l.length-n.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(r){return Wb(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+r+")."),e}}(s[r]||"",t),e}),{});return{params:c,pathname:l,pathnameBase:u,pattern:e}}function sT(e){try{return decodeURI(e)}catch(t){return Wb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function cT(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function fT(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function dT(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function pT(e,t,r,n){var a;void 0===n&&(n=!1),"string"===typeof e?a=qb(e):(zb(!(a=Ub({},e)).pathname||!a.pathname.includes("?"),fT("?","pathname","search",a)),zb(!a.pathname||!a.pathname.includes("#"),fT("#","pathname","hash",a)),zb(!a.search||!a.search.includes("#"),fT("#","search","hash",a)));var o,i=""===e||""===a.pathname,l=i?"/":a.pathname;if(n||null==l)o=r;else{var u=t.length-1;if(l.startsWith("..")){for(var s=l.split("/");".."===s[0];)s.shift(),u-=1;a.pathname=s.join("/")}o=u>=0?t[u]:"/"}var c=function(e,t){void 0===t&&(t="/");var r="string"===typeof e?qb(e):e,n=r.pathname,a=r.search,o=void 0===a?"":a,i=r.hash,l=void 0===i?"":i,u=n?n.startsWith("/")?n:function(e,t){var r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)})),r.length>1?r.join("/"):"/"}(n,t):t;return{pathname:u,search:vT(o),hash:hT(l)}}(a,o),f=l&&"/"!==l&&l.endsWith("/"),d=(i||"."===l)&&r.endsWith("/");return c.pathname.endsWith("/")||!f&&!d||(c.pathname+="/"),c}var gT=function(e){return e.join("/").replace(/\/\/+/g,"/")},mT=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},vT=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},hT=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},yT=function(e){kb(r,e);var t=Vb(r);function r(){return Ab(this,r),t.apply(this,arguments)}return Mb(r)}(Fb(Error));function bT(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var TT=["post","put","patch","delete"],xT=(new Set(TT),["get"].concat(TT));new Set(xT),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function ST(){return ST=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ST.apply(this,arguments)}var wT=a.createContext(null);var CT=a.createContext(null);var PT=a.createContext(null);var OT=a.createContext(null);var AT=a.createContext(null);var ET=a.createContext({outlet:null,matches:[],isDataRoute:!1});var IT=a.createContext(null);function RT(){return null!=a.useContext(AT)}function MT(){return RT()||zb(!1),a.useContext(AT).location}function DT(e){a.useContext(OT).static||a.useLayoutEffect(e)}function kT(){return a.useContext(ET).isDataRoute?function(){var e=zT(GT.UseNavigateStable).router,t=HT(jT.UseNavigateStable),r=a.useRef(!1);return DT((function(){r.current=!0})),a.useCallback((function(n,a){void 0===a&&(a={}),r.current&&("number"===typeof n?e.navigate(n):e.navigate(n,ST({fromRouteId:t},a)))}),[e,t])}():function(){RT()||zb(!1);var e=a.useContext(wT),t=a.useContext(OT),r=t.basename,n=t.navigator,o=a.useContext(ET).matches,i=MT().pathname,l=JSON.stringify(dT(o).map((function(e){return e.pathnameBase}))),u=a.useRef(!1);return DT((function(){u.current=!0})),a.useCallback((function(t,a){if(void 0===a&&(a={}),u.current)if("number"!==typeof t){var o=pT(t,JSON.parse(l),i,"path"===a.relative);null==e&&"/"!==r&&(o.pathname="/"===o.pathname?r:gT([r,o.pathname])),(a.replace?n.replace:n.push)(o,a.state,a)}else n.go(t)}),[r,n,l,i,e])}()}function _T(e,t){var r=(void 0===t?{}:t).relative,n=a.useContext(ET).matches,o=MT().pathname,i=JSON.stringify(dT(n).map((function(e){return e.pathnameBase})));return a.useMemo((function(){return pT(e,JSON.parse(i),o,"path"===r)}),[e,i,o,r])}function LT(e,t,r){RT()||zb(!1);var n,o=a.useContext(OT).navigator,i=a.useContext(ET).matches,l=i[i.length-1],u=l?l.params:{},s=(l&&l.pathname,l?l.pathnameBase:"/"),c=(l&&l.route,MT());if(t){var f,d="string"===typeof t?qb(t):t;"/"===s||(null==(f=d.pathname)?void 0:f.startsWith(s))||zb(!1),n=d}else n=c;var p=n.pathname||"/",g=Qb(e,{pathname:"/"===s?p:p.slice(s.length)||"/"});var m=UT(g&&g.map((function(e){return Object.assign({},e,{params:Object.assign({},u,e.params),pathname:gT([s,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?s:gT([s,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),i,r);return t&&m?a.createElement(AT.Provider,{value:{location:ST({pathname:"/",search:"",hash:"",state:null,key:"default"},n),navigationType:wb.Pop}},m):m}function BT(){var e=function(){var e,t=a.useContext(IT),r=WT(jT.UseRouteError),n=HT(jT.UseRouteError);if(t)return t;return null==(e=r.errors)?void 0:e[n]}(),t=bT(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:n};return a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),r?a.createElement("pre",{style:o},r):null,null)}var VT=a.createElement(BT,null),NT=function(e){kb(r,e);var t=Vb(r);function r(e){var n;return Ab(this,r),(n=t.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},n}return Mb(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?a.createElement(ET.Provider,{value:this.props.routeContext},a.createElement(IT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(a.Component);function FT(e){var t=e.routeContext,r=e.match,n=e.children,o=a.useContext(wT);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),a.createElement(ET.Provider,{value:t},n)}function UT(e,t,r){var n;if(void 0===t&&(t=[]),void 0===r&&(r=null),null==e){var o;if(null==(o=r)||!o.errors)return null;e=r.matches}var i=e,l=null==(n=r)?void 0:n.errors;if(null!=l){var u=i.findIndex((function(e){return e.route.id&&(null==l?void 0:l[e.route.id])}));u>=0||zb(!1),i=i.slice(0,Math.min(i.length,u+1))}return i.reduceRight((function(e,n,o){var u=n.route.id?null==l?void 0:l[n.route.id]:null,s=null;r&&(s=n.route.errorElement||VT);var c=t.concat(i.slice(0,o+1)),f=function(){var t;return t=u?s:n.route.Component?a.createElement(n.route.Component,null):n.route.element?n.route.element:e,a.createElement(FT,{match:n,routeContext:{outlet:e,matches:c,isDataRoute:null!=r},children:t})};return r&&(n.route.ErrorBoundary||n.route.errorElement||0===o)?a.createElement(NT,{location:r.location,revalidation:r.revalidation,component:s,error:u,children:f(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):f()}),null)}var GT=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(GT||{}),jT=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(jT||{});function zT(e){var t=a.useContext(wT);return t||zb(!1),t}function WT(e){var t=a.useContext(CT);return t||zb(!1),t}function HT(e){var t=function(e){var t=a.useContext(ET);return t||zb(!1),t}(),r=t.matches[t.matches.length-1];return r.route.id||zb(!1),r.route.id}o.startTransition;function KT(e){var t=e.to,r=e.replace,n=e.state,o=e.relative;RT()||zb(!1);var i=a.useContext(ET).matches,l=MT().pathname,u=kT(),s=pT(t,dT(i).map((function(e){return e.pathnameBase})),l,"path"===o),c=JSON.stringify(s);return a.useEffect((function(){return u(JSON.parse(c),{replace:r,state:n,relative:o})}),[u,c,o,r,n]),null}function XT(e){zb(!1)}function qT(e){var t=e.basename,r=void 0===t?"/":t,n=e.children,o=void 0===n?null:n,i=e.location,l=e.navigationType,u=void 0===l?wb.Pop:l,s=e.navigator,c=e.static,f=void 0!==c&&c;RT()&&zb(!1);var d=r.replace(/^\/*/,"/"),p=a.useMemo((function(){return{basename:d,navigator:s,static:f}}),[d,s,f]);"string"===typeof i&&(i=qb(i));var g=i,m=g.pathname,v=void 0===m?"/":m,h=g.search,y=void 0===h?"":h,b=g.hash,T=void 0===b?"":b,x=g.state,S=void 0===x?null:x,w=g.key,C=void 0===w?"default":w,P=a.useMemo((function(){var e=cT(v,d);return null==e?null:{location:{pathname:e,search:y,hash:T,state:S,key:C},navigationType:u}}),[d,v,y,T,S,C,u]);return null==P?null:a.createElement(OT.Provider,{value:p},a.createElement(AT.Provider,{children:o,value:P}))}function YT(e){var t=e.children,r=e.location;return LT(ZT(t),r)}var QT=function(e){return e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error",e}(QT||{}),$T=new Promise((function(){}));a.Component;function ZT(e,t){void 0===t&&(t=[]);var r=[];return a.Children.forEach(e,(function(e,n){if(a.isValidElement(e)){var o=[].concat(Ob(t),[n]);if(e.type!==a.Fragment){e.type!==XT&&zb(!1),e.props.index&&e.props.children&&zb(!1);var i={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=ZT(e.props.children,o)),r.push(i)}else r.push.apply(r,ZT(e.props.children,o))}})),r}function JT(){return JT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},JT.apply(this,arguments)}function ex(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var tx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"],rx=["aria-current","caseSensitive","className","end","style","to","children"];var nx=o.startTransition;function ax(e){var t,r=e.basename,n=e.children,o=e.future,i=e.window,l=a.useRef();null==l.current&&(l.current=(void 0===(t={window:i,v5Compat:!0})&&(t={}),Yb((function(e,t){var r=e.location;return Kb("",{pathname:r.pathname,search:r.search,hash:r.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:Xb(t)}),null,t)));var u=l.current,s=f(a.useState({action:u.action,location:u.location}),2),c=s[0],d=s[1],p=(o||{}).v7_startTransition,g=a.useCallback((function(e){p&&nx?nx((function(){return d(e)})):d(e)}),[d,p]);return a.useLayoutEffect((function(){return u.listen(g)}),[u,g]),a.createElement(qT,{basename:r,children:n,location:c.location,navigationType:c.action,navigator:u})}var ox="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,ix=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lx=a.forwardRef((function(e,t){var r,n=e.onClick,o=e.relative,i=e.reloadDocument,l=e.replace,u=e.state,s=e.target,c=e.to,f=e.preventScrollReset,d=ex(e,tx),p=a.useContext(OT).basename,g=!1;if("string"===typeof c&&ix.test(c)&&(r=c,ox))try{var m=new URL(window.location.href),v=c.startsWith("//")?new URL(m.protocol+c):new URL(c),h=cT(v.pathname,p);v.origin===m.origin&&null!=h?c=h+v.search+v.hash:g=!0}catch(T){}var y=function(e,t){var r=(void 0===t?{}:t).relative;RT()||zb(!1);var n=a.useContext(OT),o=n.basename,i=n.navigator,l=_T(e,{relative:r}),u=l.hash,s=l.pathname,c=l.search,f=s;return"/"!==o&&(f="/"===s?o:gT([o,s])),i.createHref({pathname:f,search:c,hash:u})}(c,{relative:o}),b=function(e,t){var r=void 0===t?{}:t,n=r.target,o=r.replace,i=r.state,l=r.preventScrollReset,u=r.relative,s=kT(),c=MT(),f=_T(e,{relative:u});return a.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();var r=void 0!==o?o:Xb(c)===Xb(f);s(e,{replace:r,state:i,preventScrollReset:l,relative:u})}}),[c,s,f,o,i,n,e,l,u])}(c,{replace:l,state:u,target:s,preventScrollReset:f,relative:o});return a.createElement("a",JT({},d,{href:r||y,onClick:g||i?n:function(e){n&&n(e),e.defaultPrevented||b(e)},ref:t,target:s}))}));var ux=a.forwardRef((function(e,t){var r=e["aria-current"],n=void 0===r?"page":r,o=e.caseSensitive,i=void 0!==o&&o,l=e.className,u=void 0===l?"":l,s=e.end,c=void 0!==s&&s,f=e.style,d=e.to,p=e.children,g=ex(e,rx),m=_T(d,{relative:g.relative}),v=MT(),h=a.useContext(CT),y=a.useContext(OT).navigator,b=y.encodeLocation?y.encodeLocation(m).pathname:m.pathname,T=v.pathname,x=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;i||(T=T.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase());var S,w=T===b||!c&&T.startsWith(b)&&"/"===T.charAt(b.length),C=null!=x&&(x===b||!c&&x.startsWith(b)&&"/"===x.charAt(b.length)),P=w?n:void 0;S="function"===typeof u?u({isActive:w,isPending:C}):[u,w?"active":null,C?"pending":null].filter(Boolean).join(" ");var O="function"===typeof f?f({isActive:w,isPending:C}):f;return a.createElement(lx,JT({},g,{"aria-current":P,className:S,ref:t,style:O,to:d}),"function"===typeof p?p({isActive:w,isPending:C}):p)}));var sx,cx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(sx||(sx={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(cx||(cx={}));var fx=function(){return(0,Jy.jsx)("nav",{children:(0,Jy.jsxs)("ul",{className:"navList",style:{textAlign:"left"},children:[(0,Jy.jsx)("li",{children:(0,Jy.jsx)(ux,{to:"/tools-1",children:"Default"})}),(0,Jy.jsx)("li",{children:(0,Jy.jsx)(ux,{to:"/tools-2",children:"3D model"})}),(0,Jy.jsx)("li",{children:(0,Jy.jsx)(ux,{to:"/tools-3",children:"3D model with second layer Image"})}),(0,Jy.jsx)("li",{children:(0,Jy.jsx)(ux,{to:"/tools-4",children:"3D model with second layer Gradient image"})})]})})},dx=function(e){var t=e.children;return(0,Jy.jsxs)(Jy.Fragment,{children:[(0,Jy.jsxs)("header",{className:"App-header",style:{position:"absolute",textAlign:"center",zIndex:1,right:10,top:10},children:[(0,Jy.jsx)("h1",{children:"VTR.js"}),(0,Jy.jsx)(fx,{})]}),(0,Jy.jsx)("main",{children:(0,Jy.jsx)("div",{className:"wrapper",children:t})})]})};var px=function(){var e=function(e){return(0,Jy.jsx)(dx,{children:e})};return(0,Jy.jsxs)(YT,{children:[(0,Jy.jsx)(XT,{path:"/",element:(0,Jy.jsx)(KT,{to:"/tools-4"})}),(0,Jy.jsx)(XT,{path:"/tools-1",element:e((0,Jy.jsx)(eb,{}))}),(0,Jy.jsx)(XT,{path:"/tools-2",element:e((0,Jy.jsx)(yb,{}))}),(0,Jy.jsx)(XT,{path:"/tools-3",element:e((0,Jy.jsx)(Sb,{}))}),(0,Jy.jsx)(XT,{path:"/tools-4",element:e((0,Jy.jsx)(Cb,{}))})]})};i.createRoot(document.getElementById("root")).render((0,Jy.jsx)(ax,{basename:"/react-vtk",children:(0,Jy.jsx)(px,{})}))}()}();
//# sourceMappingURL=main.568bfce6.js.map